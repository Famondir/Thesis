<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Results | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="5 Results | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Results | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Results | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon Schäfer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="implementation.html"/>
<link rel="next" href="discussion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#to-place-in-chapters-above"><i class="fa fa-check"></i><b>1.6</b> To place in chapters above</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#unstrukturierte-daten"><i class="fa fa-check"></i><b>1.7</b> Unstrukturierte Daten</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#portable-document-format"><i class="fa fa-check"></i><b>1.7.1</b> Portable Document Format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#information-retrieval"><i class="fa fa-check"></i><b>2.1</b> Information extraction / retrieval</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#term-frequency"><i class="fa fa-check"></i><b>2.1.1</b> Term frequency</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.2</b> Text processing</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#regular-expressions"><i class="fa fa-check"></i><b>2.1.3</b> Regular expressions</a></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.4</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.4.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.4.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.4.2" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.4.2</b> Encoder</a></li>
<li class="chapter" data-level="2.1.4.3" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.4.3</b> Decoder</a></li>
<li class="chapter" data-level="2.1.4.4" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.4.4</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.4.5" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.4.5</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.4.6" data-path="literature-review.html"><a href="literature-review.html#mixed-modal"><i class="fa fa-check"></i><b>2.1.4.6</b> Mixed modal</a></li>
</ul></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.5</b> Methods for LLM application</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#few-shot-learning"><i class="fa fa-check"></i><b>2.1.5.1</b> Few-shot Learning</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.5.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.5.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> Other concepts</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-0.5-p"><i class="fa fa-check"></i><b>2.3</b> Summary (0.5 p)</a></li>
<li class="chapter" data-level="2.4" data-path="literature-review.html"><a href="literature-review.html#to-place-in-chapters-above-1"><i class="fa fa-check"></i><b>2.4</b> To place in chapters above</a></li>
<li class="chapter" data-level="2.5" data-path="literature-review.html"><a href="literature-review.html#table-extraction-tasks"><i class="fa fa-check"></i><b>2.5</b> Table extraction tasks</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="literature-review.html"><a href="literature-review.html#difficulties"><i class="fa fa-check"></i><b>2.5.1</b> Difficulties</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="literature-review.html"><a href="literature-review.html#document-extraction-process"><i class="fa fa-check"></i><b>2.6</b> Document Extraction Process</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis"><i class="fa fa-check"></i><b>2.6.1</b> Document Layout Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="literature-review.html"><a href="literature-review.html#tools"><i class="fa fa-check"></i><b>2.7</b> Tools</a>
<ul>
<li class="chapter" data-level="2.7.0.1" data-path="literature-review.html"><a href="literature-review.html#vision-grid-transformer"><i class="fa fa-check"></i><b>2.7.0.1</b> Vision Grid Transformer</a></li>
<li class="chapter" data-level="2.7.0.2" data-path="literature-review.html"><a href="literature-review.html#tableformer"><i class="fa fa-check"></i><b>2.7.0.2</b> TableFormer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#evaluation-framework"><i class="fa fa-check"></i><b>3.2.2</b> Evaluation framework</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#metrics"><i class="fa fa-check"></i><b>3.3.1</b> Metrics</a></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#gpu-benchmark"><i class="fa fa-check"></i><b>3.5.2</b> Hardware normalization</a></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#error-analysis"><i class="fa fa-check"></i><b>3.5.3</b> Error analysis</a></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#baseline-selection-rationale"><i class="fa fa-check"></i><b>3.5.4</b> Baseline selection rationale</a></li>
<li class="chapter" data-level="3.5.5" data-path="methodology.html"><a href="methodology.html#prompt-building"><i class="fa fa-check"></i><b>3.5.5</b> Prompt building</a></li>
<li class="chapter" data-level="3.5.6" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.6</b> Evaluation methods</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#ethical-practical-considerations-eher-am-ende-oder-weg"><i class="fa fa-check"></i><b>3.6</b> Ethical &amp; Practical Considerations (eher am Ende oder weg?)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="methodology.html"><a href="methodology.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>3.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="3.6.2" data-path="methodology.html"><a href="methodology.html#computational-constraints"><i class="fa fa-check"></i><b>3.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="3.6.3" data-path="methodology.html"><a href="methodology.html#generalizability-scope"><i class="fa fa-check"></i><b>3.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="3.6.4" data-path="methodology.html"><a href="methodology.html#ethical-considerations"><i class="fa fa-check"></i><b>3.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.2</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.3</b> Software Packages</a></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.4</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#text-extraction"><i class="fa fa-check"></i><b>4.5</b> Text extraction</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.6</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#interpretations"><i class="fa fa-check"></i><b>6.1</b> Interpretations</a>
<ul>
<li class="chapter" data-level="6.1.0.1" data-path="discussion.html"><a href="discussion.html#table-extraction"><i class="fa fa-check"></i><b>6.1.0.1</b> Table extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#table-extraction-1"><i class="fa fa-check"></i><b>6.2.1</b> table extraction</a>
<ul>
<li class="chapter" data-level="6.2.1.1" data-path="discussion.html"><a href="discussion.html#regex-baseline"><i class="fa fa-check"></i><b>6.2.1.1</b> Regex baseline</a></li>
</ul></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#classification"><i class="fa fa-check"></i><b>6.2.2</b> classification</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.3</b> Not covered</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="discussion.html"><a href="discussion.html#table-detection-extraction"><i class="fa fa-check"></i><b>6.3.1</b> Table detection / extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#outlook"><i class="fa fa-check"></i><b>6.4</b> Outlook</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="discussion.html"><a href="discussion.html#vision-model"><i class="fa fa-check"></i><b>6.4.1</b> Vision Model</a></li>
<li class="chapter" data-level="6.4.2" data-path="discussion.html"><a href="discussion.html#docling-and-co"><i class="fa fa-check"></i><b>6.4.2</b> Docling and Co</a></li>
<li class="chapter" data-level="6.4.3" data-path="discussion.html"><a href="discussion.html#table-extraction-2"><i class="fa fa-check"></i><b>6.4.3</b> Table extraction</a></li>
<li class="chapter" data-level="6.4.4" data-path="discussion.html"><a href="discussion.html#sophisticated-approaches-for-text-extraction"><i class="fa fa-check"></i><b>6.4.4</b> Sophisticated approaches for text extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#error-analysis-1"><i class="fa fa-check"></i><b>6.5</b> Error analysis</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>8</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="8.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>8.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-1"><i class="fa fa-check"></i><b>8.2.2</b> Results</a></li>
<li class="chapter" data-level="8.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>8.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>8.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification"><i class="fa fa-check"></i><b>8.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification"><i class="fa fa-check"></i><b>8.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>8.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="8.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-2"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html"><i class="fa fa-check"></i><b>9</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="9.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>9.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="9.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>9.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>9.2.1</b> Real tables</a></li>
<li class="chapter" data-level="9.2.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>9.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>9.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#summary-3"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html"><i class="fa fa-check"></i><b>10</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="10.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#page-identification-4"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#binary-classification-1"><i class="fa fa-check"></i><b>10.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="10.1.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>10.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>10.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#real-tables-1"><i class="fa fa-check"></i><b>10.2.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#synthetic-tables-1"><i class="fa fa-check"></i><b>10.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="10.2.3" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#hybrid-aproach"><i class="fa fa-check"></i><b>10.2.3</b> Hybrid aproach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html"><i class="fa fa-check"></i><b>11</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#regular-expressions-3"><i class="fa fa-check"></i><b>11.1</b> Regular expressions</a></li>
<li class="chapter" data-level="11.2" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#real-tables-2"><i class="fa fa-check"></i><b>11.2</b> Real tables</a></li>
<li class="chapter" data-level="11.3" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#hybrid-approach-1"><i class="fa fa-check"></i><b>11.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>12</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="12.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>12.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>12.2</b> Local machine</a></li>
<li class="chapter" data-level="12.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>12.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>12.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="12.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>12.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="12.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo-benchmark-and-table-transformer"><i class="fa fa-check"></i><b>12.3.2.1</b> yolo benchmark and table transformer</a></li>
<li class="chapter" data-level="12.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>12.3.2.2</b> old classification with llm</a></li>
</ul></li>
<li class="chapter" data-level="12.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>12.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>12.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>12.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="12.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>12.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>12.5</b> Regular expressions</a></li>
<li class="chapter" data-level="12.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>12.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="12.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#extraction-framework-flow-chart"><i class="fa fa-check"></i><b>12.7</b> Extraction framework flow chart</a></li>
<li class="chapter" data-level="12.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>12.8</b> Table extraction with regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#classification-1"><i class="fa fa-check"></i><b>13.1</b> Classification</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#table-extraction-3"><i class="fa fa-check"></i><b>13.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-2"><i class="fa fa-check"></i><b>13.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>14</b> Figures</a>
<ul>
<li class="chapter" data-level="14.1" data-path="figures.html"><a href="figures.html#page-identification-5"><i class="fa fa-check"></i><b>14.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="figures.html"><a href="figures.html#regex-baseline-1"><i class="fa fa-check"></i><b>14.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="14.1.2" data-path="figures.html"><a href="figures.html#toc-understanding-1"><i class="fa fa-check"></i><b>14.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="14.1.3" data-path="figures.html"><a href="figures.html#classification-2"><i class="fa fa-check"></i><b>14.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1.3.1" data-path="figures.html"><a href="figures.html#binary"><i class="fa fa-check"></i><b>14.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="14.1.3.2" data-path="figures.html"><a href="figures.html#multi-class-classification-2"><i class="fa fa-check"></i><b>14.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="figures.html"><a href="figures.html#table-extraction-4"><i class="fa fa-check"></i><b>14.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="figures.html"><a href="figures.html#regex-approach"><i class="fa fa-check"></i><b>14.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="14.2.1.1" data-path="figures.html"><a href="figures.html#real-tables-3"><i class="fa fa-check"></i><b>14.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="14.2.1.2" data-path="figures.html"><a href="figures.html#synthetic-tables-2"><i class="fa fa-check"></i><b>14.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="14.2.2" data-path="figures.html"><a href="figures.html#real-tables-4"><i class="fa fa-check"></i><b>14.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="14.2.2.1" data-path="figures.html"><a href="figures.html#examples-from-same-company"><i class="fa fa-check"></i><b>14.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="14.2.2.2" data-path="figures.html"><a href="figures.html#openai-models-1"><i class="fa fa-check"></i><b>14.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="14.2.2.3" data-path="figures.html"><a href="figures.html#hypotheses-5"><i class="fa fa-check"></i><b>14.2.2.3</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="14.2.3" data-path="figures.html"><a href="figures.html#synthetic-tables-3"><i class="fa fa-check"></i><b>14.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="14.2.3.1" data-path="figures.html"><a href="figures.html#confidence-4"><i class="fa fa-check"></i><b>14.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="14.2.4" data-path="figures.html"><a href="figures.html#hybrid-approach-3"><i class="fa fa-check"></i><b>14.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>15</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="results" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Results<a href="results.html#results" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!-- \addthumb{Chapter~\thechapter.1}{\textbf{\Huge{\thechapter}\Large{.1}}}{white}{gray} -->
<p>This chapter presents the results for the two main and our side research
questions of this thesis:</p>
<ol class="rs-questions" style="--counter: 1;">
<li>
How can we use LLMs effectively to locate specific information in a financial report?
</li>
<li>
How can we use LLMs effectively to extract these information from the document?
</li>
<li>
Can we use additional information from the extraction process, to guide the user which values need to be checked and which can be trusted as they are?
</li>
</ol>
<p>Section <a href="results.html#page-identification-introduction">5.1</a> presents the results for
the first research question. Section
<a href="results.html#table-extraction-introduction">5.2</a> presents the results for the second
question. Section <a href="results.html#error-rate-guidance-results">5.3</a> shows the results
for the side research question. Finally, we will summarize all results
in section <a href="results.html#summary-results">5.4</a>.</p>
<p>Each section will start with an overview about the specific sub tasks as
well about the models, methods and data used to investigate the research
question. We refer to the sections in the appendix that document our
investigation and the results of the sub tasks in detail.</p>
<div id="page-identification-introduction" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Page identification<a href="results.html#page-identification-introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>(ref:page-identification-intro-text) The first research question asks, how <a href="glossary.html#acronyms_LLM">LLM</a>s can be used, to effectively locate specific information in a financial report. The task
for this thesis is identifying the pages where the balance sheet
(<em>Bilanz</em>) and the profit-and-loss-and-statement (<em>Gewinn- und
Verlustrechnung, GuV</em>) are located. The balance sheet is composed of two
tables showing the assets (<em>Aktiva</em>) and liabilities (<em>Passiva</em>) of a
company. Often these two tables are on separate pages. Hereafter, the
German terms <strong>Aktiva</strong>, <strong>Passiva</strong> and <strong>GuV</strong> will be used.</p>
<p>(ref:page-identification-intro-text)</p>
<p><span class="citation">H. Li, Gao, et al. (<a href="#ref-liExtractingFinancialData2023">2023</a>)</span> describes two ways to identify the
relevant pages (see Figure <a href="appendix-e---miscellaneous.html#fig:extraction-framework-flow-chart">12.4</a>).
For longer documents they propose to use the <a href="glossary.html#acronyms_TOC">TOC</a> to determine a
page range that includes the information of interest. In addition, they
develop target specific regular expressions and rules to filter out
irrelevant pages<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>. The result of this “Page Range
Refinement” is then passed to the <a href="glossary.html#acronyms_LLM">LLM</a> to extract information from.</p>
<p>This section is presenting the results of four approaches to identify
the page<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> of interest:</p>
<ul>
<li>Subsection <a href="page-identification-report.html#regex-page-identification">8.1</a> presents the findings
of a page range refinement using a list of key words with a regular
expression.</li>
<li>Subsection <a href="page-identification-report.html#toc-understanding">8.2</a> presents the findings of a
<a href="glossary.html#acronyms_TOC">TOC</a> understanding approach</li>
<li>Subsection <a href="page-identification-report.html#llm-page-identification">8.3</a> presents the findings
of a text classification approach using <a href="glossary.html#acronyms_LLM">LLM</a>s.</li>
<li>Subsection <a href="page-identification-report.html#tf-classifier">8.4</a> presents the findings of a
term-frequency approach.</li>
</ul>
<p>In subsection <a href="results.html#comparison-page-identification">5.1.2</a> the results get
compared and summarized. Subsection @ref() proposes an efficient
combination of approaches to solve the task of this thesis and discusses
its limitations.</p>
<div id="section-1" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<p>Woanders hin oder weg:</p>
<ul>
<li>Thus, we prompt the <a href="glossary.html#acronyms_LLM">LLM</a> to classify if the text extract of a given
page</li>
<li>for implementation: As described in <a href="appendix-e---miscellaneous.html#text-extraction-benchmark">12.3.1</a>
open source libraries have been used to extract the text from the annual
reports.</li>
</ul>
<div id="dataset-describtion" class="section level5 hasAnchor paragraph-start" number="5.1.0.0.1">
<h5><span class="header-section-number">5.1.0.0.1</span> Dataset describtion<a href="results.html#dataset-describtion" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the page identification task companies (mainly) from the first row of Figure <a href="introduction.html#fig:beteiligungsunternehmen">1.1</a> have been selected, to build the ground truth from. The idea is that the documents of a companies within a category are more similar to each other, than to documents of companies of other categories. For the chosen companies all available annual reports are selected. Since one of the companies mainly published documents that require <a href="glossary.html#acronyms_OCR">OCR</a> preprocessing, we include the documents of a second company for this category.</p>
</div>
</div>
<div id="approaches" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Approaches<a href="results.html#approaches" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The page identification task is broken down to a classification task for all of the approaches presented in this section but the <a href="glossary.html#acronyms_TOC">TOC</a> understanding approach. This subsection briefly describes our approaches. A detailed report can be found in chapter <a href="page-identification-report.html#page-identification-report">8</a>.</p>
<div id="regular-expressions-1" class="section level5 hasAnchor paragraph-start" number="5.1.1.0.1">
<h5><span class="header-section-number">5.1.1.0.1</span> Regular expressions<a href="results.html#regular-expressions-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We develop multiple sets of regular expressions and filter out all pages that do not fulfill all regular expressions of a given set. There are different sets for each target type, <strong>Aktiva</strong>, <strong>Passiva</strong> and <strong>GuV</strong>. The sets also differ in how versatile they can cope with additional white space introduced by a imperfect text extraction and how many different words for a given term are accepted. Figure <a href="results.html#fig:regex-filter">5.1</a> shows an example for two sets of regular expressions to identify a <strong>Aktiva</strong> page.</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:regex-filter"></span>
<img src="images/regex_filtering.png" alt="Comparing the prediction of two different sets of regular expressions on dummy pages. The simple one has a lower recall, while the  expended one has a lower precision." width="100%" />
<p class="caption">
Figure 5.1: Comparing the prediction of two different sets of regular expressions on dummy pages. The simple one has a lower recall, while the expended one has a lower precision.
</p>
</div>
<div id="table-of-contents-understanding" class="section level5 hasAnchor paragraph-start" number="5.1.1.0.2">
<h5><span class="header-section-number">5.1.1.0.2</span> Table of Contents Understanding<a href="results.html#table-of-contents-understanding" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use a <a href="glossary.html#acronyms_LLM">LLM</a> to extract the <a href="glossary.html#acronyms_TOC">TOC</a> from the first pages from a document or use the embedded <a href="glossary.html#acronyms_TOC">TOC</a> and prompt a <a href="glossary.html#acronyms_LLM">LLM</a> to identify the pages where the <strong>Aktiva</strong>, <strong>Passiva</strong> and <strong>GuV</strong> are located. Figure <a href="results.html#fig:toc-screenshot">5.2</a> shows a screenshot of a annual report with an embedded TOC and its TOC in text form.</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:toc-screenshot"></span>
<img src="images/toc.png" alt="Showing a screenshot of a annual report with an embedded TOC (left) and its TOC in text form (right). The embeded TOC is not listing all entries from the TOC in text form." width="100%" />
<p class="caption">
Figure 5.2: Showing a screenshot of a annual report with an embedded TOC (left) and its TOC in text form (right). The embeded TOC is not listing all entries from the TOC in text form.
</p>
</div>
<div id="large-language-model-classification" class="section level5 hasAnchor paragraph-start" number="5.1.1.0.3">
<h5><span class="header-section-number">5.1.1.0.3</span> Large Language Model Classification<a href="results.html#large-language-model-classification" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use <a href="glossary.html#acronyms_LLM">LLM</a>s to classify if the text extract of a given page is containing a <strong>Aktiva</strong>, <strong>Passiva</strong> or <strong>GuV</strong> table or something else. We test binary classification and a multi-classification approach. The reported confidence scores can be used to form a ranking, which text extract might be most similar to the target type.</p>
</div>
<p>We test a wide range of open-weight models and compare different prompting techniques. Figure <a href="results.html#fig:prompt-setup-classification">5.3</a> shows, how the prompts are composed for the different strategies. Besides a zero shot approach we test few-shot in-context learning with examples that are either chosen randomly or retrieved based on their vector similarity. Finally, we test passing the legal text instead of examples from a annual report.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:prompt-setup-classification"></span>
<img src="images/promt_building_classification.png" alt="Showing the basic structure of the prompts and which strategies are used to pass additional information to the LLM." width="100%" />
<p class="caption">
Figure 5.3: Showing the basic structure of the prompts and which strategies are used to pass additional information to the LLM.
</p>
</div>
<div id="term-frequency-ranking" class="section level5 hasAnchor paragraph-start" number="5.1.1.0.4">
<h5><span class="header-section-number">5.1.1.0.4</span> Term frequency Ranking<a href="results.html#term-frequency-ranking" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use normalized term frequencies and normalized float frequency to as features for a classification using a random forest. The predicted scores are used to build a ranking, which page most probably contains the target pages. Undersampling is used during training, to handle the unbalanced data. Figure <a href="results.html#fig:tf-flowchart">5.4</a> visualizes, how the prediction works in this approach.</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:tf-flowchart"></span>
<img src="images/tf_flowchart.png" alt="Visualizing, how term and float frequency get calculated and used to predict, if a page is of the target class." width="100%" />
<p class="caption">
Figure 5.4: Visualizing, how term and float frequency get calculated and used to predict, if a page is of the target class.
</p>
</div>
</div>
<div id="comparison-page-identification" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Comparison<a href="results.html#comparison-page-identification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="results.html#cb5-1" tabindex="-1"></a>df_page_identification_comparing_performance <span class="ot">&lt;-</span> readODS<span class="sc">::</span><span class="fu">read_ods</span>(<span class="st">&quot;data_storage/page_identification_summary.ods&quot;</span>, <span class="at">sheet =</span> <span class="dv">1</span>)</span>
<span id="cb5-2"><a href="results.html#cb5-2" tabindex="-1"></a>df_page_identification_comparing_efficiency <span class="ot">&lt;-</span> readODS<span class="sc">::</span><span class="fu">read_ods</span>(<span class="st">&quot;data_storage/page_identification_summary.ods&quot;</span>, <span class="at">sheet =</span> <span class="dv">2</span>)</span>
<span id="cb5-3"><a href="results.html#cb5-3" tabindex="-1"></a></span>
<span id="cb5-4"><a href="results.html#cb5-4" tabindex="-1"></a>df_df_page_identification_comparing_performance_formatted <span class="ot">&lt;-</span> df_page_identification_comparing_performance <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="results.html#cb5-5" tabindex="-1"></a>  <span class="fu">group_by</span>(type) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="results.html#cb5-6" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-7"><a href="results.html#cb5-7" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb5-8"><a href="results.html#cb5-8" tabindex="-1"></a>      <span class="fu">c</span>(precision, recall, F1, <span class="st">`</span><span class="at">top 1 recall</span><span class="st">`</span>),</span>
<span id="cb5-9"><a href="results.html#cb5-9" tabindex="-1"></a>      <span class="sc">~</span><span class="fu">ifelse</span>(      </span>
<span id="cb5-10"><a href="results.html#cb5-10" tabindex="-1"></a>        . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-11"><a href="results.html#cb5-11" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb5-12"><a href="results.html#cb5-12" tabindex="-1"></a>        <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb5-13"><a href="results.html#cb5-13" tabindex="-1"></a>        )</span>
<span id="cb5-14"><a href="results.html#cb5-14" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> </span>
<span id="cb5-15"><a href="results.html#cb5-15" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(      </span>
<span id="cb5-16"><a href="results.html#cb5-16" tabindex="-1"></a>        <span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span> <span class="sc">==</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb5-17"><a href="results.html#cb5-17" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(<span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span>, <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb5-18"><a href="results.html#cb5-18" tabindex="-1"></a>        <span class="fu">round</span>(<span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span>, <span class="dv">3</span>)</span>
<span id="cb5-19"><a href="results.html#cb5-19" tabindex="-1"></a>        ))</span></code></pre></div>
</details>
<p>This subsection presents the performance and efficiency for all
four presented approaches and compare it with the the results a human
achieves manually</p>
<div id="prediction-performance" class="section level5 hasAnchor paragraph-start" number="5.1.2.0.1">
<h5><span class="header-section-number">5.1.2.0.1</span> Prediction performance<a href="results.html#prediction-performance" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="results.html#tab:page-identification-performance-overview-all">5.1</a> shows the
best performance achieved by the four presented approaches regarding precision, recall and F1 score.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="results.html#cb6-1" tabindex="-1"></a>df_df_page_identification_comparing_performance_formatted <span class="sc">%&gt;%</span> </span>
<span id="cb6-2"><a href="results.html#cb6-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">`</span><span class="at">top 1 recall</span><span class="st">`</span>, <span class="st">`</span><span class="at">k for full recall</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-3"><a href="results.html#cb6-3" tabindex="-1"></a>  <span class="fu">arrange</span>(type) <span class="sc">%&gt;%</span> </span>
<span id="cb6-4"><a href="results.html#cb6-4" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb6-5"><a href="results.html#cb6-5" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lllrrr&quot;</span>,</span>
<span id="cb6-6"><a href="results.html#cb6-6" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing page identification perfromance among all four approaches.&quot;</span>,</span>
<span id="cb6-7"><a href="results.html#cb6-7" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>),</span>
<span id="cb6-8"><a href="results.html#cb6-8" tabindex="-1"></a>    <span class="at">row_group_col =</span> <span class="dv">3</span></span>
<span id="cb6-9"><a href="results.html#cb6-9" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-identification-performance-overview-all">Table 5.1: </span>Comparing page identification perfromance among all four approaches.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-4cc742f1c2e7acd916db" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4cc742f1c2e7acd916db">{"x":{"filter":"none","vertical":false,"extensions":["RowGroup"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22"],["Regex","TOC","TOC","LLM binary","LLM multi-class","LLM multi-class","TF","human","Regex","TOC","TOC","LLM binary","LLM multi-class","LLM multi-class","TF","Regex","TOC","TOC","LLM binary","LLM multi-class","LLM multi-class","TF"],["exhaustive","machine readable","combi","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall","manual","exhaustive restricted","machine readable","combi","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall","exhaustive","machine readable","combi","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall"],["Aktiva","Aktiva","Aktiva","Aktiva","Aktiva","Aktiva","Aktiva","Aktiva","GuV","GuV","GuV","GuV","GuV","GuV","GuV","Passiva","Passiva","Passiva","Passiva","Passiva","Passiva","Passiva"],["0.132","0.6","0.338","0.906","0.987","<b>1<\/b>","0.193",null,"0.21","0.446","0.378","<b>0.981<\/b>","0.903","0.944","0.131","0.13","0.5","0.281","0.937","<b>1<\/b>","0.985","0.21"],["0.997","0.256","0.268","0.939","0.937","<b>1<\/b>","<b>1<\/b>",null,"<b>1<\/b>","0.245","0.363","0.99","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","0.993","0.21","0.222","0.914","0.761","<b>1<\/b>","<b>1<\/b>"],["0.233","0.359","0.299","0.922","0.961","<b>1<\/b>","0.324","0.981","0.35","0.316","0.37","<b>0.985<\/b>","0.949","0.971","0.232","0.23","0.296","0.248","0.925","0.864","<b>0.993<\/b>","0.347"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>approach<\/th>\n      <th>strategy<\/th>\n      <th>type<\/th>\n      <th>precision<\/th>\n      <th>recall<\/th>\n      <th>F1<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tiprfl","rowGroup":{"dataSrc":2},"ordering":false,"columnDefs":[{"visible":false,"targets":2},{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"approach","targets":1},{"name":"strategy","targets":2},{"name":"type","targets":3},{"name":"precision","targets":4},{"name":"recall","targets":5},{"name":"F1","targets":6}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>The best
F1 score is reached by Llama 4 Scout for the target types <strong>Akiva</strong> and
<strong>Passiva</strong> in the multi-class classification approach. For <strong>GuV</strong> the
best F1 score (0.985) is found with Ministral-8B-Instruct in the binary
classification approach. Llama 4 Scout reaches a F1 score of 0.971 for
target type <strong>GuV</strong> and multi-class classification.</p>
</div>
<p>In the dataset preparation for the table extraction task (see section
<a href="results.html#table-extraction-introduction">5.2</a> 107 <strong>Aktiva</strong> pages have been
selected. In this manual process we made two mistakes, accidently
selecting one <strong>Passiva</strong> and one <strong>GuV</strong> page. Thus the human baseline
to compete with is 0.981. Thus, Llama 4 Scout is more precise than us.</p>
<p>Furthermore, Llama 4 Scout reached a recall of 1.0 for all target types.
This means, the results can be used downstream, even though the
precision is not always perfect. The pages classified as target can be
double checked by a human, without missing any page.</p>
<p>The other approaches’ performance is way worse.</p>
<p>Only the term-frequency approach’s results could be used downstream, because we find a recall of 1.0. Table <a href="results.html#tab:page-identification-performance-overview-top-k-recall">5.2</a> shows the results of the top k recall for the term-frequency and <a href="glossary.html#acronyms_LLM">LLM</a>
approaches. The <a href="glossary.html#acronyms_LLM">LLM</a>s always rate the correct <strong>GuV</strong> page highest.
With Llama Scout 4 we find all target pages within the first two ranked
pages. For the term-frequency approach a human sometimes has to check up
to five pages.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="results.html#cb7-1" tabindex="-1"></a>df_df_page_identification_comparing_performance_formatted <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="results.html#cb7-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(precision, recall, F1)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-3"><a href="results.html#cb7-3" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">top 1 recall</span><span class="st">`</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb7-4"><a href="results.html#cb7-4" tabindex="-1"></a>  <span class="fu">arrange</span>(type) <span class="sc">%&gt;%</span> </span>
<span id="cb7-5"><a href="results.html#cb7-5" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb7-6"><a href="results.html#cb7-6" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lllrr&quot;</span>,</span>
<span id="cb7-7"><a href="results.html#cb7-7" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the top k recall for the term-frequency and LLM approaches.&quot;</span>,</span>
<span id="cb7-8"><a href="results.html#cb7-8" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>),</span>
<span id="cb7-9"><a href="results.html#cb7-9" tabindex="-1"></a>    <span class="at">row_group_col =</span> <span class="dv">3</span></span>
<span id="cb7-10"><a href="results.html#cb7-10" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-identification-performance-overview-top-k-recall">Table 5.2: </span>Comparing the top k recall for the term-frequency and LLM approaches.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-2aad77e517a265f5b444" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2aad77e517a265f5b444">{"x":{"filter":"none","vertical":false,"extensions":["RowGroup"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12"],["LLM binary","LLM multi-class","LLM multi-class","TF","LLM binary","LLM multi-class","LLM multi-class","TF","LLM binary","LLM multi-class","LLM multi-class","TF"],["Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall"],["Aktiva","Aktiva","Aktiva","Aktiva","GuV","GuV","GuV","GuV","Passiva","Passiva","Passiva","Passiva"],["0.959","0.932","<b>1<\/b>","0.826","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","0.7","0.932","0.824","<b>0.973<\/b>","0.808"],["2","3","<b>1<\/b>","5","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","5","<b>2<\/b>","3","<b>2<\/b>","5"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>approach<\/th>\n      <th>strategy<\/th>\n      <th>type<\/th>\n      <th>top 1 recall<\/th>\n      <th>k for full recall<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tiprfl","rowGroup":{"dataSrc":2},"ordering":false,"columnDefs":[{"visible":false,"targets":2},{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"approach","targets":1},{"name":"strategy","targets":2},{"name":"type","targets":3},{"name":"top 1 recall","targets":4},{"name":"k for full recall","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="energy-usage-and-runtime" class="section level5 hasAnchor paragraph-start" number="5.1.2.0.2">
<h5><span class="header-section-number">5.1.2.0.2</span> Energy usage and runtime<a href="results.html#energy-usage-and-runtime" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="results.html#tab:page-identification-efficiency-overview-all">5.3</a> shows the
runtime in seconds per document, estimated energy consumption in Joule
per document and costs in <strong>CENTS per 1000 documents</strong>. The runtime for
the <a href="glossary.html#acronyms_LLM">LLM</a>s was normalized to seconds on a nvidia B200 and thus the
TDP of 700 W is used to calculate the energy consumption. For the other
approaches, running on my laptop (see section <a href="appendix-e---miscellaneous.html#local-machine">12.2</a>) a
TDP of 28 Watts is used. For manual work by a human additional 60 W are
added for the screen used. It is assumed that the <a href="glossary.html#acronyms_LLM">LLM</a> is hosted
locally.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="results.html#cb8-1" tabindex="-1"></a>df_page_identification_comparing_efficiency <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>drop <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="results.html#cb8-2" tabindex="-1"></a>  <span class="fu">select</span>(approach, strategy, <span class="st">`</span><span class="at">runtime per document in s</span><span class="st">`</span>, <span class="st">`</span><span class="at">energy in J</span><span class="st">`</span>, <span class="st">`</span><span class="at">costs in CENTS per 1000 documents</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="results.html#cb8-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-4"><a href="results.html#cb8-4" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb8-5"><a href="results.html#cb8-5" tabindex="-1"></a>      <span class="fu">where</span>(is.numeric),</span>
<span id="cb8-6"><a href="results.html#cb8-6" tabindex="-1"></a>      <span class="sc">~</span><span class="fu">ifelse</span>(      </span>
<span id="cb8-7"><a href="results.html#cb8-7" tabindex="-1"></a>        . <span class="sc">==</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb8-8"><a href="results.html#cb8-8" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb8-9"><a href="results.html#cb8-9" tabindex="-1"></a>        <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb8-10"><a href="results.html#cb8-10" tabindex="-1"></a>        )</span>
<span id="cb8-11"><a href="results.html#cb8-11" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> </span>
<span id="cb8-12"><a href="results.html#cb8-12" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb8-13"><a href="results.html#cb8-13" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrrr&quot;</span>,</span>
<span id="cb8-14"><a href="results.html#cb8-14" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing page identification efficiency among all four approaches.&quot;</span>,</span>
<span id="cb8-15"><a href="results.html#cb8-15" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-identification-efficiency-overview-all">Table 5.3: </span>Comparing page identification efficiency among all four approaches.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-159566af3eb2484d2581" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-159566af3eb2484d2581">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Regex","TOC","TOC","LLM binary","LLM multi-class","LLM multi-class","TF","human"],["exhaustive","machine readable","text based","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Ministral-8B-Instruct-2410, 3_<wbr>rag_<wbr>examples","Llama-4-Scout-17B-16E-Instruct, 3_<wbr>rag_<wbr>examples","high recall","manual"],["<b>0.005<\/b>","0.202","1.939","35.851","18.905","60.149","0.138","61"],["<b>0.151<\/b>","141.58","1357.534","25095.946","13233.784","42104.054","3.859","5368"],["<b>0.001<\/b>","1.062","10.182","188.22","99.253","315.78","0.029","40.26"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>approach<\/th>\n      <th>strategy<\/th>\n      <th>runtime per document in s<\/th>\n      <th>energy in J<\/th>\n      <th>costs in CENTS per 1000 documents<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tiprfl","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"approach","targets":1},{"name":"strategy","targets":2},{"name":"runtime per document in s","targets":3},{"name":"energy in J","targets":4},{"name":"costs in CENTS per 1000 documents","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Table <a href="results.html#tab:page-identification-efficiency-overview-all">5.3</a> shows, that
the regular expression approach is fastest and consumes least energy.
Nevertheless, since the results are not sufficient another approach has
to be chosen if the amount of manual labor should be reduced for the
human inn the loop.</p>
<p>Second place regarding all these criteria is the term-frequency
approach, which guarantees a perfect recall, while reducing the number
of pages to investigate to five per target type. This is similar to the
number of pages a human has to investigate to find the <a href="glossary.html#acronyms_TOC">TOC</a> of the
document. And it is a reduction to 7.4 % of the average 67 pages the
documents in this dataset have. The costs are still negligible.</p>
<p>The <a href="glossary.html#acronyms_LLM">LLM</a> approaches have the highest runtime and energy
consumption. This is the case, because they process every page with very
computational demanding algorithms. The fastest and least energy
consuming strategy is to use a small model as Ministral-8B-Instruct for
the multi-class approach. This is more effective than running three
binary classifications.</p>
<p>An alternative approach could be to binary
predict if the page is of any target type and then perform a
classification, which type exactly the page is of. But the results of
the multi-class strategy are good enough as well. In both strategies the
k required for perfect recall is three, using the Ministral-8B-Instruct
model<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>.</p>
<p>For the <a href="glossary.html#acronyms_TOC">TOC</a> approach <a href="glossary.html#acronyms_LLM">LLM</a>s are used as well, but they process
far less of the documents pages. This can be achieved for the good
performing <a href="glossary.html#acronyms_LLM">LLM</a> classification strategy too, by combining the term-frequency
approach with the <a href="glossary.html#acronyms_LLM">LLM</a> approach.</p>
<div id="compare-with-manual-page-identification" class="section level6 hasAnchor paragraph-start" number="5.1.2.0.2.1">
<h6><span class="header-section-number">5.1.2.0.2.1</span> Compare with manual page identification<a href="results.html#compare-with-manual-page-identification" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>The manual approach is the slowest. For the benchmark ten random
documents were processed by us. We used the <a href="glossary.html#acronyms_TOC">TOC</a> and the search
function to find key words like <strong>Aktiva</strong> or <strong>Bilanz</strong>. Anyhow, its
almost as fast as the multi-classification using Llama 4 Scout, while
consuming eight times less energy. Comparing it to Ministral-8B-Instruct
it take three times longer but consumes less then half of the energy.</p>
</div>
<p>Not taken into account fo this comparison are factors like</p>
<ul>
<li><p>costs to buy and maintain hardware (i.e. a GPU cluster).</p></li>
<li><p>higher costs per runtime if the <a href="glossary.html#acronyms_LLM">LLM</a> compute is purchased from
cloud providers. CLOUD: price if LLM is in the cloud &lt;– print
tokens used</p>
<ul>
<li><p>four classes (3 random examples): 11 k tokens</p></li>
<li><p>binary (3 random examples): 6.5 k tokens</p></li>
</ul></li>
<li><p>payment and insurance to pay for a human (e.g . student coworker).</p></li>
<li><p>the training time and energy consumption for training either</p>
<ul>
<li><p>a <a href="glossary.html#acronyms_LLM">LLM</a> (probably done by the <a href="glossary.html#acronyms_LLM">LLM</a> provider).</p></li>
<li><p>a human (growing up, getting educated).</p></li>
</ul></li>
<li><p>the energy consumed with the food humans eat.</p></li>
</ul>
<p>Since all approaches but the manual identification need the text
extract, this runtime and energy consumption are also not listed (but
low).</p>
</div>
</div>
<div id="table-extraction-introduction" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Information extraction<a href="results.html#table-extraction-introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- \addthumb{Chapter~\thechapter.2}{\textbf{\Huge{\thechapter}\Large{.2}}}{white}{gray} -->
<p>(ref:information-extraction-intro-text) The second research question asks, how <a href="glossary.html#acronyms_LLM">LLM</a>s can be used, to
effectively extract specific information from a financial report. The
task for this thesis is to extract the numeric values for the assets
(<em>Aktiva</em>) table, which is part of the balance sheet (<em>Bilanz</em>).
Hereafter, the German term <strong>Aktiva</strong> will be used. We are limiting the
scope even further than in subsection
<a href="results.html#page-identification-introduction">5.1</a>, because it takes more time to
manually create the first reference dataset.</p>
<p>(ref:information-extraction-intro-text)</p>
<div id="section-2" class="section level3 unlisted unnumbered">
<h3 class="unlisted unnumbered"></h3>
<div id="structured-output" class="section level5 hasAnchor paragraph-start" number="5.2.0.0.1">
<h5><span class="header-section-number">5.2.0.0.1</span> Structured output<a href="results.html#structured-output" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We are using a strict schema for the extraction process that is derived
from the legal text <span class="citation">(<a href="#ref-hgbHandelsgesetzbuchImBundesgesetzblatt2025">HGB, 2025, Section 266</a>)</span>. Actually, there are three types of verbosity, that are defined in
the law. Smaller companies are permitted to create less detailed balance
sheets. Our schema is created based on the most detailed level. This is
the form most often found in the document base<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.</p>
</div>
<p>Using a strict schema has advantages for processing the
results in downstream tasks - i.e. for adding the results to a
relational database. It is also easier to compare the results with a
ground truth if the names of all rows and their order is fixed. The
schema is defined as <a href="glossary.html#acronyms_ebnf">ebnf (extended Backus–Naur form)</a>-grammar and passed as an argument to
<a href="glossary.html#acronyms_vllm">vLLM</a>.</p>
<div id="gound-truth-dataset" class="section level5 hasAnchor paragraph-start" number="5.2.0.0.2">
<h5><span class="header-section-number">5.2.0.0.2</span> Gound truth dataset<a href="results.html#gound-truth-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the information extraction task two datasets are used. First, a collection of 107 real <strong>Aktiva</strong> tables is created, going through two sampling iterations. In the first iteration a single report is selected for each company. In addition, all available reports from the first listed company are chosen, to test an in-company learning approach. In the second iteration more reports of the other companies are added, to increase the ground truth size and allow to test the in-company approach for all companies.</p>
</div>
<p>Second, a dataset of 16_504 synthetic <strong>Aktiva</strong> tables is created. These tables are generated based on the extraction schema and filled with random numeric values. Different table characteristics are systematically combined, to investigate potential effects of these features on the extraction performance. The tables are created as <a href="glossary.html#acronyms_PDF">PDF</a>, <a href="glossary.html#acronyms_HTML">HTML</a> and Markdown files each. This dataset allows to estimate the extraction performance, if there are no unknown row identifiers present.</p>
</div>
<div id="approaches-1" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Approaches<a href="results.html#approaches-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="regular-expressions-2" class="section level5 hasAnchor paragraph-start" number="5.2.1.0.1">
<h5><span class="header-section-number">5.2.1.0.1</span> Regular expressions<a href="results.html#regular-expressions-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use regular expressions to extract the numeric values for matching row identifiers. The regular expressions handle line breaks between words in the row identifiers, but not within a word. They can handle multiple signs of white space. Besides that, they try to fully match the labels from the legal text with the text extract, ignoring upper case. They extract numbers with “.” as thousands separator.</p>
</div>
<div id="real-tables" class="section level5 hasAnchor paragraph-start" number="5.2.1.0.2">
<h5><span class="header-section-number">5.2.1.0.2</span> Real tables<a href="results.html#real-tables" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use <a href="glossary.html#acronyms_LLM">LLM</a>s to extract the numeric values of real <strong>Aktiva</strong> tables with restricted generation. The <a href="glossary.html#acronyms_LLM">LLM</a> has to group row identifiers and corresponding numeric values and match the row identifier with the labels of the schema. If a row identifier is unknown, the values have to be discarded. If a label is not present among the row identifiers, the model predicts <em>null</em>. All values are extracted in one pass. We do not include any instruction, how to proceed with currency units, that might be given for certain columns.</p>
</div>
<p>We test a wide range of open-weight models and compare different prompting techniques. Figure <a href="results.html#fig:prompt-setup-extraction">5.5</a> shows, how the prompts are composed for the different strategies. Besides a zero shot approach we test few-shot in-context learning with examples that are either chosen randomly or retrieved based on their vector similarity. Finally, we test passing a synthetic <strong>Aktiva</strong> table as example. We test models from OpenAIs GPT family in addition to the open-weight models.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:prompt-setup-extraction"></span>
<img src="images/promt_building_classification.png" alt="Showing the basic structure of the prompts and which strategies are used to pass additional information to the LLM for the information extraction task." width="100%" />
<p class="caption">
Figure 5.5: Showing the basic structure of the prompts and which strategies are used to pass additional information to the LLM for the information extraction task.
</p>
</div>
<div id="synthetic-tables" class="section level5 hasAnchor paragraph-start" number="5.2.1.0.3">
<h5><span class="header-section-number">5.2.1.0.3</span> Synthetic tables<a href="results.html#synthetic-tables" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use <a href="glossary.html#acronyms_LLM">LLM</a>s to extract the numeric values of synthetic <strong>Aktiva</strong> tables with restricted generation. The procedure is identical as with the real <strong>Aktiva</strong> tables. We extract all values with and without an explicit instruction on how to proceed with currency units. We limit our test on the open-weight models.</p>
</div>
<div id="hybrid-approach" class="section level5 hasAnchor paragraph-start" number="5.2.1.0.4">
<h5><span class="header-section-number">5.2.1.0.4</span> Hybrid approach<a href="results.html#hybrid-approach" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>We use <a href="glossary.html#acronyms_LLM">LLM</a>s to extract the numeric values of real <strong>Aktiva</strong> tables with restricted generation, providing examples from synthetic <strong>Aktiva</strong> tables. The procedure is identical as with the real <strong>Aktiva</strong> tables. We extract all values with and without an explicit instruction on how to proceed with currency units. We limit our test on the open-weight models.</p>
</div>
</div>
<div id="comparing-table-extraction-methods" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Comparison<a href="results.html#comparing-table-extraction-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This subsection compares the results for the table extraction tasks. It
will discuss the findings about performance and runtime and compare it
with the results a human may achieve wit manual labor.</p>
<div id="performance" class="section level5 hasAnchor paragraph-start" number="5.2.2.0.1">
<h5><span class="header-section-number">5.2.2.0.1</span> Performance<a href="results.html#performance" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="results.html#tab:compare-extraction-performance">5.4</a> summarizes the mean
percentage of correct predictions total for all approaches and both
types of <strong>Aktiva</strong> tables. The highest baseline for the extraction
tasks is set by our own manual performance. We achieve 97.6 % correct
extracted values on the real <strong>Aktiva</strong> tables. The <a href="glossary.html#acronyms_regex">regex</a>
performance on the synthetic <strong>Aktiva</strong> tables comes close but on real
<strong>Aktiva</strong> tables it is far off.</p>
</div>
<p>The mean performance of Qwen3-235B does not match our baseline on the
real <strong>Akiva</strong> tables. But its median performance already is 100 %. The
extraction performance may get higher, if the in-context learning
examples show how to deal with columns that have a currency unit. But
the strong performance observed right now is already based on implicit
numeric transformations, since 19.2 % of all numeric values have <em>T€</em> as
unit. Furthermore, both measures, percentage of correct numeric
predictions (98.0 %) and F1 score (98.1 %) are not perfect yet and could
be improved.</p>
<p>On synthetic tables its mean performance is almost perfect, if currency
units get respected. The 0.1 % incorrect prediction from the PDF
documents could be caused by faulty text extracts by <em>pdfium</em>. With HTML
documents we find 100 % correct predictions. With Markdown documents we
find 99.9 % correct predictions as well. Figure
<a href="figures.html#fig:comparing-table-extraction-performance-among-real-and-synth-aktiva-data">14.9</a>
shows, that the better performance on the synthetic tables is found for
almost all models.</p>
<p>Qwen3-8B performed best among the small models <a href="glossary.html#acronyms_LLM">LLM</a>s but shows over
4 % more wrong predictions than Qwen3-235B. Using synthetic examples,
results in worse performance. But it can be used to show how to handle
currency units.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="results.html#cb9-1" tabindex="-1"></a><span class="fu">tribble</span>(</span>
<span id="cb9-2"><a href="results.html#cb9-2" tabindex="-1"></a>  <span class="sc">~</span>approach, <span class="sc">~</span>strategy, <span class="sc">~</span>table_type, <span class="sc">~</span>percentage_correct_total,</span>
<span id="cb9-3"><a href="results.html#cb9-3" tabindex="-1"></a>  <span class="st">&quot;human&quot;</span>, <span class="st">&quot;manual&quot;</span>, <span class="st">&quot;real&quot;</span>, <span class="fl">97.6</span>,</span>
<span id="cb9-4"><a href="results.html#cb9-4" tabindex="-1"></a>  <span class="st">&quot;regex&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;real&quot;</span>, <span class="fl">68.6</span>,</span>
<span id="cb9-5"><a href="results.html#cb9-5" tabindex="-1"></a>  <span class="st">&quot;llm&quot;</span>, <span class="st">&quot;Qwen3-235B, top_5_rag_examples&quot;</span>, <span class="st">&quot;real&quot;</span>, <span class="fl">97.0</span>,</span>
<span id="cb9-6"><a href="results.html#cb9-6" tabindex="-1"></a>  <span class="st">&quot;llm&quot;</span>, <span class="st">&quot;Qwen3-8B, top_5_rag_examples&quot;</span>, <span class="st">&quot;real&quot;</span>, <span class="fl">92.7</span>,</span>
<span id="cb9-7"><a href="results.html#cb9-7" tabindex="-1"></a>  <span class="st">&quot;llm&quot;</span>, <span class="st">&quot;Qwen3-235B, top_5_rag_examples, synth examples&quot;</span>, <span class="st">&quot;real&quot;</span>, <span class="fl">91.8</span>,</span>
<span id="cb9-8"><a href="results.html#cb9-8" tabindex="-1"></a>  <span class="st">&quot;regex&quot;</span>, <span class="st">&quot;&quot;</span>, <span class="st">&quot;synth&quot;</span>, <span class="fl">96.9</span>,</span>
<span id="cb9-9"><a href="results.html#cb9-9" tabindex="-1"></a>  <span class="st">&quot;llm&quot;</span>, <span class="st">&quot;Qwen3-235B, top_5_rag_examples, respect_units&quot;</span>, <span class="st">&quot;synth&quot;</span>, <span class="fl">99.9</span>,</span>
<span id="cb9-10"><a href="results.html#cb9-10" tabindex="-1"></a>  <span class="st">&quot;llm&quot;</span>, <span class="st">&quot;Qwen3-8B, top_5_rag_examples&quot;</span>, <span class="st">&quot;synth&quot;</span>, <span class="fl">94.6</span>,</span>
<span id="cb9-11"><a href="results.html#cb9-11" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="co"># arrange(table_type) %&gt;% </span></span>
<span id="cb9-12"><a href="results.html#cb9-12" tabindex="-1"></a>  <span class="fu">group_by</span>(table_type) <span class="sc">%&gt;%</span> </span>
<span id="cb9-13"><a href="results.html#cb9-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-14"><a href="results.html#cb9-14" tabindex="-1"></a>    <span class="fu">across</span>(</span>
<span id="cb9-15"><a href="results.html#cb9-15" tabindex="-1"></a>      <span class="fu">c</span>(percentage_correct_total),</span>
<span id="cb9-16"><a href="results.html#cb9-16" tabindex="-1"></a>      <span class="sc">~</span><span class="fu">ifelse</span>(      </span>
<span id="cb9-17"><a href="results.html#cb9-17" tabindex="-1"></a>        . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-18"><a href="results.html#cb9-18" tabindex="-1"></a>        <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb9-19"><a href="results.html#cb9-19" tabindex="-1"></a>        <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb9-20"><a href="results.html#cb9-20" tabindex="-1"></a>        )</span>
<span id="cb9-21"><a href="results.html#cb9-21" tabindex="-1"></a>      )) <span class="sc">%&gt;%</span> </span>
<span id="cb9-22"><a href="results.html#cb9-22" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb9-23"><a href="results.html#cb9-23" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lllr&quot;</span>,</span>
<span id="cb9-24"><a href="results.html#cb9-24" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the mean percentage of correct predictions total among all approaches and table types.&quot;</span>,</span>
<span id="cb9-25"><a href="results.html#cb9-25" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>),</span>
<span id="cb9-26"><a href="results.html#cb9-26" tabindex="-1"></a>    <span class="at">row_group_col =</span> <span class="dv">3</span></span>
<span id="cb9-27"><a href="results.html#cb9-27" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:compare-extraction-performance">Table 5.4: </span>Comparing the mean percentage of correct predictions total among all approaches and table types.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-1714ab036aac2a99c573" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1714ab036aac2a99c573">{"x":{"filter":"none","vertical":false,"extensions":["RowGroup"],"data":[["1","2","3","4","5","6","7","8"],["human","regex","llm","llm","llm","regex","llm","llm"],["manual","","Qwen3-235B, top_<wbr>5_<wbr>rag_<wbr>examples","Qwen3-8B, top_<wbr>5_<wbr>rag_<wbr>examples","Qwen3-235B, top_<wbr>5_<wbr>rag_<wbr>examples, synth examples","","Qwen3-235B, top_<wbr>5_<wbr>rag_<wbr>examples, respect_<wbr>units","Qwen3-8B, top_<wbr>5_<wbr>rag_<wbr>examples"],["real","real","real","real","real","synth","synth","synth"],["<b>97.6<\/b>","68.6","97","92.7","91.8","96.9","<b>99.9<\/b>","94.6"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>approach<\/th>\n      <th>strategy<\/th>\n      <th>table type<\/th>\n      <th>percentage correct total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"tiprfl","rowGroup":{"dataSrc":2},"ordering":false,"columnDefs":[{"visible":false,"targets":2},{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"approach","targets":1},{"name":"strategy","targets":2},{"name":"table type","targets":3},{"name":"percentage correct total","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="runtime" class="section level5 hasAnchor paragraph-start" number="5.2.2.0.2">
<h5><span class="header-section-number">5.2.2.0.2</span> Runtime<a href="results.html#runtime" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Extracting the values from all 106 tables took Qwen3-235B around six
minutes. Thus, excluding the setup time for the LLM,
Qwen3-235B-A22B-Instruct is around 100 times faster than a human.
Checking the extracted values takes up to three minutes. This totals in
300 minutes prediction checking. Thus, selecting a smaller model that is
finishing after 2:30 minutes is not speeding up the process a lot. Once
we get a sufficient good performance with the big models the prediction
checking can be dropped. This would bring th real benefit.</p>
</div>
<div id="hypotheses" class="section level5 hasAnchor paragraph-start" number="5.2.2.0.3">
<h5><span class="header-section-number">5.2.2.0.3</span> Hypotheses<a href="results.html#hypotheses" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The predictor that showed a strong effect in all approaches is currency
unit. Reflecting this in the table extraction is a key factor to
optimize the performance. For the approaches that use <a href="glossary.html#acronyms_LLM">LLM</a>s most of
the model and method related variables showed a strong effect. Using a
versatile model and providing good learning examples is mandatory.</p>
</div>
<p>Especially for the approaches that use synthetic tables show that the
input format could also have a meaningful effect. It seems important to
prevent erroneous text extraction and converting the extracted text in
HTML might be helpful to eliminate last unclarities. But the question,
if a perfect text extract would be as good as HTML or Markdown, is not
answered yet.</p>
</div>
</div>
<div id="error-rate-guidance-results" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Error rate guidance<a href="results.html#error-rate-guidance-results" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<p>The side research question asks, if it is possible to guide the users attention to predictions that have a higher empirical rate of errors. In this thesis we focus the confidence score reported with <a href="glossary.html#acronyms_LLM">LLM</a>s responses.</p>
<p>Subsection <a href="results.html#page-identification-error-rate-results">5.3.1</a> presents the results found regarding our side research question for the page identification task. Subsection <a href="results.html#information-extraction-error-rate-results">5.3.2</a> presents the results found regarding our side research question for the information extraction task.</p>
<div id="page-identification-error-rate-results" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Page identification<a href="results.html#page-identification-error-rate-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We find, that the confidence score can be used in the page identification task, to identify confidence intervals, that contain no or only a few error. The amount of predictions falling in these intervals varies among models and classification task and target class.</p>
<p>The</p>
</div>
<div id="information-extraction-error-rate-results" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Information extraction<a href="results.html#information-extraction-error-rate-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Other possibilities narrow the selection down and get a more concrete error rate score for similar texts can be the type of information to extract, the company, …</p>
</div>
</div>
<div id="summary-results" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Summary<a href="results.html#summary-results" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-hgbHandelsgesetzbuchImBundesgesetzblatt2025" class="csl-entry">
HGB. (2025). <em>Handelsgesetzbuch in der im <span>Bundesgesetzblatt Teil III</span>, <span>Gliederungsnummer</span> 4100-1, ver<span>ö</span>ffentlichten bereinigten <span>Fassung</span>, das zuletzt durch <span>Artikel</span> 1 des <span>Gesetzes</span> vom 28. <span>Februar</span> 2025 (<span>BGBl</span>. 2025 <span>I Nr</span>. 69) ge<span>ä</span>ndert worden ist</em>.
</div>
<div id="ref-liExtractingFinancialData2023" class="csl-entry">
Li, H., Gao, H. (Harry)., Wu, C., &amp; Vasarhelyi, M. A. (2023). <em>Extracting <span>Financial Data</span> from <span>Unstructured Sources</span>: <span>Leveraging Large Language Models</span></em> ({{SSRN Scholarly Paper}} 4567607). Social Science Research Network. <a href="https://doi.org/10.2139/ssrn.4567607">https://doi.org/10.2139/ssrn.4567607</a>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="5">
<li id="fn5"><p>Personal opinion: Developing well performing regular
expressions can be a very tedious and setting appropriate rules
requires some domain knowledge. It can be worth the effort if there
are a lot of documents with similar information to extract. For this
thesis it took multiple months. At least, now there is kind of a
pipeline one can reuse, exchanging the rules and key word lists.
Thus the next similar task should be solved faster.<a href="results.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>In some cases the information of interest is spanning
two pages. These rare cases are not covered from the approaches
presented here, yet.<a href="results.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Potentially smaller fine tuned models can solve the
task even more efficient.<a href="results.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p>Unfortunately, well known companies as BVG and BSR
publish a less detailed form. Thus, their documents are not included
in the document base for this task.<a href="results.html#fnref8" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = '⟨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next ⟩';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="implementation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="discussion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
