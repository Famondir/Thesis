<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Appendix | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="8 Appendix | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Appendix | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Appendix | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon Schäfer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="glossary.html"/>
<link rel="next" href="tables.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#to-place-in-chapters-above"><i class="fa fa-check"></i><b>1.6</b> To place in chapters above</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#unstrukturierte-daten"><i class="fa fa-check"></i><b>1.7</b> Unstrukturierte Daten</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#portable-document-format"><i class="fa fa-check"></i><b>1.7.1</b> Portable Document Format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#information-retrieval"><i class="fa fa-check"></i><b>2.1</b> Information extraction / retrieval</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#term-frequency"><i class="fa fa-check"></i><b>2.1.1</b> Term frequency</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.2</b> Text processing</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#regular-expressions"><i class="fa fa-check"></i><b>2.1.3</b> Regular expressions</a></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.4</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.4.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.4.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.4.2" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.4.2</b> Encoder</a></li>
<li class="chapter" data-level="2.1.4.3" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.4.3</b> Decoder</a></li>
<li class="chapter" data-level="2.1.4.4" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.4.4</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.4.5" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.4.5</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.4.6" data-path="literature-review.html"><a href="literature-review.html#mixed-modal"><i class="fa fa-check"></i><b>2.1.4.6</b> Mixed modal</a></li>
</ul></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.5</b> Methods for LLM application</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#few-shot-learning"><i class="fa fa-check"></i><b>2.1.5.1</b> Few-shot Learning</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.5.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.5.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> Other concepts</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-0.5-p"><i class="fa fa-check"></i><b>2.3</b> Summary (0.5 p)</a></li>
<li class="chapter" data-level="2.4" data-path="literature-review.html"><a href="literature-review.html#to-place-in-chapters-above-1"><i class="fa fa-check"></i><b>2.4</b> To place in chapters above</a></li>
<li class="chapter" data-level="2.5" data-path="literature-review.html"><a href="literature-review.html#table-extraction-tasks"><i class="fa fa-check"></i><b>2.5</b> Table extraction tasks</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="literature-review.html"><a href="literature-review.html#difficulties"><i class="fa fa-check"></i><b>2.5.1</b> Difficulties</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="literature-review.html"><a href="literature-review.html#document-extraction-process"><i class="fa fa-check"></i><b>2.6</b> Document Extraction Process</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis"><i class="fa fa-check"></i><b>2.6.1</b> Document Layout Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="literature-review.html"><a href="literature-review.html#tools"><i class="fa fa-check"></i><b>2.7</b> Tools</a>
<ul>
<li class="chapter" data-level="2.7.0.1" data-path="literature-review.html"><a href="literature-review.html#vision-grid-transformer"><i class="fa fa-check"></i><b>2.7.0.1</b> Vision Grid Transformer</a></li>
<li class="chapter" data-level="2.7.0.2" data-path="literature-review.html"><a href="literature-review.html#tableformer"><i class="fa fa-check"></i><b>2.7.0.2</b> TableFormer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#evaluation-framework"><i class="fa fa-check"></i><b>3.2.2</b> Evaluation framework</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#metrics"><i class="fa fa-check"></i><b>3.3.1</b> Metrics</a></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#gpu-benchmark"><i class="fa fa-check"></i><b>3.5.1</b> Hardware normalization</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#error-analysis"><i class="fa fa-check"></i><b>3.5.2</b> Error analysis</a></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#baseline-selection-rationale"><i class="fa fa-check"></i><b>3.5.3</b> Baseline selection rationale</a></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#prompt-building"><i class="fa fa-check"></i><b>3.5.4</b> Prompt building</a></li>
<li class="chapter" data-level="3.5.5" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.5</b> Evaluation methods</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#ethical-practical-considerations-eher-am-ende-oder-weg"><i class="fa fa-check"></i><b>3.6</b> Ethical &amp; Practical Considerations (eher am Ende oder weg?)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="methodology.html"><a href="methodology.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>3.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="3.6.2" data-path="methodology.html"><a href="methodology.html#computational-constraints"><i class="fa fa-check"></i><b>3.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="3.6.3" data-path="methodology.html"><a href="methodology.html#generalizability-scope"><i class="fa fa-check"></i><b>3.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="3.6.4" data-path="methodology.html"><a href="methodology.html#ethical-considerations"><i class="fa fa-check"></i><b>3.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.2</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.3</b> Software Packages</a></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.4</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#text-extraction"><i class="fa fa-check"></i><b>4.5</b> Text extraction</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.6</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#baseline-regex"><i class="fa fa-check"></i><b>5.2.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>5.2.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="5.2.2.1" data-path="results.html"><a href="results.html#real-table-extraction-results"><i class="fa fa-check"></i><b>5.2.2.1</b> Real tables</a></li>
<li class="chapter" data-level="5.2.2.2" data-path="results.html"><a href="results.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>5.2.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="5.2.2.3" data-path="results.html"><a href="results.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>5.2.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="5.2.3" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.3</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#interpretations"><i class="fa fa-check"></i><b>6.1</b> Interpretations</a>
<ul>
<li class="chapter" data-level="6.1.0.1" data-path="discussion.html"><a href="discussion.html#table-extraction"><i class="fa fa-check"></i><b>6.1.0.1</b> Table extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#table-extraction-1"><i class="fa fa-check"></i><b>6.2.1</b> table extraction</a>
<ul>
<li class="chapter" data-level="6.2.1.1" data-path="discussion.html"><a href="discussion.html#regex-baseline"><i class="fa fa-check"></i><b>6.2.1.1</b> Regex baseline</a></li>
</ul></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#classification"><i class="fa fa-check"></i><b>6.2.2</b> classification</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.3</b> Not covered</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="discussion.html"><a href="discussion.html#table-detection-extraction"><i class="fa fa-check"></i><b>6.3.1</b> Table detection / extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#outlook"><i class="fa fa-check"></i><b>6.4</b> Outlook</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="discussion.html"><a href="discussion.html#vision-model"><i class="fa fa-check"></i><b>6.4.1</b> Vision Model</a></li>
<li class="chapter" data-level="6.4.2" data-path="discussion.html"><a href="discussion.html#docling-and-co"><i class="fa fa-check"></i><b>6.4.2</b> Docling and Co</a></li>
<li class="chapter" data-level="6.4.3" data-path="discussion.html"><a href="discussion.html#table-extraction-2"><i class="fa fa-check"></i><b>6.4.3</b> Table extraction</a></li>
<li class="chapter" data-level="6.4.4" data-path="discussion.html"><a href="discussion.html#sophisticated-approaches-for-text-extraction"><i class="fa fa-check"></i><b>6.4.4</b> Sophisticated approaches for text extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#error-analysis-1"><i class="fa fa-check"></i><b>6.5</b> Error analysis</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>8</b> Appendix</a>
<ul>
<li class="chapter" data-level="8.1" data-path="appendix.html"><a href="appendix.html#page-identification-report"><i class="fa fa-check"></i><b>8.1</b> Page identification report</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="appendix.html"><a href="appendix.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.1.2" data-path="appendix.html"><a href="appendix.html#toc-understanding"><i class="fa fa-check"></i><b>8.1.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.1.2.1" data-path="appendix.html"><a href="appendix.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.1.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.1.2.2" data-path="appendix.html"><a href="appendix.html#results-1"><i class="fa fa-check"></i><b>8.1.2.2</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="8.1.3" data-path="appendix.html"><a href="appendix.html#llm-page-identification"><i class="fa fa-check"></i><b>8.1.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.1.3.1" data-path="appendix.html"><a href="appendix.html#binary-classification"><i class="fa fa-check"></i><b>8.1.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.1.3.2" data-path="appendix.html"><a href="appendix.html#multi-class-classification"><i class="fa fa-check"></i><b>8.1.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.1.4" data-path="appendix.html"><a href="appendix.html#tf-classifier"><i class="fa fa-check"></i><b>8.1.4</b> Term frequency based classifier</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="appendix.html"><a href="appendix.html#hitl"><i class="fa fa-check"></i><b>8.2</b> Human in the loop application</a></li>
<li class="chapter" data-level="8.3" data-path="appendix.html"><a href="appendix.html#local-machine"><i class="fa fa-check"></i><b>8.3</b> Local machine</a></li>
<li class="chapter" data-level="8.4" data-path="appendix.html"><a href="appendix.html#benchmarks"><i class="fa fa-check"></i><b>8.4</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="appendix.html"><a href="appendix.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>8.4.1</b> Text extraction</a></li>
<li class="chapter" data-level="8.4.2" data-path="appendix.html"><a href="appendix.html#table-detection-benchmark"><i class="fa fa-check"></i><b>8.4.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="8.4.2.1" data-path="appendix.html"><a href="appendix.html#yolo-benchmark-and-table-transformer"><i class="fa fa-check"></i><b>8.4.2.1</b> yolo benchmark and table transformer</a></li>
<li class="chapter" data-level="8.4.2.2" data-path="appendix.html"><a href="appendix.html#old-classification-with-llm"><i class="fa fa-check"></i><b>8.4.2.2</b> old classification with llm</a></li>
</ul></li>
<li class="chapter" data-level="8.4.3" data-path="appendix.html"><a href="appendix.html#vllm-batch-speed"><i class="fa fa-check"></i><b>8.4.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="appendix.html"><a href="appendix.html#prompts"><i class="fa fa-check"></i><b>8.5</b> Prompts</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="appendix.html"><a href="appendix.html#toc-understanding-promts"><i class="fa fa-check"></i><b>8.5.1</b> TOC understanding</a></li>
<li class="chapter" data-level="8.5.2" data-path="appendix.html"><a href="appendix.html#classification-prompts"><i class="fa fa-check"></i><b>8.5.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="appendix.html"><a href="appendix.html#regex-page-identification-code"><i class="fa fa-check"></i><b>8.6</b> Regular expressions</a></li>
<li class="chapter" data-level="8.7" data-path="appendix.html"><a href="appendix.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>8.7</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="8.8" data-path="appendix.html"><a href="appendix.html#extraction-framework-flow-chart"><i class="fa fa-check"></i><b>8.8</b> Extraction framework flow chart</a></li>
<li class="chapter" data-level="8.9" data-path="appendix.html"><a href="appendix.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>8.9</b> Table extraction with regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>9</b> Tables</a>
<ul>
<li class="chapter" data-level="9.0.1" data-path="tables.html"><a href="tables.html#classification-1"><i class="fa fa-check"></i><b>9.0.1</b> Classification</a></li>
<li class="chapter" data-level="9.0.2" data-path="tables.html"><a href="tables.html#table-extraction-3"><i class="fa fa-check"></i><b>9.0.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="9.0.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach"><i class="fa fa-check"></i><b>9.0.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>10</b> Figures</a>
<ul>
<li class="chapter" data-level="10.1" data-path="figures.html"><a href="figures.html#page-identification-4"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="figures.html"><a href="figures.html#regex-baseline-1"><i class="fa fa-check"></i><b>10.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="10.1.2" data-path="figures.html"><a href="figures.html#toc-understanding-1"><i class="fa fa-check"></i><b>10.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="10.1.3" data-path="figures.html"><a href="figures.html#classification-2"><i class="fa fa-check"></i><b>10.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="10.1.3.1" data-path="figures.html"><a href="figures.html#binary"><i class="fa fa-check"></i><b>10.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="10.1.3.2" data-path="figures.html"><a href="figures.html#multi-class-classification-1"><i class="fa fa-check"></i><b>10.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="figures.html"><a href="figures.html#table-extraction-4"><i class="fa fa-check"></i><b>10.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="figures.html"><a href="figures.html#regex-approach"><i class="fa fa-check"></i><b>10.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="10.2.1.1" data-path="figures.html"><a href="figures.html#real-tables"><i class="fa fa-check"></i><b>10.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.1.2" data-path="figures.html"><a href="figures.html#synthetic-tables"><i class="fa fa-check"></i><b>10.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="10.2.2" data-path="figures.html"><a href="figures.html#real-tables-1"><i class="fa fa-check"></i><b>10.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="10.2.2.1" data-path="figures.html"><a href="figures.html#examples-from-same-company"><i class="fa fa-check"></i><b>10.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="10.2.2.2" data-path="figures.html"><a href="figures.html#openai-models-1"><i class="fa fa-check"></i><b>10.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="10.2.2.3" data-path="figures.html"><a href="figures.html#hypotheses-5"><i class="fa fa-check"></i><b>10.2.2.3</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="10.2.3" data-path="figures.html"><a href="figures.html#synthetic-tables-1"><i class="fa fa-check"></i><b>10.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="10.2.3.1" data-path="figures.html"><a href="figures.html#confidence-5"><i class="fa fa-check"></i><b>10.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="10.2.4" data-path="figures.html"><a href="figures.html#hybrid-approach-1"><i class="fa fa-check"></i><b>10.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>11</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">8</span> Appendix<a href="appendix.html#appendix" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="page-identification-report" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Page identification report<a href="appendix.html#page-identification-report" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="regex-page-identification" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Baseline: Regex<a href="appendix.html#regex-page-identification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="appendix.html#cb51-1" tabindex="-1"></a>data_page_identification_regex <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/page_identification_regex.rds&quot;</span>)</span>
<span id="cb51-2"><a href="appendix.html#cb51-2" tabindex="-1"></a></span>
<span id="cb51-3"><a href="appendix.html#cb51-3" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> data_page_identification_regex<span class="sc">$</span>metrics</span>
<span id="cb51-4"><a href="appendix.html#cb51-4" tabindex="-1"></a>metric_summaries <span class="ot">&lt;-</span> data_page_identification_regex<span class="sc">$</span>metric_summaries</span>
<span id="cb51-5"><a href="appendix.html#cb51-5" tabindex="-1"></a>metrics_by_company_and_type <span class="ot">&lt;-</span> data_page_identification_regex<span class="sc">$</span>metrics_by_company_and_type</span>
<span id="cb51-6"><a href="appendix.html#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="appendix.html#cb51-7" tabindex="-1"></a>metrics_plot_regex_page_identification <span class="ot">&lt;-</span> metrics <span class="sc">%&gt;%</span> <span class="fu">bind_rows</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-8"><a href="appendix.html#cb51-8" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb51-9"><a href="appendix.html#cb51-9" tabindex="-1"></a>    <span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(package, method, classification_type),</span>
<span id="cb51-10"><a href="appendix.html#cb51-10" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&quot;metric&quot;</span>,</span>
<span id="cb51-11"><a href="appendix.html#cb51-11" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span></span>
<span id="cb51-12"><a href="appendix.html#cb51-12" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb51-13"><a href="appendix.html#cb51-13" tabindex="-1"></a>  <span class="fu">filter</span>(metric <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb51-14"><a href="appendix.html#cb51-14" tabindex="-1"></a>    <span class="co"># &quot;acc&quot;, </span></span>
<span id="cb51-15"><a href="appendix.html#cb51-15" tabindex="-1"></a>    <span class="st">&quot;precision&quot;</span>, <span class="st">&quot;recall&quot;</span>, <span class="st">&quot;F1&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb51-16"><a href="appendix.html#cb51-16" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb51-17"><a href="appendix.html#cb51-17" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> method, <span class="at">y =</span> value, <span class="at">color =</span> package), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.2</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb51-18"><a href="appendix.html#cb51-18" tabindex="-1"></a>  <span class="fu">facet_grid</span>(metric<span class="sc">~</span>classification_type) <span class="sc">+</span></span>
<span id="cb51-19"><a href="appendix.html#cb51-19" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb51-20"><a href="appendix.html#cb51-20" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb51-21"><a href="appendix.html#cb51-21" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb51-22"><a href="appendix.html#cb51-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-23"><a href="appendix.html#cb51-23" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb51-24"><a href="appendix.html#cb51-24" tabindex="-1"></a></span>
<span id="cb51-25"><a href="appendix.html#cb51-25" tabindex="-1"></a><span class="co"># creating combi table</span></span>
<span id="cb51-26"><a href="appendix.html#cb51-26" tabindex="-1"></a>df_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb51-27"><a href="appendix.html#cb51-27" tabindex="-1"></a></span>
<span id="cb51-28"><a href="appendix.html#cb51-28" tabindex="-1"></a><span class="cf">for</span> (type <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="st">&quot;Passiva&quot;</span>, <span class="st">&quot;GuV&quot;</span>)) {</span>
<span id="cb51-29"><a href="appendix.html#cb51-29" tabindex="-1"></a>  df_temp <span class="ot">&lt;-</span> metric_summaries[type][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span></span>
<span id="cb51-30"><a href="appendix.html#cb51-30" tabindex="-1"></a>    <span class="fu">mutate_if</span>(</span>
<span id="cb51-31"><a href="appendix.html#cb51-31" tabindex="-1"></a>        is.numeric, </span>
<span id="cb51-32"><a href="appendix.html#cb51-32" tabindex="-1"></a>        <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb51-33"><a href="appendix.html#cb51-33" tabindex="-1"></a>            . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb51-34"><a href="appendix.html#cb51-34" tabindex="-1"></a>            <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">format</span>(<span class="fu">round</span>(., <span class="dv">3</span>), <span class="at">nsmall=</span><span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb51-35"><a href="appendix.html#cb51-35" tabindex="-1"></a>            <span class="fu">format</span>(<span class="fu">round</span>(., <span class="dv">3</span>), <span class="at">nsmall=</span><span class="dv">3</span>)</span>
<span id="cb51-36"><a href="appendix.html#cb51-36" tabindex="-1"></a>        )</span>
<span id="cb51-37"><a href="appendix.html#cb51-37" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> stat, <span class="at">values_from =</span> <span class="fu">c</span>(precision, recall, F1)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb51-38"><a href="appendix.html#cb51-38" tabindex="-1"></a>        <span class="at">precision =</span> <span class="fu">paste</span>(precision_mean, <span class="st">&quot;±&quot;</span>, precision_sd),</span>
<span id="cb51-39"><a href="appendix.html#cb51-39" tabindex="-1"></a>        <span class="at">recall =</span> <span class="fu">paste</span>(recall_mean, <span class="st">&quot;±&quot;</span>, recall_sd),</span>
<span id="cb51-40"><a href="appendix.html#cb51-40" tabindex="-1"></a>        <span class="at">F1 =</span> <span class="fu">paste</span>(F1_mean, <span class="st">&quot;±&quot;</span>, F1_sd),</span>
<span id="cb51-41"><a href="appendix.html#cb51-41" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb51-42"><a href="appendix.html#cb51-42" tabindex="-1"></a>    <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">&quot;_mean&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">ends_with</span>(<span class="st">&quot;_sd&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">mutate_all</span>(<span class="sc">~</span><span class="fu">str_remove</span>(., <span class="st">&quot; ± NA&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-43"><a href="appendix.html#cb51-43" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(method)) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">.before =</span> <span class="dv">2</span>, <span class="at">type =</span> type)</span>
<span id="cb51-44"><a href="appendix.html#cb51-44" tabindex="-1"></a>  <span class="co"># rownames(df_temp) &lt;- df_temp$method</span></span>
<span id="cb51-45"><a href="appendix.html#cb51-45" tabindex="-1"></a>  </span>
<span id="cb51-46"><a href="appendix.html#cb51-46" tabindex="-1"></a>  df_list[[type]] <span class="ot">&lt;-</span> df_temp</span>
<span id="cb51-47"><a href="appendix.html#cb51-47" tabindex="-1"></a>}</span>
<span id="cb51-48"><a href="appendix.html#cb51-48" tabindex="-1"></a></span>
<span id="cb51-49"><a href="appendix.html#cb51-49" tabindex="-1"></a>df_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_list) <span class="sc">%&gt;%</span> <span class="fu">bold_value_in_table</span>()</span></code></pre></div>
</details>
<p>The first approach presented in this section is, to use a key word list
and <a href="glossary.html#acronyms_regex">regex (regular expression)</a> to filter out irrelevant pages. It is setting the
performance baseline for the following approaches. Building a sound
regular expression often is an iterative process. In a first approach a
very <em>simple regex</em> was implemented. To increase the recall to 1.0 the
regular expression was extended<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a>. This second regex is
called <em>exhaustive regex</em>. In a third attempt minor changes have been
made to the <em>exhaustive regex</em> to increase the precision without
decreasing the recall. This regular expression is called <em>exhausitve
regex restricted</em>. The regular expressions can be found in the appendix
(see section <a href="appendix.html#regex-page-identification-code">8.6</a>).</p>
<p>Table <a href="appendix.html#tab:display-metrics-regex-page-identification-all">8.1</a> shows the
mean performance for precision, recall and F1 for the three regular
expressions for the three types of pages to identify<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a>. It
was possible to create a regular expression that has a high recall for
all target types. The precision is low for all tested regular
expressions and target types. Figure
<a href="appendix.html#fig:display-metrics-plot-regex-page-identification-details">8.1</a> gives
insight into performance differences between the companies. There is
only one document from <em>Berlin Energie und Netzholding</em> where the
<strong>GuV</strong> is not identified except with the <em>exhausitve regex
restricted</em><a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a>.</p>
<p>The regular expressions have been tested on the texts extracted with
multiple Python libraries. The reported standard deviations are very
small. This means that there are no substantial differences in the
extracted texts on a word level<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a>. But table
<a href="appendix.html#tab:display-data-text-extraction">8.11</a> in section
<a href="appendix.html#text-extraction-benchmark">8.4.1</a> shows that there are differences in the
extraction speed.</p>
<p>Code can be found at
“benchmark_jobs/page_identification/page_identification_benchmark_regex.ipynb”</p>
<p>Todo: * look into details where they differ and if it is because of a
line break or whitespace?</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="appendix.html#cb52-1" tabindex="-1"></a><span class="cf">if</span> (knitr<span class="sc">::</span><span class="fu">is_html_output</span>()) {</span>
<span id="cb52-2"><a href="appendix.html#cb52-2" tabindex="-1"></a>  <span class="co"># Set caption</span></span>
<span id="cb52-3"><a href="appendix.html#cb52-3" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">&quot;&lt;table&gt;&quot;</span>,<span class="fu">paste0</span>(<span class="st">&quot;&lt;caption&gt;&quot;</span>, <span class="st">&quot;(#tab:&quot;</span>, opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="st">&quot;)&quot;</span>, <span class="st">&quot;Comparing page identification metrics for different regular expressions for each classification task by type of the target table.&quot;</span>, <span class="st">&quot;&lt;/caption&gt;&quot;</span>),<span class="st">&quot;&lt;/table&gt;&quot;</span>, <span class="at">sep =</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb52-4"><a href="appendix.html#cb52-4" tabindex="-1"></a></span>
<span id="cb52-5"><a href="appendix.html#cb52-5" tabindex="-1"></a>  df_combined <span class="sc">%&gt;%</span> <span class="fu">datatable</span>(</span>
<span id="cb52-6"><a href="appendix.html#cb52-6" tabindex="-1"></a>    <span class="at">escape =</span> <span class="cn">FALSE</span>, <span class="at">options =</span> <span class="fu">list</span>(</span>
<span id="cb52-7"><a href="appendix.html#cb52-7" tabindex="-1"></a>      <span class="at">pageLength =</span> <span class="dv">10</span>, <span class="at">scrollX =</span> <span class="cn">TRUE</span>, <span class="at">dom =</span> <span class="st">&quot;t&quot;</span>, <span class="at">rowGroup =</span> <span class="fu">list</span>(<span class="at">dataSrc=</span><span class="fu">c</span>(<span class="dv">2</span>)), <span class="at">ordering=</span><span class="cn">FALSE</span>, </span>
<span id="cb52-8"><a href="appendix.html#cb52-8" tabindex="-1"></a>      <span class="at">columnDefs =</span> <span class="fu">list</span>(<span class="fu">list</span>(<span class="at">visible=</span><span class="cn">FALSE</span>, <span class="at">targets=</span><span class="fu">c</span>(<span class="dv">2</span>)))</span>
<span id="cb52-9"><a href="appendix.html#cb52-9" tabindex="-1"></a>    ), <span class="at">extensions =</span> <span class="st">&#39;RowGroup&#39;</span></span>
<span id="cb52-10"><a href="appendix.html#cb52-10" tabindex="-1"></a>  )</span>
<span id="cb52-11"><a href="appendix.html#cb52-11" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (knitr<span class="sc">::</span><span class="fu">is_latex_output</span>()) {</span>
<span id="cb52-12"><a href="appendix.html#cb52-12" tabindex="-1"></a>  df_combined <span class="sc">%&gt;%</span> <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing page identification metrics for different regular expressions for each classification task by type of the target table.&quot;</span>, <span class="at">escape =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-13"><a href="appendix.html#cb52-13" tabindex="-1"></a>    <span class="fu">pack_rows</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="at">label_row_css =</span> <span class="st">&quot;background-color: #666; color: #fff;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-14"><a href="appendix.html#cb52-14" tabindex="-1"></a>    <span class="fu">pack_rows</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="at">label_row_css =</span> <span class="st">&quot;background-color: #666; color: #fff;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb52-15"><a href="appendix.html#cb52-15" tabindex="-1"></a>    <span class="fu">pack_rows</span>(<span class="st">&quot;GuV&quot;</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="at">label_row_css =</span> <span class="st">&quot;background-color: #666; color: #fff;&quot;</span>)</span>
<span id="cb52-16"><a href="appendix.html#cb52-16" tabindex="-1"></a>}</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:display-metrics-regex-page-identification-all">Table 8.1: </span>Comparing page identification metrics for different regular expressions for each classification task by type of the target table.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-7d27367707176c5c02f2" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7d27367707176c5c02f2">{"x":{"filter":"none","vertical":false,"extensions":["RowGroup"],"data":[["1","2","3","4","5","6","7","8","9"],["simple regex","exhaustive regex restricted","exhaustive regex","simple regex","exhaustive regex restricted","exhaustive regex","simple regex","exhaustive regex restricted","exhaustive regex"],["Aktiva","Aktiva","Aktiva","Passiva","Passiva","Passiva","GuV","GuV","GuV"],["<b>0.273<\/b> ± 0.005","0.190","0.132 ± 0.004","<b>0.400<\/b> ± 0.009","0.190","0.130 ± 0.000","0.180 ± 0.006","<b>0.210<\/b>","0.173 ± 0.008"],["0.788 ± 0.010","0.990","<b>0.997<\/b> ± 0.005","0.780 ± 0.009","0.980","<b>0.993<\/b> ± 0.010","0.938 ± 0.008","<b>1.000<\/b>","<b>1.000<\/b> ± 0.000"],["<b>0.403<\/b> ± 0.005","0.320","0.233 ± 0.008","<b>0.530<\/b> ± 0.009","0.320","0.230 ± 0.000","0.302 ± 0.010","<b>0.350<\/b>","0.295 ± 0.012"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>method<\/th>\n      <th>type<\/th>\n      <th>precision<\/th>\n      <th>recall<\/th>\n      <th>F1<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","rowGroup":{"dataSrc":2},"ordering":false,"columnDefs":[{"visible":false,"targets":2},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"method","targets":1},{"name":"type","targets":2},{"name":"precision","targets":3},{"name":"recall","targets":4},{"name":"F1","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="appendix.html#cb53-1" tabindex="-1"></a>metrics_by_company_and_type <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="appendix.html#cb53-2" tabindex="-1"></a>    <span class="fu">select</span>(company, n_files, method, precision, recall, classification_type) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="appendix.html#cb53-3" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="fu">c</span>(precision, recall), <span class="at">names_to =</span> <span class="st">&quot;metric&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a href="appendix.html#cb53-4" tabindex="-1"></a>    <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-5"><a href="appendix.html#cb53-5" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> value, <span class="at">fill =</span> n_files), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb53-6"><a href="appendix.html#cb53-6" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> value, <span class="at">color =</span> method), <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="appendix.html#cb53-7" tabindex="-1"></a>    <span class="fu">facet_grid</span>(classification_type<span class="sc">~</span>metric) <span class="sc">+</span></span>
<span id="cb53-8"><a href="appendix.html#cb53-8" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb53-9"><a href="appendix.html#cb53-9" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb53-10"><a href="appendix.html#cb53-10" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb53-11"><a href="appendix.html#cb53-11" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:display-metrics-plot-regex-page-identification-details"></span>
<img src="_main_files/figure-html/display-metrics-plot-regex-page-identification-details-1.png" alt="Comparing the performance among different companies." width="100%" />
<p class="caption">
Figure 8.1: Comparing the performance among different companies.
</p>
</div>
<div id="summary-1" class="section level5 hasAnchor paragraph-start" number="8.1.1.0.1">
<h5><span class="header-section-number">8.1.1.0.1</span> Summary<a href="appendix.html#summary-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Nothing works well</p>
</div>
</div>
<div id="toc-understanding" class="section level3 hasAnchor" number="8.1.2">
<h3><span class="header-section-number">8.1.2</span> Table of Contents understanding<a href="appendix.html#toc-understanding" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="appendix.html#cb54-1" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;scripts/page_identification_toc_data_loading.R&quot;</span>)</span></code></pre></div>
</details>
<p>The second approach presented in this section leverages the <a href="glossary.html#acronyms_TOC">TOC</a>
understanding capabilities of <a href="glossary.html#acronyms_LLM">LLM</a>s. <span class="citation">H. Li, Gao, et al. (<a href="#ref-liExtractingFinancialData2023">2023</a>)</span>
use this approach with long documents as a first step to determine a
page range of interest. If the predicted page range is correct and
narrow, this approach is more efficient than processing the whole
document with a <a href="glossary.html#acronyms_LLM">LLM</a> directly. The <a href="glossary.html#acronyms_TOC">TOC</a> in a <a href="glossary.html#acronyms_PDF">PDF</a>
document can be embedded in a standardized, machine readable format or
be presented in varying, human readable forms of text on any page. Of
course there are documents without any <a href="glossary.html#acronyms_TOC">TOC</a>.</p>
<p>Thus, the task is investigated based on two different input data formats
In one case the <a href="glossary.html#acronyms_LLM">LLM</a> is provided with text extracted from the
beginning of the document. In the other case the <a href="glossary.html#acronyms_LLM">LLM</a> is provided
with the Markdown formatted version of the machine readable <a href="glossary.html#acronyms_TOC">TOC</a>
embedded in the document. Subsection <a href="appendix.html#text-based-toc-understanding">8.1.2.1</a>
shows the results for the text based approach. Subsection
<a href="appendix.html#code-based-toc-understanding">8.1.2.1.2</a> shows the results for the approach,
using the embedded <a href="glossary.html#acronyms_TOC">TOC</a>.</p>
<p>Additionally, each approach is performed three times with minor changes
in the prompt. The prompts used for both approaches can be found at
<a href="appendix.html#toc-understanding-promts">8.5.1</a>. The prompt was adjusted two times to
tackle shortcomings in the results. The first change adds the
information, that assets and liabilities are part of the balance sheet.
It is the balance sheet, that is listed in the <a href="glossary.html#acronyms_TOC">TOC</a> - not the
assets or liabilities itself. The second change specifies the
information, that assets and liabilities are often on separated pages,
into, liabilities often are found on the page after the assets.</p>
<p>The code can be found in:</p>
<ul>
<li><p>“benchmark_jobs/page_identification/toc_extraction_mistral.ipynb”</p></li>
<li><p>“benchmark_jobs/page_identification/toc_extraction_qwen.ipynb”</p></li>
</ul>
<p>Discussion:</p>
<ul>
<li><span class="citation">H. Li, Gao, et al. (<a href="#ref-liExtractingFinancialData2023">2023</a>)</span> did not report any issues with this
approach. They use few-shot learning and Chain-of-Thought techniques
to help the <a href="glossary.html#acronyms_LLM">LLM</a> to understand the task. They ask just for one
information at a time.</li>
<li>ChatGPT 4 vs Mistral 2410 8B (huge parameter difference)</li>
<li>For a lot of short annual reports one can find the tables of
interest within the first eight pages as well.</li>
</ul>
<div id="text-based-toc-understanding" class="section level4 hasAnchor" number="8.1.2.1">
<h4><span class="header-section-number">8.1.2.1</span> Details for the approaches<a href="appendix.html#text-based-toc-understanding" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="text-based" class="section level5 hasAnchor paragraph-start" number="8.1.2.1.1">
<h5><span class="header-section-number">8.1.2.1.1</span> Text based<a href="appendix.html#text-based" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><span class="citation">H. Li, Gao, et al. (<a href="#ref-liExtractingFinancialData2023">2023</a>)</span> used the <a href="glossary.html#acronyms_TOC">TOC</a> to identify the pages
of interest. In their approach the table of contents is extracted from
the text. Based on their observation, that the <a href="glossary.html#acronyms_TOC">TOC</a> in <a href="glossary.html#acronyms_ACFR">ACFR (Annual Comprehensive Financial Report)</a>s
is found within the initial 165 lines of the converted document
<span class="citation">(<a href="#ref-liExtractingFinancialData2023">H. Li, Gao, et al., 2023, p. 20</a>)</span>, they use the first 200 lines of
text.</p>
</div>
<p>My initial expectation was to find the <a href="glossary.html#acronyms_TOC">TOC</a> within the first five
pages. Often there are way less than 200 lines of text on the five first
pages (see Figure <a href="appendix.html#fig:page-identification-toc-histogram">8.2</a>). In my
approach the first step is to prompt the <a href="glossary.html#acronyms_LLM">LLM</a> to identify and
extract the <a href="glossary.html#acronyms_TOC">TOC</a> in a given text extract^[The prompt can be found
in section <a href="appendix.html#toc-understanding-promts">8.5.1</a>]. For the same documents
Mistral 2410 8B finds^[The strings extracted in this step have not been
checked in detail.]</p>
<ul>
<li><p>63 strings that should represent a table of
contents among the first five pages.</p></li>
<li><p>68 strings that should represent a table of
contents among the first 200 lines.</p></li>
</ul>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="appendix.html#cb55-1" tabindex="-1"></a>df_num_lines <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="appendix.html#cb55-2" tabindex="-1"></a>  <span class="fu">filter</span>(filepath <span class="sc">%in%</span> df_targets_no_ocr<span class="sc">$</span>filepath) <span class="sc">%&gt;%</span> <span class="co"># filter documents that would need ocr preprocessing</span></span>
<span id="cb55-3"><a href="appendix.html#cb55-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-4"><a href="appendix.html#cb55-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> num_lines), <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb55-5"><a href="appendix.html#cb55-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Number of lines in the first 5 pages&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Count&quot;</span>) <span class="sc">+</span></span>
<span id="cb55-6"><a href="appendix.html#cb55-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fu">max</span>(df_num_lines<span class="sc">$</span>num_lines)))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-histogram"></span>
<img src="_main_files/figure-html/page-identification-toc-histogram-1.png" alt="Histogram of the number of lines in the first 5 pages of the annual reports" width="80%" />
<p class="caption">
Figure 8.2: Histogram of the number of lines in the first 5 pages of the annual reports
</p>
</div>
<div id="code-based-toc-understanding" class="section level5 hasAnchor paragraph-start" number="8.1.2.1.2">
<h5><span class="header-section-number">8.1.2.1.2</span> Machine readable TOC based<a href="appendix.html#code-based-toc-understanding" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>I also tested to use the <a href="glossary.html#acronyms_TOC">TOC</a> representation embedded within the
PDF files. First, this limits the text amount to process. Second, this
hopefully increases the quality of the data passed to the <a href="glossary.html#acronyms_LLM">LLM</a>.
43 of the 80 annual reports have a machine
readable embedded <a href="glossary.html#acronyms_TOC">TOC</a>. The embedded <a href="glossary.html#acronyms_TOC">TOC</a> is converted into
markdown format before it gets passed to the <a href="glossary.html#acronyms_LLM">LLM</a>. Here is an
example:</p>
</div>
<pre><code>## |   hierarchy_level | title                       |   page_number |   enumeration |
## |------------------:|:----------------------------|--------------:|--------------:|
## |                 1 | Lagebericht                 |             5 |             1 |
## |                 1 | Bilanz                      |             7 |             2 |
## |                 1 | Gewinn- und Verlustrechnung |            10 |             3 |
## |                 1 | Anhang                      |            13 |             4 |
## |                 1 | Lagebericht                 |            17 |             5 |
## |                 1 | Bilanz                      |            25 |             6 |
## |                 1 | Anhang                      |            31 |             7 |
## |                 1 | Anlagenspiegel              |            39 |             8 |
## |                 1 | Bestätigungsvermerk         |            42 |             9 |</code></pre>
</div>
<div id="results-1" class="section level4 hasAnchor" number="8.1.2.2">
<h4><span class="header-section-number">8.1.2.2</span> Results<a href="appendix.html#results-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="comparison-of-the-different-approaches-base-prompt" class="section level5 hasAnchor paragraph-start" number="8.1.2.2.1">
<h5><span class="header-section-number">8.1.2.2.1</span> Comparison of the different approaches: base prompt<a href="appendix.html#comparison-of-the-different-approaches-base-prompt" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="appendix.html#tab:page-identification-toc-analysis-table">8.2</a> shows that the
machine readable <a href="glossary.html#acronyms_TOC">TOC</a> approach has the highest rate of correct page
ranges for all types with the base prompt. It also predicts the most
correct page ranges in absolute numbers for <strong>Aktiva</strong> and <strong>GuV</strong>.
Thus, it also has the highest rate of correct page ranges based on the
total number of page ranges to identify over all documents - no matter,
if there was a <a href="glossary.html#acronyms_TOC">TOC</a> of any type in the document or not - for
<strong>Aktiva</strong> and <strong>GuV</strong> of around 27 %.</p>
</div>
<table>
<caption>
<span id="tab:page-identification-toc-analysis-table">Table 8.2: </span>Comparing the number and percentage of correct identified page ranges among the approaches.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-1c57e6bb796483ad6187" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1c57e6bb796483ad6187">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["200 lines","200 lines","200 lines","5 pages","5 pages","5 pages","machine readable","machine readable","machine readable"],["Aktiva","GuV","Passiva","Aktiva","GuV","Passiva","Aktiva","GuV","Passiva"],[" 9.0","22.0","<b>6.0<\/b>"," 7.0","15.0","3.0","<b>22.0<\/b>","<b>28.0<\/b>","4.0"],["63","95","62","58","89","57","35","56","34"],["82","102","81","82","102","81","82","102","81"],["14.3","23.2"," 9.7","12.1","16.9"," 5.3","<b>62.9<\/b>","<b>50.0<\/b>","<b>11.8<\/b>"],["11.0","21.6","<b>7.4<\/b>"," 8.5","14.7","3.7","<b>26.8<\/b>","<b>27.5<\/b>","4.9"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>benchmark type<\/th>\n      <th>type<\/th>\n      <th>n correct<\/th>\n      <th>n<\/th>\n      <th>n total<\/th>\n      <th>perc correct<\/th>\n      <th>perc correct total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"benchmark type","targets":1},{"name":"type","targets":2},{"name":"n correct","targets":3},{"name":"n","targets":4},{"name":"n total","targets":5},{"name":"perc correct","targets":6},{"name":"perc correct total","targets":7}],"scrollX":true,"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Figure <a href="appendix.html#fig:page-identification-toc-analysis">8.3</a> shows that the amount
of correct predicted page ranges for <strong>Passiva</strong> is lowest for all
approaches but can be improved by simply extending the predicted end
page number by one the most. This improvement would be best for the
machine readable <a href="glossary.html#acronyms_TOC">TOC</a> approach. This approach is the only one,
where the number of correct page ranges <strong>Aktiva</strong> would not increase if
we extend its range by one. Table
<a href="appendix.html#tab:page-identification-toc-analysis-same-end-page">8.3</a> shows that
this is the case, because the machine readable <a href="glossary.html#acronyms_TOC">TOC</a> approach
predicts the same end page for <strong>Passiva</strong> as for <strong>Aktiva</strong> in
84.8 % of the cases, even though the prompt for
all approaches included the information, that <strong>Aktiva</strong> and <strong>Passiva</strong>
are on separate pages.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="appendix.html#cb57-1" tabindex="-1"></a>df_toc_benchmark <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-2"><a href="appendix.html#cb57-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">fill =</span> in_range, <span class="at">colour =</span> min_distance <span class="sc">&lt;=</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb57-3"><a href="appendix.html#cb57-3" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb57-4"><a href="appendix.html#cb57-4" tabindex="-1"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(in_range <span class="sc">==</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-5"><a href="appendix.html#cb57-5" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb57-6"><a href="appendix.html#cb57-6" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb57-7"><a href="appendix.html#cb57-7" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.2</span>,</span>
<span id="cb57-8"><a href="appendix.html#cb57-8" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb57-9"><a href="appendix.html#cb57-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-10"><a href="appendix.html#cb57-10" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb57-11"><a href="appendix.html#cb57-11" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="dv">1</span><span class="sc">-</span>perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb57-12"><a href="appendix.html#cb57-12" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb57-13"><a href="appendix.html#cb57-13" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.5</span>,</span>
<span id="cb57-14"><a href="appendix.html#cb57-14" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb57-15"><a href="appendix.html#cb57-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb57-16"><a href="appendix.html#cb57-16" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>benchmark_type, <span class="at">nrow =</span> <span class="dv">1</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-analysis"></span>
<img src="_main_files/figure-html/page-identification-toc-analysis-1.png" alt="Comparing number of found TOC and amount of correct and incorrect predicted page ranges" width="100%" />
<p class="caption">
Figure 8.3: Comparing number of found TOC and amount of correct and incorrect predicted page ranges
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="appendix.html#cb58-1" tabindex="-1"></a>df_toc_benchmark <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="appendix.html#cb58-2" tabindex="-1"></a>  <span class="fu">filter</span>(type <span class="sc">!=</span> <span class="st">&quot;GuV&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb58-3"><a href="appendix.html#cb58-3" tabindex="-1"></a>  <span class="fu">group_by</span>(benchmark_type, filepath) <span class="sc">%&gt;%</span></span>
<span id="cb58-4"><a href="appendix.html#cb58-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">all_equal =</span> <span class="fu">n_distinct</span>(end_page) <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-5"><a href="appendix.html#cb58-5" tabindex="-1"></a>  <span class="fu">group_by</span>(benchmark_type) <span class="sc">%&gt;%</span> </span>
<span id="cb58-6"><a href="appendix.html#cb58-6" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">equal_end_page =</span> <span class="fu">sum</span>(all_equal), <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="appendix.html#cb58-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">perc_equal_end_page =</span> <span class="fu">round</span>(equal_end_page<span class="sc">/</span>n<span class="sc">*</span><span class="dv">100</span>,<span class="dv">1</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-8"><a href="appendix.html#cb58-8" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;lrrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Comparing the number and percentage end pages prediction for Aktiva and Passiva that are equal.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-identification-toc-analysis-same-end-page">Table 8.3: </span>Comparing the number and percentage end pages prediction for Aktiva and Passiva that are equal.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-a6f9ffe0e0d6fa7f8834" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a6f9ffe0e0d6fa7f8834">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],["200 lines","5 pages","machine readable"],["20","26","28"],["58","53","33"],["34.5","49.1","84.8"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>benchmark type<\/th>\n      <th>equal end page<\/th>\n      <th>n<\/th>\n      <th>perc equal end page<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"benchmark type","targets":1},{"name":"equal end page","targets":2},{"name":"n","targets":3},{"name":"perc equal end page","targets":4}],"scrollX":true,"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="comparison-of-the-different-approaches-advanved-prompts" class="section level5 hasAnchor paragraph-start" number="8.1.2.2.2">
<h5><span class="header-section-number">8.1.2.2.2</span> Comparison of the different approaches: advanved prompts<a href="appendix.html#comparison-of-the-different-approaches-advanved-prompts" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>As a first attempt, to increase the correct page range rate for
<strong>Passiva</strong> I tried to specify, that assets and liabilities are part of
the balance sheet. This did work for the text based approaches, but not
for the machine readable approach (see Figure
<a href="figures.html#fig:page-identification-toc-analysis-balanced">10.3</a>). Figure
<a href="appendix.html#fig:page-identification-toc-analysis-next-page">8.4</a> shows that it is
more successful, to explicit tell the <a href="glossary.html#acronyms_LLM">LLM</a> that the liabilities
table is often on the page, after the assets table.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="appendix.html#cb59-1" tabindex="-1"></a>next_page_df_toc_benchmark <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb59-2"><a href="appendix.html#cb59-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">fill =</span> in_range, <span class="at">colour =</span> min_distance <span class="sc">&lt;=</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb59-3"><a href="appendix.html#cb59-3" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb59-4"><a href="appendix.html#cb59-4" tabindex="-1"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(in_range <span class="sc">==</span> <span class="cn">TRUE</span>),</span>
<span id="cb59-5"><a href="appendix.html#cb59-5" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb59-6"><a href="appendix.html#cb59-6" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb59-7"><a href="appendix.html#cb59-7" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.2</span>,</span>
<span id="cb59-8"><a href="appendix.html#cb59-8" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb59-9"><a href="appendix.html#cb59-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb59-10"><a href="appendix.html#cb59-10" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb59-11"><a href="appendix.html#cb59-11" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="dv">1</span><span class="sc">-</span>perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb59-12"><a href="appendix.html#cb59-12" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb59-13"><a href="appendix.html#cb59-13" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.5</span>,</span>
<span id="cb59-14"><a href="appendix.html#cb59-14" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb59-15"><a href="appendix.html#cb59-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb59-16"><a href="appendix.html#cb59-16" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>benchmark_type, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="co"># +</span></span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-analysis-next-page"></span>
<img src="_main_files/figure-html/page-identification-toc-analysis-next-page-1.png" alt="Comparing number of fount TOC and amount of correct and incorrect predicted page ranges" width="100%" />
<p class="caption">
Figure 8.4: Comparing number of fount TOC and amount of correct and incorrect predicted page ranges
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="appendix.html#cb60-1" tabindex="-1"></a>  <span class="co"># theme(</span></span>
<span id="cb60-2"><a href="appendix.html#cb60-2" tabindex="-1"></a>  <span class="co">#   legend.position = &quot;bottom&quot;</span></span>
<span id="cb60-3"><a href="appendix.html#cb60-3" tabindex="-1"></a>  <span class="co"># )</span></span></code></pre></div>
</details>
<p>Table <a href="appendix.html#tab:page-identification-toc-analysis-table-next-page">8.4</a> shows
the results from the final zero shot prompt. The machine readable
<a href="glossary.html#acronyms_TOC">TOC</a> approach is now predicting best for all types. Nevertheless, a
correct page range prediction rate below 60, 45, 50
% is still unsufficient to build downstream task on withou human
checkups. Table <a href="appendix.html#tab:page-identification-toc-gpu-time-comparison">8.5</a>
shows, that the machine readable <a href="glossary.html#acronyms_TOC">TOC</a> approach is the fastest as
well.</p>
<table>
<caption>
<span id="tab:page-identification-toc-analysis-table-next-page">Table 8.4: </span>Comparing the number and percentage of correct identified page ranges among the approaches.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-7e5e425511be2a8a4bd7" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7e5e425511be2a8a4bd7">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["200 lines","200 lines","200 lines","5 pages","5 pages","5 pages","machine readable","machine readable","machine readable"],["Aktiva","GuV","Passiva","Aktiva","GuV","Passiva","Aktiva","GuV","Passiva"],[" 9.0","24.0"," 8.0"," 8.0","17.0"," 7.0","<b>21.0<\/b>","<b>25.0<\/b>","<b>17.0<\/b>"],["64","97","63","60","91","59","35","56","34"],["82","102","81","82","102","81","82","102","81"],["14.1","24.7","12.7","13.3","18.7","11.9","<b>60.0<\/b>","<b>44.6<\/b>","<b>50.0<\/b>"],["11.0","23.5"," 9.9"," 9.8","16.7"," 8.6","<b>25.6<\/b>","<b>24.5<\/b>","<b>21.0<\/b>"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>benchmark type<\/th>\n      <th>type<\/th>\n      <th>n correct<\/th>\n      <th>n<\/th>\n      <th>n total<\/th>\n      <th>perc correct<\/th>\n      <th>perc correct total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"benchmark type","targets":1},{"name":"type","targets":2},{"name":"n correct","targets":3},{"name":"n","targets":4},{"name":"n total","targets":5},{"name":"perc correct","targets":6},{"name":"perc correct total","targets":7}],"scrollX":true,"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="appendix.html#cb61-1" tabindex="-1"></a>gpu_time_per_document_page_range <span class="sc">%&gt;%</span> <span class="fu">mutate_if</span>(</span>
<span id="cb61-2"><a href="appendix.html#cb61-2" tabindex="-1"></a>  is.numeric, </span>
<span id="cb61-3"><a href="appendix.html#cb61-3" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb61-4"><a href="appendix.html#cb61-4" tabindex="-1"></a>    . <span class="sc">==</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-5"><a href="appendix.html#cb61-5" tabindex="-1"></a>    <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, ., <span class="st">&quot;**&quot;</span>),</span>
<span id="cb61-6"><a href="appendix.html#cb61-6" tabindex="-1"></a>    .</span>
<span id="cb61-7"><a href="appendix.html#cb61-7" tabindex="-1"></a>  )</span>
<span id="cb61-8"><a href="appendix.html#cb61-8" tabindex="-1"></a>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-9"><a href="appendix.html#cb61-9" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;lrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Comparing GPU time for page range prediction and table of contents extraction. Time in seconds per text processed.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-identification-toc-gpu-time-comparison">Table 8.5: </span>Comparing GPU time for page range prediction and table of contents extraction. Time in seconds per text processed.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-c52c9505c9621d893f9c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c52c9505c9621d893f9c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3"],["200 lines","5 pages","machine readable"],["0.57","<b>0.56<\/b>","0.63"],["3.8","<b>2.19<\/b>",null]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Benchmark Type<\/th>\n      <th>Page range predicting<\/th>\n      <th>TOC extracting<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Benchmark Type","targets":1},{"name":"Page range predicting","targets":2},{"name":"TOC extracting","targets":3}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Table <a href="appendix.html#tab:page-range-prediction-performance-table">8.6</a> shows, that
this advantage of the machine readable <a href="glossary.html#acronyms_TOC">TOC</a> approach is not coming
from wide predicted page ranges. It has the smallest median range size
among all approaches. Figure
<a href="appendix.html#fig:page-identification-toc-range-plot">8.5</a> shows, that especially the
ranges for <strong>GuV</strong> are not normally distributed. Some far off lying
range sizes are shifting the mean off from the median.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="appendix.html#cb62-1" tabindex="-1"></a>mean_ranges <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="appendix.html#cb62-2" tabindex="-1"></a>  <span class="fu">mutate_at</span>(</span>
<span id="cb62-3"><a href="appendix.html#cb62-3" tabindex="-1"></a>    <span class="fu">vars</span>(median_range),</span>
<span id="cb62-4"><a href="appendix.html#cb62-4" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb62-5"><a href="appendix.html#cb62-5" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">min</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-6"><a href="appendix.html#cb62-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, ., <span class="st">&quot;**&quot;</span>),</span>
<span id="cb62-7"><a href="appendix.html#cb62-7" tabindex="-1"></a>      .</span>
<span id="cb62-8"><a href="appendix.html#cb62-8" tabindex="-1"></a>    )</span>
<span id="cb62-9"><a href="appendix.html#cb62-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb62-10"><a href="appendix.html#cb62-10" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;lrrrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Comparing the mean and median page range sizes.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:page-range-prediction-performance-table">Table 8.6: </span>Comparing the mean and median page range sizes.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e16617a7242f29536233" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e16617a7242f29536233">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["200 lines","200 lines","200 lines","5 pages","5 pages","5 pages","machine readable","machine readable","machine readable"],["Aktiva","GuV","Passiva","Aktiva","GuV","Passiva","Aktiva","GuV","Passiva"],["2.11","4.25","1.7","2.03","3.15","1.64","1.6","3.89","1.24"],["1.09","3.29","0.59","1.29","2.17","0.89","2.56","5.75","0.74"],["2","4","2","2","2","2","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>"],["1.48","2.97","0","1.48","1.48","0","0","0","0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>benchmark type<\/th>\n      <th>type<\/th>\n      <th>mean range<\/th>\n      <th>SD range<\/th>\n      <th>median range<\/th>\n      <th>MAD range<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"benchmark type","targets":1},{"name":"type","targets":2},{"name":"mean range","targets":3},{"name":"SD range","targets":4},{"name":"median range","targets":5},{"name":"MAD range","targets":6}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="appendix.html#cb63-1" tabindex="-1"></a>next_page_df_toc_benchmark <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="appendix.html#cb63-2" tabindex="-1"></a>  <span class="co"># mutate(range = range-1) %&gt;% </span></span>
<span id="cb63-3"><a href="appendix.html#cb63-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb63-4"><a href="appendix.html#cb63-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> range), <span class="at">binwidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb63-5"><a href="appendix.html#cb63-5" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data =</span> mean_ranges, <span class="fu">aes</span>(<span class="at">xintercept =</span> mean_range), <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-6"><a href="appendix.html#cb63-6" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">data =</span> mean_ranges, <span class="fu">aes</span>(<span class="at">xintercept =</span> median_range), <span class="at">color =</span> <span class="st">&quot;green&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-7"><a href="appendix.html#cb63-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(benchmark_type<span class="sc">~</span>type)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-range-plot"></span>
<img src="_main_files/figure-html/page-identification-toc-range-plot-1.png" alt="Comparint the predicted page range sizes. The red vertical line shows the mean and the green one shows the median of these sizes." width="100%" />
<p class="caption">
Figure 8.5: Comparint the predicted page range sizes. The red vertical line shows the mean and the green one shows the median of these sizes.
</p>
</div>
<p>Figure <a href="appendix.html#fig:page-identification-toc-range-logprobs">8.6</a> shows that the
confidence of the <a href="glossary.html#acronyms_LLM">LLM</a>s responses is higher for the machine
readable <a href="glossary.html#acronyms_TOC">TOC</a> approach as well. Besides a single group that was
predicted far off, the page ranges are closer to the correct pages too.
A linear regression of the correlation between minimal page distance and
logistic probability shows that is has a similar slope for all
approaches and target types.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="appendix.html#cb64-1" tabindex="-1"></a>next_page_df_toc_benchmark <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(filepath, benchmark_type) <span class="sc">%&gt;%</span></span>
<span id="cb64-2"><a href="appendix.html#cb64-2" tabindex="-1"></a>  <span class="fu">distance_confidence_plot</span>() <span class="sc">+</span></span>
<span id="cb64-3"><a href="appendix.html#cb64-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(type<span class="sc">~</span>benchmark_type) <span class="sc">+</span></span>
<span id="cb64-4"><a href="appendix.html#cb64-4" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb64-5"><a href="appendix.html#cb64-5" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb64-6"><a href="appendix.html#cb64-6" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-range-logprobs"></span>
<img src="_main_files/figure-html/page-identification-toc-range-logprobs-1.png" alt="Showing the minimal distance of the predicted page range to the actual page number overthe logprobs of the models response confidence." width="100%" />
<p class="caption">
Figure 8.6: Showing the minimal distance of the predicted page range to the actual page number overthe logprobs of the models response confidence.
</p>
</div>
<div id="machine-readable-toc-approach-specific-results" class="section level5 hasAnchor paragraph-start" number="8.1.2.2.3">
<h5><span class="header-section-number">8.1.2.2.3</span> Machine readable TOC approach specific results<a href="appendix.html#machine-readable-toc-approach-specific-results" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="appendix.html#fig:page-identification-toc-mr-degration">8.7</a> shows, that
correct predictions for the page range are more probable when the
embedded <a href="glossary.html#acronyms_TOC">TOC</a> has a medium number of entries. It is possible to
drop documents with less than 9 without
loosing a single correct prediction. This means that the <a href="glossary.html#acronyms_LLM">LLM</a> was
not able to make a correct prediction for documents with <a href="glossary.html#acronyms_TOC">TOC</a>, that
have less then 9 entries. This is not
surprising since neither <strong>Bilanz</strong> nor <strong>GuV</strong> are mentioned there
explicit.</p>
</div>
<p>It has no big influence on the predictions, if the <a href="glossary.html#acronyms_TOC">TOC</a> is passed
formatted as markdown or json. With the json formatted <a href="glossary.html#acronyms_TOC">TOC</a> it
found two more correct page ranges<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>. This was tested
because the relation between heading and value for the column
<em>page_number</em> might have been clearer<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a> in json for a
one-dimensional working <a href="glossary.html#acronyms_LLM">LLM</a>.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="appendix.html#cb65-1" tabindex="-1"></a>df_toc_benchmark_mr_degration_next_page <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="appendix.html#cb65-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb65-3"><a href="appendix.html#cb65-3" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> n_entries, <span class="at">y =</span> value, <span class="at">fill =</span> correct)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="appendix.html#cb65-4" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(n_entries), <span class="at">y =</span> <span class="dv">100</span><span class="sc">*</span>perc_correct, <span class="at">group =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb65-5"><a href="appendix.html#cb65-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">90</span>)) <span class="sc">+</span></span>
<span id="cb65-6"><a href="appendix.html#cb65-6" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:page-identification-toc-mr-degration"></span>
<img src="_main_files/figure-html/page-identification-toc-mr-degration-1.png" alt="Showing the amount of correct and incorrect predicted page ranges (bars) and the percentage of correct predictions (black line)." width="672" />
<p class="caption">
Figure 8.7: Showing the amount of correct and incorrect predicted page ranges (bars) and the percentage of correct predictions (black line).
</p>
</div>
<p>Delete or place somewhere else?:</p>
<ul>
<li><p>Thus it is safer to go with the 200 lines approach. But it also
takes longer. <a href="appendix.html#tab:page-identification-toc-gpu-time-comparison">8.5</a></p></li>
<li><p>Values can be higher than 80, the total number of PDF files, since
there can be multiple tables of interested for the same type in a
single document or a table of interest can span two pages.</p></li>
</ul>
</div>
</div>
<div id="llm-page-identification" class="section level3 hasAnchor" number="8.1.3">
<h3><span class="header-section-number">8.1.3</span> Classification with LLMs<a href="appendix.html#llm-page-identification" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="appendix.html#cb66-1" tabindex="-1"></a>temp_list <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/page_identification_llm.rds&quot;</span>)</span>
<span id="cb66-2"><a href="appendix.html#cb66-2" tabindex="-1"></a>df_binary <span class="ot">&lt;-</span> temp_list<span class="sc">$</span>df_binary</span>
<span id="cb66-3"><a href="appendix.html#cb66-3" tabindex="-1"></a>df_multi <span class="ot">&lt;-</span> temp_list<span class="sc">$</span>df_multi</span>
<span id="cb66-4"><a href="appendix.html#cb66-4" tabindex="-1"></a></span>
<span id="cb66-5"><a href="appendix.html#cb66-5" tabindex="-1"></a>method_families <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;zero_shot&quot;</span>, <span class="st">&quot;law_context&quot;</span>, <span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>, <span class="st">&#39;n_rag_examples&#39;</span>)</span>
<span id="cb66-6"><a href="appendix.html#cb66-6" tabindex="-1"></a></span>
<span id="cb66-7"><a href="appendix.html#cb66-7" tabindex="-1"></a>method_familiy_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb66-8"><a href="appendix.html#cb66-8" tabindex="-1"></a>  <span class="st">&quot;zero_shot&quot;</span> <span class="ot">=</span> <span class="st">&quot;#e41a1c&quot;</span>, </span>
<span id="cb66-9"><a href="appendix.html#cb66-9" tabindex="-1"></a>  <span class="st">&quot;law_context&quot;</span> <span class="ot">=</span> <span class="st">&quot;#377eb8&quot;</span>, </span>
<span id="cb66-10"><a href="appendix.html#cb66-10" tabindex="-1"></a>  <span class="st">&quot;top_n_rag_examples&quot;</span> <span class="ot">=</span> <span class="st">&quot;#4daf4a&quot;</span>, </span>
<span id="cb66-11"><a href="appendix.html#cb66-11" tabindex="-1"></a>  <span class="st">&quot;n_random_examples&quot;</span> <span class="ot">=</span> <span class="st">&quot;#984ea3&quot;</span>, </span>
<span id="cb66-12"><a href="appendix.html#cb66-12" tabindex="-1"></a>  <span class="st">&#39;n_rag_examples&#39;</span> <span class="ot">=</span> <span class="st">&quot;#ff7f00&quot;</span></span>
<span id="cb66-13"><a href="appendix.html#cb66-13" tabindex="-1"></a>  )</span>
<span id="cb66-14"><a href="appendix.html#cb66-14" tabindex="-1"></a></span>
<span id="cb66-15"><a href="appendix.html#cb66-15" tabindex="-1"></a>model_by_size_classification <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&#39;google_gemma-3-4b-it-0-9-1&#39;</span>, <span class="st">&#39;google_gemma-3n-E4B-it-0-9-1&#39;</span>, <span class="st">&quot;google_gemma-3-12b-it-0-9-1&quot;</span>,</span>
<span id="cb66-16"><a href="appendix.html#cb66-16" tabindex="-1"></a>  <span class="st">&quot;google_gemma-3-27b-it-0-9-1&quot;</span>, <span class="st">&quot;meta-llama_Llama-3.1-8B-Instruct&quot;</span>, </span>
<span id="cb66-17"><a href="appendix.html#cb66-17" tabindex="-1"></a>  <span class="st">&quot;meta-llama_Llama-3.1-70B-Instruct&quot;</span>, <span class="st">&quot;meta-llama_Llama-3.3-70B-Instruct&quot;</span>,</span>
<span id="cb66-18"><a href="appendix.html#cb66-18" tabindex="-1"></a>  <span class="st">&quot;meta-llama_Llama-4-Scout-17B-16E-Instruct&quot;</span>, <span class="st">&quot;meta-llama_Llama-4-Maverick-17B-128E-Instruct-FP8&quot;</span>,</span>
<span id="cb66-19"><a href="appendix.html#cb66-19" tabindex="-1"></a>  <span class="st">&quot;mistralai_Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;mistralai_Mistral-Small-3.1-24B-Instruct-2503&quot;</span>,</span>
<span id="cb66-20"><a href="appendix.html#cb66-20" tabindex="-1"></a>  <span class="st">&quot;mistralai_Mistral-Large-Instruct-2411&quot;</span>, <span class="st">&quot;Qwen_Qwen2.5-0.5B-Instruct&quot;</span>,</span>
<span id="cb66-21"><a href="appendix.html#cb66-21" tabindex="-1"></a>  <span class="st">&quot;Qwen_Qwen2.5-1.5B-Instruct&quot;</span>, <span class="st">&quot;Qwen_Qwen2.5-3B-Instruct&quot;</span>, <span class="st">&quot;Qwen_Qwen2.5-7B-Instruct&quot;</span>,</span>
<span id="cb66-22"><a href="appendix.html#cb66-22" tabindex="-1"></a>  <span class="st">&quot;Qwen_Qwen2.5-14B-Instruct&quot;</span>, <span class="st">&quot;Qwen_Qwen2.5-32B-Instruct&quot;</span>, <span class="st">&quot;Qwen_Qwen2.5-72B-Instruct&quot;</span>,</span>
<span id="cb66-23"><a href="appendix.html#cb66-23" tabindex="-1"></a>  <span class="st">&quot;Qwen_Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen_Qwen3-30B-A3B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen_Qwen3-32B&quot;</span>, <span class="st">&quot;Qwen_Qwen3-235B-A22B-Instruct-2507&quot;</span>,</span>
<span id="cb66-24"><a href="appendix.html#cb66-24" tabindex="-1"></a>  <span class="st">&quot;tiiuae_Falcon3-10B-Instruct&quot;</span>, <span class="st">&quot;microsoft_phi-4&quot;</span></span>
<span id="cb66-25"><a href="appendix.html#cb66-25" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, .)</span>
<span id="cb66-26"><a href="appendix.html#cb66-26" tabindex="-1"></a></span>
<span id="cb66-27"><a href="appendix.html#cb66-27" tabindex="-1"></a>df_binary <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> </span>
<span id="cb66-28"><a href="appendix.html#cb66-28" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-29"><a href="appendix.html#cb66-29" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">as.numeric</span>(n_examples),</span>
<span id="cb66-30"><a href="appendix.html#cb66-30" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">if_else</span>(method_family <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>, <span class="dv">0</span>, n_examples),</span>
<span id="cb66-31"><a href="appendix.html#cb66-31" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">if_else</span>(method_family <span class="sc">==</span> <span class="st">&quot;law_context&quot;</span>, <span class="dv">1</span>, n_examples),</span>
<span id="cb66-32"><a href="appendix.html#cb66-32" tabindex="-1"></a>  <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_families)</span>
<span id="cb66-33"><a href="appendix.html#cb66-33" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-34"><a href="appendix.html#cb66-34" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb66-35"><a href="appendix.html#cb66-35" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co"># %&gt;% </span></span>
<span id="cb66-36"><a href="appendix.html#cb66-36" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb66-37"><a href="appendix.html#cb66-37" tabindex="-1"></a>  <span class="co">#   model = str_replace(model, &quot;_vllm&quot;, &quot;&quot;),</span></span>
<span id="cb66-38"><a href="appendix.html#cb66-38" tabindex="-1"></a>  <span class="co">#   model_family = sub(&quot;_.*&quot;, &quot;&quot;, model),</span></span>
<span id="cb66-39"><a href="appendix.html#cb66-39" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Qwen2&quot;), &quot;Qwen 2.5&quot;, model_family),</span></span>
<span id="cb66-40"><a href="appendix.html#cb66-40" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Qwen3&quot;), &quot;Qwen 3&quot;, model_family),</span></span>
<span id="cb66-41"><a href="appendix.html#cb66-41" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Llama-3&quot;), &quot;Llama-3&quot;, model_family),</span></span>
<span id="cb66-42"><a href="appendix.html#cb66-42" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Llama-4&quot;), &quot;Llama-4&quot;, model_family)</span></span>
<span id="cb66-43"><a href="appendix.html#cb66-43" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb66-44"><a href="appendix.html#cb66-44" tabindex="-1"></a></span>
<span id="cb66-45"><a href="appendix.html#cb66-45" tabindex="-1"></a>binary_task <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb66-46"><a href="appendix.html#cb66-46" tabindex="-1"></a>binary_task<span class="sc">$</span>n_models <span class="ot">&lt;-</span> df_binary<span class="sc">$</span>model <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb66-47"><a href="appendix.html#cb66-47" tabindex="-1"></a>binary_task<span class="sc">$</span>n_model_families <span class="ot">&lt;-</span> df_binary<span class="sc">$</span>model_family <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb66-48"><a href="appendix.html#cb66-48" tabindex="-1"></a>binary_task<span class="sc">$</span>n_method_families <span class="ot">&lt;-</span> df_binary<span class="sc">$</span>method_family <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb66-49"><a href="appendix.html#cb66-49" tabindex="-1"></a></span>
<span id="cb66-50"><a href="appendix.html#cb66-50" tabindex="-1"></a>top_performer_binary <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> </span>
<span id="cb66-51"><a href="appendix.html#cb66-51" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.finite</span>(f1_score), loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb66-52"><a href="appendix.html#cb66-52" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span></span>
<span id="cb66-53"><a href="appendix.html#cb66-53" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family, classification_type) <span class="sc">%&gt;%</span> </span>
<span id="cb66-54"><a href="appendix.html#cb66-54" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1_score) <span class="sc">%&gt;%</span> </span>
<span id="cb66-55"><a href="appendix.html#cb66-55" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-56"><a href="appendix.html#cb66-56" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, classification_type, method_family, n_examples, f1_score, norm_runtime) <span class="sc">%&gt;%</span></span>
<span id="cb66-57"><a href="appendix.html#cb66-57" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-58"><a href="appendix.html#cb66-58" tabindex="-1"></a>    <span class="at">f1_score =</span> <span class="fu">round</span>(f1_score, <span class="dv">2</span>),</span>
<span id="cb66-59"><a href="appendix.html#cb66-59" tabindex="-1"></a>    <span class="at">norm_runtime =</span> <span class="fu">round</span>(norm_runtime, <span class="dv">0</span>),</span>
<span id="cb66-60"><a href="appendix.html#cb66-60" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(</span>
<span id="cb66-61"><a href="appendix.html#cb66-61" tabindex="-1"></a>    <span class="st">&quot;runtime in s&quot;</span> <span class="ot">=</span> norm_runtime,</span>
<span id="cb66-62"><a href="appendix.html#cb66-62" tabindex="-1"></a>  )</span>
<span id="cb66-63"><a href="appendix.html#cb66-63" tabindex="-1"></a></span>
<span id="cb66-64"><a href="appendix.html#cb66-64" tabindex="-1"></a>top_performer_binary_median <span class="ot">&lt;-</span> top_performer_binary <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(classification_type) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median =</span> <span class="fu">median</span>(f1_score))</span>
<span id="cb66-65"><a href="appendix.html#cb66-65" tabindex="-1"></a>top_performer_binary_median_guv <span class="ot">&lt;-</span> top_performer_binary_median <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;GuV&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(median)</span>
<span id="cb66-66"><a href="appendix.html#cb66-66" tabindex="-1"></a>top_performer_binary_median_aktiva <span class="ot">&lt;-</span> top_performer_binary_median <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;Aktiva&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(median)</span>
<span id="cb66-67"><a href="appendix.html#cb66-67" tabindex="-1"></a>top_performer_binary_median_passiva <span class="ot">&lt;-</span> top_performer_binary_median <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;Passiva&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(median)</span>
<span id="cb66-68"><a href="appendix.html#cb66-68" tabindex="-1"></a></span>
<span id="cb66-69"><a href="appendix.html#cb66-69" tabindex="-1"></a>df_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb66-70"><a href="appendix.html#cb66-70" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-71"><a href="appendix.html#cb66-71" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">as.numeric</span>(n_examples),</span>
<span id="cb66-72"><a href="appendix.html#cb66-72" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">if_else</span>(method_family <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>, <span class="dv">0</span>, n_examples),</span>
<span id="cb66-73"><a href="appendix.html#cb66-73" tabindex="-1"></a>  <span class="at">n_examples =</span> <span class="fu">if_else</span>(method_family <span class="sc">==</span> <span class="st">&quot;law_context&quot;</span>, <span class="dv">1</span>, n_examples),</span>
<span id="cb66-74"><a href="appendix.html#cb66-74" tabindex="-1"></a>  <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_families)</span>
<span id="cb66-75"><a href="appendix.html#cb66-75" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-76"><a href="appendix.html#cb66-76" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb66-77"><a href="appendix.html#cb66-77" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="co">#%&gt;%</span></span>
<span id="cb66-78"><a href="appendix.html#cb66-78" tabindex="-1"></a>  <span class="co"># mutate(</span></span>
<span id="cb66-79"><a href="appendix.html#cb66-79" tabindex="-1"></a>  <span class="co">#   model = str_replace(model, &quot;_vllm&quot;, &quot;&quot;),</span></span>
<span id="cb66-80"><a href="appendix.html#cb66-80" tabindex="-1"></a>  <span class="co">#   model_family = sub(&quot;_.*&quot;, &quot;&quot;, model),</span></span>
<span id="cb66-81"><a href="appendix.html#cb66-81" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Qwen2&quot;), &quot;Qwen 2.5&quot;, model_family),</span></span>
<span id="cb66-82"><a href="appendix.html#cb66-82" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Qwen3&quot;), &quot;Qwen 3&quot;, model_family),</span></span>
<span id="cb66-83"><a href="appendix.html#cb66-83" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Llama-3&quot;), &quot;Llama-3&quot;, model_family),</span></span>
<span id="cb66-84"><a href="appendix.html#cb66-84" tabindex="-1"></a>  <span class="co">#   model_family = if_else(str_detect(model, &quot;Llama-4&quot;), &quot;Llama-4&quot;, model_family)</span></span>
<span id="cb66-85"><a href="appendix.html#cb66-85" tabindex="-1"></a>  <span class="co"># )</span></span>
<span id="cb66-86"><a href="appendix.html#cb66-86" tabindex="-1"></a></span>
<span id="cb66-87"><a href="appendix.html#cb66-87" tabindex="-1"></a>top_performer_multu <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb66-88"><a href="appendix.html#cb66-88" tabindex="-1"></a>  <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> </span>
<span id="cb66-89"><a href="appendix.html#cb66-89" tabindex="-1"></a>  <span class="fu">filter</span>(metric_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="st">&quot;Passiva&quot;</span>, <span class="st">&quot;GuV&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-90"><a href="appendix.html#cb66-90" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.finite</span>(f1_score), loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb66-91"><a href="appendix.html#cb66-91" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span></span>
<span id="cb66-92"><a href="appendix.html#cb66-92" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family, metric_type) <span class="sc">%&gt;%</span> </span>
<span id="cb66-93"><a href="appendix.html#cb66-93" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1_score) <span class="sc">%&gt;%</span> </span>
<span id="cb66-94"><a href="appendix.html#cb66-94" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score)) <span class="sc">%&gt;%</span> <span class="co"># head(10) %&gt;% </span></span>
<span id="cb66-95"><a href="appendix.html#cb66-95" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, metric_type, method_family, n_examples, f1_score, norm_runtime) <span class="sc">%&gt;%</span></span>
<span id="cb66-96"><a href="appendix.html#cb66-96" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb66-97"><a href="appendix.html#cb66-97" tabindex="-1"></a>    <span class="at">f1_score =</span> <span class="fu">round</span>(f1_score, <span class="dv">2</span>),</span>
<span id="cb66-98"><a href="appendix.html#cb66-98" tabindex="-1"></a>    <span class="at">norm_runtime =</span> <span class="fu">round</span>(norm_runtime, <span class="dv">0</span>),</span>
<span id="cb66-99"><a href="appendix.html#cb66-99" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(</span>
<span id="cb66-100"><a href="appendix.html#cb66-100" tabindex="-1"></a>    <span class="st">&quot;runtime in s&quot;</span> <span class="ot">=</span> norm_runtime,</span>
<span id="cb66-101"><a href="appendix.html#cb66-101" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<p>The third approach we present in this section, uses pretrained
<a href="glossary.html#acronyms_LLM">LLM</a>s to classify, if a given text extract is including any of the
target tables. Two classification approaches are presented.</p>
<p>On the one hand, a binary classification is used three times, to
predict, if the text extract is including an <strong>Aktiva</strong>, <strong>Passiva</strong> or
<strong>GuV</strong> table, once at a time. In this case the <a href="glossary.html#acronyms_LLM">LLM</a> is forced to
answer with either <em>yes</em> or <em>no</em>. On the other hand, the <a href="glossary.html#acronyms_LLM">LLM</a>
performed a \acr{mcc]. For the <a href="glossary.html#acronyms_mcc">mcc (multi-class classification)</a> the <a href="glossary.html#acronyms_LLM">LLM</a> is forced to
answer <em>Aktiva</em>, <em>Passiva</em>, <em>GuV</em> or <em>other</em>. The prompts can be found
in appendix in section <a href="appendix.html#classification-prompts">8.5.2</a>.</p>
<p>The different classification tasks are combined with different prompting
strategies. A zero shot approach is setting the baseline. In a second
approach the excerpt of the relevant law is provided with the context.
Additionally, three few shot approaches are used.</p>
<p>In the few shot approaches text examples and a correct classification
for the text examples are provided. Figure
<a href="appendix.html#fig:comparing-actual-number-of-in-context-examples-plot">8.8</a> shows how
many examples the <a href="glossary.html#acronyms_LLM">LLM</a> gets provided, depending on the
classification type and chosen parameter <em>n_example</em><a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a>.
For both approaches three example selection strategies are implemented.
First, random examples for each page type get sampled from the truth
dataset. Second, a vector database provides the entries that are closest
to the target text for each page type. Third, the vector database just
provides the texts that are closest to the target text without
considering the page type of the examples returned.</p>
<p>For the binary classification task the <a href="glossary.html#acronyms_LLM">LLM</a> is provided with more
examples for the target type than for other types. Thus, the number of
examples and tokens is reduced. This should reduce the runtime as well.
On the same time the <a href="glossary.html#acronyms_LLM">LLM</a> should get enough information about the
structure and contents of the target class and some information how it
differs from other big tables or general text pages.</p>
<p>For the <a href="glossary.html#acronyms_mcc">mcc</a> the same amount of every possible class is provided.
Thus, the relation between the parameter <em>n_examples</em> and the number of
tokens to process is stronger for the <em>n_random_examples</em> and
<em>n_rag_examples</em> strategies.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="appendix.html#cb67-1" tabindex="-1"></a>df_classification_n_examples <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../benchmark_truth/real_example_count.csv&quot;</span>)</span>
<span id="cb67-2"><a href="appendix.html#cb67-2" tabindex="-1"></a></span>
<span id="cb67-3"><a href="appendix.html#cb67-3" tabindex="-1"></a>df_classification_n_examples <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="appendix.html#cb67-4" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">strategy =</span> approach) <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="appendix.html#cb67-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb67-6"><a href="appendix.html#cb67-6" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">x =</span> n_example, <span class="at">y =</span> sum, <span class="at">color =</span> strategy), <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb67-7"><a href="appendix.html#cb67-7" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(strategy <span class="sc">!=</span> <span class="st">&quot;n_random_examples&quot;</span>), <span class="fu">aes</span>(<span class="at">x =</span> n_example, <span class="at">y =</span> sum, <span class="at">color =</span> strategy)) <span class="sc">+</span></span>
<span id="cb67-8"><a href="appendix.html#cb67-8" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(strategy <span class="sc">==</span> <span class="st">&quot;n_random_examples&quot;</span>), <span class="fu">aes</span>(<span class="at">x =</span> n_example, <span class="at">y =</span> sum, <span class="at">color =</span> strategy), <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-9"><a href="appendix.html#cb67-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>classification)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:comparing-actual-number-of-in-context-examples-plot"></span>
<img src="_main_files/figure-html/comparing-actual-number-of-in-context-examples-plot-1.png" alt="Comparing the actual number of provided examples depending on the classification type, example selection strategy and chosen parameter n-examples. The slope for the top-n-rag-examples strategy is the same for both approaches. The line for the strategies n-random-examples and n-rag-examples is equal within each approach." width="100%" />
<p class="caption">
Figure 8.8: Comparing the actual number of provided examples depending on the classification type, example selection strategy and chosen parameter n-examples. The slope for the top-n-rag-examples strategy is the same for both approaches. The line for the strategies n-random-examples and n-rag-examples is equal within each approach.
</p>
</div>
<p>Table <a href="appendix.html#tab:page-identification-llm-overview">8.7</a> shows, which models
have been used in the classification benchmarks. Overall
25 models from 6
model families have been tested. Prerequirement for a model to be tested
is, that it can be used with the <a href="glossary.html#acronyms_vllm">vLLM</a> library, accessed via
hugging face and fits into the combined VRAM of 8 nvidia B200 graphic
cards (1.536 TB). The models cover a wide range of (active) parameter
sizes. Especially for the Qwen family many models of different parameter
sizes are used in the benchmark, to investigate if there is a clear
minimum amount of parameters needed, to solve the classification task.</p>
<p>The results of the benchmarks have been logged as <a href="glossary.html#acronyms_json">json</a> files
totaling in 2.1 GB of data for the final results.</p>
<table>
<caption>
<span id="tab:page-identification-llm-overview">Table 8.7: </span>Overview of benchmarked LLMs for the classification tasks.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-417c87b5bcbdddecbcfc" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-417c87b5bcbdddecbcfc">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25"],["Falcon3-10B-Instruct","gemma-3-12b-it-0-9-1","gemma-3-27b-it-0-9-1","gemma-3-4b-it-0-9-1","gemma-3n-E4B-it-0-9-1","Llama-3","Llama-3","Llama-3","Llama-4","Llama-4","Ministral-8B-Instruct-2410","Mistral-Large-Instruct-2411","Mistral-Small-3.1-24B-Instruct-2503","phi-4","Qwen 2.5","Qwen 2.5","Qwen 2.5","Qwen 2.5","Qwen 2.5","Qwen 2.5","Qwen 2.5","Qwen 3","Qwen 3","Qwen 3","Qwen 3"],["Falcon3-10B-Instruct","gemma-3-12b-it-0-9-1","gemma-3-27b-it-0-9-1","gemma-3-4b-it-0-9-1","gemma-3n-E4B-it-0-9-1","Llama-3.1-8B-Instruct","Llama-3.1-70B-Instruct","Llama-3.3-70B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","Llama-4-Scout-17B-16E-Instruct","Ministral-8B-Instruct-2410","Mistral-Large-Instruct-2411","Mistral-Small-3.1-24B-Instruct-2503","phi-4","Qwen2.5-0.5B-Instruct","Qwen2.5-1.5B-Instruct","Qwen2.5-3B-Instruct","Qwen2.5-7B-Instruct","Qwen2.5-14B-Instruct","Qwen2.5-32B-Instruct","Qwen2.5-72B-Instruct","Qwen3-8B","Qwen3-30B-A3B-Instruct-2507","Qwen3-32B","Qwen3-235B-A22B-Instruct-2507"],["10","12","27","4","4","8","70","70","17","17","8","124","24","15","0.5","1.5","3","7","14","32","72","8","30","32","235"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>parameter count<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"parameter count","targets":3}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>To do:</p>
<ul>
<li>compare out of company vs in company rag</li>
</ul>
<div id="binary-classification" class="section level4 hasAnchor" number="8.1.3.1">
<h4><span class="header-section-number">8.1.3.1</span> Binary classification<a href="appendix.html#binary-classification" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Table <a href="appendix.html#tab:table-metrics-llm-page-identification-binary">8.8</a> shows the
best performing combination of model family and prompting method for
each classification target type. The classification of <strong>GuV</strong> tables
works best and is solved almost perfectly. The F1 score for <strong>Aktiva</strong>
and <strong>Passiva</strong> are 0.07 lower for the top performing model. The median
F1 score of <strong>GuV</strong> is 0.93 0.1 higher
than the median F1 score for <strong>Aktiva</strong>
(0.84) and 0.2 higher than the median
F1 score for <strong>Passiva</strong>
(0.74).</p>
<p>Mistral 8B Instruct 2410 is performing best for the binary
classification task for each target type. Llama-4-Scout-17B-16E-Instruct
is performing second best for <strong>Aktiva</strong> and <strong>GuV</strong> and is close to the
second best for <strong>Passiva</strong> as well. The runtime of Mistral 8B Instruct
2410 is four times lower than the runtime of
Llama-4-Scout-17B-16E-Instruct. In addition, the time to load
Llama-4-Scout-17B-16E-Instruct into the VRAM is much
longer<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>, because it has a total of 109B parameters. It
was surprising that Googles gemma models perform so bad<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>.</p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="appendix.html#cb68-1" tabindex="-1"></a>top_performer_binary <span class="sc">%&gt;%</span> </span>
<span id="cb68-2"><a href="appendix.html#cb68-2" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;llllrrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Overview of benchmarked LLMs for the binary classification tasks. Limiting the number of examples provided for the few shot approach to 3.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-page-identification-binary">Table 8.8: </span>Overview of benchmarked LLMs for the binary classification tasks. Limiting the number of examples provided for the few shot approach to 3.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-ebc4160ecb58a0ab798f" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-ebc4160ecb58a0ab798f">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],["mistralai","meta-llama","Qwen","mistralai","mistralai","meta-llama","Qwen","Qwen","meta-llama","meta-llama","Qwen","microsoft","microsoft","google","google","google","tiiuae","tiiuae","tiiuae"],["Ministral-8B-Instruct-2410","Llama-4-Scout-17B-16E-Instruct","Qwen2.5-32B-Instruct","Ministral-8B-Instruct-2410","Ministral-8B-Instruct-2410","Llama-4-Scout-17B-16E-Instruct","Qwen2.5-32B-Instruct","Qwen3-235B-A22B-Instruct-2507","Llama-4-Scout-17B-16E-Instruct","Llama-4-Scout-17B-16E-Instruct","Qwen2.5-32B-Instruct","phi-4","phi-4","gemma-3-27b-it-0-9-1","gemma-3-27b-it-0-9-1","gemma-3-27b-it-0-9-1","Falcon3-10B-Instruct","Falcon3-10B-Instruct","Falcon3-10B-Instruct"],["GuV","GuV","GuV","Passiva","Aktiva","Passiva","Aktiva","Aktiva","Aktiva","Aktiva","Passiva","Aktiva","Passiva","Passiva","Aktiva","GuV","Passiva","Aktiva","GuV"],["n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","law_<wbr>context","law_<wbr>context","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>random_<wbr>examples","n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["3","3","1","3","3","3","1","3","1","3","1","1","1","1","1","1","1","1","1"],["0.99","0.98","0.93","0.92","0.92","0.86","0.85","0.85","0.84","0.84","0.81","0.7","0.66","0.58","0.54","0.52","0.5","0.45","0.34"],["917","4062","1985","858","878","3037","1806","7442","2318","3052","1967","102","101","1849","2588","1800","469","1065","222"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>classification type<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>f1 score<\/th>\n      <th>runtime in s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-left"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"classification type","targets":3},{"name":"method family","targets":4},{"name":"n examples","targets":5},{"name":"f1 score","targets":6},{"name":"runtime in s","targets":7}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Figure <a href="appendix.html#fig:binary-classification-result-mistral-plot">8.9</a> shows, the
classification performance for Mistral 8B 2410 in detail. It shows the
F1 score for each target type over the models runtime. It shows the
results for the different prompting strategies (<em>method_families</em>) with
differently colored shapes. The <em>zero_shot</em> strategy performs worst with
a F1 score below 0.6. Next come the <em>law_context</em> and
<em>top_n_rag_examples</em> strategy. Above those the <em>n_random_examples</em> and
finally the <em>n_rag_examples</em> strategy perform best.</p>
<p>The shape is giving information, if the example proveded to the
<a href="glossary.html#acronyms_LLM">LLM</a> are selected from other companies than the target table comes
from only, or if they can also be selected from documents of the same
company. This is only relevant for strategies that get the examples
picked by the documents vector embedding distances. The <a href="glossary.html#acronyms_LLM">LLM</a>
performs better<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>, if examples from documents of the same
company can be used. If this is not permitted, the <em>n_random_example</em>
approach performs better than the <em>n_rag_example</em> for the classification
of <strong>GuV</strong> and <strong>Passiva</strong> tables.</p>
<p>The number inside of the shapes is referring to the <em>n_examples</em>
function parameter. Most models got benchmarked with an <em>n_examples</em>
value of up to three. The actual number of examples provided to the
models is depending on the method family / example selection strategy
and can be looked up in Table
<a href="#tab:comparing-actual-number-of-in-context-examples">9.1</a>.</p>
<p>The best performing model, Mistral 8B 2410, was provided with mode
examples to investigate the effect of a richer context. The predictions
do not get better by providing more and more examples. Figure
<a href="appendix.html#fig:binary-classification-result-mistral-plot">8.9</a> shows, that the
improvements get smaller naturally going from three to five examples
while approaching an F1 score of 1.0.</p>
<p>But for the <em>n_rag_example</em> strategy we find a significant drop in the
F1 score, if we set the <em>n_examples</em> to five<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a> and
examples pages come from annual reports of other companies. This is
caused by a sever recall drop. For the <em>n_random_example</em> strategy we
see a small drop with the F1 score for the class <strong>Passiva</strong> as well.
Taking into account that the runtime also almost is twice as high, this
is very inefficient.</p>
<p>Figure <a href="appendix.html#fig:binary-classification-result-mistral-plot">8.9</a> also shows,
that the results are stable<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a>. Running the benchmark three
times shows similar results in the F1 score for each strategy. This is
reflected by closely overlapping shapes of the same color with the same
number within.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="appendix.html#cb69-1" tabindex="-1"></a>df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">==</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, loop <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="appendix.html#cb69-2" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">5</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="appendix.html#cb69-3" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb69-4"><a href="appendix.html#cb69-4" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb69-5"><a href="appendix.html#cb69-5" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-6"><a href="appendix.html#cb69-6" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb69-7"><a href="appendix.html#cb69-7" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> method_familiy_colors) <span class="sc">+</span></span>
<span id="cb69-8"><a href="appendix.html#cb69-8" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model<span class="sc">~</span>classification_type) <span class="sc">+</span></span>
<span id="cb69-9"><a href="appendix.html#cb69-9" tabindex="-1"></a>  <span class="co"># theme(legend.position = &quot;bottom&quot;) +</span></span>
<span id="cb69-10"><a href="appendix.html#cb69-10" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb69-11"><a href="appendix.html#cb69-11" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>),</span>
<span id="cb69-12"><a href="appendix.html#cb69-12" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb69-13"><a href="appendix.html#cb69-13" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb69-14"><a href="appendix.html#cb69-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:binary-classification-result-mistral-plot"></span>
<img src="_main_files/figure-html/binary-classification-result-mistral-plot-1.png" alt="Showing F1 score performance over normalized runtime for binary classification for Mistral-8B-Instruct-2410." width="100%" />
<p class="caption">
Figure 8.9: Showing F1 score performance over normalized runtime for binary classification for Mistral-8B-Instruct-2410.
</p>
</div>
<p>Figure
<a href="appendix.html#fig:binary-classification-result-mistral-many-random-examples-plot">8.10</a>
shows the experiments for Ministral-8B-Instruct-2410 with <em>n_examples</em>
greater or equal three. This time the actual number of examples provided
to the <a href="glossary.html#acronyms_LLM">LLM</a> are shown in the shapes to increase the comparability
among the different strategies. Additionally, it shows results for the
<em>top_n_rag_example</em> strategy with <em>n_examples</em> up to 13. The F1 score of
the <em>top_n_rag_example</em> strategy stays lower than the F1 score of the
<em>n_rag_examples</em> strategy, even though there are more examples used.
This is mainly caused by lower precision scores, probably because there
are no contrasting examples provided.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="appendix.html#cb70-1" tabindex="-1"></a>df_binary <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(df_classification_n_examples, <span class="at">by =</span> <span class="fu">c</span>(</span>
<span id="cb70-2"><a href="appendix.html#cb70-2" tabindex="-1"></a>  <span class="st">&quot;method_family&quot;</span> <span class="ot">=</span> <span class="st">&quot;approach&quot;</span>, </span>
<span id="cb70-3"><a href="appendix.html#cb70-3" tabindex="-1"></a>  <span class="st">&quot;n_examples&quot;</span> <span class="ot">=</span> <span class="st">&quot;n_example&quot;</span>, </span>
<span id="cb70-4"><a href="appendix.html#cb70-4" tabindex="-1"></a>  <span class="st">&quot;classifier_type&quot;</span> <span class="ot">=</span> <span class="st">&quot;classification&quot;</span></span>
<span id="cb70-5"><a href="appendix.html#cb70-5" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">sum_examples =</span> sum) <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="appendix.html#cb70-6" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">==</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, loop <span class="sc">&lt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-7"><a href="appendix.html#cb70-7" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-8"><a href="appendix.html#cb70-8" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb70-9"><a href="appendix.html#cb70-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb70-10"><a href="appendix.html#cb70-10" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb70-11"><a href="appendix.html#cb70-11" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> method_familiy_colors) <span class="sc">+</span></span>
<span id="cb70-12"><a href="appendix.html#cb70-12" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> sum_examples)) <span class="sc">+</span></span>
<span id="cb70-13"><a href="appendix.html#cb70-13" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model<span class="sc">~</span>classification_type) <span class="sc">+</span></span>
<span id="cb70-14"><a href="appendix.html#cb70-14" tabindex="-1"></a>  <span class="co"># theme(legend.position = &quot;bottom&quot;) +</span></span>
<span id="cb70-15"><a href="appendix.html#cb70-15" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb70-16"><a href="appendix.html#cb70-16" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>),</span>
<span id="cb70-17"><a href="appendix.html#cb70-17" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>)</span>
<span id="cb70-18"><a href="appendix.html#cb70-18" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb70-19"><a href="appendix.html#cb70-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:binary-classification-result-mistral-many-random-examples-plot"></span>
<img src="_main_files/figure-html/binary-classification-result-mistral-many-random-examples-plot-1.png" alt="Showing F1 score performance over normalized runtime for binary classification for Mistral-8B-Instruct-2410. Comparing the performance based on the real number of provided examples." width="100%" />
<p class="caption">
Figure 8.10: Showing F1 score performance over normalized runtime for binary classification for Mistral-8B-Instruct-2410. Comparing the performance based on the real number of provided examples.
</p>
</div>
<p>Figure <a href="figures.html#fig:binary-classification-performance-over-runtime">10.4</a> and
Figure
<a href="figures.html#fig:binary-classification-performance-over-runtime-full-time">10.5</a>
shows the F1 performance over normalized rundtime for all benchmarked
models. Comparing Mistral-8B-Instruct-2410 with
Mistral-124B-Instruct-2411 shows that one can spend over tenfold amount
of computation power without getting better results.</p>
<p>It also shows, that with Qwen 2.5 it needs at least the 3B parameter
model to achieve good results. Comparing the 32B and 72B parameter
models shows, that th performance does not increase anymore, but starts
to decrease. For Qwen 3 it shows, that only the newer mix of experts
models give reasonable results.</p>
<p>The mix of expert models show good performance for the Llama 4 family as
well and reduce the compute time compared with the 72B models of LLama
3. But for LLama 4 Maverick the performance drops using the
<em>n_rag_examples</em> strategy with three <em>n_examples</em>. The performance of
Llama 3.1 70B was higher than the performance of Llama 3.3 70B.</p>
<p>Summary:</p>
<p>Neither do newer generations always improve the performance for the
binary classification task, nor do more parameters always improve or at
least show stable performance.</p>
<div id="confidence-3" class="section level5 hasAnchor paragraph-start" number="8.1.3.1.1">
<h5><span class="header-section-number">8.1.3.1.1</span> Confidence<a href="appendix.html#confidence-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>I investigate the relation between the reported confidence for an answer
and its correctness, to check if it is possible to inform humans in the
loop about results they should double check and which results they can
trust. Figure <a href="appendix.html#fig:confidence-match-plot-mistral-binary">8.11</a> shows the
distribution of reported confidence score for the binary classification
with target type <strong>Aktiva</strong> for all tables types grouped by their
correctness for Mistral-8B-Instruct-2410. The <a href="glossary.html#acronyms_LLM">LLM</a> just returns one
prediction and its confidence<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>. The abscissa shows
<span class="math inline">\(confidence = exp(logprob)\)</span>, if the answer is <em>yes</em> and
<span class="math inline">\(confidence = 1-exp(logprob)\)</span> if the answer is <em>no</em>.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="appendix.html#cb71-1" tabindex="-1"></a>target_type <span class="ot">&lt;-</span> <span class="st">&quot;Aktiva&quot;</span></span>
<span id="cb71-2"><a href="appendix.html#cb71-2" tabindex="-1"></a></span>
<span id="cb71-3"><a href="appendix.html#cb71-3" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb71-4"><a href="appendix.html#cb71-4" tabindex="-1"></a>  classification_type <span class="sc">==</span> target_type, n_examples<span class="sc">&lt;=</span><span class="dv">3</span></span>
<span id="cb71-5"><a href="appendix.html#cb71-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb71-6"><a href="appendix.html#cb71-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb71-7"><a href="appendix.html#cb71-7" tabindex="-1"></a></span>
<span id="cb71-8"><a href="appendix.html#cb71-8" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb71-9"><a href="appendix.html#cb71-9" tabindex="-1"></a></span>
<span id="cb71-10"><a href="appendix.html#cb71-10" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb71-11"><a href="appendix.html#cb71-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb71-12"><a href="appendix.html#cb71-12" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb71-13"><a href="appendix.html#cb71-13" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, target_type)</span>
<span id="cb71-14"><a href="appendix.html#cb71-14" tabindex="-1"></a>  )</span>
<span id="cb71-15"><a href="appendix.html#cb71-15" tabindex="-1"></a></span>
<span id="cb71-16"><a href="appendix.html#cb71-16" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb71-17"><a href="appendix.html#cb71-17" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span></code></pre></div>
</details>
<p>One can see that the predictions are very accurate making just
13 mistakes for 4981
predictions. The reported confidence for answer <em>yes</em> is showing a wide
spread from around 0.25 to 1.0. This is true for the answer <em>no</em> as
well. Most wrong decisions are made for responses that have a reported
confidence in the range from 0.25 to 0.75. But there are more correct
answers in this range as well. It never misclassifies <strong>GuV</strong> or
<strong>Passiva</strong><a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a> as <strong>Aktiva</strong>. But it with shows some not
recalled <strong>Aktiva</strong> tables and is predicting some of the pages of
majority class, with not further described content and structure, as
<strong>Aktiva</strong>.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="appendix.html#cb72-1" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="appendix.html#cb72-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb72-3"><a href="appendix.html#cb72-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb72-4"><a href="appendix.html#cb72-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb72-5"><a href="appendix.html#cb72-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb72-6"><a href="appendix.html#cb72-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb72-7"><a href="appendix.html#cb72-7" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb72-8"><a href="appendix.html#cb72-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:confidence-match-plot-mistral-binary"></span>
<img src="_main_files/figure-html/confidence-match-plot-mistral-binary-1.png" alt="Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Mistral-8B-Instruct-2410." width="100%" />
<p class="caption">
Figure 8.11: Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Mistral-8B-Instruct-2410.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="appendix.html#cb73-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;Aktiva&quot;</span>, model_family<span class="sc">==</span><span class="st">&quot;Qwen&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="appendix.html#cb73-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb73-3"><a href="appendix.html#cb73-3" tabindex="-1"></a></span>
<span id="cb73-4"><a href="appendix.html#cb73-4" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb73-5"><a href="appendix.html#cb73-5" tabindex="-1"></a></span>
<span id="cb73-6"><a href="appendix.html#cb73-6" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb73-7"><a href="appendix.html#cb73-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-8"><a href="appendix.html#cb73-8" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb73-9"><a href="appendix.html#cb73-9" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb73-10"><a href="appendix.html#cb73-10" tabindex="-1"></a>  )</span>
<span id="cb73-11"><a href="appendix.html#cb73-11" tabindex="-1"></a></span>
<span id="cb73-12"><a href="appendix.html#cb73-12" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb73-13"><a href="appendix.html#cb73-13" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span></code></pre></div>
</details>
<p>This is different for models of most other model families. Figure
<a href="appendix.html#fig:confidence-match-plot-qwen-binary">8.12</a> shows, that
Qwen2.5-32B-Instruct returns always high confidence scores,
even when it is wrong. The model shows perfect recall but its precision
is worse than the precision of the Mistral model.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="appendix.html#cb74-1" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="appendix.html#cb74-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb74-3"><a href="appendix.html#cb74-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb74-4"><a href="appendix.html#cb74-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb74-5"><a href="appendix.html#cb74-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb74-6"><a href="appendix.html#cb74-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb74-7"><a href="appendix.html#cb74-7" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:confidence-match-plot-qwen-binary"></span>
<img src="_main_files/figure-html/confidence-match-plot-qwen-binary-1.png" alt="Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Qwen-2.5-32B-Instruct." width="100%" />
<p class="caption">
Figure 8.12: Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Qwen-2.5-32B-Instruct.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="appendix.html#cb75-1" tabindex="-1"></a><span class="fu">library</span>(yardstick)</span>
<span id="cb75-2"><a href="appendix.html#cb75-2" tabindex="-1"></a></span>
<span id="cb75-3"><a href="appendix.html#cb75-3" tabindex="-1"></a>calc_flipped_conf_all_types <span class="ot">&lt;-</span> <span class="cf">function</span>(df, model_name, method_name) {</span>
<span id="cb75-4"><a href="appendix.html#cb75-4" tabindex="-1"></a>  l_temp <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb75-5"><a href="appendix.html#cb75-5" tabindex="-1"></a>  <span class="co"># browser()</span></span>
<span id="cb75-6"><a href="appendix.html#cb75-6" tabindex="-1"></a>  </span>
<span id="cb75-7"><a href="appendix.html#cb75-7" tabindex="-1"></a>  <span class="cf">for</span> (target <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&#39;Aktiva&#39;</span>, <span class="st">&#39;GuV&#39;</span>, <span class="st">&#39;Passiva&#39;</span>)) {</span>
<span id="cb75-8"><a href="appendix.html#cb75-8" tabindex="-1"></a>    <span class="co"># t &lt;- &quot;Aktiva&quot;</span></span>
<span id="cb75-9"><a href="appendix.html#cb75-9" tabindex="-1"></a>    <span class="co"># df_filtered &lt;- df %&gt;% filter(</span></span>
<span id="cb75-10"><a href="appendix.html#cb75-10" tabindex="-1"></a>    <span class="co">#   classification_type == t,</span></span>
<span id="cb75-11"><a href="appendix.html#cb75-11" tabindex="-1"></a>    <span class="co">#   n_examples &lt;= 3,</span></span>
<span id="cb75-12"><a href="appendix.html#cb75-12" tabindex="-1"></a>    <span class="co">#   loop == 0) %&gt;% </span></span>
<span id="cb75-13"><a href="appendix.html#cb75-13" tabindex="-1"></a>    <span class="co">#   arrange(desc(f1_score))</span></span>
<span id="cb75-14"><a href="appendix.html#cb75-14" tabindex="-1"></a>    <span class="co"># model_name_best_f1_aktiva &lt;- df_filtered[model_rank, &quot;model&quot;]</span></span>
<span id="cb75-15"><a href="appendix.html#cb75-15" tabindex="-1"></a>    <span class="co"># method_best_f1_aktiva &lt;- df_filtered[model_rank, &quot;method&quot;]</span></span>
<span id="cb75-16"><a href="appendix.html#cb75-16" tabindex="-1"></a>    </span>
<span id="cb75-17"><a href="appendix.html#cb75-17" tabindex="-1"></a>    df_filtered <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb75-18"><a href="appendix.html#cb75-18" tabindex="-1"></a>      <span class="fu">filter</span>(</span>
<span id="cb75-19"><a href="appendix.html#cb75-19" tabindex="-1"></a>        classification_type <span class="sc">==</span> target,</span>
<span id="cb75-20"><a href="appendix.html#cb75-20" tabindex="-1"></a>        model <span class="sc">==</span> model_name,</span>
<span id="cb75-21"><a href="appendix.html#cb75-21" tabindex="-1"></a>        method <span class="sc">==</span> method_name,</span>
<span id="cb75-22"><a href="appendix.html#cb75-22" tabindex="-1"></a>        loop <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb75-23"><a href="appendix.html#cb75-23" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-24"><a href="appendix.html#cb75-24" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb75-25"><a href="appendix.html#cb75-25" tabindex="-1"></a>    </span>
<span id="cb75-26"><a href="appendix.html#cb75-26" tabindex="-1"></a>    df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb75-27"><a href="appendix.html#cb75-27" tabindex="-1"></a>    </span>
<span id="cb75-28"><a href="appendix.html#cb75-28" tabindex="-1"></a>    df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb75-29"><a href="appendix.html#cb75-29" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb75-30"><a href="appendix.html#cb75-30" tabindex="-1"></a>        <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb75-31"><a href="appendix.html#cb75-31" tabindex="-1"></a>        <span class="at">target =</span> target</span>
<span id="cb75-32"><a href="appendix.html#cb75-32" tabindex="-1"></a>      )</span>
<span id="cb75-33"><a href="appendix.html#cb75-33" tabindex="-1"></a>    l_temp[target] <span class="ot">&lt;-</span> <span class="fu">list</span>(df_flipped_score)</span>
<span id="cb75-34"><a href="appendix.html#cb75-34" tabindex="-1"></a>  }</span>
<span id="cb75-35"><a href="appendix.html#cb75-35" tabindex="-1"></a>  </span>
<span id="cb75-36"><a href="appendix.html#cb75-36" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">df =</span> <span class="fu">bind_rows</span>(l_temp), <span class="at">model =</span> model_name, <span class="at">method =</span> method_name)</span>
<span id="cb75-37"><a href="appendix.html#cb75-37" tabindex="-1"></a>}</span>
<span id="cb75-38"><a href="appendix.html#cb75-38" tabindex="-1"></a></span>
<span id="cb75-39"><a href="appendix.html#cb75-39" tabindex="-1"></a>plot_pr_double_curve <span class="ot">&lt;-</span> <span class="cf">function</span>(l, selected_type, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb75-40"><a href="appendix.html#cb75-40" tabindex="-1"></a>  <span class="co"># browser()</span></span>
<span id="cb75-41"><a href="appendix.html#cb75-41" tabindex="-1"></a>  df_temp2 <span class="ot">&lt;-</span> l<span class="sc">$</span>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(target <span class="sc">==</span> selected_type) <span class="sc">%&gt;%</span> </span>
<span id="cb75-42"><a href="appendix.html#cb75-42" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">if_else</span>(type <span class="sc">==</span> selected_type, type, <span class="st">&quot;no&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb75-43"><a href="appendix.html#cb75-43" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">factor</span>(type, <span class="at">levels =</span> <span class="fu">c</span>(selected_type, <span class="st">&quot;no&quot;</span>)))</span>
<span id="cb75-44"><a href="appendix.html#cb75-44" tabindex="-1"></a>  <span class="co"># pr_obj &lt;- pr.curve(scores.class0 = df_temp2$confidence_score[df_temp2$match == 1],</span></span>
<span id="cb75-45"><a href="appendix.html#cb75-45" tabindex="-1"></a>  <span class="co">#                    scores.class1 = df_temp2$confidence_score[df_temp2$match == 0],</span></span>
<span id="cb75-46"><a href="appendix.html#cb75-46" tabindex="-1"></a>  <span class="co">#                    curve = TRUE)</span></span>
<span id="cb75-47"><a href="appendix.html#cb75-47" tabindex="-1"></a>  </span>
<span id="cb75-48"><a href="appendix.html#cb75-48" tabindex="-1"></a>  <span class="co"># Precision-Recall Curve with ggplot2</span></span>
<span id="cb75-49"><a href="appendix.html#cb75-49" tabindex="-1"></a>  </span>
<span id="cb75-50"><a href="appendix.html#cb75-50" tabindex="-1"></a>  pr_df <span class="ot">&lt;-</span> df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_curve</span>(type, confidence_score) <span class="sc">%&gt;%</span></span>
<span id="cb75-51"><a href="appendix.html#cb75-51" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">threshold =</span> .threshold) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold<span class="sc">&lt;=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-52"><a href="appendix.html#cb75-52" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall))</span>
<span id="cb75-53"><a href="appendix.html#cb75-53" tabindex="-1"></a>  </span>
<span id="cb75-54"><a href="appendix.html#cb75-54" tabindex="-1"></a>  pr_auc <span class="ot">&lt;-</span> <span class="fu">round</span>(df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_auc</span>(type, confidence_score) <span class="sc">%&gt;%</span> .<span class="sc">$</span>.estimate, <span class="dv">3</span>)</span>
<span id="cb75-55"><a href="appendix.html#cb75-55" tabindex="-1"></a>  best_F1_row <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb75-56"><a href="appendix.html#cb75-56" tabindex="-1"></a>  best_F1_row_high_recall <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> </span>
<span id="cb75-57"><a href="appendix.html#cb75-57" tabindex="-1"></a>    <span class="fu">filter</span>(recall <span class="sc">&gt;</span> <span class="fl">0.999</span>, precision <span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb75-58"><a href="appendix.html#cb75-58" tabindex="-1"></a>  best_F1 <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb75-59"><a href="appendix.html#cb75-59" tabindex="-1"></a>  best_F1_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb75-60"><a href="appendix.html#cb75-60" tabindex="-1"></a>  best_threshold <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb75-61"><a href="appendix.html#cb75-61" tabindex="-1"></a>  best_threshold_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb75-62"><a href="appendix.html#cb75-62" tabindex="-1"></a>  best_precision_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(precision)</span>
<span id="cb75-63"><a href="appendix.html#cb75-63" tabindex="-1"></a>  </span>
<span id="cb75-64"><a href="appendix.html#cb75-64" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb75-65"><a href="appendix.html#cb75-65" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision)) <span class="sc">+</span></span>
<span id="cb75-66"><a href="appendix.html#cb75-66" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> threshold), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb75-67"><a href="appendix.html#cb75-67" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb75-68"><a href="appendix.html#cb75-68" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb75-69"><a href="appendix.html#cb75-69" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;Precision-Recall Curve for &quot;</span>, selected_type, <span class="st">&quot; (AUC = &quot;</span>, pr_auc, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb75-70"><a href="appendix.html#cb75-70" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb75-71"><a href="appendix.html#cb75-71" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Precision&quot;</span></span>
<span id="cb75-72"><a href="appendix.html#cb75-72" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb75-73"><a href="appendix.html#cb75-73" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb75-74"><a href="appendix.html#cb75-74" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb75-75"><a href="appendix.html#cb75-75" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb75-76"><a href="appendix.html#cb75-76" tabindex="-1"></a>    )</span>
<span id="cb75-77"><a href="appendix.html#cb75-77" tabindex="-1"></a>  </span>
<span id="cb75-78"><a href="appendix.html#cb75-78" tabindex="-1"></a>  g2 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb75-79"><a href="appendix.html#cb75-79" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision, <span class="at">color =</span> f1)) <span class="sc">+</span></span>
<span id="cb75-80"><a href="appendix.html#cb75-80" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb75-81"><a href="appendix.html#cb75-81" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb75-82"><a href="appendix.html#cb75-82" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb75-83"><a href="appendix.html#cb75-83" tabindex="-1"></a>      <span class="co"># title = &quot;Precision-Recall Curve colored by F1 score&quot;,</span></span>
<span id="cb75-84"><a href="appendix.html#cb75-84" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb75-85"><a href="appendix.html#cb75-85" tabindex="-1"></a>      <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb75-86"><a href="appendix.html#cb75-86" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;F1 score&quot;</span></span>
<span id="cb75-87"><a href="appendix.html#cb75-87" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb75-88"><a href="appendix.html#cb75-88" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb75-89"><a href="appendix.html#cb75-89" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb75-90"><a href="appendix.html#cb75-90" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb75-91"><a href="appendix.html#cb75-91" tabindex="-1"></a>    ) </span>
<span id="cb75-92"><a href="appendix.html#cb75-92" tabindex="-1"></a>  </span>
<span id="cb75-93"><a href="appendix.html#cb75-93" tabindex="-1"></a>  <span class="cf">if</span> (x_stuff <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb75-94"><a href="appendix.html#cb75-94" tabindex="-1"></a>    g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb75-95"><a href="appendix.html#cb75-95" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb75-96"><a href="appendix.html#cb75-96" tabindex="-1"></a>    </span>
<span id="cb75-97"><a href="appendix.html#cb75-97" tabindex="-1"></a>    g2 <span class="ot">&lt;-</span> g2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb75-98"><a href="appendix.html#cb75-98" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb75-99"><a href="appendix.html#cb75-99" tabindex="-1"></a>  }</span>
<span id="cb75-100"><a href="appendix.html#cb75-100" tabindex="-1"></a>  </span>
<span id="cb75-101"><a href="appendix.html#cb75-101" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> g1 <span class="sc">+</span> g2</span>
<span id="cb75-102"><a href="appendix.html#cb75-102" tabindex="-1"></a>  combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb75-103"><a href="appendix.html#cb75-103" tabindex="-1"></a>    <span class="st">&#39;Best F1 score of &#39;</span>, <span class="fu">round</span>(best_F1,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold,<span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb75-104"><a href="appendix.html#cb75-104" tabindex="-1"></a>    <span class="st">&#39;Best F1 score with recall &gt; 0.999 of &#39;</span>, <span class="fu">round</span>(best_F1_high_recall,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold_high_recall,<span class="dv">3</span>), <span class="st">&#39; (corresp. precision value: &#39;</span>, <span class="fu">round</span>(best_precision_high_recall,<span class="dv">3</span>) , <span class="st">&#39;)&#39;</span>))</span>
<span id="cb75-105"><a href="appendix.html#cb75-105" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>Figure <a href="appendix.html#fig:micro-pr-curve-llm-binary-1">8.13</a> shows the
precision-recall-curve for the best performing model twice for each
target type. On the left plots the line color represents the threshold
score one could use to decide when to accept a response as it is. On the
right plots the line color is showing the F1 score that results with a
chosen threshold.</p>
<p>The <a href="glossary.html#acronyms_AUC">AUC (area under the curve)</a> value is lowest for <strong>Aktiva</strong>. Here the F1 score is
highest for a threshold value of 0.73. This prevents to classify the
pages of type <em>other</em> to get classified as <strong>Aktiva</strong>. If it is required
to have a very high recall value a threshold of 0.44 should be chosen.</p>
<p>The precision-recall-curve for <strong>Passiva</strong> is very similar but there is
a step close to the recall value of 1.0. This has the effect that for a
a guaranteed high recall a very low precision (0.24) and F1 (0.38) has
to be accepted<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>.</p>
<p>The shape of the precision-recall-curve for <strong>GuV</strong> almost perfectly
reaches the top right corner. The highest F1 score is found with a
threshold value of .56. With a threshold value of 0.5 a very high recall
is guaranteed and the F1 score is just a little lower.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="appendix.html#cb76-1" tabindex="-1"></a>model <span class="ot">&lt;-</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span></span>
<span id="cb76-2"><a href="appendix.html#cb76-2" tabindex="-1"></a>method <span class="ot">&lt;-</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb76-3"><a href="appendix.html#cb76-3" tabindex="-1"></a></span>
<span id="cb76-4"><a href="appendix.html#cb76-4" tabindex="-1"></a>df_temp_mistral <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">calc_flipped_conf_all_types</span>(model, method)</span>
<span id="cb76-5"><a href="appendix.html#cb76-5" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb76-6"><a href="appendix.html#cb76-6" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb76-7"><a href="appendix.html#cb76-7" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb76-8"><a href="appendix.html#cb76-8" tabindex="-1"></a></span>
<span id="cb76-9"><a href="appendix.html#cb76-9" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb76-10"><a href="appendix.html#cb76-10" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb76-11"><a href="appendix.html#cb76-11" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model, <span class="st">&quot; with &quot;</span>, method))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:micro-pr-curve-llm-binary-1"></span>
<img src="_main_files/figure-html/micro-pr-curve-llm-binary-1-1.png" alt="Showing the precsion-recall-curve for the best performing model." width="100%" />
<p class="caption">
Figure 8.13: Showing the precsion-recall-curve for the best performing model.
</p>
</div>
<p>Figure <a href="appendix.html#fig:table-identification-llm-confidence">8.14</a> summarizes the
relation between reported confidence and correctness of the
classification for all target types and compares it among the best
performing model-strategy combinations for Ministral-8B-Instruct-2410
and Qwen3-8B. One can see, that the reported confidence for correct and
incorrect classifications are separable in most cases for Mistral-8B.
This separation is worse for Qwen3-8B and worst for target type
<strong>Passiva</strong>.</p>
<p>Figure <a href="appendix.html#fig:table-identification-llm-confidence-lm">8.15</a> shows, that for
Ministral-8B values with a confidence of 0.7 and more, a human don’t has
to double check the classification for target type <strong>GuV</strong>. This
interval is smallest for <strong>Passiva</strong> where only confidences above 0.9
can be fully trusted. These empirical intervals might shrink, once more
data is evaluated. If one is less strict and accepts misclassifiaction
rates of 1 % the found interval for <strong>Passiva</strong> starts at 0.8 and is
probably less depended on the sample evaluated. The percentage of
predictions that can be trusted without risk is greater than 93 % even
for target type <strong>Passiva</strong>.</p>
<p>For Qwen3-8B we find almost no range without any wrong classifications.
For <strong>GuV</strong> this range includes 35 % of all predictions. The ranges that
allow for 1 % of wrong classifications cover 57 % of all predictions at
least.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="appendix.html#cb77-1" tabindex="-1"></a>confidence_vs_truth_binary <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> </span>
<span id="cb77-2"><a href="appendix.html#cb77-2" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb77-3"><a href="appendix.html#cb77-3" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb77-4"><a href="appendix.html#cb77-4" tabindex="-1"></a>    <span class="at">mean_f1 =</span> <span class="fu">mean</span>(f1_score, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span></span>
<span id="cb77-5"><a href="appendix.html#cb77-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, classification_type) <span class="sc">%&gt;%</span> </span>
<span id="cb77-6"><a href="appendix.html#cb77-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_f1)) <span class="sc">%&gt;%</span> </span>
<span id="cb77-7"><a href="appendix.html#cb77-7" tabindex="-1"></a>  <span class="fu">slice_max</span>(mean_f1, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb77-8"><a href="appendix.html#cb77-8" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb77-9"><a href="appendix.html#cb77-9" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb77-10"><a href="appendix.html#cb77-10" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb77-11"><a href="appendix.html#cb77-11" tabindex="-1"></a>    <span class="co"># truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb77-12"><a href="appendix.html#cb77-12" tabindex="-1"></a>  )</span>
<span id="cb77-13"><a href="appendix.html#cb77-13" tabindex="-1"></a></span>
<span id="cb77-14"><a href="appendix.html#cb77-14" tabindex="-1"></a>confidence_vs_truth_binary <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb77-15"><a href="appendix.html#cb77-15" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb77-16"><a href="appendix.html#cb77-16" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence_score, <span class="at">fill =</span> classification_type), </span>
<span id="cb77-17"><a href="appendix.html#cb77-17" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb77-18"><a href="appendix.html#cb77-18" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb77-19"><a href="appendix.html#cb77-19" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb77-20"><a href="appendix.html#cb77-20" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="sc">~</span> model <span class="sc">+</span> classification_type)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-identification-llm-confidence"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-1.png" alt="Comparing the reported confidence scores for the page identification task for the Mistral and Qwen 3 with 8B parameters." width="100%" />
<p class="caption">
Figure 8.14: Comparing the reported confidence scores for the page identification task for the Mistral and Qwen 3 with 8B parameters.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="appendix.html#cb78-1" tabindex="-1"></a>confidence_vs_truth_binary <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">confidence =</span> confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="appendix.html#cb78-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb78-3"><a href="appendix.html#cb78-3" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb78-4"><a href="appendix.html#cb78-4" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb78-5"><a href="appendix.html#cb78-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb78-6"><a href="appendix.html#cb78-6" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, classification_type, model) <span class="sc">%&gt;%</span></span>
<span id="cb78-7"><a href="appendix.html#cb78-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb78-8"><a href="appendix.html#cb78-8" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb78-9"><a href="appendix.html#cb78-9" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb78-10"><a href="appendix.html#cb78-10" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb78-11"><a href="appendix.html#cb78-11" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb78-12"><a href="appendix.html#cb78-12" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb78-13"><a href="appendix.html#cb78-13" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb78-14"><a href="appendix.html#cb78-14" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb78-15"><a href="appendix.html#cb78-15" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb78-16"><a href="appendix.html#cb78-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(classification_type, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb78-17"><a href="appendix.html#cb78-17" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb78-18"><a href="appendix.html#cb78-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb78-19"><a href="appendix.html#cb78-19" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb78-20"><a href="appendix.html#cb78-20" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb78-21"><a href="appendix.html#cb78-21" tabindex="-1"></a>      chance_false,</span>
<span id="cb78-22"><a href="appendix.html#cb78-22" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb78-23"><a href="appendix.html#cb78-23" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb78-24"><a href="appendix.html#cb78-24" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb78-25"><a href="appendix.html#cb78-25" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-26"><a href="appendix.html#cb78-26" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb78-27"><a href="appendix.html#cb78-27" tabindex="-1"></a>    ),</span>
<span id="cb78-28"><a href="appendix.html#cb78-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb78-29"><a href="appendix.html#cb78-29" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb78-30"><a href="appendix.html#cb78-30" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> conf_center, <span class="at">y =</span> perc, <span class="at">color =</span> chance_low, <span class="at">fill =</span> chance_false_interval), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb78-31"><a href="appendix.html#cb78-31" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb78-32"><a href="appendix.html#cb78-32" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb78-33"><a href="appendix.html#cb78-33" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb78-34"><a href="appendix.html#cb78-34" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb78-35"><a href="appendix.html#cb78-35" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb78-36"><a href="appendix.html#cb78-36" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb78-37"><a href="appendix.html#cb78-37" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb78-38"><a href="appendix.html#cb78-38" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb78-39"><a href="appendix.html#cb78-39" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb78-40"><a href="appendix.html#cb78-40" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb78-41"><a href="appendix.html#cb78-41" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb78-42"><a href="appendix.html#cb78-42" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb78-43"><a href="appendix.html#cb78-43" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb78-44"><a href="appendix.html#cb78-44" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb78-45"><a href="appendix.html#cb78-45" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb78-46"><a href="appendix.html#cb78-46" tabindex="-1"></a>  <span class="fu">facet_grid</span>(classification_type <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-identification-llm-confidence-lm"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-lm-1.png" alt="Estimating the relative frequency to find a wrong classification over different confidence intervals" width="100%" />
<p class="caption">
Figure 8.15: Estimating the relative frequency to find a wrong classification over different confidence intervals
</p>
</div>
<p>Discussion:</p>
<ul>
<li><p>Could be more efficient to predict “is any of interest” and then
which type, because dataset is highly imbalanced.</p></li>
<li><p>Why takes n_rag_examples so much longer?</p></li>
<li><p><strong>Aktiva</strong> and <strong>Passiva</strong> sometimes on the same page and more
similar than <strong>GuV</strong>?</p></li>
<li><p>Recall = 1 for human in the loop (looking at selection of pages that
could be target and none else, if the number of wrong pages are few
=&gt; what says F1 with recall 1?)</p></li>
<li><p>Confidence range to error rate</p></li>
</ul>
</div>
<div id="multi-class-classification" class="section level4 hasAnchor" number="8.1.3.2">
<h4><span class="header-section-number">8.1.3.2</span> Multi-class classification<a href="appendix.html#multi-class-classification" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Table <a href="appendix.html#tab:table-metrics-llm-page-identification-multi">8.9</a> shows that
Llama-4-Scout solves the <a href="glossary.html#acronyms_mcc">mcc</a> task almost perfect for all classes.
Mistral-Large-Instruct-2411 performs second best. In contrast to the
binary classification task no order is visible, what class was easiest
to predict. Googles gemma models perform much better in the <a href="glossary.html#acronyms_mcc">mcc</a>
task with F1 scores of 0.89 instead of 0.58 for the binary
classification task.</p>
<p>Table
<a href="appendix.html#tab:table-metrics-llm-page-identification-multi-small-models">8.10</a>
shows that the smaller models do perform good, too. Ministral-8B
performs good but is around tenfold faster than Mistral-Large and
Llama-4 Scout. For the larger models the <em>n_rag_examples</em> strategy is
performing best. For the smaller models the <em>top_n_rag_examples</em>
strategy is performing good as well and is faster because of shorter
contexts.</p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="appendix.html#cb79-1" tabindex="-1"></a>top_performer_multu <span class="sc">%&gt;%</span> <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;llllrrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Overview of benchmarked LLMs for the multi-class classification tasks. Limiting the number of examples provided for the few shot approach to 3.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-page-identification-multi">Table 8.9: </span>Overview of benchmarked LLMs for the multi-class classification tasks. Limiting the number of examples provided for the few shot approach to 3.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-4c142e851434733867c6" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4c142e851434733867c6">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"],["meta-llama","meta-llama","mistralai","meta-llama","mistralai","Qwen","Qwen","Qwen","mistralai","google","google","google","tiiuae","tiiuae","microsoft","microsoft","tiiuae","microsoft"],["Llama-4-Scout-17B-16E-Instruct","Llama-4-Scout-17B-16E-Instruct","Mistral-Large-Instruct-2411","Llama-4-Scout-17B-16E-Instruct","Mistral-Large-Instruct-2411","Qwen2.5-32B-Instruct","Qwen3-235B-A22B-Instruct-2507","Qwen2.5-72B-Instruct","Mistral-Large-Instruct-2411","gemma-3-27b-it-0-9-1","gemma-3-27b-it-0-9-1","gemma-3-27b-it-0-9-1","Falcon3-10B-Instruct","Falcon3-10B-Instruct","phi-4","phi-4","Falcon3-10B-Instruct","phi-4"],["Aktiva","GuV","Passiva","Passiva","Aktiva","Aktiva","GuV","Passiva","GuV","Aktiva","Passiva","GuV","GuV","Aktiva","Passiva","Aktiva","Passiva","GuV"],["n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples"],["3","1","1","3","3","3","3","1","1","3","1","1","1","3","2","1","3","1"],["1","1","0.99","0.99","0.98","0.98","0.97","0.97","0.96","0.89","0.82","0.79","0.71","0.71","0.67","0.6","0.59","0.46"],["4451","2541","7061","4451","18744","5664","11164","3908","7061","4297","2606","2606","868","2393","1660","493","494","1725"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>metric type<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>f1 score<\/th>\n      <th>runtime in s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-left"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"metric type","targets":3},{"name":"method family","targets":4},{"name":"n examples","targets":5},{"name":"f1 score","targets":6},{"name":"runtime in s","targets":7}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="appendix.html#cb80-1" tabindex="-1"></a>df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="appendix.html#cb80-2" tabindex="-1"></a>  <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> </span>
<span id="cb80-3"><a href="appendix.html#cb80-3" tabindex="-1"></a>  <span class="fu">filter</span>(metric_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="st">&quot;Passiva&quot;</span>, <span class="st">&quot;GuV&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb80-4"><a href="appendix.html#cb80-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.finite</span>(f1_score), loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb80-5"><a href="appendix.html#cb80-5" tabindex="-1"></a>  <span class="fu">filter</span>(parameter_count<span class="sc">&lt;</span><span class="dv">17</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb80-6"><a href="appendix.html#cb80-6" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span></span>
<span id="cb80-7"><a href="appendix.html#cb80-7" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family, metric_type) <span class="sc">%&gt;%</span> </span>
<span id="cb80-8"><a href="appendix.html#cb80-8" tabindex="-1"></a>  <span class="fu">filter</span>(f1_score <span class="sc">==</span> <span class="fu">max</span>(f1_score, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb80-9"><a href="appendix.html#cb80-9" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score)) <span class="sc">%&gt;%</span> <span class="co"># head(10) %&gt;% </span></span>
<span id="cb80-10"><a href="appendix.html#cb80-10" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, metric_type, method_family, n_examples, f1_score, norm_runtime) <span class="sc">%&gt;%</span></span>
<span id="cb80-11"><a href="appendix.html#cb80-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb80-12"><a href="appendix.html#cb80-12" tabindex="-1"></a>    <span class="at">f1_score =</span> <span class="fu">round</span>(f1_score, <span class="dv">2</span>),</span>
<span id="cb80-13"><a href="appendix.html#cb80-13" tabindex="-1"></a>    <span class="at">norm_runtime =</span> <span class="fu">round</span>(norm_runtime, <span class="dv">0</span>),</span>
<span id="cb80-14"><a href="appendix.html#cb80-14" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(</span>
<span id="cb80-15"><a href="appendix.html#cb80-15" tabindex="-1"></a>    <span class="st">&quot;runtime in s&quot;</span> <span class="ot">=</span> norm_runtime,</span>
<span id="cb80-16"><a href="appendix.html#cb80-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb80-17"><a href="appendix.html#cb80-17" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">alignment=</span><span class="st">&quot;llllrrr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Overview of benchmarked LLMs for the multi-class classification tasks focussing on models with less than 17B parameters. Limiting the number of examples provided for the few shot approach to 3.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>))</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-page-identification-multi-small-models">Table 8.10: </span>Overview of benchmarked LLMs for the multi-class classification tasks focussing on models with less than 17B parameters. Limiting the number of examples provided for the few shot approach to 3.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-077fe3575efab98de190" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-077fe3575efab98de190">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"],["mistralai","mistralai","mistralai","meta-llama","Qwen","meta-llama","google","Qwen","Qwen","tiiuae","tiiuae","google","microsoft","meta-llama","microsoft","tiiuae","google","microsoft"],["Ministral-8B-Instruct-2410","Ministral-8B-Instruct-2410","Ministral-8B-Instruct-2410","Llama-3.1-8B-Instruct","Qwen2.5-3B-Instruct","Llama-3.1-8B-Instruct","gemma-3-12b-it-0-9-1","Qwen2.5-3B-Instruct","Qwen2.5-3B-Instruct","Falcon3-10B-Instruct","Falcon3-10B-Instruct","gemma-3-12b-it-0-9-1","phi-4","Llama-3.1-8B-Instruct","phi-4","Falcon3-10B-Instruct","gemma-3-12b-it-0-9-1","phi-4"],["Aktiva","Passiva","GuV","Passiva","Aktiva","Aktiva","Aktiva","Passiva","GuV","GuV","Aktiva","Passiva","Passiva","GuV","Aktiva","Passiva","GuV","GuV"],["n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","n_<wbr>rag_<wbr>examples"],["1","3","3","1","1","3","3","1","1","1","3","3","2","1","1","3","1","1"],["0.98","0.96","0.95","0.95","0.86","0.86","0.85","0.83","0.76","0.71","0.71","0.69","0.67","0.65","0.6","0.59","0.47","0.46"],["686","279","279","593","492","269","2733","187","492","868","2393","2733","1660","205","493","494","232","1725"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>metric type<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>f1 score<\/th>\n      <th>runtime in s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-left"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"metric type","targets":3},{"name":"method family","targets":4},{"name":"n examples","targets":5},{"name":"f1 score","targets":6},{"name":"runtime in s","targets":7}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<p>Figure
<a href="appendix.html#fig:performance-over-runtime-multi-classification-mistral-vs-llama-scout">8.16</a>
shows, the micro averaged F1 score for the three minority classes over
the normalized runtime for two models. It shows the results for the
different prompting strategies (<em>method_families</em>) with differently
colored shapes.</p>
<p>The shape is giving information, if the examples provided to the
<a href="glossary.html#acronyms_LLM">LLM</a>, are exclusively selected from other companies than the target
table comes from, or if they can also be selected from documents of the
same company. This is only relevant for strategies that get the examples
picked by the documents vector embedding distances (<em>top_n_rag_examples</em>
and <em>n_rag_examples</em>). The <a href="glossary.html#acronyms_LLM">LLM</a> performs better, if examples from
documents of the same company can be used.</p>
<p>The number inside of the shapes is referring to the <em>n_examples</em>
function parameter. Most models got benchmarked with an <em>n_examples</em>
value of up to three. The actual number of examples provided to the
models is depending on the method family / example selection strategy
and can be looked up in Table
<a href="#tab:comparing-actual-number-of-in-context-examples">9.1</a>.</p>
<p><em>n_rag_examples</em> better for Llama 4 Scout than <em>n_random_examples</em> ; For
Ministral it is depending on the <em>out_of_company</em> setting</p>
<p>On can see, that Ministral–8B 2410 reaches a good performance already
with few examples, but only if <em>out_of_company</em> is false. It performs
moderate with the <em>law-context</em> strategy and <em>zero_shot</em>, too. Adding
more examples does not improve the performance. Best with
<em>top_n_rag_examples</em></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="appendix.html#cb81-1" tabindex="-1"></a>df_selected <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(metric_type <span class="sc">==</span> <span class="st">&quot;micro_minorities&quot;</span>)</span>
<span id="cb81-2"><a href="appendix.html#cb81-2" tabindex="-1"></a></span>
<span id="cb81-3"><a href="appendix.html#cb81-3" tabindex="-1"></a>df_selected <span class="sc">%&gt;%</span> </span>
<span id="cb81-4"><a href="appendix.html#cb81-4" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb81-5"><a href="appendix.html#cb81-5" tabindex="-1"></a>    <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>,</span>
<span id="cb81-6"><a href="appendix.html#cb81-6" tabindex="-1"></a>    <span class="co"># &quot;Mistral-Large-Instruct-2411&quot;,</span></span>
<span id="cb81-7"><a href="appendix.html#cb81-7" tabindex="-1"></a>    <span class="co"># &quot;Mistral-Small-3.1-24B-Instruct-2503&quot;,</span></span>
<span id="cb81-8"><a href="appendix.html#cb81-8" tabindex="-1"></a>    <span class="st">&quot;Llama-4-Scout-17B-16E-Instruct&quot;</span></span>
<span id="cb81-9"><a href="appendix.html#cb81-9" tabindex="-1"></a>    <span class="co"># &quot;Llama-4-Maverick-17B-128E-Instruct-FP8&quot;</span></span>
<span id="cb81-10"><a href="appendix.html#cb81-10" tabindex="-1"></a>  ),</span>
<span id="cb81-11"><a href="appendix.html#cb81-11" tabindex="-1"></a>  loop <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb81-12"><a href="appendix.html#cb81-12" tabindex="-1"></a>  n_examples <span class="sc">&lt;=</span> <span class="dv">9</span></span>
<span id="cb81-13"><a href="appendix.html#cb81-13" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-14"><a href="appendix.html#cb81-14" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb81-15"><a href="appendix.html#cb81-15" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb81-16"><a href="appendix.html#cb81-16" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb81-17"><a href="appendix.html#cb81-17" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb81-18"><a href="appendix.html#cb81-18" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model<span class="sc">~</span>metric_type) <span class="sc">+</span></span>
<span id="cb81-19"><a href="appendix.html#cb81-19" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> method_familiy_colors) <span class="sc">+</span></span>
<span id="cb81-20"><a href="appendix.html#cb81-20" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>) <span class="co">#+</span></span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:performance-over-runtime-multi-classification-mistral-vs-llama-scout"></span>
<img src="_main_files/figure-html/performance-over-runtime-multi-classification-mistral-vs-llama-scout-1.png" alt="Comparing F1 score micro averaged for the minority classes for two models over their normalized runtime." width="100%" />
<p class="caption">
Figure 8.16: Comparing F1 score micro averaged for the minority classes for two models over their normalized runtime.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="appendix.html#cb82-1" tabindex="-1"></a>  <span class="co"># theme(legend.position = &quot;bottom&quot;) +</span></span>
<span id="cb82-2"><a href="appendix.html#cb82-2" tabindex="-1"></a>  <span class="co"># guides(</span></span>
<span id="cb82-3"><a href="appendix.html#cb82-3" tabindex="-1"></a>  <span class="co">#   color = guide_legend(ncol = 1, title.position = &quot;top&quot;),</span></span>
<span id="cb82-4"><a href="appendix.html#cb82-4" tabindex="-1"></a>  <span class="co">#   shape = guide_legend(ncol = 1, title.position = &quot;top&quot;)</span></span>
<span id="cb82-5"><a href="appendix.html#cb82-5" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb82-6"><a href="appendix.html#cb82-6" tabindex="-1"></a>  <span class="co"># scale_x_discrete(guide = guide_axis(angle = 30))</span></span></code></pre></div>
</details>
<div id="confidence-4" class="section level5 hasAnchor paragraph-start" number="8.1.3.2.1">
<h5><span class="header-section-number">8.1.3.2.1</span> Confidence<a href="appendix.html#confidence-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="appendix.html#fig:confidence-match-plot-llama-multi">8.17</a> shows the reported
confidence scores for the predictions for the best performing
model-strategy combination, Llama 4 Scout with <em>3_rag_examples</em>. It is
confident for most correct predictions and only misclassifies some of
the pages with unknown characteristics. The target types are all
recognized correct. All confidences are greater than 0.5. Probably
because there is no case where the confidences for all possible classes
is below 0.5 and there always is a most probable class. It would have
been interesting to use the classification framework of <a href="glossary.html#acronyms_vllm">vLLM</a> to
get predictions for all competing classes. But this requires special
trained models with pooling capability<a href="#fn34" class="footnote-ref" id="fnref34"><sup>34</sup></a>.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="appendix.html#cb83-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_selected <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="appendix.html#cb83-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb83-3"><a href="appendix.html#cb83-3" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb83-4"><a href="appendix.html#cb83-4" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb83-5"><a href="appendix.html#cb83-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb83-6"><a href="appendix.html#cb83-6" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb83-7"><a href="appendix.html#cb83-7" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb83-8"><a href="appendix.html#cb83-8" tabindex="-1"></a>  )</span>
<span id="cb83-9"><a href="appendix.html#cb83-9" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb83-10"><a href="appendix.html#cb83-10" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span>
<span id="cb83-11"><a href="appendix.html#cb83-11" tabindex="-1"></a></span>
<span id="cb83-12"><a href="appendix.html#cb83-12" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb83-13"><a href="appendix.html#cb83-13" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb83-14"><a href="appendix.html#cb83-14" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb83-15"><a href="appendix.html#cb83-15" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb83-16"><a href="appendix.html#cb83-16" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb83-17"><a href="appendix.html#cb83-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb83-18"><a href="appendix.html#cb83-18" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb83-19"><a href="appendix.html#cb83-19" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:confidence-match-plot-llama-multi"></span>
<img src="_main_files/figure-html/confidence-match-plot-llama-multi-1.png" alt="Showing the reported confidence scores for all predictions of Llama 4 Scout grouped by the true target type. Errors have only been made within the majority class." width="100%" />
<p class="caption">
Figure 8.17: Showing the reported confidence scores for all predictions of Llama 4 Scout grouped by the true target type. Errors have only been made within the majority class.
</p>
</div>
<p>Figure <a href="appendix.html#fig:confidence-match-plot-mistral-multi">8.18</a> shows the reported
confidence scores for the predictions for the best performing
model-strategy combination among the small models limited to
<em>n_examples</em> with n smaller five<a href="#fn35" class="footnote-ref" id="fnref35"><sup>35</sup></a>,
Ministral-8B-Instruct-2410 with <em>3_rag_examples</em>. One can see there are
some wrong classifications for the minority classes as well. Especially,
the <strong>Passiva</strong> target type is often classified as <em>other</em>. This is
problematic for a smooth workflow (see discussion chapter?)</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="appendix.html#cb84-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_selected <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb84-2"><a href="appendix.html#cb84-2" tabindex="-1"></a>  model <span class="sc">==</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, </span>
<span id="cb84-3"><a href="appendix.html#cb84-3" tabindex="-1"></a>  method <span class="sc">==</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb84-4"><a href="appendix.html#cb84-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb84-5"><a href="appendix.html#cb84-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb84-6"><a href="appendix.html#cb84-6" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb84-7"><a href="appendix.html#cb84-7" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb84-8"><a href="appendix.html#cb84-8" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-9"><a href="appendix.html#cb84-9" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb84-10"><a href="appendix.html#cb84-10" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb84-11"><a href="appendix.html#cb84-11" tabindex="-1"></a>  )</span>
<span id="cb84-12"><a href="appendix.html#cb84-12" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb84-13"><a href="appendix.html#cb84-13" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span>
<span id="cb84-14"><a href="appendix.html#cb84-14" tabindex="-1"></a></span>
<span id="cb84-15"><a href="appendix.html#cb84-15" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb84-16"><a href="appendix.html#cb84-16" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb84-17"><a href="appendix.html#cb84-17" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb84-18"><a href="appendix.html#cb84-18" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb84-19"><a href="appendix.html#cb84-19" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb84-20"><a href="appendix.html#cb84-20" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb84-21"><a href="appendix.html#cb84-21" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb84-22"><a href="appendix.html#cb84-22" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:confidence-match-plot-mistral-multi"></span>
<img src="_main_files/figure-html/confidence-match-plot-mistral-multi-1.png" alt="Showing the reported confidence scores for all predictions of Ministral 8B grouped by the true target type. Errors have only been made within the majority class." width="100%" />
<p class="caption">
Figure 8.18: Showing the reported confidence scores for all predictions of Ministral 8B grouped by the true target type. Errors have only been made within the majority class.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="appendix.html#cb85-1" tabindex="-1"></a>plot_pr_double_curve_multi <span class="ot">&lt;-</span> <span class="cf">function</span>(df, selected_type, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb85-2"><a href="appendix.html#cb85-2" tabindex="-1"></a>  df_temp2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="appendix.html#cb85-3" tabindex="-1"></a>    <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> </span>
<span id="cb85-4"><a href="appendix.html#cb85-4" tabindex="-1"></a>    <span class="fu">select</span>(type, predicted_type, confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="appendix.html#cb85-5" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb85-6"><a href="appendix.html#cb85-6" tabindex="-1"></a>      <span class="at">type =</span> <span class="fu">if_else</span>(type <span class="sc">==</span> selected_type, type, <span class="st">&quot;no&quot;</span>),</span>
<span id="cb85-7"><a href="appendix.html#cb85-7" tabindex="-1"></a>      <span class="at">predicted_type =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> selected_type, predicted_type, <span class="st">&quot;no&quot;</span>)</span>
<span id="cb85-8"><a href="appendix.html#cb85-8" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb85-9"><a href="appendix.html#cb85-9" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">factor</span>(type, <span class="at">levels =</span> <span class="fu">c</span>(selected_type, <span class="st">&quot;no&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb85-10"><a href="appendix.html#cb85-10" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb85-11"><a href="appendix.html#cb85-11" tabindex="-1"></a>      <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score)</span>
<span id="cb85-12"><a href="appendix.html#cb85-12" tabindex="-1"></a>    )</span>
<span id="cb85-13"><a href="appendix.html#cb85-13" tabindex="-1"></a></span>
<span id="cb85-14"><a href="appendix.html#cb85-14" tabindex="-1"></a>  </span>
<span id="cb85-15"><a href="appendix.html#cb85-15" tabindex="-1"></a>  <span class="co"># Precision-Recall Curve with ggplot2</span></span>
<span id="cb85-16"><a href="appendix.html#cb85-16" tabindex="-1"></a>  </span>
<span id="cb85-17"><a href="appendix.html#cb85-17" tabindex="-1"></a>  pr_df <span class="ot">&lt;-</span> df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_curve</span>(type, confidence_score) <span class="sc">%&gt;%</span></span>
<span id="cb85-18"><a href="appendix.html#cb85-18" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">threshold =</span> .threshold) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold<span class="sc">&lt;=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb85-19"><a href="appendix.html#cb85-19" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall))</span>
<span id="cb85-20"><a href="appendix.html#cb85-20" tabindex="-1"></a>  </span>
<span id="cb85-21"><a href="appendix.html#cb85-21" tabindex="-1"></a>  pr_auc <span class="ot">&lt;-</span> <span class="fu">round</span>(df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_auc</span>(type, confidence_score) <span class="sc">%&gt;%</span> .<span class="sc">$</span>.estimate, <span class="dv">3</span>)</span>
<span id="cb85-22"><a href="appendix.html#cb85-22" tabindex="-1"></a>  best_F1_row <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb85-23"><a href="appendix.html#cb85-23" tabindex="-1"></a>  best_F1_row_high_recall <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> </span>
<span id="cb85-24"><a href="appendix.html#cb85-24" tabindex="-1"></a>    <span class="fu">filter</span>(recall <span class="sc">&gt;</span> <span class="fl">0.999</span>, precision <span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb85-25"><a href="appendix.html#cb85-25" tabindex="-1"></a>  best_F1 <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb85-26"><a href="appendix.html#cb85-26" tabindex="-1"></a>  best_F1_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb85-27"><a href="appendix.html#cb85-27" tabindex="-1"></a>  best_threshold <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb85-28"><a href="appendix.html#cb85-28" tabindex="-1"></a>  best_threshold_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb85-29"><a href="appendix.html#cb85-29" tabindex="-1"></a>  best_precision_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(precision)</span>
<span id="cb85-30"><a href="appendix.html#cb85-30" tabindex="-1"></a>  </span>
<span id="cb85-31"><a href="appendix.html#cb85-31" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb85-32"><a href="appendix.html#cb85-32" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision)) <span class="sc">+</span></span>
<span id="cb85-33"><a href="appendix.html#cb85-33" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> threshold), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb85-34"><a href="appendix.html#cb85-34" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb85-35"><a href="appendix.html#cb85-35" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb85-36"><a href="appendix.html#cb85-36" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;Precision-Recall Curve for &quot;</span>, selected_type, <span class="st">&quot; (AUC = &quot;</span>, pr_auc, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb85-37"><a href="appendix.html#cb85-37" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb85-38"><a href="appendix.html#cb85-38" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Precision&quot;</span></span>
<span id="cb85-39"><a href="appendix.html#cb85-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb85-40"><a href="appendix.html#cb85-40" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb85-41"><a href="appendix.html#cb85-41" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb85-42"><a href="appendix.html#cb85-42" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb85-43"><a href="appendix.html#cb85-43" tabindex="-1"></a>    )</span>
<span id="cb85-44"><a href="appendix.html#cb85-44" tabindex="-1"></a>  </span>
<span id="cb85-45"><a href="appendix.html#cb85-45" tabindex="-1"></a>  g2 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb85-46"><a href="appendix.html#cb85-46" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision, <span class="at">color =</span> f1)) <span class="sc">+</span></span>
<span id="cb85-47"><a href="appendix.html#cb85-47" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb85-48"><a href="appendix.html#cb85-48" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb85-49"><a href="appendix.html#cb85-49" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb85-50"><a href="appendix.html#cb85-50" tabindex="-1"></a>      <span class="co"># title = &quot;Precision-Recall Curve colored by F1 score&quot;,</span></span>
<span id="cb85-51"><a href="appendix.html#cb85-51" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb85-52"><a href="appendix.html#cb85-52" tabindex="-1"></a>      <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb85-53"><a href="appendix.html#cb85-53" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;F1 score&quot;</span></span>
<span id="cb85-54"><a href="appendix.html#cb85-54" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb85-55"><a href="appendix.html#cb85-55" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb85-56"><a href="appendix.html#cb85-56" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb85-57"><a href="appendix.html#cb85-57" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb85-58"><a href="appendix.html#cb85-58" tabindex="-1"></a>    ) </span>
<span id="cb85-59"><a href="appendix.html#cb85-59" tabindex="-1"></a>  </span>
<span id="cb85-60"><a href="appendix.html#cb85-60" tabindex="-1"></a>  <span class="cf">if</span> (x_stuff <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb85-61"><a href="appendix.html#cb85-61" tabindex="-1"></a>    g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb85-62"><a href="appendix.html#cb85-62" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb85-63"><a href="appendix.html#cb85-63" tabindex="-1"></a>    </span>
<span id="cb85-64"><a href="appendix.html#cb85-64" tabindex="-1"></a>    g2 <span class="ot">&lt;-</span> g2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb85-65"><a href="appendix.html#cb85-65" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb85-66"><a href="appendix.html#cb85-66" tabindex="-1"></a>  }</span>
<span id="cb85-67"><a href="appendix.html#cb85-67" tabindex="-1"></a>  </span>
<span id="cb85-68"><a href="appendix.html#cb85-68" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> g1 <span class="sc">+</span> g2</span>
<span id="cb85-69"><a href="appendix.html#cb85-69" tabindex="-1"></a>  combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb85-70"><a href="appendix.html#cb85-70" tabindex="-1"></a>    <span class="st">&#39;Best F1 score of &#39;</span>, <span class="fu">round</span>(best_F1,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold,<span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb85-71"><a href="appendix.html#cb85-71" tabindex="-1"></a>    <span class="st">&#39;Best F1 score with recall &gt; 0.999 of &#39;</span>, <span class="fu">round</span>(best_F1_high_recall,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold_high_recall,<span class="dv">3</span>), <span class="st">&#39; (corresp. precision value: &#39;</span>, <span class="fu">round</span>(best_precision_high_recall,<span class="dv">3</span>) , <span class="st">&#39;)&#39;</span>))</span>
<span id="cb85-72"><a href="appendix.html#cb85-72" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>Figure <a href="appendix.html#fig:micro-pr-curve-llm-multi-ministral">8.19</a> shows the
precision-recall-curve for Ministral-8B-Instruct-2410 with
<em>3_rag_examples</em> twice for each target type. On the left plots the line
color represents the threshold score one could use to decide when to
accept a response as it is. On the right plots the line color is showing
the F1 score that results with a chosen threshold.</p>
<p>The <a href="glossary.html#acronyms_AUC">AUC</a> is highest for <strong>GuV</strong> again. But for the multi-class
classification <strong>Passiva</strong> shows the lowest <a href="glossary.html#acronyms_AUC">AUC</a>, not <strong>Aktiva</strong> as
it was in the binary classification task. The precision-recall-curve for
<strong>Aktiva</strong> and **Passiva*+ show a “step” in the area of high recall.
This has a strong effect on the threshold one should choose, if one
wants to guarantee a high recall. The corresponding precision values of
0.2 and 0.13 mean that a human has to check five to eight pages in
average to get a correct classified page of type <strong>Aktiva</strong> and
<strong>Passiva</strong>.</p>
<p>The corresponding plot for the best performing model,
Llama-4-Scout-17B-16E-Instruct, can be found in Figure
<a href="figures.html#fig:micro-pr-curve-llm-multi-llama-scout">10.8</a>. Here the
precision-recall-curve for <strong>Passiva</strong> and <strong>GuV</strong> is almost perfect.
Just the single prediction for <strong>Aktiva</strong> wit a lower confidence shows
an influence on the precision-recall-curve.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="appendix.html#cb86-1" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span></span>
<span id="cb86-2"><a href="appendix.html#cb86-2" tabindex="-1"></a>method_name <span class="ot">&lt;-</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb86-3"><a href="appendix.html#cb86-3" tabindex="-1"></a></span>
<span id="cb86-4"><a href="appendix.html#cb86-4" tabindex="-1"></a>df_temp_mistral_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="appendix.html#cb86-5" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb86-6"><a href="appendix.html#cb86-6" tabindex="-1"></a>    model <span class="sc">==</span> model_name,</span>
<span id="cb86-7"><a href="appendix.html#cb86-7" tabindex="-1"></a>    method <span class="sc">==</span> method_name</span>
<span id="cb86-8"><a href="appendix.html#cb86-8" tabindex="-1"></a>  ) <span class="co"># %&gt;% unnest(metrics) # %&gt;% calc_micro_f1(model, method)</span></span>
<span id="cb86-9"><a href="appendix.html#cb86-9" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb86-10"><a href="appendix.html#cb86-10" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb86-11"><a href="appendix.html#cb86-11" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb86-12"><a href="appendix.html#cb86-12" tabindex="-1"></a><span class="co"># p_other &lt;- df_temp_mistral_multi %&gt;% plot_pr_double_curve_multi(&quot;other&quot;, x_stuff = TRUE)</span></span>
<span id="cb86-13"><a href="appendix.html#cb86-13" tabindex="-1"></a></span>
<span id="cb86-14"><a href="appendix.html#cb86-14" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb86-15"><a href="appendix.html#cb86-15" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb86-16"><a href="appendix.html#cb86-16" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model, <span class="st">&quot; with &quot;</span>, method))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:micro-pr-curve-llm-multi-ministral"></span>
<img src="_main_files/figure-html/micro-pr-curve-llm-multi-ministral-1.png" alt="Showing the precsion-recall-curve for Ministral-8B-Instruct-2410." width="100%" />
<p class="caption">
Figure 8.19: Showing the precsion-recall-curve for Ministral-8B-Instruct-2410.
</p>
</div>
<p>Figure <a href="appendix.html#fig:table-identification-llm-confidence-multi">8.20</a> summarizes
the relation between reported confidence and correctness of the
classification for all target types and compares it among the best
performing model-strategy combinations for
Llama-4-Scout-17B-16E-Instruct, Ministral-8B-Instruct-2410 and Qwen3-8B.
It seems, as the reported confidence for correct and incorrect
classifications are separable in most cases for Mistral-8B. For Llama 4
Scout this seems not true for the target type <strong>GuV</strong>. For Qwen3-8B
there is almost no separation at all.</p>
<p>Figure <a href="appendix.html#fig:table-identification-llm-confidence-lm-multi">8.21</a> shows,
that there is almost no area, where the empirical rate of wrong
classifications is zero<a href="#fn36" class="footnote-ref" id="fnref36"><sup>36</sup></a>. Only for Ministral-8B we find
intervals, where a human don’t has to double check the classification
for target types <strong>Aktiva</strong> and <strong>GuV</strong>. These intervals include 90 % of
all predictions. If error rates of 1 % are accepted almost all
predictions by Llama Scout 4 and about 96 % of the predictions by
Ministral-8B are included in the corresponding intervals. For Qwen3-8B
we find no interval without an error rate below 1 %.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="appendix.html#cb87-1" tabindex="-1"></a>confidence_vs_truth_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb87-2"><a href="appendix.html#cb87-2" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Llama-4-Scout-17B-16E-Instruct&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="appendix.html#cb87-3" tabindex="-1"></a>  <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="appendix.html#cb87-4" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model, metric_type) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb87-5"><a href="appendix.html#cb87-5" tabindex="-1"></a>    <span class="at">mean_f1 =</span> <span class="fu">mean</span>(f1_score, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span></span>
<span id="cb87-6"><a href="appendix.html#cb87-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, metric_type) <span class="sc">%&gt;%</span> </span>
<span id="cb87-7"><a href="appendix.html#cb87-7" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_f1)) <span class="sc">%&gt;%</span> </span>
<span id="cb87-8"><a href="appendix.html#cb87-8" tabindex="-1"></a>  <span class="fu">slice_max</span>(mean_f1, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb87-9"><a href="appendix.html#cb87-9" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb87-10"><a href="appendix.html#cb87-10" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb87-11"><a href="appendix.html#cb87-11" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb87-12"><a href="appendix.html#cb87-12" tabindex="-1"></a>    <span class="co"># truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb87-13"><a href="appendix.html#cb87-13" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(metric_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="st">&quot;Passiva&quot;</span>, <span class="st">&quot;GuV&quot;</span>))</span>
<span id="cb87-14"><a href="appendix.html#cb87-14" tabindex="-1"></a></span>
<span id="cb87-15"><a href="appendix.html#cb87-15" tabindex="-1"></a>confidence_vs_truth_multi <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb87-16"><a href="appendix.html#cb87-16" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb87-17"><a href="appendix.html#cb87-17" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence_score, <span class="at">fill =</span> metric_type), </span>
<span id="cb87-18"><a href="appendix.html#cb87-18" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb87-19"><a href="appendix.html#cb87-19" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb87-20"><a href="appendix.html#cb87-20" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb87-21"><a href="appendix.html#cb87-21" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-identification-llm-confidence-multi"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-multi-1.png" alt="Comparing the reported confidence scores for the multi-class page identification task for the Mistral and Qwen 3 with 8B parameters." width="100%" />
<p class="caption">
Figure 8.20: Comparing the reported confidence scores for the multi-class page identification task for the Mistral and Qwen 3 with 8B parameters.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="appendix.html#cb88-1" tabindex="-1"></a>confidence_vs_truth_multi <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">confidence =</span> confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb88-2"><a href="appendix.html#cb88-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-3"><a href="appendix.html#cb88-3" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb88-4"><a href="appendix.html#cb88-4" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb88-5"><a href="appendix.html#cb88-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb88-6"><a href="appendix.html#cb88-6" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, metric_type, model) <span class="sc">%&gt;%</span></span>
<span id="cb88-7"><a href="appendix.html#cb88-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb88-8"><a href="appendix.html#cb88-8" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb88-9"><a href="appendix.html#cb88-9" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb88-10"><a href="appendix.html#cb88-10" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb88-11"><a href="appendix.html#cb88-11" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb88-12"><a href="appendix.html#cb88-12" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb88-13"><a href="appendix.html#cb88-13" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb88-14"><a href="appendix.html#cb88-14" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb88-15"><a href="appendix.html#cb88-15" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb88-16"><a href="appendix.html#cb88-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(metric_type, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb88-17"><a href="appendix.html#cb88-17" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb88-18"><a href="appendix.html#cb88-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb88-19"><a href="appendix.html#cb88-19" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb88-20"><a href="appendix.html#cb88-20" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb88-21"><a href="appendix.html#cb88-21" tabindex="-1"></a>      chance_false,</span>
<span id="cb88-22"><a href="appendix.html#cb88-22" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb88-23"><a href="appendix.html#cb88-23" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb88-24"><a href="appendix.html#cb88-24" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb88-25"><a href="appendix.html#cb88-25" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb88-26"><a href="appendix.html#cb88-26" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb88-27"><a href="appendix.html#cb88-27" tabindex="-1"></a>    ),</span>
<span id="cb88-28"><a href="appendix.html#cb88-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb88-29"><a href="appendix.html#cb88-29" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb88-30"><a href="appendix.html#cb88-30" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> conf_center, <span class="at">y =</span> perc, <span class="at">color =</span> chance_low, <span class="at">fill =</span> chance_false_interval), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb88-31"><a href="appendix.html#cb88-31" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb88-32"><a href="appendix.html#cb88-32" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb88-33"><a href="appendix.html#cb88-33" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb88-34"><a href="appendix.html#cb88-34" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb88-35"><a href="appendix.html#cb88-35" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb88-36"><a href="appendix.html#cb88-36" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb88-37"><a href="appendix.html#cb88-37" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb88-38"><a href="appendix.html#cb88-38" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb88-39"><a href="appendix.html#cb88-39" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb88-40"><a href="appendix.html#cb88-40" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb88-41"><a href="appendix.html#cb88-41" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb88-42"><a href="appendix.html#cb88-42" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb88-43"><a href="appendix.html#cb88-43" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb88-44"><a href="appendix.html#cb88-44" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb88-45"><a href="appendix.html#cb88-45" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb88-46"><a href="appendix.html#cb88-46" tabindex="-1"></a>  <span class="fu">facet_grid</span>(metric_type <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-identification-llm-confidence-lm-multi"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-lm-multi-1.png" alt="Estimating the relative frequency to find a wrong classification over different confidence intervals for the multi-class classification task." width="100%" />
<p class="caption">
Figure 8.21: Estimating the relative frequency to find a wrong classification over different confidence intervals for the multi-class classification task.
</p>
</div>
</div>
</div>
<div id="tf-classifier" class="section level3 hasAnchor" number="8.1.4">
<h3><span class="header-section-number">8.1.4</span> Term frequency based classifier<a href="appendix.html#tf-classifier" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The fourth approach uses term frequencies for a key word list and the
number of floats to rank pages. The approach is inspired by
<a href="glossary.html#acronyms_TF-IDF">TF-IDF</a> - a technique commonly used for information retrieval. It
is similar to the baseline approach, because it uses a key word list and
regular expressions to count terms and floats. But it is more flexible
because the works in the key word list are not mandatory. This makes the
approach robust against issues in the text extracts for single key
words.</p>
<p>The key word list is generated removing the stop words from the law
about <strong>Aktiva</strong>, <strong>Passiva</strong> and <strong>GuV</strong>. The key words from the
<a href="glossary.html#acronyms_regex">regex</a> approach are added, e.g. <em>GuV</em> and <em>Gewinn- und
Verlustrechnung</em>. Since real life representations of those target types
never contain all entries, it is not possible to include most of those
words in a strict <a href="glossary.html#acronyms_regex">regex</a> search as presented in the first approach.</p>
<p>This approach sums the counts of each word from the key word list per
page in a first variable. In a second variable it counts the number of
floats on each page. These two variables are then divided by the number
of words found on the page. These densities are used to rank all pages
from a single document. This is done with a unique key word list for
each target type.</p>
<p>A random forest is trained to determine which density should be weighted
to what amount. Because of the imbalanced data set undersampling is used
when the training data set is created<a href="#fn37" class="footnote-ref" id="fnref37"><sup>37</sup></a>. A single random
forest is trained because the density of floats and specific words is
assumed to be similar. The actual type of the page is not taken into
account. The model just knows if the page is a page of any target type,
based on the term and float density. This trippels the data points of
the target class.</p>
<p>This single random forest performs much better than random forests that
are trained using the dataset for each target type separatly. The
performance is tested on all data points not included in the
undersampled train dataset. Thus the test dataset is again highly
imbalanced.</p>
<p>The random forest performs a binary classification task. But instead of
the actual classifications, the predicted scores are used to rank the
pages. Instead of precision or recall the metric used for the evaluation
is top k recall. It is of interest which value of k is required to get a
recall of 100 %.</p>
<p>The code can be found at:
“benchmark_jobs/page_identification/term_frequency.ipynb”</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb89"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb89-1"><a href="appendix.html#cb89-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb89-2"><a href="appendix.html#cb89-2" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb89-3"><a href="appendix.html#cb89-3" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb89-4"><a href="appendix.html#cb89-4" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb89-5"><a href="appendix.html#cb89-5" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb89-6"><a href="appendix.html#cb89-6" tabindex="-1"></a></span>
<span id="cb89-7"><a href="appendix.html#cb89-7" tabindex="-1"></a>df_train_us <span class="op">=</span> pd.read_csv(<span class="st">&quot;../benchmark_results/page_identification/term_frequency_table.csv&quot;</span>)</span>
<span id="cb89-8"><a href="appendix.html#cb89-8" tabindex="-1"></a></span>
<span id="cb89-9"><a href="appendix.html#cb89-9" tabindex="-1"></a><span class="co"># Drop rows without ground truth</span></span>
<span id="cb89-10"><a href="appendix.html#cb89-10" tabindex="-1"></a><span class="co"># df_train_us = df_word_counts.merge(df_truth, on=[&quot;filepath&quot;, &quot;type&quot;], how=&quot;left&quot;)</span></span>
<span id="cb89-11"><a href="appendix.html#cb89-11" tabindex="-1"></a>df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">=</span> (df_train_us[<span class="st">&quot;page&quot;</span>] <span class="op">==</span> df_train_us[<span class="st">&quot;page_truth&quot;</span>]).astype(<span class="bu">int</span>)</span>
<span id="cb89-12"><a href="appendix.html#cb89-12" tabindex="-1"></a>df_train_us <span class="op">=</span> df_train_us.dropna(subset<span class="op">=</span>[<span class="st">&quot;page_truth&quot;</span>])</span>
<span id="cb89-13"><a href="appendix.html#cb89-13" tabindex="-1"></a></span>
<span id="cb89-14"><a href="appendix.html#cb89-14" tabindex="-1"></a><span class="co"># Undersample the majority class (is_truth == 0)</span></span>
<span id="cb89-15"><a href="appendix.html#cb89-15" tabindex="-1"></a>df_true <span class="op">=</span> df_train_us[df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb89-16"><a href="appendix.html#cb89-16" tabindex="-1"></a>df_false <span class="op">=</span> df_train_us[df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb89-17"><a href="appendix.html#cb89-17" tabindex="-1"></a>df_false_undersampled <span class="op">=</span> df_false.sample(n<span class="op">=</span><span class="bu">len</span>(df_true), random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb89-18"><a href="appendix.html#cb89-18" tabindex="-1"></a>df_train_us_balanced <span class="op">=</span> pd.concat([df_true, df_false_undersampled]).sample(frac<span class="op">=</span><span class="dv">1</span>, random_state<span class="op">=</span><span class="dv">42</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb89-19"><a href="appendix.html#cb89-19" tabindex="-1"></a><span class="co"># df_train_us_balanced</span></span>
<span id="cb89-20"><a href="appendix.html#cb89-20" tabindex="-1"></a></span>
<span id="cb89-21"><a href="appendix.html#cb89-21" tabindex="-1"></a><span class="co"># Features and target</span></span>
<span id="cb89-22"><a href="appendix.html#cb89-22" tabindex="-1"></a>X <span class="op">=</span> df_train_us_balanced[[<span class="st">&quot;term_frequency&quot;</span>, <span class="st">&quot;float_frequency&quot;</span>]].values</span>
<span id="cb89-23"><a href="appendix.html#cb89-23" tabindex="-1"></a>y <span class="op">=</span> df_train_us_balanced[<span class="st">&quot;is_truth&quot;</span>].values</span>
<span id="cb89-24"><a href="appendix.html#cb89-24" tabindex="-1"></a></span>
<span id="cb89-25"><a href="appendix.html#cb89-25" tabindex="-1"></a><span class="co"># Train-test split (70% train, 30% test)</span></span>
<span id="cb89-26"><a href="appendix.html#cb89-26" tabindex="-1"></a>X_train, X_test, y_train, y_test, df_train_split, df_test_split <span class="op">=</span> train_test_split(</span>
<span id="cb89-27"><a href="appendix.html#cb89-27" tabindex="-1"></a>    X, y, df_train_us_balanced, test_size<span class="op">=</span><span class="fl">0.3</span>, random_state<span class="op">=</span><span class="dv">42</span>, stratify<span class="op">=</span>y</span>
<span id="cb89-28"><a href="appendix.html#cb89-28" tabindex="-1"></a>)</span>
<span id="cb89-29"><a href="appendix.html#cb89-29" tabindex="-1"></a></span>
<span id="cb89-30"><a href="appendix.html#cb89-30" tabindex="-1"></a><span class="co"># Train Random Forest model</span></span>
<span id="cb89-31"><a href="appendix.html#cb89-31" tabindex="-1"></a>clf <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb89-32"><a href="appendix.html#cb89-32" tabindex="-1"></a>clf.fit(X_train, y_train)</span>
<span id="cb89-33"><a href="appendix.html#cb89-33" tabindex="-1"></a>score <span class="op">=</span> clf.score(X_train, y_train)</span>
<span id="cb89-34"><a href="appendix.html#cb89-34" tabindex="-1"></a><span class="co"># print(f&quot;Training accuracy: {score:.2%}&quot;)</span></span>
<span id="cb89-35"><a href="appendix.html#cb89-35" tabindex="-1"></a>score <span class="op">=</span> clf.score(X_test, y_test)</span>
<span id="cb89-36"><a href="appendix.html#cb89-36" tabindex="-1"></a><span class="co"># print(f&quot;Test accuracy: {score:.2%}&quot;)</span></span>
<span id="cb89-37"><a href="appendix.html#cb89-37" tabindex="-1"></a></span>
<span id="cb89-38"><a href="appendix.html#cb89-38" tabindex="-1"></a><span class="co"># Predict and rerank: get predicted probabilities for each page</span></span>
<span id="cb89-39"><a href="appendix.html#cb89-39" tabindex="-1"></a>df_train_split[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(X_train)[:, <span class="dv">1</span>]</span>
<span id="cb89-40"><a href="appendix.html#cb89-40" tabindex="-1"></a>df_test_split[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(X_test)[:, <span class="dv">1</span>]</span>
<span id="cb89-41"><a href="appendix.html#cb89-41" tabindex="-1"></a></span>
<span id="cb89-42"><a href="appendix.html#cb89-42" tabindex="-1"></a><span class="co"># Add all not-chosen negatives from df_false to test split</span></span>
<span id="cb89-43"><a href="appendix.html#cb89-43" tabindex="-1"></a>df_false_unused <span class="op">=</span> df_false.loc[<span class="op">~</span>df_false.index.isin(df_false_undersampled.index)]</span>
<span id="cb89-44"><a href="appendix.html#cb89-44" tabindex="-1"></a>df_false_unused <span class="op">=</span> df_false_unused.copy()</span>
<span id="cb89-45"><a href="appendix.html#cb89-45" tabindex="-1"></a>df_false_unused[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(df_false_unused[[<span class="st">&quot;term_frequency&quot;</span>, <span class="st">&quot;float_frequency&quot;</span>]].values)[:, <span class="dv">1</span>]</span>
<span id="cb89-46"><a href="appendix.html#cb89-46" tabindex="-1"></a>df_false_unused[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> np.nan  <span class="co"># Not ranked yet</span></span>
<span id="cb89-47"><a href="appendix.html#cb89-47" tabindex="-1"></a></span>
<span id="cb89-48"><a href="appendix.html#cb89-48" tabindex="-1"></a><span class="co"># Concatenate with test split</span></span>
<span id="cb89-49"><a href="appendix.html#cb89-49" tabindex="-1"></a>df_test_split <span class="op">=</span> pd.concat([df_test_split, df_false_unused], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb89-50"><a href="appendix.html#cb89-50" tabindex="-1"></a></span>
<span id="cb89-51"><a href="appendix.html#cb89-51" tabindex="-1"></a><span class="co"># For each group (filepath, type), sort by score descending</span></span>
<span id="cb89-52"><a href="appendix.html#cb89-52" tabindex="-1"></a>df_train_split[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> df_train_split.groupby([<span class="st">&quot;filepath&quot;</span>, <span class="st">&quot;type&quot;</span>])[<span class="st">&quot;score&quot;</span>].rank(ascending<span class="op">=</span><span class="va">False</span>, method<span class="op">=</span><span class="st">&quot;first&quot;</span>)</span>
<span id="cb89-53"><a href="appendix.html#cb89-53" tabindex="-1"></a>df_test_split[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> df_test_split.groupby([<span class="st">&quot;filepath&quot;</span>, <span class="st">&quot;type&quot;</span>])[<span class="st">&quot;score&quot;</span>].rank(ascending<span class="op">=</span><span class="va">False</span>, method<span class="op">=</span><span class="st">&quot;first&quot;</span>)</span></code></pre></div>
</details>
<ul>
<li>top 1</li>
<li>top k</li>
</ul>
<p>low precision llm linked to position of correct page? numeric frequency?</p>
<p>Figure <a href="appendix.html#fig:forest-map-tf-2-predictors">8.22</a> shows how the test data
points are distributed in the two dimensional value map for the random
forest with two predictors. The target pages have a <em>float_frequncy</em>
between 0.2 and 0.5 and pages with a <em>term_frequency</em> value over 0.07
get classified as target. One target page shows a lower <em>term_frequency</em>
and thus does not get ranked correct. (recall, precision?)</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb90"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb90-1"><a href="appendix.html#cb90-1" tabindex="-1"></a><span class="im">import</span> shap</span>
<span id="cb90-2"><a href="appendix.html#cb90-2" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb90-3"><a href="appendix.html#cb90-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb90-4"><a href="appendix.html#cb90-4" tabindex="-1"></a></span>
<span id="cb90-5"><a href="appendix.html#cb90-5" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb90-6"><a href="appendix.html#cb90-6" tabindex="-1"></a><span class="im">from</span> sklearn.inspection <span class="im">import</span> DecisionBoundaryDisplay</span>
<span id="cb90-7"><a href="appendix.html#cb90-7" tabindex="-1"></a><span class="im">from</span> matplotlib.colors <span class="im">import</span> ListedColormap</span>
<span id="cb90-8"><a href="appendix.html#cb90-8" tabindex="-1"></a></span>
<span id="cb90-9"><a href="appendix.html#cb90-9" tabindex="-1"></a>predictors <span class="op">=</span> [</span>
<span id="cb90-10"><a href="appendix.html#cb90-10" tabindex="-1"></a>    <span class="st">&quot;term_frequency&quot;</span>, </span>
<span id="cb90-11"><a href="appendix.html#cb90-11" tabindex="-1"></a>    <span class="st">&quot;float_frequency&quot;</span>, </span>
<span id="cb90-12"><a href="appendix.html#cb90-12" tabindex="-1"></a>    <span class="st">&quot;date_count&quot;</span>, </span>
<span id="cb90-13"><a href="appendix.html#cb90-13" tabindex="-1"></a>    <span class="st">&quot;integer_count&quot;</span></span>
<span id="cb90-14"><a href="appendix.html#cb90-14" tabindex="-1"></a>]</span>
<span id="cb90-15"><a href="appendix.html#cb90-15" tabindex="-1"></a></span>
<span id="cb90-16"><a href="appendix.html#cb90-16" tabindex="-1"></a>clf <span class="op">=</span> pickle.load(<span class="bu">open</span>(<span class="st">&#39;data_storage/rf-tf-2preds.sav&#39;</span>, <span class="st">&#39;rb&#39;</span>))</span>
<span id="cb90-17"><a href="appendix.html#cb90-17" tabindex="-1"></a>df_test_split <span class="op">=</span> pd.read_csv(<span class="st">&quot;data_storage/term_frequency_results_2_predictors_test.csv&quot;</span>)</span>
<span id="cb90-18"><a href="appendix.html#cb90-18" tabindex="-1"></a></span>
<span id="cb90-19"><a href="appendix.html#cb90-19" tabindex="-1"></a></span>
<span id="cb90-20"><a href="appendix.html#cb90-20" tabindex="-1"></a>X <span class="op">=</span> df_test_split[[<span class="st">&quot;term_frequency&quot;</span>, <span class="st">&quot;float_frequency&quot;</span>]].values</span>
<span id="cb90-21"><a href="appendix.html#cb90-21" tabindex="-1"></a></span>
<span id="cb90-22"><a href="appendix.html#cb90-22" tabindex="-1"></a>cm <span class="op">=</span> plt.cm.RdBu</span>
<span id="cb90-23"><a href="appendix.html#cb90-23" tabindex="-1"></a>cm_bright <span class="op">=</span> ListedColormap([<span class="st">&quot;#FF0000&quot;</span>, <span class="st">&quot;#0000FF&quot;</span>])</span>
<span id="cb90-24"><a href="appendix.html#cb90-24" tabindex="-1"></a>x_min, x_max <span class="op">=</span> X[:, <span class="dv">0</span>].<span class="bu">min</span>() <span class="op">-</span> <span class="fl">0.05</span>, X[:, <span class="dv">0</span>].<span class="bu">max</span>() <span class="op">+</span> <span class="fl">0.05</span></span>
<span id="cb90-25"><a href="appendix.html#cb90-25" tabindex="-1"></a>y_min, y_max <span class="op">=</span> X[:, <span class="dv">1</span>].<span class="bu">min</span>() <span class="op">-</span> <span class="fl">0.05</span>, X[:, <span class="dv">1</span>].<span class="bu">max</span>() <span class="op">+</span> <span class="fl">0.05</span></span>
<span id="cb90-26"><a href="appendix.html#cb90-26" tabindex="-1"></a></span>
<span id="cb90-27"><a href="appendix.html#cb90-27" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">6</span>))</span>
<span id="cb90-28"><a href="appendix.html#cb90-28" tabindex="-1"></a>ax <span class="op">=</span> plt.gca()</span>
<span id="cb90-29"><a href="appendix.html#cb90-29" tabindex="-1"></a>catch_this_message <span class="op">=</span>DecisionBoundaryDisplay.from_estimator(</span>
<span id="cb90-30"><a href="appendix.html#cb90-30" tabindex="-1"></a>    clf, X, cmap<span class="op">=</span>cm, alpha<span class="op">=</span><span class="fl">0.8</span>, ax<span class="op">=</span>ax, eps<span class="op">=</span><span class="fl">0.05</span></span>
<span id="cb90-31"><a href="appendix.html#cb90-31" tabindex="-1"></a>)</span>
<span id="cb90-32"><a href="appendix.html#cb90-32" tabindex="-1"></a></span>
<span id="cb90-33"><a href="appendix.html#cb90-33" tabindex="-1"></a>df_test_split_sorted <span class="op">=</span> df_test_split.sort_values(<span class="st">&#39;is_truth&#39;</span>)</span>
<span id="cb90-34"><a href="appendix.html#cb90-34" tabindex="-1"></a>X_test <span class="op">=</span> df_test_split_sorted[[<span class="st">&quot;term_frequency&quot;</span>, <span class="st">&quot;float_frequency&quot;</span>]].values</span>
<span id="cb90-35"><a href="appendix.html#cb90-35" tabindex="-1"></a>y_test <span class="op">=</span> df_test_split_sorted[<span class="st">&quot;is_truth&quot;</span>].values</span>
<span id="cb90-36"><a href="appendix.html#cb90-36" tabindex="-1"></a>score <span class="op">=</span> clf.score(X_test, y_test)</span>
<span id="cb90-37"><a href="appendix.html#cb90-37" tabindex="-1"></a></span>
<span id="cb90-38"><a href="appendix.html#cb90-38" tabindex="-1"></a><span class="co"># ax.scatter(X_train[:, 0], X_train[:, 1], c=y_train, cmap=cm_bright, edgecolors=&quot;k&quot;, label=&quot;Train&quot;)</span></span>
<span id="cb90-39"><a href="appendix.html#cb90-39" tabindex="-1"></a>ax.scatter(X_test[:, <span class="dv">0</span>], X_test[:, <span class="dv">1</span>], c<span class="op">=</span>y_test, cmap<span class="op">=</span>cm_bright, alpha<span class="op">=</span><span class="fl">0.6</span>, edgecolors<span class="op">=</span><span class="st">&quot;k&quot;</span>, label<span class="op">=</span><span class="st">&quot;Test&quot;</span>)</span>
<span id="cb90-40"><a href="appendix.html#cb90-40" tabindex="-1"></a>catch_this_message <span class="op">=</span>ax.set_xlim(x_min, x_max)</span>
<span id="cb90-41"><a href="appendix.html#cb90-41" tabindex="-1"></a>catch_this_message <span class="op">=</span>ax.set_ylim(y_min, y_max)</span>
<span id="cb90-42"><a href="appendix.html#cb90-42" tabindex="-1"></a>ax.set_xlabel(<span class="st">&quot;term_frequency&quot;</span>)</span>
<span id="cb90-43"><a href="appendix.html#cb90-43" tabindex="-1"></a>ax.set_ylabel(<span class="st">&quot;float_frequency&quot;</span>)</span>
<span id="cb90-44"><a href="appendix.html#cb90-44" tabindex="-1"></a>ax.set_title(<span class="ss">f&quot;RandomForestClassifier (accuracy=</span><span class="sc">{</span>score<span class="sc">:.2f}</span><span class="ss">)&quot;</span>)</span>
<span id="cb90-45"><a href="appendix.html#cb90-45" tabindex="-1"></a>plt.legend()</span>
<span id="cb90-46"><a href="appendix.html#cb90-46" tabindex="-1"></a>plt.show()</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:forest-map-tf-2-predictors"></span>
<img src="_main_files/figure-html/forest-map-tf-2-predictors-1.png" alt="Classification map showing which score a data point gets based on its term and float frequency and which type the data points in the test dataset actually have." width="768" />
<p class="caption">
Figure 8.22: Classification map showing which score a data point gets based on its term and float frequency and which type the data points in the test dataset actually have.
</p>
</div>
<p>A second random forest is trained supplementing the two predictors <em>term
density</em> and <em>float density</em> with two additional predictors: <em>date
count</em> and <em>integer count</em>. Figure
<a href="appendix.html#fig:top-n-recall-term-frequency">8.23</a> shows the top n recall for both
random forests. On the left side the top n recall on the imbalanced test
dataset is shown. On the right side the performance on the train
dataset.</p>
<p>Both random forests perform similar on the train dataset. The random
forest with four predictors reaches perfect recall faster for <strong>Aktiva</strong>
on the test dataset. Thus, with <span class="math inline">\(n = 5\)</span> 100 % recall is reached for the
random forest with four predictors. With the random forest with two
predictors it needs <span class="math inline">\(n = 7\)</span>.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="appendix.html#cb91-1" tabindex="-1"></a>df_2_predictors_test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;/home/simon/Documents/data_science/Thesis/benchmark_results/page_identification/term_frequency_results_2_predictors_test.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="appendix.html#cb91-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_split =</span> <span class="st">&#39;test&#39;</span>, <span class="at">n_predictors =</span> <span class="dv">2</span>)</span>
<span id="cb91-3"><a href="appendix.html#cb91-3" tabindex="-1"></a>df_2_predictors_train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;/home/simon/Documents/data_science/Thesis/benchmark_results/page_identification/term_frequency_results_2_predictors_train.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="appendix.html#cb91-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_split =</span> <span class="st">&#39;train&#39;</span>, <span class="at">n_predictors =</span> <span class="dv">2</span>)</span>
<span id="cb91-5"><a href="appendix.html#cb91-5" tabindex="-1"></a>df_4_predictors_test <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;/home/simon/Documents/data_science/Thesis/benchmark_results/page_identification/term_frequency_results_4_predictors_test.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-6"><a href="appendix.html#cb91-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_split =</span> <span class="st">&#39;test&#39;</span>, <span class="at">n_predictors =</span> <span class="dv">4</span>)</span>
<span id="cb91-7"><a href="appendix.html#cb91-7" tabindex="-1"></a>df_4_predictors_train <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;/home/simon/Documents/data_science/Thesis/benchmark_results/page_identification/term_frequency_results_4_predictors_train.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-8"><a href="appendix.html#cb91-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">data_split =</span> <span class="st">&#39;train&#39;</span>, <span class="at">n_predictors =</span> <span class="dv">4</span>)</span>
<span id="cb91-9"><a href="appendix.html#cb91-9" tabindex="-1"></a></span>
<span id="cb91-10"><a href="appendix.html#cb91-10" tabindex="-1"></a>df_rf_results <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb91-11"><a href="appendix.html#cb91-11" tabindex="-1"></a>  df_2_predictors_train, df_2_predictors_test,</span>
<span id="cb91-12"><a href="appendix.html#cb91-12" tabindex="-1"></a>  df_4_predictors_train, df_4_predictors_test</span>
<span id="cb91-13"><a href="appendix.html#cb91-13" tabindex="-1"></a>  )</span>
<span id="cb91-14"><a href="appendix.html#cb91-14" tabindex="-1"></a></span>
<span id="cb91-15"><a href="appendix.html#cb91-15" tabindex="-1"></a>max_rank <span class="ot">=</span> df_rf_results <span class="sc">%&gt;%</span> <span class="fu">filter</span>(is_truth <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(rank) <span class="sc">%&gt;%</span> <span class="fu">max</span>()</span>
<span id="cb91-16"><a href="appendix.html#cb91-16" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">map_dfr</span>(<span class="dv">1</span><span class="sc">:</span>max_rank, <span class="cf">function</span>(i_rank) {</span>
<span id="cb91-17"><a href="appendix.html#cb91-17" tabindex="-1"></a>  df_rf_results <span class="sc">%&gt;%</span> </span>
<span id="cb91-18"><a href="appendix.html#cb91-18" tabindex="-1"></a>    <span class="fu">filter</span>(is_truth <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-19"><a href="appendix.html#cb91-19" tabindex="-1"></a>    <span class="fu">group_by</span>(type, data_split, n_predictors) <span class="sc">%&gt;%</span> </span>
<span id="cb91-20"><a href="appendix.html#cb91-20" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">le =</span> <span class="fu">if_else</span>(rank <span class="sc">&lt;=</span> i_rank, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb91-21"><a href="appendix.html#cb91-21" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mean =</span> <span class="fu">mean</span>(le), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-22"><a href="appendix.html#cb91-22" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">i_rank =</span> i_rank)</span>
<span id="cb91-23"><a href="appendix.html#cb91-23" tabindex="-1"></a>})</span>
<span id="cb91-24"><a href="appendix.html#cb91-24" tabindex="-1"></a></span>
<span id="cb91-25"><a href="appendix.html#cb91-25" tabindex="-1"></a>results <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb91-26"><a href="appendix.html#cb91-26" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> i_rank, <span class="at">y =</span> mean)) <span class="sc">+</span></span>
<span id="cb91-27"><a href="appendix.html#cb91-27" tabindex="-1"></a>  <span class="fu">facet_nested</span>(type <span class="sc">~</span> data_split <span class="sc">+</span> n_predictors) <span class="sc">+</span></span>
<span id="cb91-28"><a href="appendix.html#cb91-28" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb91-29"><a href="appendix.html#cb91-29" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;rank&quot;</span>,</span>
<span id="cb91-30"><a href="appendix.html#cb91-30" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;top n recall&quot;</span>,</span>
<span id="cb91-31"><a href="appendix.html#cb91-31" tabindex="-1"></a>    <span class="co"># title = &quot;Top n recall for different ranks, data splits and number of predictors&quot;</span></span>
<span id="cb91-32"><a href="appendix.html#cb91-32" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:top-n-recall-term-frequency"></span>
<img src="_main_files/figure-html/top-n-recall-term-frequency-1.png" alt="Comparing the top n recall on training and test dataset among the random forest with two and four predictors." width="672" />
<p class="caption">
Figure 8.23: Comparing the top n recall on training and test dataset among the random forest with two and four predictors.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb92"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb92-1"><a href="appendix.html#cb92-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb92-2"><a href="appendix.html#cb92-2" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb92-3"><a href="appendix.html#cb92-3" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb92-4"><a href="appendix.html#cb92-4" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> RandomForestClassifier</span>
<span id="cb92-5"><a href="appendix.html#cb92-5" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> accuracy_score</span>
<span id="cb92-6"><a href="appendix.html#cb92-6" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split</span>
<span id="cb92-7"><a href="appendix.html#cb92-7" tabindex="-1"></a></span>
<span id="cb92-8"><a href="appendix.html#cb92-8" tabindex="-1"></a>df_train_us <span class="op">=</span> pd.read_csv(<span class="st">&quot;../benchmark_results/page_identification/term_frequency_table.csv&quot;</span>)</span>
<span id="cb92-9"><a href="appendix.html#cb92-9" tabindex="-1"></a></span>
<span id="cb92-10"><a href="appendix.html#cb92-10" tabindex="-1"></a><span class="co"># Drop rows without ground truth</span></span>
<span id="cb92-11"><a href="appendix.html#cb92-11" tabindex="-1"></a><span class="co"># df_train_us = df_word_counts.merge(df_truth, on=[&quot;filepath&quot;, &quot;type&quot;], how=&quot;left&quot;)</span></span>
<span id="cb92-12"><a href="appendix.html#cb92-12" tabindex="-1"></a>df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">=</span> (df_train_us[<span class="st">&quot;page&quot;</span>] <span class="op">==</span> df_train_us[<span class="st">&quot;page_truth&quot;</span>]).astype(<span class="bu">int</span>)</span>
<span id="cb92-13"><a href="appendix.html#cb92-13" tabindex="-1"></a>df_train_us <span class="op">=</span> df_train_us.dropna(subset<span class="op">=</span>[<span class="st">&quot;page_truth&quot;</span>])</span>
<span id="cb92-14"><a href="appendix.html#cb92-14" tabindex="-1"></a></span>
<span id="cb92-15"><a href="appendix.html#cb92-15" tabindex="-1"></a><span class="co"># Undersample the majority class (is_truth == 0)</span></span>
<span id="cb92-16"><a href="appendix.html#cb92-16" tabindex="-1"></a>df_true <span class="op">=</span> df_train_us[df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb92-17"><a href="appendix.html#cb92-17" tabindex="-1"></a>df_false <span class="op">=</span> df_train_us[df_train_us[<span class="st">&quot;is_truth&quot;</span>] <span class="op">==</span> <span class="dv">0</span>]</span>
<span id="cb92-18"><a href="appendix.html#cb92-18" tabindex="-1"></a>df_false_undersampled <span class="op">=</span> df_false.sample(n<span class="op">=</span><span class="bu">len</span>(df_true), random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb92-19"><a href="appendix.html#cb92-19" tabindex="-1"></a>df_train_us_balanced <span class="op">=</span> pd.concat([df_true, df_false_undersampled]).sample(frac<span class="op">=</span><span class="dv">1</span>, random_state<span class="op">=</span><span class="dv">42</span>).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb92-20"><a href="appendix.html#cb92-20" tabindex="-1"></a><span class="co"># df_train_us_balanced</span></span>
<span id="cb92-21"><a href="appendix.html#cb92-21" tabindex="-1"></a></span>
<span id="cb92-22"><a href="appendix.html#cb92-22" tabindex="-1"></a>predictors <span class="op">=</span> [</span>
<span id="cb92-23"><a href="appendix.html#cb92-23" tabindex="-1"></a>    <span class="st">&quot;term_frequency&quot;</span>, </span>
<span id="cb92-24"><a href="appendix.html#cb92-24" tabindex="-1"></a>    <span class="st">&quot;float_frequency&quot;</span>, </span>
<span id="cb92-25"><a href="appendix.html#cb92-25" tabindex="-1"></a>    <span class="st">&quot;date_count&quot;</span>, </span>
<span id="cb92-26"><a href="appendix.html#cb92-26" tabindex="-1"></a>    <span class="st">&quot;integer_count&quot;</span></span>
<span id="cb92-27"><a href="appendix.html#cb92-27" tabindex="-1"></a>]</span>
<span id="cb92-28"><a href="appendix.html#cb92-28" tabindex="-1"></a></span>
<span id="cb92-29"><a href="appendix.html#cb92-29" tabindex="-1"></a><span class="co"># Features and target</span></span>
<span id="cb92-30"><a href="appendix.html#cb92-30" tabindex="-1"></a>X <span class="op">=</span> df_train_us_balanced[predictors].values <span class="co"># only better with date and integer counts; otherwise worse</span></span>
<span id="cb92-31"><a href="appendix.html#cb92-31" tabindex="-1"></a>y <span class="op">=</span> df_train_us_balanced[<span class="st">&quot;is_truth&quot;</span>].values</span>
<span id="cb92-32"><a href="appendix.html#cb92-32" tabindex="-1"></a></span>
<span id="cb92-33"><a href="appendix.html#cb92-33" tabindex="-1"></a><span class="co"># Train-test split (70% train, 30% test)</span></span>
<span id="cb92-34"><a href="appendix.html#cb92-34" tabindex="-1"></a>X_train, X_test, y_train, y_test, df_train_split, df_test_split <span class="op">=</span> train_test_split(</span>
<span id="cb92-35"><a href="appendix.html#cb92-35" tabindex="-1"></a>    X, y, df_train_us_balanced, test_size<span class="op">=</span><span class="fl">0.3</span>, random_state<span class="op">=</span><span class="dv">42</span>, stratify<span class="op">=</span>y</span>
<span id="cb92-36"><a href="appendix.html#cb92-36" tabindex="-1"></a>)</span>
<span id="cb92-37"><a href="appendix.html#cb92-37" tabindex="-1"></a></span>
<span id="cb92-38"><a href="appendix.html#cb92-38" tabindex="-1"></a><span class="co"># Train Random Forest model</span></span>
<span id="cb92-39"><a href="appendix.html#cb92-39" tabindex="-1"></a>clf <span class="op">=</span> RandomForestClassifier(n_estimators<span class="op">=</span><span class="dv">100</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb92-40"><a href="appendix.html#cb92-40" tabindex="-1"></a>catch_this_message <span class="op">=</span>clf.fit(X_train, y_train)</span>
<span id="cb92-41"><a href="appendix.html#cb92-41" tabindex="-1"></a></span>
<span id="cb92-42"><a href="appendix.html#cb92-42" tabindex="-1"></a><span class="co"># Predict and rerank: get predicted probabilities for each page</span></span>
<span id="cb92-43"><a href="appendix.html#cb92-43" tabindex="-1"></a>df_train_split[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(X_train)[:, <span class="dv">1</span>]</span>
<span id="cb92-44"><a href="appendix.html#cb92-44" tabindex="-1"></a>df_test_split[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(X_test)[:, <span class="dv">1</span>]</span>
<span id="cb92-45"><a href="appendix.html#cb92-45" tabindex="-1"></a></span>
<span id="cb92-46"><a href="appendix.html#cb92-46" tabindex="-1"></a><span class="co"># Add all not-chosen negatives from df_false to test split</span></span>
<span id="cb92-47"><a href="appendix.html#cb92-47" tabindex="-1"></a>df_false_unused <span class="op">=</span> df_false.loc[<span class="op">~</span>df_false.index.isin(df_false_undersampled.index)]</span>
<span id="cb92-48"><a href="appendix.html#cb92-48" tabindex="-1"></a>df_false_unused <span class="op">=</span> df_false_unused.copy()</span>
<span id="cb92-49"><a href="appendix.html#cb92-49" tabindex="-1"></a>df_false_unused[<span class="st">&quot;score&quot;</span>] <span class="op">=</span> clf.predict_proba(df_false_unused[predictors].values)[:, <span class="dv">1</span>]</span>
<span id="cb92-50"><a href="appendix.html#cb92-50" tabindex="-1"></a>df_false_unused[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> np.nan  <span class="co"># Not ranked yet</span></span>
<span id="cb92-51"><a href="appendix.html#cb92-51" tabindex="-1"></a></span>
<span id="cb92-52"><a href="appendix.html#cb92-52" tabindex="-1"></a><span class="co"># Concatenate with test split</span></span>
<span id="cb92-53"><a href="appendix.html#cb92-53" tabindex="-1"></a>df_test_split <span class="op">=</span> pd.concat([df_test_split, df_false_unused], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb92-54"><a href="appendix.html#cb92-54" tabindex="-1"></a></span>
<span id="cb92-55"><a href="appendix.html#cb92-55" tabindex="-1"></a><span class="co"># For each group (filepath, type), sort by score descending</span></span>
<span id="cb92-56"><a href="appendix.html#cb92-56" tabindex="-1"></a>df_train_split[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> df_train_split.groupby([<span class="st">&quot;filepath&quot;</span>, <span class="st">&quot;type&quot;</span>])[<span class="st">&quot;score&quot;</span>].rank(ascending<span class="op">=</span><span class="va">False</span>, method<span class="op">=</span><span class="st">&quot;first&quot;</span>)</span>
<span id="cb92-57"><a href="appendix.html#cb92-57" tabindex="-1"></a>df_test_split[<span class="st">&quot;rank&quot;</span>] <span class="op">=</span> df_test_split.groupby([<span class="st">&quot;filepath&quot;</span>, <span class="st">&quot;type&quot;</span>])[<span class="st">&quot;score&quot;</span>].rank(ascending<span class="op">=</span><span class="va">False</span>, method<span class="op">=</span><span class="st">&quot;first&quot;</span>)</span></code></pre></div>
</details>
<p>Figure <a href="appendix.html#fig:shap-tf-4-predictors">8.24</a> shows that the two additional
predictors <em>date_count</em> and <em>integer_count</em> have little importance. But
since it is computationally cheap to determine their value and the
effiency of a random forest classifier, there is little reason not to
use them.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb93"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb93-1"><a href="appendix.html#cb93-1" tabindex="-1"></a><span class="im">import</span> shap</span>
<span id="cb93-2"><a href="appendix.html#cb93-2" tabindex="-1"></a><span class="im">import</span> pickle</span>
<span id="cb93-3"><a href="appendix.html#cb93-3" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb93-4"><a href="appendix.html#cb93-4" tabindex="-1"></a></span>
<span id="cb93-5"><a href="appendix.html#cb93-5" tabindex="-1"></a>predictors <span class="op">=</span> [</span>
<span id="cb93-6"><a href="appendix.html#cb93-6" tabindex="-1"></a>    <span class="st">&quot;term_frequency&quot;</span>, </span>
<span id="cb93-7"><a href="appendix.html#cb93-7" tabindex="-1"></a>    <span class="st">&quot;float_frequency&quot;</span>, </span>
<span id="cb93-8"><a href="appendix.html#cb93-8" tabindex="-1"></a>    <span class="st">&quot;date_count&quot;</span>, </span>
<span id="cb93-9"><a href="appendix.html#cb93-9" tabindex="-1"></a>    <span class="st">&quot;integer_count&quot;</span></span>
<span id="cb93-10"><a href="appendix.html#cb93-10" tabindex="-1"></a>]</span>
<span id="cb93-11"><a href="appendix.html#cb93-11" tabindex="-1"></a></span>
<span id="cb93-12"><a href="appendix.html#cb93-12" tabindex="-1"></a>clf <span class="op">=</span> pickle.load(<span class="bu">open</span>(<span class="st">&#39;data_storage/rf-tf-4preds.sav&#39;</span>, <span class="st">&#39;rb&#39;</span>))</span>
<span id="cb93-13"><a href="appendix.html#cb93-13" tabindex="-1"></a>df_test_split <span class="op">=</span> pd.read_csv(<span class="st">&quot;data_storage/term_frequency_results_4_predictors_test.csv&quot;</span>)</span>
<span id="cb93-14"><a href="appendix.html#cb93-14" tabindex="-1"></a></span>
<span id="cb93-15"><a href="appendix.html#cb93-15" tabindex="-1"></a><span class="co"># Use the same predictors and trained RandomForestClassifier (clf) as in cell 20</span></span>
<span id="cb93-16"><a href="appendix.html#cb93-16" tabindex="-1"></a>explainer <span class="op">=</span> shap.TreeExplainer(clf)</span>
<span id="cb93-17"><a href="appendix.html#cb93-17" tabindex="-1"></a>shap_values <span class="op">=</span> explainer.shap_values(df_test_split[predictors].values)</span>
<span id="cb93-18"><a href="appendix.html#cb93-18" tabindex="-1"></a></span>
<span id="cb93-19"><a href="appendix.html#cb93-19" tabindex="-1"></a><span class="co"># Plot summary for class 1 (is_truth == 1)</span></span>
<span id="cb93-20"><a href="appendix.html#cb93-20" tabindex="-1"></a>shap.summary_plot(shap_values[:,:,<span class="dv">1</span>], df_test_split[predictors].values, feature_names<span class="op">=</span>predictors)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:shap-tf-4-predictors"></span>
<img src="_main_files/figure-html/shap-tf-4-predictors-1.png" alt="Beeswarm plot of SHAP importance values for the four predictors of the second random forest classifier." width="768" />
<p class="caption">
Figure 8.24: Beeswarm plot of SHAP importance values for the four predictors of the second random forest classifier.
</p>
</div>
<p>Fianlly, figure <a href="appendix.html#fig:micro-pr-curve-tf-4-predictors">8.25</a> shows the
precision-recall-curves for the term frequency approach for all three
target types. The <a href="glossary.html#acronyms_AUC">AUC</a> for all types is below 0.5. The precision
and F1 score stay below 0.5 as well. A high recall can be maintained for
all types for threshold values up to at least 0.72.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="appendix.html#cb94-1" tabindex="-1"></a>plot_pr_double_curve_tf <span class="ot">&lt;-</span> <span class="cf">function</span>(df, selected_type, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb94-2"><a href="appendix.html#cb94-2" tabindex="-1"></a>  df_temp2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb94-3"><a href="appendix.html#cb94-3" tabindex="-1"></a>    n_predictors <span class="sc">==</span> <span class="dv">4</span>, data_split <span class="sc">==</span> <span class="st">&quot;test&quot;</span>,</span>
<span id="cb94-4"><a href="appendix.html#cb94-4" tabindex="-1"></a>    type <span class="sc">==</span> selected_type</span>
<span id="cb94-5"><a href="appendix.html#cb94-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-6"><a href="appendix.html#cb94-6" tabindex="-1"></a>    <span class="fu">rename</span>(</span>
<span id="cb94-7"><a href="appendix.html#cb94-7" tabindex="-1"></a>      <span class="at">confidence_score =</span> score</span>
<span id="cb94-8"><a href="appendix.html#cb94-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb94-9"><a href="appendix.html#cb94-9" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb94-10"><a href="appendix.html#cb94-10" tabindex="-1"></a>      <span class="at">type =</span> <span class="fu">factor</span>(is_truth, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb94-11"><a href="appendix.html#cb94-11" tabindex="-1"></a>    )</span>
<span id="cb94-12"><a href="appendix.html#cb94-12" tabindex="-1"></a>  </span>
<span id="cb94-13"><a href="appendix.html#cb94-13" tabindex="-1"></a>  <span class="co"># Precision-Recall Curve with ggplot2</span></span>
<span id="cb94-14"><a href="appendix.html#cb94-14" tabindex="-1"></a>  </span>
<span id="cb94-15"><a href="appendix.html#cb94-15" tabindex="-1"></a>  pr_df <span class="ot">&lt;-</span> df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_curve</span>(type, confidence_score) <span class="sc">%&gt;%</span></span>
<span id="cb94-16"><a href="appendix.html#cb94-16" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">threshold =</span> .threshold) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold<span class="sc">&lt;=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb94-17"><a href="appendix.html#cb94-17" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall))</span>
<span id="cb94-18"><a href="appendix.html#cb94-18" tabindex="-1"></a>  </span>
<span id="cb94-19"><a href="appendix.html#cb94-19" tabindex="-1"></a>  pr_auc <span class="ot">&lt;-</span> <span class="fu">round</span>(df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_auc</span>(type, confidence_score) <span class="sc">%&gt;%</span> .<span class="sc">$</span>.estimate, <span class="dv">3</span>)</span>
<span id="cb94-20"><a href="appendix.html#cb94-20" tabindex="-1"></a>  best_F1_row <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb94-21"><a href="appendix.html#cb94-21" tabindex="-1"></a>  best_F1_row_high_recall <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> </span>
<span id="cb94-22"><a href="appendix.html#cb94-22" tabindex="-1"></a>    <span class="fu">filter</span>(recall <span class="sc">&gt;</span> <span class="fl">0.999</span>, precision <span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb94-23"><a href="appendix.html#cb94-23" tabindex="-1"></a>  best_F1 <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb94-24"><a href="appendix.html#cb94-24" tabindex="-1"></a>  best_F1_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb94-25"><a href="appendix.html#cb94-25" tabindex="-1"></a>  best_threshold <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb94-26"><a href="appendix.html#cb94-26" tabindex="-1"></a>  best_threshold_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb94-27"><a href="appendix.html#cb94-27" tabindex="-1"></a>  best_precision_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(precision)</span>
<span id="cb94-28"><a href="appendix.html#cb94-28" tabindex="-1"></a>  </span>
<span id="cb94-29"><a href="appendix.html#cb94-29" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb94-30"><a href="appendix.html#cb94-30" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision)) <span class="sc">+</span></span>
<span id="cb94-31"><a href="appendix.html#cb94-31" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> threshold), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb94-32"><a href="appendix.html#cb94-32" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb94-33"><a href="appendix.html#cb94-33" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb94-34"><a href="appendix.html#cb94-34" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;Precision-Recall Curve for &quot;</span>, selected_type, <span class="st">&quot; (AUC = &quot;</span>, pr_auc, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb94-35"><a href="appendix.html#cb94-35" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb94-36"><a href="appendix.html#cb94-36" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Precision&quot;</span></span>
<span id="cb94-37"><a href="appendix.html#cb94-37" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb94-38"><a href="appendix.html#cb94-38" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb94-39"><a href="appendix.html#cb94-39" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb94-40"><a href="appendix.html#cb94-40" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb94-41"><a href="appendix.html#cb94-41" tabindex="-1"></a>    )</span>
<span id="cb94-42"><a href="appendix.html#cb94-42" tabindex="-1"></a>  </span>
<span id="cb94-43"><a href="appendix.html#cb94-43" tabindex="-1"></a>  g2 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb94-44"><a href="appendix.html#cb94-44" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision, <span class="at">color =</span> f1)) <span class="sc">+</span></span>
<span id="cb94-45"><a href="appendix.html#cb94-45" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb94-46"><a href="appendix.html#cb94-46" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb94-47"><a href="appendix.html#cb94-47" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb94-48"><a href="appendix.html#cb94-48" tabindex="-1"></a>      <span class="co"># title = &quot;Precision-Recall Curve colored by F1 score&quot;,</span></span>
<span id="cb94-49"><a href="appendix.html#cb94-49" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb94-50"><a href="appendix.html#cb94-50" tabindex="-1"></a>      <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb94-51"><a href="appendix.html#cb94-51" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;F1 score&quot;</span></span>
<span id="cb94-52"><a href="appendix.html#cb94-52" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb94-53"><a href="appendix.html#cb94-53" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb94-54"><a href="appendix.html#cb94-54" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb94-55"><a href="appendix.html#cb94-55" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb94-56"><a href="appendix.html#cb94-56" tabindex="-1"></a>    ) </span>
<span id="cb94-57"><a href="appendix.html#cb94-57" tabindex="-1"></a>  </span>
<span id="cb94-58"><a href="appendix.html#cb94-58" tabindex="-1"></a>  <span class="cf">if</span> (x_stuff <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb94-59"><a href="appendix.html#cb94-59" tabindex="-1"></a>    g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb94-60"><a href="appendix.html#cb94-60" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb94-61"><a href="appendix.html#cb94-61" tabindex="-1"></a>    </span>
<span id="cb94-62"><a href="appendix.html#cb94-62" tabindex="-1"></a>    g2 <span class="ot">&lt;-</span> g2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb94-63"><a href="appendix.html#cb94-63" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb94-64"><a href="appendix.html#cb94-64" tabindex="-1"></a>  }</span>
<span id="cb94-65"><a href="appendix.html#cb94-65" tabindex="-1"></a>  </span>
<span id="cb94-66"><a href="appendix.html#cb94-66" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> g1 <span class="sc">+</span> g2</span>
<span id="cb94-67"><a href="appendix.html#cb94-67" tabindex="-1"></a>  combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb94-68"><a href="appendix.html#cb94-68" tabindex="-1"></a>    <span class="st">&#39;Best F1 score of &#39;</span>, <span class="fu">round</span>(best_F1,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold,<span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb94-69"><a href="appendix.html#cb94-69" tabindex="-1"></a>    <span class="st">&#39;Best F1 score with recall &gt; 0.999 of &#39;</span>, <span class="fu">round</span>(best_F1_high_recall,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold_high_recall,<span class="dv">3</span>), <span class="st">&#39; (corresp. precision value: &#39;</span>, <span class="fu">round</span>(best_precision_high_recall,<span class="dv">3</span>) , <span class="st">&#39;)&#39;</span>))</span>
<span id="cb94-70"><a href="appendix.html#cb94-70" tabindex="-1"></a>}</span>
<span id="cb94-71"><a href="appendix.html#cb94-71" tabindex="-1"></a></span>
<span id="cb94-72"><a href="appendix.html#cb94-72" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_rf_results</span>
<span id="cb94-73"><a href="appendix.html#cb94-73" tabindex="-1"></a></span>
<span id="cb94-74"><a href="appendix.html#cb94-74" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_tf</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-75"><a href="appendix.html#cb94-75" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_tf</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb94-76"><a href="appendix.html#cb94-76" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_tf</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb94-77"><a href="appendix.html#cb94-77" tabindex="-1"></a><span class="co"># p_other &lt;- df_temp_mistral_multi %&gt;% plot_pr_double_curve_multi(&quot;other&quot;, x_stuff = TRUE)</span></span>
<span id="cb94-78"><a href="appendix.html#cb94-78" tabindex="-1"></a></span>
<span id="cb94-79"><a href="appendix.html#cb94-79" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb94-80"><a href="appendix.html#cb94-80" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb94-81"><a href="appendix.html#cb94-81" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model, <span class="st">&quot; with &quot;</span>, method))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:micro-pr-curve-tf-4-predictors"></span>
<img src="_main_files/figure-html/micro-pr-curve-tf-4-predictors-1.png" alt="Showing the precsion-recall-curve for the random forest with four predictors." width="100%" />
<p class="caption">
Figure 8.25: Showing the precsion-recall-curve for the random forest with four predictors.
</p>
</div>
</div>
</div>
<div id="hitl" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> Human in the loop application<a href="appendix.html#hitl" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Using <a href="glossary.html#acronyms_LLM">LLM</a>s has become a lot easier in the past years. <em>Python</em>
frameworks as <a href="glossary.html#acronyms_vllm">vLLM</a> make it easy to deploy open-source models for
developers. <em>Open WebUI</em> allows us to set up a sophisticated chat bot UI
with ease. <em>Dify</em> promises to create no-code <a href="glossary.html#acronyms_AI">AI</a> agents via a
graphical flowchart. But the regular employee at <a href="glossary.html#acronyms_RHvB">RHvB</a> will just
use a provided application. And to solve the task, to extract (tabular)
information for loading it into a relational database, a chat UI seems
not the perfect match.</p>
<p>For the planned application we have two requirements: First, it should
be able to accurately extract information. Second, it has to provide a
good user experience.</p>
<p>Extracting the information of the assets table accurately means:</p>
<ul>
<li><p>Numeric values have to be extracted and transformed according to
potentially given currency units, e.g. <em>T€.</em></p></li>
<li><p>The row labels should be matched with a limited set of labels in the
target database.</p></li>
<li><p>Unknown row labels and their values have to treated in a appropriate
way.</p></li>
</ul>
<p>To ensure, that there are no mistakes, a <a href="glossary.html#acronyms_HITL">HITL</a> approach should be
implemented. Figure <a href="appendix.html#fig:hitl-workflow">8.26</a> shows that the employee
should initiate the extraction, by providing the document to extract
information from and potentially choose, what to extract. The employee
should also double check the results, before they are saved for future
usage in down stream tasks.</p>
<div class="figure"><span style="display:block;" id="fig:hitl-workflow"></span>
<img src="images/HITL_flowchart.png" alt="Showing the information extraction process in a HITL application. The fed in document and results are saved in a database, that is used for the in-context learning RAG approaches for future extractions. The results are saved in the relational company database as well, e.g. as information to present in dashboards." width="100%" />
<p class="caption">
Figure 8.26: Showing the information extraction process in a HITL application. The fed in document and results are saved in a database, that is used for the in-context learning RAG approaches for future extractions. The results are saved in the relational company database as well, e.g. as information to present in dashboards.
</p>
</div>
<p>Why do we aim to build an application that assists the process instead
of fully automating it? On one hand, building a system that makes no
mistakes might be impossible. And it would be more efficient, to ensure
machine-readable data provision in the first place.</p>
<p>On the other hand, building a <a href="glossary.html#acronyms_HITL">HITL</a> application, could increase the
employees acceptance for the product and trust in the results. An
assisting application is not as threatening as an application, that
fully automates a process, making the human redundant and potentially
leading to job cuts. Programms building on the machine learning paradigm
are rarely making decisions that are not seen as correct by a human. And
humans make errors as well. Teaming up with an <a href="glossary.html#acronyms_AI">AI</a> to reduce the
error rate, should increase the trust in the results, if this story is
sold right. (change management)</p>
<p>We believe, that the <a href="glossary.html#acronyms_UX">UX</a> would improve, if we can guide the user,
which values to check and which he can trust. This would reduce the work
load and might increase the feeling to spend the time meaningful, by
finding the same amount of mistakes, while checking less values. Thus,
we formulate our side research question:</p>
<ol class="rs-questions" style="--counter: 3;">
<li>
Can we use additional information from the extraction process, to guide the user which values need to be checked and which can be trusted as they are?
</li>
</ol>
<p>Of course, mistakes not only happen by extracting a wrong value, but by
matching the values row with the wrong row labels from the predefined
set. This can happen, because they are similar but not equal or because
the row label at hand is not present in the predefined set yet. Having a
human in the loop, seems to be a good way to handle such unknown row
labels as well.</p>
<p>The <a href="glossary.html#acronyms_UI">UI (user interface)</a> should assist in all cases. Comparing numeric values,
checking the row label matching and showing, which rows have not been
handled yet and need human decisions. Figure <a href="appendix.html#fig:compare-results">8.27</a>
shows a first mockup, about what has to be compared focussing on a
single years numeric values and the row lable matching. A <a href="glossary.html#acronyms_UX">UX</a> study
should answer questions, how exactly the <a href="glossary.html#acronyms_UI">UI</a> should look like and
if the employee prefers to check the identified page, before the
extraction begins (see the human shape with question marks in Figure
<a href="appendix.html#fig:hitl-workflow">8.26</a>).</p>
<div class="figure"><span style="display:block;" id="fig:compare-results"></span>
<img src="images/compare_results.png" alt="Showing the information that need to be compared by the user after the information extraction. Unmatched rows could be highlighted in another color." width="100%" />
<p class="caption">
Figure 8.27: Showing the information that need to be compared by the user after the information extraction. Unmatched rows could be highlighted in another color.
</p>
</div>
<p>human in the loop <span class="citation">(<a href="#ref-mosqueira-reyHumanintheloopMachineLearning2023">Mosqueira-Rey et al., 2023</a>; <a href="#ref-natarajanHumanintheloopAIintheloopAutomate2024">Natarajan et al., 2024</a>; <a href="#ref-wuSurveyHumanintheloopMachine2022">Wu et al., 2022</a>)</span></p>
<ul>
<li>allowing in place adjustments to the extracted data.</li>
</ul>
</div>
<div id="local-machine" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Local machine<a href="appendix.html#local-machine" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One can find the specifications of the local machine used to run the tasks that do not require a <a href="glossary.html#acronyms_GPU">GPU</a> below. It is a lightweight laptop device. Its performance cores support hyper-threading and have a clock range between 2.1 and 4.7 GHz. Due to its slim design, there is little active cooling. Thus, thermal throttling starts quickly. It is a reasonable assumption that most local benchmarks are running at 2.1 GHz. Despite this handicap, it has a sufficiently large RAM of 32 GB and 3 TB of NVMe disk space.</p>
<div id="system-details-report" class="section level3 unlisted unnumbered hasAnchor">
<h3>System Details Report<a href="appendix.html#system-details-report" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="report-details" class="section level4 unlisted unnumbered hasAnchor">
<h4>Report details<a href="appendix.html#report-details" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Date generated:</strong> 2025-07-19 13:56:16</li>
</ul>
</div>
<div id="hardware-information" class="section level4 unlisted unnumbered hasAnchor">
<h4>Hardware Information:<a href="appendix.html#hardware-information" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Hardware Model:</strong> LG Electronics 17ZB90Q-G.AD79G</li>
<li><strong>Memory:</strong> 32.0 GiB</li>
<li><strong>Processor:</strong> 12th Gen Intel® Core™ i7-1260P × 16</li>
<li><strong>Graphics:</strong> Intel® Graphics (ADL GT2)</li>
<li><strong>Disk Capacity:</strong> 3.0 TB</li>
</ul>
</div>
<div id="software-information" class="section level4 unlisted unnumbered hasAnchor">
<h4>Software Information:<a href="appendix.html#software-information" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><strong>Firmware Version:</strong> A2ZG0150 X64</li>
<li><strong>OS Name:</strong> Ubuntu 24.04.2 LTS</li>
<li><strong>OS Build:</strong> (null)</li>
<li><strong>OS Type:</strong> 64-bit</li>
<li><strong>GNOME Version:</strong> 46</li>
<li><strong>Windowing System:</strong> Wayland</li>
<li><strong>Kernel Version:</strong> Linux 6.11.0-29-generic</li>
</ul>
</div>
</div>
</div>
<div id="benchmarks" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Benchmarks<a href="appendix.html#benchmarks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="text-extraction-benchmark" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Text extraction<a href="appendix.html#text-extraction-benchmark" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="appendix.html#cb95-1" tabindex="-1"></a>data_text_extraction <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../benchmark_results/text_extraction_benchmark_results.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="appendix.html#cb95-2" tabindex="-1"></a>  <span class="fu">arrange</span>(runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb95-3"><a href="appendix.html#cb95-3" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;package&quot;</span> <span class="ot">=</span> <span class="st">&quot;pdfbackend&quot;</span>, <span class="st">&quot;runtime in s&quot;</span> <span class="ot">=</span> <span class="st">&quot;runtime&quot;</span>)</span>
<span id="cb95-4"><a href="appendix.html#cb95-4" tabindex="-1"></a></span>
<span id="cb95-5"><a href="appendix.html#cb95-5" tabindex="-1"></a><span class="co"># Find the lowest value in the &quot;runtime in s&quot; column and make it bold</span></span>
<span id="cb95-6"><a href="appendix.html#cb95-6" tabindex="-1"></a>data_text_extraction <span class="ot">&lt;-</span> data_text_extraction <span class="sc">%&gt;%</span></span>
<span id="cb95-7"><a href="appendix.html#cb95-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-8"><a href="appendix.html#cb95-8" tabindex="-1"></a>    <span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">round</span>(<span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span>, <span class="dv">0</span>), <span class="co"># Ensure the column is numeric</span></span>
<span id="cb95-9"><a href="appendix.html#cb95-9" tabindex="-1"></a>    <span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">ifelse</span>(</span>
<span id="cb95-10"><a href="appendix.html#cb95-10" tabindex="-1"></a>      <span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span> <span class="sc">==</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb95-11"><a href="appendix.html#cb95-11" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span>, <span class="st">&quot;**&quot;</span>),</span>
<span id="cb95-12"><a href="appendix.html#cb95-12" tabindex="-1"></a>      <span class="st">`</span><span class="at">runtime in s</span><span class="st">`</span></span>
<span id="cb95-13"><a href="appendix.html#cb95-13" tabindex="-1"></a>    )</span>
<span id="cb95-14"><a href="appendix.html#cb95-14" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<p>All our experiments use the text extracted from PDF files. The available open-source libraries differ in their speed, quality of results and restrictiveness of licensing <span class="citation">(<a href="#ref-auerDoclingTechnicalReport2024">Auer et al., 2024</a>)</span>. We have tested multiple libraries in this thesis, because <span class="citation">Auer et al. (<a href="#ref-auerDoclingTechnicalReport2024">2024</a>)</span> published no quantitative results. The benchmark runs on the local machine described in section <a href="appendix.html#local-machine">8.3</a>. There are 5256 pages to extract the text from.</p>
<p>Table <a href="appendix.html#tab:display-data-text-extraction">8.11</a> shows, that <em>pdfium</em> and <em>pymupdf</em> extract the text fastest. For implementation in a system where the text has to get extracted live or frequently the speed of the library might be paramount. Since the AGPL license of <em>pymupdf</em> might not be met with the application, that will be created for <a href="glossary.html#acronyms_RHvB">RHvB</a>, <em>pdfium</em> is an interesting candidate for the PDF parsing library to use.</p>
<p><span class="citation">Auer et al. (<a href="#ref-auerDoclingTechnicalReport2024">2024</a>)</span> reports, that <em>pdfium</em> occasionally merges text cells that are not close o each other, resulting in unrecoverable quality issues. Thus we checked some of the extracted texts manually and include the PDF extraction backend as a variable in our experiments. The page identification experiment, using the <a href="glossary.html#acronyms_regex">regex</a> approach, shows no effect of the text extraction library. In contrast, we find an effect in the later performed information extraction experiment on synthetic <strong>Aktiva</strong> tables with the <a href="glossary.html#acronyms_regex">regex</a> approach.</p>
<p>Some examples for errorneous extracted texts with <em>pdfium</em> and <em>pdfminer</em> can be found in section <a href="appendix.html#regex-extraction-mistakes">8.9</a>.</p>
<p>time to ocr 107 images with pdf2image and pytesseract: 1:28+11:41</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="appendix.html#cb96-1" tabindex="-1"></a><span class="fu">render_table</span>(data_text_extraction, <span class="at">alignment=</span><span class="st">&quot;lr&quot;</span>, <span class="at">caption=</span><span class="st">&quot;Comparing extraction time (in seconds) for different Python package&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:display-data-text-extraction">Table 8.11: </span>Comparing extraction time (in seconds) for different Python package
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e393243458c958cce674" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e393243458c958cce674">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["pdfium","pymupdf","pypdf","pdfplumber","pdfminer","docling-parse"],["<b>14<\/b>","22","218","675","752","1621"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>package<\/th>\n      <th>runtime in s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"package","targets":1},{"name":"runtime in s","targets":2}],"scrollX":true,"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="table-detection-benchmark" class="section level3 hasAnchor" number="8.4.2">
<h3><span class="header-section-number">8.4.2</span> Table detection<a href="appendix.html#table-detection-benchmark" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="appendix.html#cb97-1" tabindex="-1"></a><span class="co"># Get a list of all .json files in the folder</span></span>
<span id="cb97-2"><a href="appendix.html#cb97-2" tabindex="-1"></a>json_files_table_detection <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../benchmark_results/table_detection/&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.json$&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-3"><a href="appendix.html#cb97-3" tabindex="-1"></a></span>
<span id="cb97-4"><a href="appendix.html#cb97-4" tabindex="-1"></a>meta_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb97-5"><a href="appendix.html#cb97-5" tabindex="-1"></a></span>
<span id="cb97-6"><a href="appendix.html#cb97-6" tabindex="-1"></a><span class="co"># Loop through each .json file</span></span>
<span id="cb97-7"><a href="appendix.html#cb97-7" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> json_files_table_detection) {</span>
<span id="cb97-8"><a href="appendix.html#cb97-8" tabindex="-1"></a>  <span class="co"># Read the JSON file</span></span>
<span id="cb97-9"><a href="appendix.html#cb97-9" tabindex="-1"></a>  json_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(file)</span>
<span id="cb97-10"><a href="appendix.html#cb97-10" tabindex="-1"></a>  </span>
<span id="cb97-11"><a href="appendix.html#cb97-11" tabindex="-1"></a>  <span class="co"># Extract the threshold and metrics from the &quot;metrics&quot; key</span></span>
<span id="cb97-12"><a href="appendix.html#cb97-12" tabindex="-1"></a>  metrics <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">fromJSON</span>(json_data<span class="sc">$</span>metrics))</span>
<span id="cb97-13"><a href="appendix.html#cb97-13" tabindex="-1"></a>  </span>
<span id="cb97-14"><a href="appendix.html#cb97-14" tabindex="-1"></a>  lst <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb97-15"><a href="appendix.html#cb97-15" tabindex="-1"></a>    <span class="at">metrics =</span> metrics,</span>
<span id="cb97-16"><a href="appendix.html#cb97-16" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">basename</span>(file),</span>
<span id="cb97-17"><a href="appendix.html#cb97-17" tabindex="-1"></a>    <span class="at">runtime =</span> json_data<span class="sc">$</span>runtime</span>
<span id="cb97-18"><a href="appendix.html#cb97-18" tabindex="-1"></a>  )</span>
<span id="cb97-19"><a href="appendix.html#cb97-19" tabindex="-1"></a>  meta_list[[<span class="fu">length</span>(meta_list) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> lst</span>
<span id="cb97-20"><a href="appendix.html#cb97-20" tabindex="-1"></a>}</span>
<span id="cb97-21"><a href="appendix.html#cb97-21" tabindex="-1"></a></span>
<span id="cb97-22"><a href="appendix.html#cb97-22" tabindex="-1"></a><span class="co"># Plot the metrics over threshold</span></span>
<span id="cb97-23"><a href="appendix.html#cb97-23" tabindex="-1"></a>metric_plots <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb97-24"><a href="appendix.html#cb97-24" tabindex="-1"></a></span>
<span id="cb97-25"><a href="appendix.html#cb97-25" tabindex="-1"></a><span class="cf">for</span> (result <span class="cf">in</span> meta_list) {</span>
<span id="cb97-26"><a href="appendix.html#cb97-26" tabindex="-1"></a>  table_detection_plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(result<span class="sc">$</span>metrics, <span class="fu">aes</span>(<span class="at">x =</span> threshold)) <span class="sc">+</span></span>
<span id="cb97-27"><a href="appendix.html#cb97-27" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> precision, <span class="at">color =</span> <span class="st">&quot;Precision&quot;</span>)) <span class="sc">+</span></span>
<span id="cb97-28"><a href="appendix.html#cb97-28" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> recall, <span class="at">color =</span> <span class="st">&quot;Recall&quot;</span>)) <span class="sc">+</span></span>
<span id="cb97-29"><a href="appendix.html#cb97-29" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> recall_target, <span class="at">color =</span> <span class="st">&quot;Recall for tables of interest&quot;</span>)) <span class="sc">+</span></span>
<span id="cb97-30"><a href="appendix.html#cb97-30" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> F1, <span class="at">color =</span> <span class="st">&quot;F1&quot;</span>)) <span class="sc">+</span></span>
<span id="cb97-31"><a href="appendix.html#cb97-31" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb97-32"><a href="appendix.html#cb97-32" tabindex="-1"></a>      <span class="at">title =</span> <span class="fu">str_replace</span>(result<span class="sc">$</span>model, <span class="st">&quot;.json&quot;</span>, <span class="st">&quot;&quot;</span>),</span>
<span id="cb97-33"><a href="appendix.html#cb97-33" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste</span>(<span class="st">&quot;Runtime:&quot;</span>, <span class="fu">round</span>(result<span class="sc">$</span>runtime, <span class="dv">0</span>) , <span class="st">&quot;s&quot;</span>),</span>
<span id="cb97-34"><a href="appendix.html#cb97-34" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Threshold&quot;</span>,</span>
<span id="cb97-35"><a href="appendix.html#cb97-35" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Metric Value&quot;</span>,</span>
<span id="cb97-36"><a href="appendix.html#cb97-36" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;Metric&quot;</span></span>
<span id="cb97-37"><a href="appendix.html#cb97-37" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb97-38"><a href="appendix.html#cb97-38" tabindex="-1"></a>    <span class="co"># theme_minimal() +</span></span>
<span id="cb97-39"><a href="appendix.html#cb97-39" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span>
<span id="cb97-40"><a href="appendix.html#cb97-40" tabindex="-1"></a>  </span>
<span id="cb97-41"><a href="appendix.html#cb97-41" tabindex="-1"></a>  metric_plots[[<span class="fu">length</span>(metric_plots) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">image =</span> table_detection_plot, <span class="at">title =</span> <span class="fu">str_replace</span>(result<span class="sc">$</span>model, <span class="st">&quot;.json&quot;</span>, <span class="st">&quot;&quot;</span>))</span>
<span id="cb97-42"><a href="appendix.html#cb97-42" tabindex="-1"></a>}</span>
<span id="cb97-43"><a href="appendix.html#cb97-43" tabindex="-1"></a></span>
<span id="cb97-44"><a href="appendix.html#cb97-44" tabindex="-1"></a>json_files_table_detection_llm <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">&quot;../benchmark_results/table_detection/llm/&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">.json$&quot;</span>, <span class="at">full.names =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-45"><a href="appendix.html#cb97-45" tabindex="-1"></a></span>
<span id="cb97-46"><a href="appendix.html#cb97-46" tabindex="-1"></a>meta_list_llm <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb97-47"><a href="appendix.html#cb97-47" tabindex="-1"></a></span>
<span id="cb97-48"><a href="appendix.html#cb97-48" tabindex="-1"></a><span class="co"># Loop through each .json file</span></span>
<span id="cb97-49"><a href="appendix.html#cb97-49" tabindex="-1"></a><span class="cf">for</span> (file <span class="cf">in</span> json_files_table_detection_llm) {</span>
<span id="cb97-50"><a href="appendix.html#cb97-50" tabindex="-1"></a>  <span class="co"># Read the JSON file</span></span>
<span id="cb97-51"><a href="appendix.html#cb97-51" tabindex="-1"></a>  json_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(file)</span>
<span id="cb97-52"><a href="appendix.html#cb97-52" tabindex="-1"></a>  </span>
<span id="cb97-53"><a href="appendix.html#cb97-53" tabindex="-1"></a>  <span class="co"># Extract the threshold and metrics from the &quot;metrics&quot; key</span></span>
<span id="cb97-54"><a href="appendix.html#cb97-54" tabindex="-1"></a>  metrics <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(json_data<span class="sc">$</span>metrics)</span>
<span id="cb97-55"><a href="appendix.html#cb97-55" tabindex="-1"></a>  </span>
<span id="cb97-56"><a href="appendix.html#cb97-56" tabindex="-1"></a>  lst <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb97-57"><a href="appendix.html#cb97-57" tabindex="-1"></a>    <span class="at">metrics =</span> metrics,</span>
<span id="cb97-58"><a href="appendix.html#cb97-58" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">basename</span>(file),</span>
<span id="cb97-59"><a href="appendix.html#cb97-59" tabindex="-1"></a>    <span class="at">runtime =</span> json_data<span class="sc">$</span>runtime</span>
<span id="cb97-60"><a href="appendix.html#cb97-60" tabindex="-1"></a>  )</span>
<span id="cb97-61"><a href="appendix.html#cb97-61" tabindex="-1"></a>  meta_list_llm[[<span class="fu">length</span>(meta_list_llm) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> lst</span>
<span id="cb97-62"><a href="appendix.html#cb97-62" tabindex="-1"></a>}</span>
<span id="cb97-63"><a href="appendix.html#cb97-63" tabindex="-1"></a></span>
<span id="cb97-64"><a href="appendix.html#cb97-64" tabindex="-1"></a>results_df_llm <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb97-65"><a href="appendix.html#cb97-65" tabindex="-1"></a>  <span class="at">llm =</span> <span class="fu">character</span>(),</span>
<span id="cb97-66"><a href="appendix.html#cb97-66" tabindex="-1"></a>  <span class="at">parameters =</span> <span class="fu">character</span>(),</span>
<span id="cb97-67"><a href="appendix.html#cb97-67" tabindex="-1"></a>  <span class="at">method =</span> <span class="fu">character</span>(),</span>
<span id="cb97-68"><a href="appendix.html#cb97-68" tabindex="-1"></a>  <span class="at">loop =</span> <span class="fu">numeric</span>(),</span>
<span id="cb97-69"><a href="appendix.html#cb97-69" tabindex="-1"></a>  <span class="co"># acc = numeric(),</span></span>
<span id="cb97-70"><a href="appendix.html#cb97-70" tabindex="-1"></a>  <span class="co"># precision = numeric(),</span></span>
<span id="cb97-71"><a href="appendix.html#cb97-71" tabindex="-1"></a>  <span class="co"># recall = numeric(),</span></span>
<span id="cb97-72"><a href="appendix.html#cb97-72" tabindex="-1"></a>  <span class="at">F1_Aktiva =</span> <span class="fu">numeric</span>(),</span>
<span id="cb97-73"><a href="appendix.html#cb97-73" tabindex="-1"></a>  <span class="at">runtime_in_s =</span> <span class="fu">numeric</span>(),</span>
<span id="cb97-74"><a href="appendix.html#cb97-74" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb97-75"><a href="appendix.html#cb97-75" tabindex="-1"></a>)</span>
<span id="cb97-76"><a href="appendix.html#cb97-76" tabindex="-1"></a></span>
<span id="cb97-77"><a href="appendix.html#cb97-77" tabindex="-1"></a><span class="cf">for</span> (result <span class="cf">in</span> meta_list_llm) {</span>
<span id="cb97-78"><a href="appendix.html#cb97-78" tabindex="-1"></a>  </span>
<span id="cb97-79"><a href="appendix.html#cb97-79" tabindex="-1"></a>  name_split <span class="ot">=</span> result<span class="sc">$</span>model <span class="sc">%&gt;%</span> <span class="fu">str_split</span>(<span class="st">&quot;__&quot;</span>)</span>
<span id="cb97-80"><a href="appendix.html#cb97-80" tabindex="-1"></a>  name_split <span class="ot">=</span> name_split[[<span class="dv">1</span>]]</span>
<span id="cb97-81"><a href="appendix.html#cb97-81" tabindex="-1"></a>  </span>
<span id="cb97-82"><a href="appendix.html#cb97-82" tabindex="-1"></a>  llm <span class="ot">=</span> name_split[<span class="dv">1</span>]</span>
<span id="cb97-83"><a href="appendix.html#cb97-83" tabindex="-1"></a>  parameters <span class="ot">=</span> <span class="fu">str_extract</span>(llm, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d*</span><span class="sc">\\</span><span class="st">.?</span><span class="sc">\\</span><span class="st">d+B&quot;</span>)</span>
<span id="cb97-84"><a href="appendix.html#cb97-84" tabindex="-1"></a>  method <span class="ot">=</span> name_split[<span class="fu">length</span>(name_split)<span class="sc">-</span><span class="dv">1</span>]</span>
<span id="cb97-85"><a href="appendix.html#cb97-85" tabindex="-1"></a>  loop <span class="ot">=</span> name_split[<span class="fu">length</span>(name_split)] <span class="sc">%&gt;%</span> <span class="fu">str_remove</span>(<span class="st">&quot;.json&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">str_remove</span>(<span class="st">&quot;loop_&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">as.integer</span>()</span>
<span id="cb97-86"><a href="appendix.html#cb97-86" tabindex="-1"></a>  F1_Aktiva <span class="ot">=</span> result<span class="sc">$</span>metrics<span class="sc">$</span>Aktiva.f1_score</span>
<span id="cb97-87"><a href="appendix.html#cb97-87" tabindex="-1"></a>  runtime <span class="ot">=</span> result<span class="sc">$</span>runtime</span>
<span id="cb97-88"><a href="appendix.html#cb97-88" tabindex="-1"></a>  </span>
<span id="cb97-89"><a href="appendix.html#cb97-89" tabindex="-1"></a>  results_df_llm <span class="ot">&lt;-</span> results_df_llm <span class="sc">%&gt;%</span></span>
<span id="cb97-90"><a href="appendix.html#cb97-90" tabindex="-1"></a>    <span class="fu">add_row</span>(</span>
<span id="cb97-91"><a href="appendix.html#cb97-91" tabindex="-1"></a>      <span class="at">llm =</span> llm,</span>
<span id="cb97-92"><a href="appendix.html#cb97-92" tabindex="-1"></a>      <span class="at">parameters =</span> parameters,</span>
<span id="cb97-93"><a href="appendix.html#cb97-93" tabindex="-1"></a>      <span class="at">method =</span> method,</span>
<span id="cb97-94"><a href="appendix.html#cb97-94" tabindex="-1"></a>      <span class="at">loop =</span> loop,</span>
<span id="cb97-95"><a href="appendix.html#cb97-95" tabindex="-1"></a>      <span class="co"># acc = acc,</span></span>
<span id="cb97-96"><a href="appendix.html#cb97-96" tabindex="-1"></a>      <span class="co"># precision = precision,</span></span>
<span id="cb97-97"><a href="appendix.html#cb97-97" tabindex="-1"></a>      <span class="co"># recall = recall,</span></span>
<span id="cb97-98"><a href="appendix.html#cb97-98" tabindex="-1"></a>      <span class="at">F1_Aktiva =</span> F1_Aktiva, <span class="co">#round(F1_Aktiva, 2),</span></span>
<span id="cb97-99"><a href="appendix.html#cb97-99" tabindex="-1"></a>      <span class="at">runtime_in_s =</span> <span class="fu">round</span>(runtime, <span class="dv">2</span>)</span>
<span id="cb97-100"><a href="appendix.html#cb97-100" tabindex="-1"></a>    )</span>
<span id="cb97-101"><a href="appendix.html#cb97-101" tabindex="-1"></a>}</span></code></pre></div>
</details>
<div id="yolo-benchmark-and-table-transformer" class="section level4 hasAnchor" number="8.4.2.1">
<h4><span class="header-section-number">8.4.2.1</span> yolo benchmark and table transformer<a href="appendix.html#yolo-benchmark-and-table-transformer" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>not so important anymore</p>
</div>
<div id="old-classification-with-llm" class="section level4 hasAnchor" number="8.4.2.2">
<h4><span class="header-section-number">8.4.2.2</span> old classification with llm<a href="appendix.html#old-classification-with-llm" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>took wrong identified pages as base for a table detection benchmark and n-shot base for llm classification (contrasts)</p>
<div class="image-slider">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="appendix.html#cb98-1" tabindex="-1"></a><span class="cf">for</span> (entry <span class="cf">in</span> metric_plots) {</span>
<span id="cb98-2"><a href="appendix.html#cb98-2" tabindex="-1"></a>  <span class="fu">print</span>(entry<span class="sc">$</span>image)</span>
<span id="cb98-3"><a href="appendix.html#cb98-3" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;&lt;span class=&#39;image-caption&#39;&gt;You see the plot for: &quot;</span>,entry<span class="sc">$</span>title,<span class="st">&quot;. </span><span class="sc">\n</span><span class="st">(Click to stop automatic rotation.)&lt;/span&gt;&quot;</span>))</span>
<span id="cb98-4"><a href="appendix.html#cb98-4" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/metric-plots-slider-1.png" width="100%" /><span class="image-caption">You see the plot for: microsoft-table-transformer-detection.
(Click to stop automatic rotation.)</span><img src="_main_files/figure-html/metric-plots-slider-2.png" width="100%" /><span class="image-caption">You see the plot for: yolo12l-doclaynet.
(Click to stop automatic rotation.)</span><img src="_main_files/figure-html/metric-plots-slider-3.png" width="100%" /><span class="image-caption">You see the plot for: yolo12n-doclaynet.
(Click to stop automatic rotation.)</span></p>
</div>
<div class="image-selector">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="appendix.html#cb99-1" tabindex="-1"></a><span class="cf">for</span> (entry <span class="cf">in</span> metric_plots) {</span>
<span id="cb99-2"><a href="appendix.html#cb99-2" tabindex="-1"></a>  <span class="fu">print</span>(entry<span class="sc">$</span>image)</span>
<span id="cb99-3"><a href="appendix.html#cb99-3" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">&quot;&lt;span class=&#39;image-caption&#39;&gt;&quot;</span>,entry<span class="sc">$</span>title,<span class="st">&quot;&lt;/span&gt;&quot;</span>))</span>
<span id="cb99-4"><a href="appendix.html#cb99-4" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/metric-plots-selector-1.png" width="100%" /><span class="image-caption">microsoft-table-transformer-detection</span><img src="_main_files/figure-html/metric-plots-selector-2.png" width="100%" /><span class="image-caption">yolo12l-doclaynet</span><img src="_main_files/figure-html/metric-plots-selector-3.png" width="100%" /><span class="image-caption">yolo12n-doclaynet</span></p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="appendix.html#cb100-1" tabindex="-1"></a>results_df_llm <span class="sc">%&gt;%</span> </span>
<span id="cb100-2"><a href="appendix.html#cb100-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-3"><a href="appendix.html#cb100-3" tabindex="-1"></a>    <span class="at">F1_Aktiva =</span> <span class="fu">round</span>(F1_Aktiva, <span class="dv">2</span>),</span>
<span id="cb100-4"><a href="appendix.html#cb100-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="appendix.html#cb100-5" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb100-6"><a href="appendix.html#cb100-6" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lllrr&quot;</span>,</span>
<span id="cb100-7"><a href="appendix.html#cb100-7" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Results of the table detection benchmark with LLMs&quot;</span>,</span>
<span id="cb100-8"><a href="appendix.html#cb100-8" tabindex="-1"></a>    <span class="at">ref =</span> <span class="st">&quot;display-results-df-llm&quot;</span></span>
<span id="cb100-9"><a href="appendix.html#cb100-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:display-results-df-llm">Table 8.12: </span>Results of the table detection benchmark with LLMs
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-a92b8fbd1478639f2cc3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a92b8fbd1478639f2cc3">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578","579","580","581","582","583","584","585","586","587","588","589","590","591","592","593","594","595","596","597","598","599","600","601","602","603","604","605","606","607","608","609","610","611","612","613","614","615","616","617","618","619","620","621","622","623","624","625","626","627","628","629","630","631","632","633","634","635","636","637","638","639","640","641","642","643","644","645","646","647","648","649","650","651","652","653","654","655","656","657","658","659","660","661","662","663","664","665","666","667","668","669","670","671","672","673","674","675","676","677","678","679","680","681","682","683","684","685","686","687","688","689","690","691","692","693","694","695","696","697","698","699","700","701","702","703","704","705","706","707","708","709","710","711","712","713","714","715","716","717","718","719","720","721","722","723","724","725","726","727","728","729","730","731","732","733","734","735","736","737","738","739","740","741","742","743","744","745","746","747","748","749","750","751","752","753","754","755","756","757","758","759","760","761","762","763","764","765","766","767","768","769","770","771","772","773","774","775","776","777","778","779","780","781","782","783"],["deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","deepseek-ai_<wbr>DeepSeek-R1-Distill-Qwen-32B","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-27b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","google_<wbr>gemma-3-4b-it","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-70B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.1-8B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.2-3B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-3.3-70B-Instruct","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","meta-llama_<wbr>Llama-4-Scout-17B-16E","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","microsoft_<wbr>phi-4","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","mistralai_<wbr>Mistral-7B-Instruct-v0.3","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-0.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-1.5B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-14B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-32B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-3B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-72B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen2.5-7B-Instruct_<wbr>alt_<wbr>prompts","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-32B-no-think","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","Qwen_<wbr>Qwen3-8B-no-think","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct","tiiuae_<wbr>Falcon3-10B-Instruct"],["32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","70B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B","17B",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","0.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","1.5B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","14B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","3B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","72B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","7B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","32B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","8B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B","10B"],["law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","random_<wbr>examples","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","law_<wbr>context","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","rag_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","random_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot","zero_<wbr>shot"],["0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","0","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","0","1","0","1","2","0","1","0","1","2","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","0","1","0","1","2","0","1","0","1","2","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","0","0","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4","0","1","2","3","4"],["0.22","0.21","0.21","0.21","0.21","0.22","0.22","0.2","0.2","0.21","0.21","0.21","0.22","0.22","0.22","0.22","0.22","0.22","0.22","0.21","0.22","0.21","0.22","0.22","0.22","0.74","0.74","0.75","0.75","0.74","0.8","0.8","0.8","0.8","0.79","0.85","0.84","0.84","0.84","0.81","0.79","0.8","0.79","0.79","0.79","0.7","0.7","0.7","0.7","0.7","0.62","0.63","0.61","0.61","0.61","0.59","0.58","0.58","0.59","0.58","0.73","0.69","0.63","0.7","0.68","0.47","0.45","0.48","0.49","0.48","0.46","0.47","0.46","0.46","0.46","0.67","0.68","0.7","0.71","0.75","0.18","0.22","0.18","0.2","0.17","0.34","0.53","0.43","0.6","0.6","0.82","0.82","0.82","0.82","0.79","0.78","0.76","0.78","0.8","0.78","0.23","0.23","0.23","0.23","0.23","0.24","0.23","0.26","0.25","0.25","0.4","0.42","0.41","0.42","0.4","0.27","0.27","0.28","0.28","0.28","0.26","0.26","0.26","0.26","0.26","0.22","0.22","0.21","0.22","0.22","0.24","0.25","0.25","0.25","0.24","0.24","0.25","0.24","0.24","0.24","0.21","0.21","0.21","0.21","0.21","0.29","0.28","0.25","0.28","0.31","0.02","0.02","0.02","0.04","0","0.49","0.5","0.5","0.46","0.47","0.62","0.53","0.54","0.58","0.6","0.76","0.78","0.76","0.78","0.77","0.8","0.8","0.79","0.8","0.82","0.22","0.22","0.22","0.22","0.22","0.22","0.22","0.22","0.21","0.21","0.22","0.22","0.22","0.22","0.22","0.26","0.26","0.27","0.25","0.26","0.23","0.23","0.22","0.23","0.23","0.22","0.22","0.22","0.22","0.22","0.21","0.21","0.21","0.21","0.21","0.21","0.21","0.21","0.21","0.21","0.22","0.22","0.22","0.22","0.22","0.39","0.39","0.39","0.39","0.39",null,null,"0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"0","0","0",null,"0","0","0","0",null,"0","0","0","0",null,"0","0","0","0",null,null,"0","0","0","0.29","0.28","0.29","0.28","0.28","0.24","0.24","0.22","0.23","0.24","0.25","0.23","0.24","0.25","0.24","0.28","0.27","0.27","0.28","0.27","0.33","0.37","0.37","0.41","0.44","0.22","0.29","0.25","0.25","0.33","0.2","0.18","0.22","0.2","0.2","0.18","0.25","0.22","0.22","0.18","0.22","0.2","0.25","0.25","0.25","0","0","1","0","0","0.29","0.31","0.3","0.28","0.3","0.27","0.28","0.27","0.28","0.28","0.4","0.37","0.37","0.4","0.41","0.38","0.35","0.35","0.35","0.36","0.37","0.38","0.32","0.42","0.39","1","0","0","0.67","0.67","0.29","0.25","0.22","0.22","0.2","0","0.4","0.29","0","0","0.5","0.33","0.33","0.33","0.33","0.5","0.67","1","1","1","0.33","0.32","0.35","0.23","0.29","0.3","0.31","0.31","0.31","0.31","0.39","0.42","0.4","0.4","0.42","0.39","0.37","0.37","0.35","0.36","0.39","0.48","0.41","0.44","0.39","0.67","1","0.67","1","1","0.25","0.25","0.22","0.22","0.25","0.67","0","0.5","0.33","0","0.5","0.33","0.5","0.4","0.67","1","1","1","1","1","0.81","0.82","0.81","0.82","0.8","0.85","0.84","0.82","0.84","0.83","0.79","0.82","0.78","0.75","0.79","0.8","0.81","0.81","0.81","0.81","0.73","0.74","0.73","0.73","0.74","1","1","1","1","1","1","1","1","1","1","1","0.5","1","1","1","1","1","1","1","1","0.67","0.67","0.67","0.67","0.67","0.79","0.79","0.79","0.8","0.78","0.87","0.88","0.87","0.88","0.86","0.83","0.85","0.82","0.84","0.86","0.83","0.82","0.83","0.82","0.83","0.72","0.71","0.72","0.71","0.71","0.72","0.73","0.73","0.72","0.73","0.24","0.24","0.23","0.24","0.24","0.3","0.29","0.29","0.29","0.29","0.34","0.36","0.36","0.36","0.35","0.79","0.8","0.8","0.8","0.79","0.83","0.84","0.84","0.83","0.85","0.85","0.86","0.86","0.87","0.86","0.84","0.83","0.83","0.88","0.85","0.86","0.86","0.86","0.86","0.86","0.74","0.75","0.76","0.75","0.76",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"0.65","0.65","0.66","0.66","0.64","0.64","0.64","0.66","0.62","0.64","0.58","0.6","0.6","0.62","0.59","0.69","0.69","0.69","0.69","0.7","0.61","0.61","0.61","0.6","0.62","0.65","0.65","0.65","0.67","0.65","0.7","0.69","0.7","0.67","0.69","0.64","0.65","0.67","0.67","0.65","0.72","0.71","0.72","0.72","0.71","0.63","0.63","0.63","0.63","0.64","0.3","0.28","0.28","0.27","0.31","0.26","0.24","0.24","0.24","0.26","0.32","0.35","0.3","0.33","0.34","0.35","0.32","0.33","0.33","0.34","0.24","0.26","0.29","0.27","0.31","0.3","0.29","0.33","0.3","0.31","0.35","0.3","0.33","0.4","0.4","0.11","0.16","0.03","0.17","0.19","0.16","0.11","0.11","0.11","0.09","0.12","0.15","0.13","0.04","0.06","0.07","0.04","0.15","0.09","0.08","0.11","0.06","0.13","0.08","0.11","0.11","0.03","0.05","0","0","0","0","0","0","0","0","0","0","0","0.02","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["238.3","238.17","238.66","238.52","238.47","289.46","280.12","285.8","343.86","321.34","211.59","211","220.06","214.12","216.64","226.02","224.53","225.72","271.77","235.59","122.94","123.13","123","123.2","123.08","455.92","625.8","626.03","625.9","626.01","3827.93","3908.06","3896.02","3895.44","3880.57","2653.36","2921.28","2920.58","2933.6","2930.62","1436.34","1443.84","1435.03","1434.89","1434.64","134.25","206.05","206.14","206.08","206.11","317.37","421.29","421.03","421.67","421.01","2445.47","2546.31","2537.95","2548.47","2529.68","1705.17","1863.38","1883.24","1863.75","1846.62","929.15","940.92","931.21","932.55","937.16","98.71","142.28","142.26","142.33","142.29","818.65","818.42","818.77","818.61","818.73","4365.45","4361.61","4366.94","4348.61","4325.54","3307.63","3302.51","3355.82","3321.07","3292.59","1740.03","1733.36","1727.42","1726.43","1725.78","237.25","237.1","237.06","237.04","237.03","449.39","450.12","447.76","449.38","448.99","1970.39","1962.29","1967.06","1972.81","1967.3","1523.19","1508.49","1470.37","1526.47","1518.13","842.57","838.55","843.24","842.4","840.84","140.66","139.73","139.33","139.94","139.58","228.26","229.24","228.9","227.92","228.59","1088.99","1086.67","1088.11","1085.29","1093.38","805.06","810.35","808.58","797.79","806.02","445.85","445.95","443.17","446.19","445.72","69.51","69.02","68.96","68.7","68.95","815.59","815.75","815.83","816.05","815.92","4304.01","4299.07","4306.56","4292.25","4276.04","3252.27","3236.52","3235.47","3252.76","3275.8","1717.19","1701.66","1707.11","1703.24","1697.19","237.18","236.94","236.95","236.97","236.83","955.76","956.12","956.09","956.03","955.58","3576.79","3534.73","3532.61","3532.3","3526.85","2794.02","2830.76","2795.35","2826.53","2804.32","1718.24","1722.57","1718.56","1721.71","1712.57","353.81","353.2","353.21","353.15","353.11","789.77","790.53","790.21","790.13","793.92","3451.58","3449.79","3440.45","3457.14","3471.3","2666.24","2721.08","2714.43","2687.37","2712","1499.04","1495.09","1500.2","1502.01","1498.26","250.22","248.89","247.88","248.81","249.63","43.54","31.9","534.91","532.87","532.81","534.06","534.05","2735.12","2735.08","2734.15","2736.43","2736.34","2122.86","2145.18","2106.63","2105.69","2104.13","1098.51","1098.48","1099.54","1099.5","1099.88","163.01","162.71","162.75","162.86","162.67","33.93","36.33","36.73","36.82","36.72","36.78","290.75","288.14","289.4","290.34","289.59","181.62","180.1","177.64","181.47","180.85","161.04","160.7","160.71","160.95","161","21.35","20.87","20.98","20.99","21.01","0.97","0.97","0.97","0.97","0.97","10.84","5.98","5.94","5.96","5.96","4.48","3.9","4.78","4.34","3.89","4.48","4.03","4.02","4.03","4.03","1.01","0.44","0.44","0.44","0.44","71.31","72.64","72.36","72.68","72.58","518.24","510.82","484.76","484.04","487.78","331.12","327.31","333.26","332.88","333.54","174.59","174.52","174.63","174.54","174.76","24.56","24.43","24.48","24.37","24.51","1.88","1.88","1.87","1.86","1.86","9.14","9.29","9.29","9.28","9.27","7.49","6.51","6.9","7.59","6.67","4.27","4.29","4.26","4.26","4.27","1.08","0.55","0.56","0.56","0.56","148.24","149.34","149.35","149.21","149.25","846.2","950.77","859.78","846.3","861.53","624.42","621.33","612.83","613.76","620.18","340.11","333","328.75","328.7","328.72","47.76","48.34","48.26","48.31","48.31","5.54","5.53","5.53","5.53","5.53","36.01","24.86","23.61","23.55","23.57","20.29","18.85","20.74","18.65","19.8","13.23","11.85","11.86","11.86","11.88","2.16","1.58","1.59","1.59","1.58","147.07","148.06","148.18","148.09","147.99","836.12","866.65","871.81","864.28","837.81","615.35","608.01","615.99","610.97","607.43","348.76","345.34","324.43","324.33","324.74","46.86","47.41","47.4","47.46","47.43","5.47","5.45","5.46","5.45","5.45","26.21","23.31","23.32","23.38","23.38","19.15","18.69","19.3","18.8","18.62","11.61","11.6","11.61","11.61","11.62","2.13","1.56","1.56","1.55","1.55","840.87","841.52","841.5","841.4","841.65","4596.76","4591.57","4519.45","4516.86","4519.08","3522.07","3513.06","3486.9","3518.15","3516.75","1858.95","1862.82","1850.4","1850.58","1847.89","274.69","273.96","273.86","273.84","273.99","51.31","51.25","51.37","51.5","51.3","202.06","201.2","201.33","202.48","200.79","164.71","167.22","168.3","169.68","162.16","106.68","105.86","105.88","105.86","105.94","14.89","14.13","14.16","14.15","14.16","1869.77","1869.81","1870.79","1870.48","1872.31","8090.95","8087.63","8086.44","8085.66","8211.02","6461.77","6404.29","6355.14","6433.77","6409.08","3625.38","3626.45","3625.48","3625.47","3648.08","568.2","567.75","568.19","567.98","567.8","271.58","271.74","271.65","271.69","271.68","1541.78","1506.27","1504.16","1535.28","1532.85","1110.62","1122.3","1107.1","1108.95","1119.56","596.44","585.58","609.48","619.41","585.55","86.31","86.45","86.24","86.38","86.35","851.58","853.13","852.77","853.23","853.06","5432.88","5429.58","5428.74","5431.77","5429.22","4151.39","4093.74","4126.23","4055.41","4076.81","2041.63","2048.16","2039.7","2040.1","2038.94","256.92","257.05","258.21","257.1","257.15","277.41","276.69","276.93","276.73","277.39","1576.94","1572.25","1575","1571.22","1573","1158.42","1179.28","1154.25","1161.76","1163.06","1001.32","1001.8","1002.04","1003.87","1001.31","136.92","137.37","137.49","137.31","137.53","13.18","13.21","13.18","65.6","65.3","50.59","56.01","52.06","48.96","48.9","6.01","5.48","5.48","507.47","507.39","507.8","508.04","507.82","2501.73","2502.14","2503.26","2500.64","2503.06","1934.94","1948.85","1951.53","1924.87","1949.67","1052.09","1051.55","1052.43","1051.73","1051.82","164.98","165.85","165.84","165.94","165.8","411","411.5","411.53","411.36","411.42","2033.17","2032.81","2031","2031.72","2022.73","1568.94","1574.75","1568.8","1567.27","1563.29","847.93","847.63","847.69","847.66","843.91","133.59","133.59","133.58","133.72","133.51","500.15","501.09","500.94","501.36","501.14","3744.93","3583.26","3570.08","3576.62","3576.39","2560.05","2642.27","2630.07","2537.71","2580.16","1234.04","1236.56","1234","1234.49","1231.01","147.6","148.15","148.27","148.18","148.17","2071.44","2074.15","2074.46","9931.22","9943.3","7718.55","7769.86","7816.26","4190.94","4193.15","616.72","618.02","618.84","489.94","490.3","490.38","490.57","490.43","2610.59","2661.01","2645.28","2625.79","2663","1953.37","1989.4","1986.96","2000.48","2006.98","1045.56","1061.11","1047.21","1045.01","1054.01","157.02","156.91","156.96","156.93","157.15","26.83","86.98","8.18","489.34","489.96","491.04","490.79","490.4","2625.21","2640.41","2640.85","2639.35","2639.24","1981.16","1992.3","1980.4","1965.75","1992.99","1138.18","1048.76","1046.34","1046.12","1046.24","157.42","157.25","157.52","157.44","157.56","8.16","753.83","754.23","754.27","754.2","754.25","4062.83","3902.78","3895.43","3933.96","3883.17","2983.92","2996.12","2968.76","3032.53","3001.73","1557.06","1555.83","1562.08","1556.13","1555.88","228.12","227.93","227.78","227.89","227.95"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>llm<\/th>\n      <th>parameters<\/th>\n      <th>method<\/th>\n      <th>loop<\/th>\n      <th>F1 Aktiva<\/th>\n      <th>runtime in s<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"llm","targets":1},{"name":"parameters","targets":2},{"name":"method","targets":3},{"name":"loop","targets":4},{"name":"F1 Aktiva","targets":5},{"name":"runtime in s","targets":6}],"scrollX":true,"dom":"tiprfl","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="vllm-batch-speed" class="section level3 hasAnchor" number="8.4.3">
<h3><span class="header-section-number">8.4.3</span> Large language model process speed<a href="appendix.html#vllm-batch-speed" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In April 2025 there have been issues with running <a href="glossary.html#acronyms_vllm">vLLM</a> within the Python framework. Thus, the first experiments are conducted, using the <em>transformers</em> library. When we managed to build a working <a href="glossary.html#acronyms_vllm">vLLM</a> based docker image for the experiments, we measured, how long the same task takes with the <em>transformers</em> and the <a href="glossary.html#acronyms_vllm">vLLM</a> library and how the batched processing competes versus a loop approach. The model family used is Qwen2.5-Instruct. The task is to extract the information from ten real <strong>Aktiva</strong> tables.</p>
<p>Table <a href="appendix.html#tab:llm-spped-mini-benchmark-table">8.13</a> shows that the experiments with <a href="glossary.html#acronyms_vllm">vLLM</a> run around four to five times faster. Processing the messages in a batched mode is six to seven times faster than using a looped approach. Thus, the change of the experimental setup from a <em>transformers</em> powered loop-based approach to a <a href="glossary.html#acronyms_vllm">vLLM</a> powered batched processing approach, increased the speed by 2500 %.</p>
<p>This allows us to run the page identification benchmark on whole an nual reports, giving a sound estimate of the false positive rate (see section <a href="appendix.html#llm-page-identification">8.1.3</a>). Previous experiments were only conducted on a subset of pages, that were selected based on the results of the <em>simple regex</em> approach (see section <a href="appendix.html#regex-page-identification">8.1.1</a>).</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="appendix.html#cb101-1" tabindex="-1"></a>data_llm_speed <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb101-2"><a href="appendix.html#cb101-2" tabindex="-1"></a>  <span class="co"># model = c(&quot;Qwen 2.5 Instruct&quot;),</span></span>
<span id="cb101-3"><a href="appendix.html#cb101-3" tabindex="-1"></a>  <span class="at">parameters =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">3</span>, <span class="dv">7</span>),</span>
<span id="cb101-4"><a href="appendix.html#cb101-4" tabindex="-1"></a>  <span class="at">transformers =</span> <span class="fu">c</span>(<span class="dv">330</span>, <span class="dv">628</span>, <span class="dv">940</span>),</span>
<span id="cb101-5"><a href="appendix.html#cb101-5" tabindex="-1"></a>  <span class="at">vllm =</span> <span class="fu">c</span>(<span class="dv">65</span>, <span class="dv">130</span>, <span class="dv">217</span>),</span>
<span id="cb101-6"><a href="appendix.html#cb101-6" tabindex="-1"></a>  <span class="at">vllm_batched =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb101-7"><a href="appendix.html#cb101-7" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">setNames</span>(<span class="fu">c</span>(<span class="st">&quot;Model parameters (in B)&quot;</span>, <span class="st">&quot;Transformers&quot;</span>, <span class="st">&quot;vLLM&quot;</span>, <span class="st">&quot;vLLM batched&quot;</span>))</span>
<span id="cb101-8"><a href="appendix.html#cb101-8" tabindex="-1"></a></span>
<span id="cb101-9"><a href="appendix.html#cb101-9" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(data_llm_speed, <span class="at">caption =</span> <span class="st">&quot;Comparing time (in seconds) for extract the information from ten Aktiva tables using different libraries and approaches.&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption><span id="tab:llm-spped-mini-benchmark-table">Table 8.13: </span>Comparing time (in seconds) for extract the information from ten Aktiva tables using different libraries and approaches.</caption>
<thead>
<tr class="header">
<th align="right">Model parameters (in B)</th>
<th align="right">Transformers</th>
<th align="right">vLLM</th>
<th align="right">vLLM batched</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">0.5</td>
<td align="right">330</td>
<td align="right">65</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="right">3.0</td>
<td align="right">628</td>
<td align="right">130</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="right">7.0</td>
<td align="right">940</td>
<td align="right">217</td>
<td align="right">30</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="prompts" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Prompts<a href="appendix.html#prompts" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="toc-understanding-promts" class="section level3 hasAnchor" number="8.5.1">
<h3><span class="header-section-number">8.5.1</span> TOC understanding<a href="appendix.html#toc-understanding-promts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Base prompt:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb102"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb102-1"><a href="appendix.html#cb102-1" tabindex="-1"></a>    messages <span class="op">=</span> [</span>
<span id="cb102-2"><a href="appendix.html#cb102-2" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;You are a helpful assistant that can determine the page range information in a German financial report can be found at based on the documents table of contents.&quot;</span>},</span>
<span id="cb102-3"><a href="appendix.html#cb102-3" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;This is the table of contents:</span><span class="ch">\n\n</span><span class="sc">{</span>toc_string<span class="sc">}</span><span class="ss">&quot;</span>},</span>
<span id="cb102-4"><a href="appendix.html#cb102-4" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;On which pages might the win and loss statement (in German: Gewinn- und Verlustrechnung; GuV) and the balance sheets (German: Bilanz) be located? Give seperate answers for:</span><span class="ch">\n\n</span><span class="ss">1) the assets (German: Aktiva) table.</span><span class="ch">\n</span><span class="ss">2) the liabilities (German: Passiva) table.</span><span class="ch">\n</span><span class="ss">3) the win and loss statement.&quot;</span>},</span>
<span id="cb102-5"><a href="appendix.html#cb102-5" tabindex="-1"></a>        specific_prompt,</span>
<span id="cb102-6"><a href="appendix.html#cb102-6" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;Answer in JSON format with keys &#39;GuV&#39;, &#39;Aktiva&#39;, and &#39;Passiva&#39; and the page range as values.&quot;</span>},</span>
<span id="cb102-7"><a href="appendix.html#cb102-7" tabindex="-1"></a>    ]</span></code></pre></div>
</details>
<p>First attempt:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb103"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb103-1"><a href="appendix.html#cb103-1" tabindex="-1"></a>specific_prompt <span class="op">=</span> {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;The assets and liabilities tables often are on separate pages. They are often located directly before the win and loss statement. Rarely the tables for any of the three can span multiple pages.&quot;</span>}</span></code></pre></div>
</details>
<p>Given hint that assets and liabilities are part of the balance sheet:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb104"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb104-1"><a href="appendix.html#cb104-1" tabindex="-1"></a>specific_prompt <span class="op">=</span> {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;The assets and liabilities are part of the balance sheet (in German: Bilanz). The assets and liabilities tables often are on separate pages. They are often located directly before the win and loss statement. Rarely the tables for any of the three can span multiple pages.&quot;</span>}</span></code></pre></div>
</details>
<p>Stating, that liabilities are on next page:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb105"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb105-1"><a href="appendix.html#cb105-1" tabindex="-1"></a>specific_prompt <span class="op">=</span> {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;The assets and liabilities are part of the balance sheet (in German: Bilanz). The liabilities table is often on the page after the assets table. They are often located directly before the win and loss statement. Rarely the tables for any of the three can span multiple pages.&quot;</span>}</span></code></pre></div>
</details>
<p><a href="glossary.html#acronyms_TOC">TOC</a> extraction from text prompt:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb106"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb106-1"><a href="appendix.html#cb106-1" tabindex="-1"></a>    messages <span class="op">=</span> [</span>
<span id="cb106-2"><a href="appendix.html#cb106-2" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;[Role] You are a helpful assistant that can identify table of contents in a German financial report.&quot;</span>},</span>
<span id="cb106-3"><a href="appendix.html#cb106-3" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;[Context] These are the text lines of the first </span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> pages:</span><span class="ch">\n\n</span><span class="sc">{</span>start_pages<span class="sc">}</span><span class="ss">&quot;</span>},</span>
<span id="cb106-4"><a href="appendix.html#cb106-4" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;[Tasks] 1. Please identify if there is a table of contents in the text.&quot;</span>},</span>
<span id="cb106-5"><a href="appendix.html#cb106-5" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;2. If there is a table of contents, please extract its text.&quot;</span>},</span>
<span id="cb106-6"><a href="appendix.html#cb106-6" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;3. Answer as JSON with the table of contents text as string in the key &#39;toc&#39;.&quot;</span>},</span>
<span id="cb106-7"><a href="appendix.html#cb106-7" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;If there is no table of contents, return an empty string.&quot;</span>},</span>
<span id="cb106-8"><a href="appendix.html#cb106-8" tabindex="-1"></a>    ]</span></code></pre></div>
</details>
</div>
<div id="classification-prompts" class="section level3 hasAnchor" number="8.5.2">
<h3><span class="header-section-number">8.5.2</span> Classification<a href="appendix.html#classification-prompts" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>binary classification prompt factory</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb107"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb107-1"><a href="appendix.html#cb107-1" tabindex="-1"></a>messages <span class="op">=</span> [{<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;[Role and Context]: You are a helpful assistant that can classify texts extracted from PDFs.&quot;</span>}]</span>
<span id="cb107-2"><a href="appendix.html#cb107-2" tabindex="-1"></a></span>
<span id="cb107-3"><a href="appendix.html#cb107-3" tabindex="-1"></a><span class="cf">if</span> law_context:</span>
<span id="cb107-4"><a href="appendix.html#cb107-4" tabindex="-1"></a>    <span class="cf">if</span> classification_type <span class="op">==</span> <span class="st">&quot;GuV&quot;</span>:</span>
<span id="cb107-5"><a href="appendix.html#cb107-5" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;You know the laws about how to structure the &#39;Gewinn- und Verlustrechnung&#39; (profit and loss statement) table:&#39; </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>hgb_guv<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;.&quot;</span>})</span>
<span id="cb107-6"><a href="appendix.html#cb107-6" tabindex="-1"></a>    <span class="cf">elif</span> classification_type <span class="op">==</span> <span class="st">&quot;Aktiva&quot;</span>:</span>
<span id="cb107-7"><a href="appendix.html#cb107-7" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;You know the laws about how to structure the &#39;Aktiva&#39; (assets) table for a &#39;Bilanz&#39; (balance sheet):&#39; </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>hgb_aktiva<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;.&quot;</span>})</span>
<span id="cb107-8"><a href="appendix.html#cb107-8" tabindex="-1"></a>    <span class="cf">elif</span> classification_type <span class="op">==</span> <span class="st">&quot;Passiva&quot;</span>:</span>
<span id="cb107-9"><a href="appendix.html#cb107-9" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;You know the laws about how to structure the &#39;Passiva&#39; (liabilities) table for a &#39;Bilanz&#39; (balance sheet):&#39; </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>hgb_passiva<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;.&quot;</span>})</span>
<span id="cb107-10"><a href="appendix.html#cb107-10" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb107-11"><a href="appendix.html#cb107-11" tabindex="-1"></a>        <span class="cf">raise</span> <span class="pp">ValueError</span>(<span class="ss">f&quot;Unknown classification type: </span><span class="sc">{</span>classification_type<span class="sc">}</span><span class="ss">. Expected &#39;GuV&#39;, &#39;Aktiva&#39;, or &#39;Passiva&#39;.&quot;</span>)</span>
<span id="cb107-12"><a href="appendix.html#cb107-12" tabindex="-1"></a></span>
<span id="cb107-13"><a href="appendix.html#cb107-13" tabindex="-1"></a><span class="cf">if</span> random_examples:</span>
<span id="cb107-14"><a href="appendix.html#cb107-14" tabindex="-1"></a>    system_messages <span class="op">=</span> <span class="va">self</span>.__get_random_example_message(classification_type, <span class="op">**</span>kwargs)</span>
<span id="cb107-15"><a href="appendix.html#cb107-15" tabindex="-1"></a>    <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb107-16"><a href="appendix.html#cb107-16" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb107-17"><a href="appendix.html#cb107-17" tabindex="-1"></a></span>
<span id="cb107-18"><a href="appendix.html#cb107-18" tabindex="-1"></a><span class="cf">if</span> rag_examples:</span>
<span id="cb107-19"><a href="appendix.html#cb107-19" tabindex="-1"></a>    system_messages <span class="op">=</span> <span class="va">self</span>.__get_rag_example_message(text, classification_type, <span class="op">**</span>kwargs)</span>
<span id="cb107-20"><a href="appendix.html#cb107-20" tabindex="-1"></a>    <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb107-21"><a href="appendix.html#cb107-21" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb107-22"><a href="appendix.html#cb107-22" tabindex="-1"></a></span>
<span id="cb107-23"><a href="appendix.html#cb107-23" tabindex="-1"></a><span class="cf">if</span> top_n_rag_examples:</span>
<span id="cb107-24"><a href="appendix.html#cb107-24" tabindex="-1"></a>    system_messages <span class="op">=</span> <span class="va">self</span>.__get_top_n_rag_example_message(text, classification_type, <span class="op">**</span>kwargs)</span>
<span id="cb107-25"><a href="appendix.html#cb107-25" tabindex="-1"></a>    <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb107-26"><a href="appendix.html#cb107-26" tabindex="-1"></a>        messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb107-27"><a href="appendix.html#cb107-27" tabindex="-1"></a></span>
<span id="cb107-28"><a href="appendix.html#cb107-28" tabindex="-1"></a>messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;[Task]: Decide if the given text contains </span><span class="sc">{</span>phrase_dict[classification_type]<span class="sc">}</span><span class="ss">.</span><span class="ch">\n\n</span><span class="ss">[Rule]: Answer with &#39;yes&#39; if it does. Otherwise answer with &#39;no&#39;.</span><span class="ch">\n\n</span><span class="ss">[Text]: Here is the text to classify: </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>text<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;&quot;</span>})</span>
<span id="cb107-29"><a href="appendix.html#cb107-29" tabindex="-1"></a><span class="cf">return</span> messages</span></code></pre></div>
</details>
<p>example for binary classification with 1 random example with Qwen 3</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb108-1"><a href="appendix.html#cb108-1" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb108-2"><a href="appendix.html#cb108-2" tabindex="-1"></a>/no_think [Role and Context]: You are a helpful assistant that can classify texts extracted from PDFs.&lt;|im_end|&gt;</span>
<span id="cb108-3"><a href="appendix.html#cb108-3" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb108-4"><a href="appendix.html#cb108-4" tabindex="-1"></a>You know this example for a \&#39;Gewinn- und Verlustrechnung\&#39; (profit and loss statement) table and for this example you should answer with &quot;no&quot;:</span>
<span id="cb108-5"><a href="appendix.html#cb108-5" tabindex="-1"></a></span>
<span id="cb108-6"><a href="appendix.html#cb108-6" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb108-7"><a href="appendix.html#cb108-7" tabindex="-1"></a>28</span>
<span id="cb108-8"><a href="appendix.html#cb108-8" tabindex="-1"></a>2023</span>
<span id="cb108-9"><a href="appendix.html#cb108-9" tabindex="-1"></a>EUR</span>
<span id="cb108-10"><a href="appendix.html#cb108-10" tabindex="-1"></a>2022</span>
<span id="cb108-11"><a href="appendix.html#cb108-11" tabindex="-1"></a>EUR</span>
<span id="cb108-12"><a href="appendix.html#cb108-12" tabindex="-1"></a>EUR EUR</span>
<span id="cb108-13"><a href="appendix.html#cb108-13" tabindex="-1"></a>1. Umsatzerlöse 1.315.073,26 1.507.621,05</span>
<span id="cb108-14"><a href="appendix.html#cb108-14" tabindex="-1"></a>2. Sonstige betriebliche Erträge 562.644,72 631.803,96</span>
<span id="cb108-15"><a href="appendix.html#cb108-15" tabindex="-1"></a>3. Materialaufwand -388.989,26 -98.471,89</span>
<span id="cb108-16"><a href="appendix.html#cb108-16" tabindex="-1"></a>4. Abschreibungen -447.356,00 -460.923,00</span>
<span id="cb108-17"><a href="appendix.html#cb108-17" tabindex="-1"></a>5. Sonstige betriebliche Aufwendungen -907.414,53 -2.304.390,53</span>
<span id="cb108-18"><a href="appendix.html#cb108-18" tabindex="-1"></a>6. Sonstige Zinsen und ähnliche Erträge 95.260,94 -2.533,45</span>
<span id="cb108-19"><a href="appendix.html#cb108-19" tabindex="-1"></a>7. Ergebnis nach Steuern 229.219,13 -726.893,86</span>
<span id="cb108-20"><a href="appendix.html#cb108-20" tabindex="-1"></a>8. Sonstige Steuern -857.535,62 -879.289,10</span>
<span id="cb108-21"><a href="appendix.html#cb108-21" tabindex="-1"></a>9. Jahresfehlbetrag -628.316,49 -1.606.182,96</span>
<span id="cb108-22"><a href="appendix.html#cb108-22" tabindex="-1"></a>Gewinn- und Verlustrechnung</span>
<span id="cb108-23"><a href="appendix.html#cb108-23" tabindex="-1"></a>für die Zeit vom 01. Januar bis 31. Dezember 2023</span>
<span id="cb108-24"><a href="appendix.html#cb108-24" tabindex="-1"></a>\&#39;\&#39;\&#39;.&lt;|im_end|&gt;</span>
<span id="cb108-25"><a href="appendix.html#cb108-25" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb108-26"><a href="appendix.html#cb108-26" tabindex="-1"></a>You know this example for a \&#39;Aktiva\&#39; (assets) table and for this example you should answer with &quot;yes&quot;:</span>
<span id="cb108-27"><a href="appendix.html#cb108-27" tabindex="-1"></a></span>
<span id="cb108-28"><a href="appendix.html#cb108-28" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb108-29"><a href="appendix.html#cb108-29" tabindex="-1"></a>BEN Berlin Energie und Netzholding GmbH (vormals: Berlin Energie Rekom 2 GmbH)</span>
<span id="cb108-30"><a href="appendix.html#cb108-30" tabindex="-1"></a>Berlin</span>
<span id="cb108-31"><a href="appendix.html#cb108-31" tabindex="-1"></a>Bilanz zum 31.12.2021</span>
<span id="cb108-32"><a href="appendix.html#cb108-32" tabindex="-1"></a>Aktivseite 31.12.2021 31.12.2020 31.12.2021 31.12.2020</span>
<span id="cb108-33"><a href="appendix.html#cb108-33" tabindex="-1"></a>T€ T€ T€ T€</span>
<span id="cb108-34"><a href="appendix.html#cb108-34" tabindex="-1"></a>A. Anlagevermögen A. Eigenkapital</span>
<span id="cb108-35"><a href="appendix.html#cb108-35" tabindex="-1"></a>imv I. Immaterielle Vermögensgegenstände 0,8 - ek I. Gezeichnetes Kapital 25,0 25,0</span>
<span id="cb108-36"><a href="appendix.html#cb108-36" tabindex="-1"></a>bga II. Sachanlagen 73,1 - kr II. Kapitalrücklage 6,9 6,9</span>
<span id="cb108-37"><a href="appendix.html#cb108-37" tabindex="-1"></a>III. Finanzanlagen 2.094.146,0 - vv III. Verlustvortrag - 6,9 - 6,9</span>
<span id="cb108-38"><a href="appendix.html#cb108-38" tabindex="-1"></a>IV. Jahresüberschuss 1.326,7 -</span>
<span id="cb108-39"><a href="appendix.html#cb108-39" tabindex="-1"></a> 2.094.219,9 -</span>
<span id="cb108-40"><a href="appendix.html#cb108-40" tabindex="-1"></a> 1.351,7 25,0</span>
<span id="cb108-41"><a href="appendix.html#cb108-41" tabindex="-1"></a>B. Umlaufvermögen sor</span>
<span id="cb108-42"><a href="appendix.html#cb108-42" tabindex="-1"></a>unf I. Forderungen und sonstige B. Rückstellungen</span>
<span id="cb108-43"><a href="appendix.html#cb108-43" tabindex="-1"></a> Vermögensgegenstände Sonstige Rückstellungen 265,1 6,7</span>
<span id="cb108-44"><a href="appendix.html#cb108-44" tabindex="-1"></a>Forderungen gegen verbundene</span>
<span id="cb108-45"><a href="appendix.html#cb108-45" tabindex="-1"></a>Unternehmen 423,1 - anzC. Verbindlichkeiten</span>
<span id="cb108-46"><a href="appendix.html#cb108-46" tabindex="-1"></a>1. Verbindlichkeiten gegenüber</span>
<span id="cb108-47"><a href="appendix.html#cb108-47" tabindex="-1"></a>fll II. Guthaben bei Kreditinstituten 166.662,0 39,2 vll Kreditinstituten 2.180.051,3 -</span>
<span id="cb108-48"><a href="appendix.html#cb108-48" tabindex="-1"></a>2. Verbindlichkeiten aus</span>
<span id="cb108-49"><a href="appendix.html#cb108-49" tabindex="-1"></a> 167.085,1 39,2 Lieferungen und Leistungen 91,9 1,9</span>
<span id="cb108-50"><a href="appendix.html#cb108-50" tabindex="-1"></a>3. Verbindlichkeiten gegenüber</span>
<span id="cb108-51"><a href="appendix.html#cb108-51" tabindex="-1"></a> verbundenen Unternehmen 81.286,7 -</span>
<span id="cb108-52"><a href="appendix.html#cb108-52" tabindex="-1"></a>C. Rechnungsabgrenzungsposten 2.471,2 - vvu 4. Verbindlichkeiten gegenüber</span>
<span id="cb108-53"><a href="appendix.html#cb108-53" tabindex="-1"></a> Gesellschaftern 713,9 5,6</span>
<span id="cb108-54"><a href="appendix.html#cb108-54" tabindex="-1"></a>5. Sonstige Verbindlichkeiten 15,6 -</span>
<span id="cb108-55"><a href="appendix.html#cb108-55" tabindex="-1"></a> 2.262.159,4 7,5</span>
<span id="cb108-56"><a href="appendix.html#cb108-56" tabindex="-1"></a> 2.263.776,2 39,2 2.263.776,2 39,2</span>
<span id="cb108-57"><a href="appendix.html#cb108-57" tabindex="-1"></a>Passivseite</span>
<span id="cb108-58"><a href="appendix.html#cb108-58" tabindex="-1"></a> 21-006917</span>
<span id="cb108-59"><a href="appendix.html#cb108-59" tabindex="-1"></a>\&#39;\&#39;\&#39;.&lt;|im_end|&gt;</span>
<span id="cb108-60"><a href="appendix.html#cb108-60" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb108-61"><a href="appendix.html#cb108-61" tabindex="-1"></a>You know this example for a \&#39;Passiva\&#39; (liabilities) table and for this example you should answer with &quot;no&quot;:</span>
<span id="cb108-62"><a href="appendix.html#cb108-62" tabindex="-1"></a></span>
<span id="cb108-63"><a href="appendix.html#cb108-63" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb108-64"><a href="appendix.html#cb108-64" tabindex="-1"></a>4 </span>
<span id="cb108-65"><a href="appendix.html#cb108-65" tabindex="-1"></a> Bilanz Elektrizitätsverteilung </span>
<span id="cb108-66"><a href="appendix.html#cb108-66" tabindex="-1"></a>Aktiva 31.12.2022</span>
<span id="cb108-67"><a href="appendix.html#cb108-67" tabindex="-1"></a>T€</span>
<span id="cb108-68"><a href="appendix.html#cb108-68" tabindex="-1"></a>Anlagevermögen</span>
<span id="cb108-69"><a href="appendix.html#cb108-69" tabindex="-1"></a>imv Immaterielle Vermögensgegenstände -</span>
<span id="cb108-70"><a href="appendix.html#cb108-70" tabindex="-1"></a>bga Sachanlagen -</span>
<span id="cb108-71"><a href="appendix.html#cb108-71" tabindex="-1"></a>Finanzanlagen -</span>
<span id="cb108-72"><a href="appendix.html#cb108-72" tabindex="-1"></a> -</span>
<span id="cb108-73"><a href="appendix.html#cb108-73" tabindex="-1"></a>Umlaufvermögen</span>
<span id="cb108-74"><a href="appendix.html#cb108-74" tabindex="-1"></a>unf Forderungen und sonstige Vermögensgegenstände 329,6</span>
<span id="cb108-75"><a href="appendix.html#cb108-75" tabindex="-1"></a>davon Verrechnungsposten gegenüber anderen Aktivitäten 289,9</span>
<span id="cb108-76"><a href="appendix.html#cb108-76" tabindex="-1"></a>fll Guthaben bei Kreditinstituten -</span>
<span id="cb108-77"><a href="appendix.html#cb108-77" tabindex="-1"></a> 329,6</span>
<span id="cb108-78"><a href="appendix.html#cb108-78" tabindex="-1"></a>Rechnungsabgrenzungsposten 17,9</span>
<span id="cb108-79"><a href="appendix.html#cb108-79" tabindex="-1"></a> 347,6</span>
<span id="cb108-80"><a href="appendix.html#cb108-80" tabindex="-1"></a>Passiva 31.12.2022</span>
<span id="cb108-81"><a href="appendix.html#cb108-81" tabindex="-1"></a>T€</span>
<span id="cb108-82"><a href="appendix.html#cb108-82" tabindex="-1"></a>Eigenkapital</span>
<span id="cb108-83"><a href="appendix.html#cb108-83" tabindex="-1"></a>ek Gezeichnetes Kapital -</span>
<span id="cb108-84"><a href="appendix.html#cb108-84" tabindex="-1"></a>kr Kapitalrücklage -</span>
<span id="cb108-85"><a href="appendix.html#cb108-85" tabindex="-1"></a>vv Gewinnrücklage/Verlustvortrag -</span>
<span id="cb108-86"><a href="appendix.html#cb108-86" tabindex="-1"></a>Jahresüberschuss 0,1</span>
<span id="cb108-87"><a href="appendix.html#cb108-87" tabindex="-1"></a> 0,1</span>
<span id="cb108-88"><a href="appendix.html#cb108-88" tabindex="-1"></a>Rückstellungen</span>
<span id="cb108-89"><a href="appendix.html#cb108-89" tabindex="-1"></a>Sonstige Rückstellungen 258,4</span>
<span id="cb108-90"><a href="appendix.html#cb108-90" tabindex="-1"></a>Verbindlichkeiten</span>
<span id="cb108-91"><a href="appendix.html#cb108-91" tabindex="-1"></a>anz Verbindlichkeiten gegenüber Kreditinstituten -</span>
<span id="cb108-92"><a href="appendix.html#cb108-92" tabindex="-1"></a>vll Verbindlichkeiten aus Lieferungen und Leistungen 89,0</span>
<span id="cb108-93"><a href="appendix.html#cb108-93" tabindex="-1"></a>Verbindlichkeiten gegenüber Gesellschaftern -</span>
<span id="cb108-94"><a href="appendix.html#cb108-94" tabindex="-1"></a>Sonstige Verbindlichkeiten -</span>
<span id="cb108-95"><a href="appendix.html#cb108-95" tabindex="-1"></a> 89,0</span>
<span id="cb108-96"><a href="appendix.html#cb108-96" tabindex="-1"></a> 347,6</span>
<span id="cb108-97"><a href="appendix.html#cb108-97" tabindex="-1"></a>\&#39;\&#39;\&#39;.&lt;|im_end|&gt;</span>
<span id="cb108-98"><a href="appendix.html#cb108-98" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb108-99"><a href="appendix.html#cb108-99" tabindex="-1"></a>You know this example for a text that does not suit the categories of interest and for this example you should answer with &quot;no&quot;:</span>
<span id="cb108-100"><a href="appendix.html#cb108-100" tabindex="-1"></a></span>
<span id="cb108-101"><a href="appendix.html#cb108-101" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb108-102"><a href="appendix.html#cb108-102" tabindex="-1"></a>Bericht des </span>
<span id="cb108-103"><a href="appendix.html#cb108-103" tabindex="-1"></a>Aufsichtsrates</span>
<span id="cb108-104"><a href="appendix.html#cb108-104" tabindex="-1"></a>Sehr geehrte Damen, </span>
<span id="cb108-105"><a href="appendix.html#cb108-105" tabindex="-1"></a>sehr geehrte Herren,</span>
<span id="cb108-106"><a href="appendix.html#cb108-106" tabindex="-1"></a>mit diesem Bericht informieren wir über unsere Tätigkeit im Geschäftsjahr 2016 </span>
<span id="cb108-107"><a href="appendix.html#cb108-107" tabindex="-1"></a>und das Ergebnis der Prüfung des Jahresabschlusses. Die uns nach Gesetz, Satzung </span>
<span id="cb108-108"><a href="appendix.html#cb108-108" tabindex="-1"></a>und Geschäftsordnung obliegenden Kontroll- und Beratungsaufgaben haben </span>
<span id="cb108-109"><a href="appendix.html#cb108-109" tabindex="-1"></a>wir verantwortungsvoll und mit der gebührenden Sorgfalt wahrgenommen. Dabei </span>
<span id="cb108-110"><a href="appendix.html#cb108-110" tabindex="-1"></a>haben wir den Vorstand bei der Leitung der GESOBAU beratend begleitet, seine </span>
<span id="cb108-111"><a href="appendix.html#cb108-111" tabindex="-1"></a>Tätigkeit überwacht und waren in alle für die Gesellschaft grundlegend bedeutenden </span>
<span id="cb108-112"><a href="appendix.html#cb108-112" tabindex="-1"></a>Entscheidungen unmittelbar eingebunden. Der Vorstand ist seinen Informations\x02pflichten uneingeschränkt nachgekommen und hat uns regelmäßig sowohl schrift\x02lich als auch mündlich informiert. Dies geschah zeitnah und umfassend zu allen </span>
<span id="cb108-113"><a href="appendix.html#cb108-113" tabindex="-1"></a>Aspekten der Unternehmensplanung, dem Verlauf der Geschäfte, der strategischen </span>
<span id="cb108-114"><a href="appendix.html#cb108-114" tabindex="-1"></a>Weiterentwicklung sowie der aktuellen Lage des Unternehmens. Planabweichungen </span>
<span id="cb108-115"><a href="appendix.html#cb108-115" tabindex="-1"></a>beim Geschäftsverlauf wurden uns im Einzelnen erläutert und mit schlüssigen </span>
<span id="cb108-116"><a href="appendix.html#cb108-116" tabindex="-1"></a>Argumenten begründet. Der Vorstand stimmte die strategische Ausrichtung des </span>
<span id="cb108-117"><a href="appendix.html#cb108-117" tabindex="-1"></a>Unternehmens vertrauensvoll mit uns ab. Die für das Unternehmen bedeutenden </span>
<span id="cb108-118"><a href="appendix.html#cb108-118" tabindex="-1"></a>Geschäftsvorgänge haben wir auf der Basis der Berichte des Vorstandes ausführlich </span>
<span id="cb108-119"><a href="appendix.html#cb108-119" tabindex="-1"></a>erörtert und seinen Beschlussvorschlägen nach gründlicher Prüfung und Beratung </span>
<span id="cb108-120"><a href="appendix.html#cb108-120" tabindex="-1"></a>zugestimmt.</span>
<span id="cb108-121"><a href="appendix.html#cb108-121" tabindex="-1"></a>Sitzungen</span>
<span id="cb108-122"><a href="appendix.html#cb108-122" tabindex="-1"></a>Im Berichtsjahr fanden vier turnusgemäße und eine außerordentliche Sitzung statt. </span>
<span id="cb108-123"><a href="appendix.html#cb108-123" tabindex="-1"></a>Die Sitzungen des Aufsichtsrates sind von einem intensiven und offenen Austausch </span>
<span id="cb108-124"><a href="appendix.html#cb108-124" tabindex="-1"></a>geprägt. Ein Mitglied des Aufsichtsrates hat im abgelaufenen Geschäftsjahr an </span>
<span id="cb108-125"><a href="appendix.html#cb108-125" tabindex="-1"></a>weniger als der Hälfte der Sitzungen teilgenommen. Aufgrund besonderer Eilbe\x02dürftigkeit erfolgten in Abstimmung mit der Vorsitzenden des Aufsichtsrates vier </span>
<span id="cb108-126"><a href="appendix.html#cb108-126" tabindex="-1"></a>Beschlussfassungen im Umlaufverfahren.</span>
<span id="cb108-127"><a href="appendix.html#cb108-127" tabindex="-1"></a>Die Mitglieder des Aufsichtsrates bereiten sich auf anstehende Beschlüsse regelmäßig </span>
<span id="cb108-128"><a href="appendix.html#cb108-128" tabindex="-1"></a>auch anhand von Unterlagen vor, die der Vorstand vorab zur Verfügung stellt. Dabei </span>
<span id="cb108-129"><a href="appendix.html#cb108-129" tabindex="-1"></a>wurden sie von den jeweils zuständigen Ausschüssen unterstützt. Die Aufsichtsrats\x02sitzungen werden zudem von den Arbeitnehmervertretern in Gesprächen mit dem </span>
<span id="cb108-130"><a href="appendix.html#cb108-130" tabindex="-1"></a>Vorstand vorbereitet.</span>
<span id="cb108-131"><a href="appendix.html#cb108-131" tabindex="-1"></a>Information durch den Vorstand</span>
<span id="cb108-132"><a href="appendix.html#cb108-132" tabindex="-1"></a>Über die wichtigsten Indikatoren der Geschäftsentwicklung und bestehende Risiken </span>
<span id="cb108-133"><a href="appendix.html#cb108-133" tabindex="-1"></a>unterrichtet der Vorstand den Aufsichtsrat anhand schriftlicher Quartalsberichte. </span>
<span id="cb108-134"><a href="appendix.html#cb108-134" tabindex="-1"></a>Zwischen den Sitzungsterminen des Aufsichtsrates und seiner Ausschüsse wurde </span>
<span id="cb108-135"><a href="appendix.html#cb108-135" tabindex="-1"></a>die Aufsichtsratsvorsitzende ausführlich unterrichtet. Hierbei wurde die Strategie </span>
<span id="cb108-136"><a href="appendix.html#cb108-136" tabindex="-1"></a>des Unternehmens besprochen, wie auch die aktuelle Geschäftsentwicklung und </span>
<span id="cb108-137"><a href="appendix.html#cb108-137" tabindex="-1"></a>-lage, das Risikomanagement, Fragen der Compliance sowie wesentliche Einzel\x02themen und bevorstehende bedeutsame Entscheidungen erörtert.</span>
<span id="cb108-138"><a href="appendix.html#cb108-138" tabindex="-1"></a>16 Perspektiven Bericht des Aufsichtsrates</span>
<span id="cb108-139"><a href="appendix.html#cb108-139" tabindex="-1"></a>\&#39;\&#39;\&#39;.&lt;|im_end|&gt;</span>
<span id="cb108-140"><a href="appendix.html#cb108-140" tabindex="-1"></a>&lt;|im_start|&gt;user</span>
<span id="cb108-141"><a href="appendix.html#cb108-141" tabindex="-1"></a>[Task]: Decide if the given text contains a \&#39;Aktiva\&#39; (assets) table.</span>
<span id="cb108-142"><a href="appendix.html#cb108-142" tabindex="-1"></a></span>
<span id="cb108-143"><a href="appendix.html#cb108-143" tabindex="-1"></a>[Rule]: Answer with \&#39;yes\&#39; if it does. Otherwise answer with \&#39;no\&#39;.</span>
<span id="cb108-144"><a href="appendix.html#cb108-144" tabindex="-1"></a></span>
<span id="cb108-145"><a href="appendix.html#cb108-145" tabindex="-1"></a>[Text]: Here is the text to classify: </span>
<span id="cb108-146"><a href="appendix.html#cb108-146" tabindex="-1"></a></span>
<span id="cb108-147"><a href="appendix.html#cb108-147" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb108-148"><a href="appendix.html#cb108-148" tabindex="-1"></a>22 Amt für Statistik Berlin-Brandenburg | Geschäftsbericht 2014</span>
<span id="cb108-149"><a href="appendix.html#cb108-149" tabindex="-1"></a>Amt für Statistik Berlin-Brandenburg Anstalt des öffentlichen Rechts, Potsdam</span>
<span id="cb108-150"><a href="appendix.html#cb108-150" tabindex="-1"></a>Bilanz zum 31. Dezember 2014</span>
<span id="cb108-151"><a href="appendix.html#cb108-151" tabindex="-1"></a>A K T I V S E I T E 31.12.2014 Vorjahr </span>
<span id="cb108-152"><a href="appendix.html#cb108-152" tabindex="-1"></a>EUR EUR TEUR </span>
<span id="cb108-153"><a href="appendix.html#cb108-153" tabindex="-1"></a>A. ANLAGEVERMÖGEN </span>
<span id="cb108-154"><a href="appendix.html#cb108-154" tabindex="-1"></a>I. Immaterielle Vermögensgegenstände </span>
<span id="cb108-155"><a href="appendix.html#cb108-155" tabindex="-1"></a>1. Entgeltlich erworbene Konzessionen, gewerbliche </span>
<span id="cb108-156"><a href="appendix.html#cb108-156" tabindex="-1"></a>Schutzrechte und ähnliche Rechte und Werte </span>
<span id="cb108-157"><a href="appendix.html#cb108-157" tabindex="-1"></a>sowie Lizenzen an solchen Rechten und Werten 81.480,00 146</span>
<span id="cb108-158"><a href="appendix.html#cb108-158" tabindex="-1"></a>II. Sachanlagen</span>
<span id="cb108-159"><a href="appendix.html#cb108-159" tabindex="-1"></a>1. Grundstücke, grundstücksgleiche Rechte und Bauten </span>
<span id="cb108-160"><a href="appendix.html#cb108-160" tabindex="-1"></a>einschließlich der Bauten auf fremden Grundstücken 68.386,00 93</span>
<span id="cb108-161"><a href="appendix.html#cb108-161" tabindex="-1"></a>2. Andere Anlagen, Betriebs- und Geschäftsausstattung 140.186,00 174 </span>
<span id="cb108-162"><a href="appendix.html#cb108-162" tabindex="-1"></a>208.572,00 267</span>
<span id="cb108-163"><a href="appendix.html#cb108-163" tabindex="-1"></a>III. Finanzanlagen </span>
<span id="cb108-164"><a href="appendix.html#cb108-164" tabindex="-1"></a>1. Wertpapiere des Anlagevermögens 2.000.000,00 2.000 </span>
<span id="cb108-165"><a href="appendix.html#cb108-165" tabindex="-1"></a>2.000.000,00 2.000 </span>
<span id="cb108-166"><a href="appendix.html#cb108-166" tabindex="-1"></a>2.290.052,00 2.413</span>
<span id="cb108-167"><a href="appendix.html#cb108-167" tabindex="-1"></a>B. UMLAUFVERMÖGEN </span>
<span id="cb108-168"><a href="appendix.html#cb108-168" tabindex="-1"></a>I. Forderungen und sonstige Vermögensgegenstände </span>
<span id="cb108-169"><a href="appendix.html#cb108-169" tabindex="-1"></a>1. Forderungen aus Lieferungen und Leistungen 36.617,86 14 </span>
<span id="cb108-170"><a href="appendix.html#cb108-170" tabindex="-1"></a>2. Sonstige Vermögensgegenstände 297.982,42 267 </span>
<span id="cb108-171"><a href="appendix.html#cb108-171" tabindex="-1"></a>334.600,28 281 </span>
<span id="cb108-172"><a href="appendix.html#cb108-172" tabindex="-1"></a>II. Kassenbestand, Bundesbankguthaben, Guthaben bei </span>
<span id="cb108-173"><a href="appendix.html#cb108-173" tabindex="-1"></a>Kreditinstituten und Schecks 5.560.638,85 7.783</span>
<span id="cb108-174"><a href="appendix.html#cb108-174" tabindex="-1"></a>5.895.239,13 8.064</span>
<span id="cb108-175"><a href="appendix.html#cb108-175" tabindex="-1"></a>C. RECHNUNGSABGRENZUNGSPOSTEN 216.321,49 213</span>
<span id="cb108-176"><a href="appendix.html#cb108-176" tabindex="-1"></a>8.401.612,62 10.690 </span>
<span id="cb108-177"><a href="appendix.html#cb108-177" tabindex="-1"></a>Bestätigungsvermerk </span>
<span id="cb108-178"><a href="appendix.html#cb108-178" tabindex="-1"></a>des Abschlussprüfers</span>
<span id="cb108-179"><a href="appendix.html#cb108-179" tabindex="-1"></a>Anhang</span>
<span id="cb108-180"><a href="appendix.html#cb108-180" tabindex="-1"></a>\&#39;\&#39;\&#39;&lt;|im_end|&gt;</span>
<span id="cb108-181"><a href="appendix.html#cb108-181" tabindex="-1"></a>&lt;|im_start|&gt;assistant</span></code></pre></div>
<p>multi-class classification prompt factory</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb109"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb109-1"><a href="appendix.html#cb109-1" tabindex="-1"></a>messages <span class="op">=</span> [</span>
<span id="cb109-2"><a href="appendix.html#cb109-2" tabindex="-1"></a>  {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;[Role and Context]: You are a helpful assistant that can classify texts extracted from PDFs.&quot;</span>},</span>
<span id="cb109-3"><a href="appendix.html#cb109-3" tabindex="-1"></a>]</span>
<span id="cb109-4"><a href="appendix.html#cb109-4" tabindex="-1"></a></span>
<span id="cb109-5"><a href="appendix.html#cb109-5" tabindex="-1"></a><span class="cf">if</span> law_context:</span>
<span id="cb109-6"><a href="appendix.html#cb109-6" tabindex="-1"></a>  messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;You know the laws about how to structure the &#39;Gewinn- und Verlustrechnung&#39; (profit and loss statement) table:&#39; </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>hgb_guv<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;.&quot;</span>})</span>
<span id="cb109-7"><a href="appendix.html#cb109-7" tabindex="-1"></a>  messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;You also know the laws about how to structure the &#39;Aktiva&#39; (assets) and &#39;Passiva&#39; (liabilities) table for a &#39;Bilanz&#39; (balance sheet):&#39; </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>hgb_bilanz<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;.&quot;</span>})</span>
<span id="cb109-8"><a href="appendix.html#cb109-8" tabindex="-1"></a></span>
<span id="cb109-9"><a href="appendix.html#cb109-9" tabindex="-1"></a><span class="cf">if</span> random_examples:</span>
<span id="cb109-10"><a href="appendix.html#cb109-10" tabindex="-1"></a>  system_messages <span class="op">=</span> <span class="va">self</span>.__get_random_example_message(<span class="op">**</span>kwargs)</span>
<span id="cb109-11"><a href="appendix.html#cb109-11" tabindex="-1"></a>  <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb109-12"><a href="appendix.html#cb109-12" tabindex="-1"></a>      messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb109-13"><a href="appendix.html#cb109-13" tabindex="-1"></a></span>
<span id="cb109-14"><a href="appendix.html#cb109-14" tabindex="-1"></a><span class="cf">if</span> rag_examples:</span>
<span id="cb109-15"><a href="appendix.html#cb109-15" tabindex="-1"></a>  system_messages <span class="op">=</span> <span class="va">self</span>.__get_rag_example_message(text, <span class="op">**</span>kwargs)</span>
<span id="cb109-16"><a href="appendix.html#cb109-16" tabindex="-1"></a>  <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb109-17"><a href="appendix.html#cb109-17" tabindex="-1"></a>      messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb109-18"><a href="appendix.html#cb109-18" tabindex="-1"></a></span>
<span id="cb109-19"><a href="appendix.html#cb109-19" tabindex="-1"></a><span class="cf">if</span> top_n_rag_examples:</span>
<span id="cb109-20"><a href="appendix.html#cb109-20" tabindex="-1"></a>  system_messages <span class="op">=</span> <span class="va">self</span>.__get_top_n_rag_example_message(text, <span class="op">**</span>kwargs)</span>
<span id="cb109-21"><a href="appendix.html#cb109-21" tabindex="-1"></a>  <span class="cf">for</span> msg <span class="kw">in</span> system_messages:</span>
<span id="cb109-22"><a href="appendix.html#cb109-22" tabindex="-1"></a>      messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: msg})</span>
<span id="cb109-23"><a href="appendix.html#cb109-23" tabindex="-1"></a></span>
<span id="cb109-24"><a href="appendix.html#cb109-24" tabindex="-1"></a>messages.append({<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="ss">f&quot;&quot;&quot;</span></span>
<span id="cb109-25"><a href="appendix.html#cb109-25" tabindex="-1"></a><span class="ss">[Task]: Decide of what type the given text is. You can differentiate between four types of pages: &#39;Aktiva&#39;, &#39;GuV&#39;, &#39;Passiva&#39; and &#39;other&#39;.</span><span class="ch">\n\n</span></span>
<span id="cb109-26"><a href="appendix.html#cb109-26" tabindex="-1"></a><span class="ss">[Rules]:</span><span class="ch">\n</span></span>
<span id="cb109-27"><a href="appendix.html#cb109-27" tabindex="-1"></a><span class="ss">  1) If the text contains a &#39;Gewinn- und Verlustrechnung&#39; (profit and loss statement) table, answer with &#39;GuV&#39;.</span><span class="ch">\n\n</span></span>
<span id="cb109-28"><a href="appendix.html#cb109-28" tabindex="-1"></a><span class="ss">  2) If the text contains an &#39;Aktiva&#39; (assets) table, answer with &#39;Aktiva&#39;.</span><span class="ch">\n\n</span></span>
<span id="cb109-29"><a href="appendix.html#cb109-29" tabindex="-1"></a><span class="ss">  3) If the text contains a &#39;Passiva&#39; (liabilities) table, answer with &#39;Passiva&#39;.</span><span class="ch">\n\n</span></span>
<span id="cb109-30"><a href="appendix.html#cb109-30" tabindex="-1"></a><span class="ss">  4) If the text contains something else, answer with &#39;other&#39;.</span><span class="ch">\n\n</span></span>
<span id="cb109-31"><a href="appendix.html#cb109-31" tabindex="-1"></a><span class="ss">[Text]: Here is the text to classify: </span><span class="ch">\n\n</span><span class="ss">&#39;&#39;&#39;</span><span class="ch">\n</span><span class="sc">{</span>text<span class="sc">}</span><span class="ch">\n</span><span class="ss">&#39;&#39;&#39;</span></span>
<span id="cb109-32"><a href="appendix.html#cb109-32" tabindex="-1"></a><span class="ss">&quot;&quot;&quot;</span>})</span></code></pre></div>
</details>
<p>example for multi-class classification with 1 rag example with Qwen 3</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb110-1"><a href="appendix.html#cb110-1" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb110-2"><a href="appendix.html#cb110-2" tabindex="-1"></a>/no_think [Role and Context]: You are a helpful assistant that can classify texts extracted from PDFs.&lt;|im_end|&gt;</span>
<span id="cb110-3"><a href="appendix.html#cb110-3" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb110-4"><a href="appendix.html#cb110-4" tabindex="-1"></a>You know this example for a \&#39;Gewinn- und Verlustrechnung\&#39; (profit and loss statement) table and for this example you should answer with &quot;GuV&quot;:</span>
<span id="cb110-5"><a href="appendix.html#cb110-5" tabindex="-1"></a></span>
<span id="cb110-6"><a href="appendix.html#cb110-6" tabindex="-1"></a>&quot;&quot;&quot;</span>
<span id="cb110-7"><a href="appendix.html#cb110-7" tabindex="-1"></a>74</span>
<span id="cb110-8"><a href="appendix.html#cb110-8" tabindex="-1"></a>Gewinn- und Verlustrechnung für die Zeit vom 01.01.2014 bis 31.12.2014</span>
<span id="cb110-9"><a href="appendix.html#cb110-9" tabindex="-1"></a>Aufwendungen in TEUR Vorjahr</span>
<span id="cb110-10"><a href="appendix.html#cb110-10" tabindex="-1"></a>1. Zinsaufwendungen 302.081 314.077</span>
<span id="cb110-11"><a href="appendix.html#cb110-11" tabindex="-1"></a>2. Provisionsaufwendungen 714 656</span>
<span id="cb110-12"><a href="appendix.html#cb110-12" tabindex="-1"></a>4. Allgemeine Verwaltungsaufwendungen</span>
<span id="cb110-13"><a href="appendix.html#cb110-13" tabindex="-1"></a>a) Personalaufwand</span>
<span id="cb110-14"><a href="appendix.html#cb110-14" tabindex="-1"></a> aa) Löhne und Gehälter</span>
<span id="cb110-15"><a href="appendix.html#cb110-15" tabindex="-1"></a> ab) Soziale Abgaben und Aufwendungen</span>
<span id="cb110-16"><a href="appendix.html#cb110-16" tabindex="-1"></a> für Altersversorgung und für Unterstützung</span>
<span id="cb110-17"><a href="appendix.html#cb110-17" tabindex="-1"></a> darunter: für Altersversorgung</span>
<span id="cb110-18"><a href="appendix.html#cb110-18" tabindex="-1"></a>b) andere Verwaltungsaufwendungen</span>
<span id="cb110-19"><a href="appendix.html#cb110-19" tabindex="-1"></a> </span>
<span id="cb110-20"><a href="appendix.html#cb110-20" tabindex="-1"></a>39.535</span>
<span id="cb110-21"><a href="appendix.html#cb110-21" tabindex="-1"></a>9.009</span>
<span id="cb110-22"><a href="appendix.html#cb110-22" tabindex="-1"></a>2.417</span>
<span id="cb110-23"><a href="appendix.html#cb110-23" tabindex="-1"></a>48.544</span>
<span id="cb110-24"><a href="appendix.html#cb110-24" tabindex="-1"></a>31.161</span>
<span id="cb110-25"><a href="appendix.html#cb110-25" tabindex="-1"></a>79.705</span>
<span id="cb110-26"><a href="appendix.html#cb110-26" tabindex="-1"></a>39.310</span>
<span id="cb110-27"><a href="appendix.html#cb110-27" tabindex="-1"></a>11.020</span>
<span id="cb110-28"><a href="appendix.html#cb110-28" tabindex="-1"></a>4.651</span>
<span id="cb110-29"><a href="appendix.html#cb110-29" tabindex="-1"></a>50.330</span>
<span id="cb110-30"><a href="appendix.html#cb110-30" tabindex="-1"></a>24.983</span>
<span id="cb110-31"><a href="appendix.html#cb110-31" tabindex="-1"></a>75.313</span>
<span id="cb110-32"><a href="appendix.html#cb110-32" tabindex="-1"></a>5. Abschreibungen und Wertberichtigungen auf immaterielle</span>
<span id="cb110-33"><a href="appendix.html#cb110-33" tabindex="-1"></a>Anlagewerte und Sachanlagen 3.647 3.707</span>
<span id="cb110-34"><a href="appendix.html#cb110-34" tabindex="-1"></a>6. Sonstige betriebliche Aufwendungen 25.803 26.412</span>
<span id="cb110-35"><a href="appendix.html#cb110-35" tabindex="-1"></a>7. Abschreibungen und Wertberichtigungen auf Forderungen und </span>
<span id="cb110-36"><a href="appendix.html#cb110-36" tabindex="-1"></a>bestimmte Wertpapiere sowie Zuführungen zu </span>
<span id="cb110-37"><a href="appendix.html#cb110-37" tabindex="-1"></a>Rückstellungen im Kreditgeschäft 25.366 14.666</span>
<span id="cb110-38"><a href="appendix.html#cb110-38" tabindex="-1"></a>8. Abschreibungen und Wertberichtigungen auf Beteiligungen,</span>
<span id="cb110-39"><a href="appendix.html#cb110-39" tabindex="-1"></a>Anteile an verbundenen Unternehmen</span>
<span id="cb110-40"><a href="appendix.html#cb110-40" tabindex="-1"></a>und wie Anlagevermögen behandelte Wertpapiere 421 0</span>
<span id="cb110-41"><a href="appendix.html#cb110-41" tabindex="-1"></a>9. Aufwendungen aus Verlustübernahme 1.268 0</span>
<span id="cb110-42"><a href="appendix.html#cb110-42" tabindex="-1"></a>13. Sonstige Steuern, soweit nicht unter Posten 6 ausgewiesen 65 80</span>
<span id="cb110-43"><a href="appendix.html#cb110-43" tabindex="-1"></a>15. Jahresüberschuss 25.863 36.897</span>
<span id="cb110-44"><a href="appendix.html#cb110-44" tabindex="-1"></a>Summe der Aufwendungen 464.933 471.808</span>
<span id="cb110-45"><a href="appendix.html#cb110-45" tabindex="-1"></a>Jahresüberschuss 25.863 36.897</span>
<span id="cb110-46"><a href="appendix.html#cb110-46" tabindex="-1"></a>Gewinnvortrag aus dem Vorjahr 0 0</span>
<span id="cb110-47"><a href="appendix.html#cb110-47" tabindex="-1"></a>Bilanzgewinn 25.863 36.897</span>
<span id="cb110-48"><a href="appendix.html#cb110-48" tabindex="-1"></a>An unsere Geschäftspartner | Grußwort der Vorsitzenden des Verwaltungsrats | Bericht des Verwaltungsrats</span>
<span id="cb110-49"><a href="appendix.html#cb110-49" tabindex="-1"></a>Wohnungsbauförderung | Wirtschaftsförderung | Beteiligungen | Immobilien- und Stadtentwicklung | Personalbericht | Nachhaltigkeit </span>
<span id="cb110-50"><a href="appendix.html#cb110-50" tabindex="-1"></a>Lagebericht | Jahresabschluss | Anhang | Bestätigungsvermerk | Corporate-Governance-Bericht | Organigramm</span>
<span id="cb110-51"><a href="appendix.html#cb110-51" tabindex="-1"></a>&quot;&quot;&quot;. (The L2 distance of this example text is: 0.562)&lt;|im_end|&gt;</span>
<span id="cb110-52"><a href="appendix.html#cb110-52" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb110-53"><a href="appendix.html#cb110-53" tabindex="-1"></a>You know this example for a \&#39;Aktiva\&#39; (assets) table and for this example you should answer with &quot;Aktiva&quot;:</span>
<span id="cb110-54"><a href="appendix.html#cb110-54" tabindex="-1"></a></span>
<span id="cb110-55"><a href="appendix.html#cb110-55" tabindex="-1"></a>&quot;&quot;&quot;</span>
<span id="cb110-56"><a href="appendix.html#cb110-56" tabindex="-1"></a>52 Gruppenbilanz</span>
<span id="cb110-57"><a href="appendix.html#cb110-57" tabindex="-1"></a>Gruppenbilanz zum 31. Dezember 2016</span>
<span id="cb110-58"><a href="appendix.html#cb110-58" tabindex="-1"></a>A K T I V A 31. 12. 2016 31. 12. 2015</span>
<span id="cb110-59"><a href="appendix.html#cb110-59" tabindex="-1"></a>€ € €</span>
<span id="cb110-60"><a href="appendix.html#cb110-60" tabindex="-1"></a>A. ANLAGEVERMÖGEN</span>
<span id="cb110-61"><a href="appendix.html#cb110-61" tabindex="-1"></a>I. Immaterielle Vermögensgegenstände</span>
<span id="cb110-62"><a href="appendix.html#cb110-62" tabindex="-1"></a>Entgeltlich erworbene Konzessionen, gewerbliche </span>
<span id="cb110-63"><a href="appendix.html#cb110-63" tabindex="-1"></a>Schutzrechte und ähnliche Rechte 122.148,00 185.602,00</span>
<span id="cb110-64"><a href="appendix.html#cb110-64" tabindex="-1"></a>II. Sachanlagen</span>
<span id="cb110-65"><a href="appendix.html#cb110-65" tabindex="-1"></a>1. Anlageimmobilien 3.423.064.255,69 3.338.758.481,04</span>
<span id="cb110-66"><a href="appendix.html#cb110-66" tabindex="-1"></a>2. übrige Grundstücke und Bauten 4.143.376,87 1.087.406,00</span>
<span id="cb110-67"><a href="appendix.html#cb110-67" tabindex="-1"></a>3. technische Anlagen und Maschinen 120.700,00 149.667,00</span>
<span id="cb110-68"><a href="appendix.html#cb110-68" tabindex="-1"></a>4. andere Anlagen, Betriebs- und Geschäftsausstattung 5.143.477,51 4.555.161,48</span>
<span id="cb110-69"><a href="appendix.html#cb110-69" tabindex="-1"></a>5. geleistete Anzahlungen und Anlagen im Bau 1.007.468,36 180.543,58</span>
<span id="cb110-70"><a href="appendix.html#cb110-70" tabindex="-1"></a>3.433.479.278,43 3.344.731.259,10</span>
<span id="cb110-71"><a href="appendix.html#cb110-71" tabindex="-1"></a>III. Finanzanlagen</span>
<span id="cb110-72"><a href="appendix.html#cb110-72" tabindex="-1"></a>1. Anteile an verbundenen Unternehmen 1.026.647,27 1.027.646,27</span>
<span id="cb110-73"><a href="appendix.html#cb110-73" tabindex="-1"></a>2. Ausleihungen an verbundene Unternehmen 157.645,00 214.395,00</span>
<span id="cb110-74"><a href="appendix.html#cb110-74" tabindex="-1"></a>3. Beteiligungen 284.138,88 40.073,02</span>
<span id="cb110-75"><a href="appendix.html#cb110-75" tabindex="-1"></a>4. sonstige Ausleihungen 120.966,91 120.966,91</span>
<span id="cb110-76"><a href="appendix.html#cb110-76" tabindex="-1"></a>1.589.398,06 1.403.081,20</span>
<span id="cb110-77"><a href="appendix.html#cb110-77" tabindex="-1"></a>3.435.190.824,49 3.346.319.942,30</span>
<span id="cb110-78"><a href="appendix.html#cb110-78" tabindex="-1"></a>B. UMLAUFVERMÖGEN</span>
<span id="cb110-79"><a href="appendix.html#cb110-79" tabindex="-1"></a>I. Vorräte</span>
<span id="cb110-80"><a href="appendix.html#cb110-80" tabindex="-1"></a>1. unfertige Leistungen 48.642.315,18 52.057.422,25</span>
<span id="cb110-81"><a href="appendix.html#cb110-81" tabindex="-1"></a>2. andere Vorräte 13.053,63 21.315,99</span>
<span id="cb110-82"><a href="appendix.html#cb110-82" tabindex="-1"></a>48.655.368,81 52.078.738,24</span>
<span id="cb110-83"><a href="appendix.html#cb110-83" tabindex="-1"></a>II. Forderungen und sonstige Vermögensgegenstände</span>
<span id="cb110-84"><a href="appendix.html#cb110-84" tabindex="-1"></a>1. Forderungen aus Lieferungen und Leistungen 32.107.301,91 35.679.035,16</span>
<span id="cb110-85"><a href="appendix.html#cb110-85" tabindex="-1"></a>2. Forderungen gegen verbundene Unternehmen 74.457,55 554.130,28</span>
<span id="cb110-86"><a href="appendix.html#cb110-86" tabindex="-1"></a>3. Forderungen gegen Unternehmen, </span>
<span id="cb110-87"><a href="appendix.html#cb110-87" tabindex="-1"></a>mit denen ein Beteiligungsverhältnis besteht 108.647,73 23.698,71</span>
<span id="cb110-88"><a href="appendix.html#cb110-88" tabindex="-1"></a>4. sonstige Vermögensgegenstände 100.560.866,41 100.896.144,88</span>
<span id="cb110-89"><a href="appendix.html#cb110-89" tabindex="-1"></a>132.851.273,60 137.153.009,03</span>
<span id="cb110-90"><a href="appendix.html#cb110-90" tabindex="-1"></a>III. Wertpapiere</span>
<span id="cb110-91"><a href="appendix.html#cb110-91" tabindex="-1"></a>sonstige Wertpapiere 1.700,00 1.700,00</span>
<span id="cb110-92"><a href="appendix.html#cb110-92" tabindex="-1"></a>IV. Kassenbestand, Guthaben bei Kreditinstituten 893.140.123,18 689.887.519,98</span>
<span id="cb110-93"><a href="appendix.html#cb110-93" tabindex="-1"></a>1.074.648.465,59 879.120.967,25</span>
<span id="cb110-94"><a href="appendix.html#cb110-94" tabindex="-1"></a>C. RECHNUNGSABGRENZUNGSPOSTEN 9.245.284,80 9.917.197,12</span>
<span id="cb110-95"><a href="appendix.html#cb110-95" tabindex="-1"></a>D. AKTIVER UNTERSCHIEDSBETRAG AUS DER </span>
<span id="cb110-96"><a href="appendix.html#cb110-96" tabindex="-1"></a>VERMÖGENSVERRECHNUNG 68.523,69 0,00</span>
<span id="cb110-97"><a href="appendix.html#cb110-97" tabindex="-1"></a>4.519.153.098,57 4.235.358.106,67</span>
<span id="cb110-98"><a href="appendix.html#cb110-98" tabindex="-1"></a> </span>
<span id="cb110-99"><a href="appendix.html#cb110-99" tabindex="-1"></a>&quot;&quot;&quot;. (The L2 distance of this example text is: 0.421)&lt;|im_end|&gt;</span>
<span id="cb110-100"><a href="appendix.html#cb110-100" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb110-101"><a href="appendix.html#cb110-101" tabindex="-1"></a>You know this example for a \&#39;Passiva\&#39; (liabilities) table and for this example you should answer with &quot;Passiva&quot;:</span>
<span id="cb110-102"><a href="appendix.html#cb110-102" tabindex="-1"></a></span>
<span id="cb110-103"><a href="appendix.html#cb110-103" tabindex="-1"></a>&quot;&quot;&quot;</span>
<span id="cb110-104"><a href="appendix.html#cb110-104" tabindex="-1"></a>Anlage 1</span>
<span id="cb110-105"><a href="appendix.html#cb110-105" tabindex="-1"></a>BEN Berlin Energie und Netzholding GmbH</span>
<span id="cb110-106"><a href="appendix.html#cb110-106" tabindex="-1"></a>Berlin</span>
<span id="cb110-107"><a href="appendix.html#cb110-107" tabindex="-1"></a>Bilanz zum 31.12.2023</span>
<span id="cb110-108"><a href="appendix.html#cb110-108" tabindex="-1"></a>Aktivseite 31.12.2023 31.12.2022 31.12.2023 31.12.2022</span>
<span id="cb110-109"><a href="appendix.html#cb110-109" tabindex="-1"></a>T€ T€ T€ T€</span>
<span id="cb110-110"><a href="appendix.html#cb110-110" tabindex="-1"></a>A. Anlagevermögen A. Eigenkapital</span>
<span id="cb110-111"><a href="appendix.html#cb110-111" tabindex="-1"></a>imv I. Immaterielle Vermögensgegenstände 58,0 20,2 ek I. Gezeichnetes Kapital 25,0 25,0bga II. Sachanlagen 106,7 70,7 kr II. Kapitalrücklage 6,9 6,9</span>
<span id="cb110-112"><a href="appendix.html#cb110-112" tabindex="-1"></a>III. Finanzanlagen 2.194.146,0 2.094.146,0 vv III. Gewinnrücklage/Verlustvortrag 41.023,4 1.319,8</span>
<span id="cb110-113"><a href="appendix.html#cb110-113" tabindex="-1"></a>IV. Jahresüberschuss 51.158,5 39.703,6</span>
<span id="cb110-114"><a href="appendix.html#cb110-114" tabindex="-1"></a> 2.194.310,6 2.094.236,9</span>
<span id="cb110-115"><a href="appendix.html#cb110-115" tabindex="-1"></a> 92.213,8 41.055,3</span>
<span id="cb110-116"><a href="appendix.html#cb110-116" tabindex="-1"></a>B. Umlaufvermögen sor</span>
<span id="cb110-117"><a href="appendix.html#cb110-117" tabindex="-1"></a>unf I. Forderungen und sonstige B. Rückstellungen</span>
<span id="cb110-118"><a href="appendix.html#cb110-118" tabindex="-1"></a> Vermögensgegenstände Sonstige Rückstellungen 4.759,3 460,0</span>
<span id="cb110-119"><a href="appendix.html#cb110-119" tabindex="-1"></a>1. Forderungen aus Lieferungen und Leistungen 73,1 70,72. Forderungen gegen verbundene C. Verbindlichkeiten Unternehmen 96.998,2 60.960,4 anz 1. Verbindlichkeiten gegenüber 3. Sonstige Vermögensgegenstände 988,6 923,3 Kreditinstituten 2.317.498,9 2.148.050,6</span>
<span id="cb110-120"><a href="appendix.html#cb110-120" tabindex="-1"></a>fll II. Guthaben bei Kreditinstituten 226.047,2 160.535,8 vll 2. Verbindlichkeiten aus</span>
<span id="cb110-121"><a href="appendix.html#cb110-121" tabindex="-1"></a> Lieferungen und Leistungen 272,0 158,4</span>
<span id="cb110-122"><a href="appendix.html#cb110-122" tabindex="-1"></a> 324.107,1 222.490,2 3. Verbindlichkeiten gegenüber </span>
<span id="cb110-123"><a href="appendix.html#cb110-123" tabindex="-1"></a> verbundenen Unternehmen 104.704,9 128.407,54. Verbindlichkeiten gegenüber </span>
<span id="cb110-124"><a href="appendix.html#cb110-124" tabindex="-1"></a>C. Rechnungsabgrenzungsposten 1.969,9 2.207,9 vvu Gesellschaftern 695,8 706,1</span>
<span id="cb110-125"><a href="appendix.html#cb110-125" tabindex="-1"></a>5. Sonstige Verbindlichkeiten 242,9 97,1</span>
<span id="cb110-126"><a href="appendix.html#cb110-126" tabindex="-1"></a> 2.423.414,4 2.277.419,7</span>
<span id="cb110-127"><a href="appendix.html#cb110-127" tabindex="-1"></a> 2.520.387,6 2.318.935,0 2.520.387,6 2.318.935,0</span>
<span id="cb110-128"><a href="appendix.html#cb110-128" tabindex="-1"></a>Passivseite</span>
<span id="cb110-129"><a href="appendix.html#cb110-129" tabindex="-1"></a>3</span>
<span id="cb110-130"><a href="appendix.html#cb110-130" tabindex="-1"></a>&quot;&quot;&quot;. (The L2 distance of this example text is: 0.481)&lt;|im_end|&gt;</span>
<span id="cb110-131"><a href="appendix.html#cb110-131" tabindex="-1"></a>&lt;|im_start|&gt;system</span>
<span id="cb110-132"><a href="appendix.html#cb110-132" tabindex="-1"></a>You know this example for a text that does not suit the categories of interest and for this example you should answer with &quot;other&quot;:</span>
<span id="cb110-133"><a href="appendix.html#cb110-133" tabindex="-1"></a></span>
<span id="cb110-134"><a href="appendix.html#cb110-134" tabindex="-1"></a>&quot;&quot;&quot;</span>
<span id="cb110-135"><a href="appendix.html#cb110-135" tabindex="-1"></a>46 Konzernbilanz</span>
<span id="cb110-136"><a href="appendix.html#cb110-136" tabindex="-1"></a>Konzernbilanz zum 31. Dezember 2013</span>
<span id="cb110-137"><a href="appendix.html#cb110-137" tabindex="-1"></a>A K T I V A 31. 12. 2013 31. 12. 2012</span>
<span id="cb110-138"><a href="appendix.html#cb110-138" tabindex="-1"></a>€ € €</span>
<span id="cb110-139"><a href="appendix.html#cb110-139" tabindex="-1"></a>A. ANLAGEVERMÖGEN</span>
<span id="cb110-140"><a href="appendix.html#cb110-140" tabindex="-1"></a>I. Immaterielle Vermögensgegenstände</span>
<span id="cb110-141"><a href="appendix.html#cb110-141" tabindex="-1"></a>Konzessionen, gewerbliche Schutzrechte und ähnliche </span>
<span id="cb110-142"><a href="appendix.html#cb110-142" tabindex="-1"></a>Rechte</span>
<span id="cb110-143"><a href="appendix.html#cb110-143" tabindex="-1"></a>344.384,00 461.417,00</span>
<span id="cb110-144"><a href="appendix.html#cb110-144" tabindex="-1"></a>II. Sachanlagen</span>
<span id="cb110-145"><a href="appendix.html#cb110-145" tabindex="-1"></a>1. Grundstücke und Bauten 1.242.921,00 1.272.566,00</span>
<span id="cb110-146"><a href="appendix.html#cb110-146" tabindex="-1"></a>2. Technische Anlagen und Maschinen 122.769,00 62.405,00</span>
<span id="cb110-147"><a href="appendix.html#cb110-147" tabindex="-1"></a>3. Andere Anlagen, Betriebs- und Geschäftsausstattung 2.339.362,51 1.562.893,45</span>
<span id="cb110-148"><a href="appendix.html#cb110-148" tabindex="-1"></a>4. Geleistete Anzahlungen 704,76 33.483,89</span>
<span id="cb110-149"><a href="appendix.html#cb110-149" tabindex="-1"></a>3.705.757,27 2.931.348,34</span>
<span id="cb110-150"><a href="appendix.html#cb110-150" tabindex="-1"></a>III. Finanzanlagen</span>
<span id="cb110-151"><a href="appendix.html#cb110-151" tabindex="-1"></a>1. Anteile an verbundenen Unternehmen 3.201.349,87 3.201.436,42</span>
<span id="cb110-152"><a href="appendix.html#cb110-152" tabindex="-1"></a>2. Ausleihungen an verbundene Unternehmen 217.680,00 223.395,00</span>
<span id="cb110-153"><a href="appendix.html#cb110-153" tabindex="-1"></a>3. Beteiligungen 42.171.545,24 54.585.174,81</span>
<span id="cb110-154"><a href="appendix.html#cb110-154" tabindex="-1"></a>4. Sonstige Ausleihungen 76.015.926,17 99.994.824,65</span>
<span id="cb110-155"><a href="appendix.html#cb110-155" tabindex="-1"></a>121.606.501,28 158.004.830,88</span>
<span id="cb110-156"><a href="appendix.html#cb110-156" tabindex="-1"></a>125.656.642,55 161.397.596,22</span>
<span id="cb110-157"><a href="appendix.html#cb110-157" tabindex="-1"></a>B. UMLAUFVERMÖGEN</span>
<span id="cb110-158"><a href="appendix.html#cb110-158" tabindex="-1"></a>I. Vorräte</span>
<span id="cb110-159"><a href="appendix.html#cb110-159" tabindex="-1"></a>1. Unfertige Leistungen 12.885.172,94 8.843.369,97</span>
<span id="cb110-160"><a href="appendix.html#cb110-160" tabindex="-1"></a>2. Zum Verkauf bestimmte Grundstücke und Gebäude 139.000,00 139.002,00</span>
<span id="cb110-161"><a href="appendix.html#cb110-161" tabindex="-1"></a>3. Andere Vorräte 61.319,05 93.039,06</span>
<span id="cb110-162"><a href="appendix.html#cb110-162" tabindex="-1"></a>13.085.491,99 9.075.411,03</span>
<span id="cb110-163"><a href="appendix.html#cb110-163" tabindex="-1"></a>II. Forderungen und sonstige Vermögensgegenstände</span>
<span id="cb110-164"><a href="appendix.html#cb110-164" tabindex="-1"></a>1. Forderungen aus Lieferungen und Leistungen 8.666.340,95 12.099.596,63</span>
<span id="cb110-165"><a href="appendix.html#cb110-165" tabindex="-1"></a>2. Forderungen gegen verbundene Unternehmen 1.409.363,51 7.573.168,86</span>
<span id="cb110-166"><a href="appendix.html#cb110-166" tabindex="-1"></a>3. Forderungen gegen Unternehmen, </span>
<span id="cb110-167"><a href="appendix.html#cb110-167" tabindex="-1"></a>mit denen ein Beteiligungsverhältnis besteht</span>
<span id="cb110-168"><a href="appendix.html#cb110-168" tabindex="-1"></a>555.093,06 1.651.573,06</span>
<span id="cb110-169"><a href="appendix.html#cb110-169" tabindex="-1"></a>4. Sonstige Vermögensgegenstände 345.991.815,13 163.003.969,98</span>
<span id="cb110-170"><a href="appendix.html#cb110-170" tabindex="-1"></a>356.622.612,65 184.328.308,53</span>
<span id="cb110-171"><a href="appendix.html#cb110-171" tabindex="-1"></a>III. Wertpapiere</span>
<span id="cb110-172"><a href="appendix.html#cb110-172" tabindex="-1"></a>Sonstige Wertpapiere 52.252.850,00 59.329.212,00</span>
<span id="cb110-173"><a href="appendix.html#cb110-173" tabindex="-1"></a>IV. Kassenbestand, Guthaben bei Kreditinstituten 152.594.976,48 248.363.122,67</span>
<span id="cb110-174"><a href="appendix.html#cb110-174" tabindex="-1"></a>574.555.931,12 501.096.054,23</span>
<span id="cb110-175"><a href="appendix.html#cb110-175" tabindex="-1"></a>C. RECHNUNGSABGRENZUNGSPOSTEN 7.545.702,82 7.957.871,65</span>
<span id="cb110-176"><a href="appendix.html#cb110-176" tabindex="-1"></a>707.758.276,49 670.451.522,10</span>
<span id="cb110-177"><a href="appendix.html#cb110-177" tabindex="-1"></a>Treuhandvermögen 1.943.915.141,66 1.953.309.522,69</span>
<span id="cb110-178"><a href="appendix.html#cb110-178" tabindex="-1"></a>&quot;&quot;&quot;. (The L2 distance of this example text is: 0.434)&lt;|im_end|&gt;</span>
<span id="cb110-179"><a href="appendix.html#cb110-179" tabindex="-1"></a>&lt;|im_start|&gt;user</span>
<span id="cb110-180"><a href="appendix.html#cb110-180" tabindex="-1"></a></span>
<span id="cb110-181"><a href="appendix.html#cb110-181" tabindex="-1"></a>[Task]: Decide of what type the given text is. You can differentiate between four types of pages: \&#39;Aktiva\&#39;, \&#39;GuV\&#39;, \&#39;Passiva\&#39; and \&#39;other\&#39;.</span>
<span id="cb110-182"><a href="appendix.html#cb110-182" tabindex="-1"></a></span>
<span id="cb110-183"><a href="appendix.html#cb110-183" tabindex="-1"></a></span>
<span id="cb110-184"><a href="appendix.html#cb110-184" tabindex="-1"></a>[Rules]:</span>
<span id="cb110-185"><a href="appendix.html#cb110-185" tabindex="-1"></a></span>
<span id="cb110-186"><a href="appendix.html#cb110-186" tabindex="-1"></a>1) If the text contains a \&#39;Gewinn- und Verlustrechnung\&#39; (profit and loss statement) table, answer with \&#39;GuV\&#39;.</span>
<span id="cb110-187"><a href="appendix.html#cb110-187" tabindex="-1"></a></span>
<span id="cb110-188"><a href="appendix.html#cb110-188" tabindex="-1"></a></span>
<span id="cb110-189"><a href="appendix.html#cb110-189" tabindex="-1"></a>2) If the text contains an \&#39;Aktiva\&#39; (assets) table, answer with \&#39;Aktiva\&#39;.</span>
<span id="cb110-190"><a href="appendix.html#cb110-190" tabindex="-1"></a></span>
<span id="cb110-191"><a href="appendix.html#cb110-191" tabindex="-1"></a></span>
<span id="cb110-192"><a href="appendix.html#cb110-192" tabindex="-1"></a>3) If the text contains a \&#39;Passiva\&#39; (liabilities) table, answer with \&#39;Passiva\&#39;.</span>
<span id="cb110-193"><a href="appendix.html#cb110-193" tabindex="-1"></a></span>
<span id="cb110-194"><a href="appendix.html#cb110-194" tabindex="-1"></a></span>
<span id="cb110-195"><a href="appendix.html#cb110-195" tabindex="-1"></a>4) If the text contains something else, answer with \&#39;other\&#39;.</span>
<span id="cb110-196"><a href="appendix.html#cb110-196" tabindex="-1"></a></span>
<span id="cb110-197"><a href="appendix.html#cb110-197" tabindex="-1"></a></span>
<span id="cb110-198"><a href="appendix.html#cb110-198" tabindex="-1"></a>[Text]: Here is the text to classify: </span>
<span id="cb110-199"><a href="appendix.html#cb110-199" tabindex="-1"></a></span>
<span id="cb110-200"><a href="appendix.html#cb110-200" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb110-201"><a href="appendix.html#cb110-201" tabindex="-1"></a>22 Amt für Statistik Berlin-Brandenburg | Geschäftsbericht 2014</span>
<span id="cb110-202"><a href="appendix.html#cb110-202" tabindex="-1"></a>Amt für Statistik Berlin-Brandenburg Anstalt des öffentlichen Rechts, Potsdam</span>
<span id="cb110-203"><a href="appendix.html#cb110-203" tabindex="-1"></a>Bilanz zum 31. Dezember 2014</span>
<span id="cb110-204"><a href="appendix.html#cb110-204" tabindex="-1"></a>A K T I V S E I T E 31.12.2014 Vorjahr </span>
<span id="cb110-205"><a href="appendix.html#cb110-205" tabindex="-1"></a>EUR EUR TEUR </span>
<span id="cb110-206"><a href="appendix.html#cb110-206" tabindex="-1"></a>A. ANLAGEVERMÖGEN </span>
<span id="cb110-207"><a href="appendix.html#cb110-207" tabindex="-1"></a>I. Immaterielle Vermögensgegenstände </span>
<span id="cb110-208"><a href="appendix.html#cb110-208" tabindex="-1"></a>1. Entgeltlich erworbene Konzessionen, gewerbliche </span>
<span id="cb110-209"><a href="appendix.html#cb110-209" tabindex="-1"></a>Schutzrechte und ähnliche Rechte und Werte </span>
<span id="cb110-210"><a href="appendix.html#cb110-210" tabindex="-1"></a>sowie Lizenzen an solchen Rechten und Werten 81.480,00 146</span>
<span id="cb110-211"><a href="appendix.html#cb110-211" tabindex="-1"></a>II. Sachanlagen</span>
<span id="cb110-212"><a href="appendix.html#cb110-212" tabindex="-1"></a>1. Grundstücke, grundstücksgleiche Rechte und Bauten </span>
<span id="cb110-213"><a href="appendix.html#cb110-213" tabindex="-1"></a>einschließlich der Bauten auf fremden Grundstücken 68.386,00 93</span>
<span id="cb110-214"><a href="appendix.html#cb110-214" tabindex="-1"></a>2. Andere Anlagen, Betriebs- und Geschäftsausstattung 140.186,00 174 </span>
<span id="cb110-215"><a href="appendix.html#cb110-215" tabindex="-1"></a>208.572,00 267</span>
<span id="cb110-216"><a href="appendix.html#cb110-216" tabindex="-1"></a>III. Finanzanlagen </span>
<span id="cb110-217"><a href="appendix.html#cb110-217" tabindex="-1"></a>1. Wertpapiere des Anlagevermögens 2.000.000,00 2.000 </span>
<span id="cb110-218"><a href="appendix.html#cb110-218" tabindex="-1"></a>2.000.000,00 2.000 </span>
<span id="cb110-219"><a href="appendix.html#cb110-219" tabindex="-1"></a>2.290.052,00 2.413</span>
<span id="cb110-220"><a href="appendix.html#cb110-220" tabindex="-1"></a>B. UMLAUFVERMÖGEN </span>
<span id="cb110-221"><a href="appendix.html#cb110-221" tabindex="-1"></a>I. Forderungen und sonstige Vermögensgegenstände </span>
<span id="cb110-222"><a href="appendix.html#cb110-222" tabindex="-1"></a>1. Forderungen aus Lieferungen und Leistungen 36.617,86 14 </span>
<span id="cb110-223"><a href="appendix.html#cb110-223" tabindex="-1"></a>2. Sonstige Vermögensgegenstände 297.982,42 267 </span>
<span id="cb110-224"><a href="appendix.html#cb110-224" tabindex="-1"></a>334.600,28 281 </span>
<span id="cb110-225"><a href="appendix.html#cb110-225" tabindex="-1"></a>II. Kassenbestand, Bundesbankguthaben, Guthaben bei </span>
<span id="cb110-226"><a href="appendix.html#cb110-226" tabindex="-1"></a>Kreditinstituten und Schecks 5.560.638,85 7.783</span>
<span id="cb110-227"><a href="appendix.html#cb110-227" tabindex="-1"></a>5.895.239,13 8.064</span>
<span id="cb110-228"><a href="appendix.html#cb110-228" tabindex="-1"></a>C. RECHNUNGSABGRENZUNGSPOSTEN 216.321,49 213</span>
<span id="cb110-229"><a href="appendix.html#cb110-229" tabindex="-1"></a>8.401.612,62 10.690 </span>
<span id="cb110-230"><a href="appendix.html#cb110-230" tabindex="-1"></a>Bestätigungsvermerk </span>
<span id="cb110-231"><a href="appendix.html#cb110-231" tabindex="-1"></a>des Abschlussprüfers</span>
<span id="cb110-232"><a href="appendix.html#cb110-232" tabindex="-1"></a>Anhang</span>
<span id="cb110-233"><a href="appendix.html#cb110-233" tabindex="-1"></a>\&#39;\&#39;\&#39;</span>
<span id="cb110-234"><a href="appendix.html#cb110-234" tabindex="-1"></a>        &lt;|im_end|&gt;</span>
<span id="cb110-235"><a href="appendix.html#cb110-235" tabindex="-1"></a>&lt;|im_start|&gt;assistant</span></code></pre></div>
</div>
</div>
<div id="regex-page-identification-code" class="section level2 hasAnchor" number="8.6">
<h2><span class="header-section-number">8.6</span> Regular expressions<a href="appendix.html#regex-page-identification-code" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here one can find the three regular expressions used for the benchmarks presented in section <a href="appendix.html#regex-page-identification">8.1.1</a>.</p>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb111"><pre class="sourceCode python fold-show"><code class="sourceCode python"><span id="cb111-1"><a href="appendix.html#cb111-1" tabindex="-1"></a>simple_regex_patterns <span class="op">=</span> {</span>
<span id="cb111-2"><a href="appendix.html#cb111-2" tabindex="-1"></a>    <span class="st">&quot;Aktiva&quot;</span>: [</span>
<span id="cb111-3"><a href="appendix.html#cb111-3" tabindex="-1"></a>        <span class="vs">r&quot;aktiva&quot;</span>,</span>
<span id="cb111-4"><a href="appendix.html#cb111-4" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))&quot;</span></span>
<span id="cb111-5"><a href="appendix.html#cb111-5" tabindex="-1"></a>    ],</span>
<span id="cb111-6"><a href="appendix.html#cb111-6" tabindex="-1"></a>    <span class="st">&quot;Passiva&quot;</span>: [</span>
<span id="cb111-7"><a href="appendix.html#cb111-7" tabindex="-1"></a>        <span class="vs">r&quot;passiva&quot;</span>,</span>
<span id="cb111-8"><a href="appendix.html#cb111-8" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))&quot;</span></span>
<span id="cb111-9"><a href="appendix.html#cb111-9" tabindex="-1"></a>    ],</span>
<span id="cb111-10"><a href="appendix.html#cb111-10" tabindex="-1"></a>    <span class="st">&quot;GuV&quot;</span>: [</span>
<span id="cb111-11"><a href="appendix.html#cb111-11" tabindex="-1"></a>        <span class="vs">r&quot;gewinn&quot;</span>,</span>
<span id="cb111-12"><a href="appendix.html#cb111-12" tabindex="-1"></a>        <span class="vs">r&quot;verlust&quot;</span>,</span>
<span id="cb111-13"><a href="appendix.html#cb111-13" tabindex="-1"></a>        <span class="vs">r&quot;rechnung&quot;</span>,</span>
<span id="cb111-14"><a href="appendix.html#cb111-14" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))&quot;</span></span>
<span id="cb111-15"><a href="appendix.html#cb111-15" tabindex="-1"></a>    ]</span>
<span id="cb111-16"><a href="appendix.html#cb111-16" tabindex="-1"></a>}</span></code></pre></div>
</details>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb112"><pre class="sourceCode python fold-show"><code class="sourceCode python"><span id="cb112-1"><a href="appendix.html#cb112-1" tabindex="-1"></a>regex_patterns_5 <span class="op">=</span> {</span>
<span id="cb112-2"><a href="appendix.html#cb112-2" tabindex="-1"></a>    <span class="st">&quot;Aktiva&quot;</span>: [</span>
<span id="cb112-3"><a href="appendix.html#cb112-3" tabindex="-1"></a>        <span class="vs">r&quot;a\s*k\s*t\s*i\s*v\s*a|a\s*k\s*t\s*i\s*v\s*s\s*e\s*i\s*t\s*e|anlageverm.{1,2}gen&quot;</span>,</span>
<span id="cb112-4"><a href="appendix.html#cb112-4" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|((20\d</span><span class="sc">{2}</span><span class="vs">).*vorjahr)|vorjahr&quot;</span>,</span>
<span id="cb112-5"><a href="appendix.html#cb112-5" tabindex="-1"></a>        <span class="vs">r&quot;Umlaufverm.{1,2}gen|Anlageverm.{1,2}gen|Rechnungsabgrenzungsposten|Forderungen&quot;</span>,</span>
<span id="cb112-6"><a href="appendix.html#cb112-6" tabindex="-1"></a>        <span class="vs">r&quot;\s([a-zA-Z]|[0-9]{1,2}|[iI]+)[\.\)]\s&quot;</span></span>
<span id="cb112-7"><a href="appendix.html#cb112-7" tabindex="-1"></a>    ],</span>
<span id="cb112-8"><a href="appendix.html#cb112-8" tabindex="-1"></a>    <span class="st">&quot;Passiva&quot;</span>: [</span>
<span id="cb112-9"><a href="appendix.html#cb112-9" tabindex="-1"></a>        <span class="vs">r&quot;p\s*a\s*s\s*s\s*i\s*v\s*a|p\s*a\s*s\s*s\s*i\s*v\s*s\s*e\s*i\s*t\s*e|eigenkapital&quot;</span>,</span>
<span id="cb112-10"><a href="appendix.html#cb112-10" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|((20\d</span><span class="sc">{2}</span><span class="vs">).*vorjahr)|vorjahr&quot;</span>,</span>
<span id="cb112-11"><a href="appendix.html#cb112-11" tabindex="-1"></a>        <span class="vs">r&quot;Eigenkapital|R.{1,2}ckstellungen|Verbindlichkeiten|Rechnungsabgrenzungsposten&quot;</span>,</span>
<span id="cb112-12"><a href="appendix.html#cb112-12" tabindex="-1"></a>        <span class="vs">r&quot;\s([a-zA-Z]|[0-9]{1,2}|[iI]+)[\.\)]\s&quot;</span></span>
<span id="cb112-13"><a href="appendix.html#cb112-13" tabindex="-1"></a>    ],</span>
<span id="cb112-14"><a href="appendix.html#cb112-14" tabindex="-1"></a>    <span class="st">&quot;GuV&quot;</span>: [</span>
<span id="cb112-15"><a href="appendix.html#cb112-15" tabindex="-1"></a>        <span class="vs">r&quot;gewinn|guv&quot;</span>,</span>
<span id="cb112-16"><a href="appendix.html#cb112-16" tabindex="-1"></a>        <span class="vs">r&quot;verlust|guv&quot;</span>,</span>
<span id="cb112-17"><a href="appendix.html#cb112-17" tabindex="-1"></a>        <span class="vs">r&quot;rechnung|guv&quot;</span>,</span>
<span id="cb112-18"><a href="appendix.html#cb112-18" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|vorjahr&quot;</span></span>
<span id="cb112-19"><a href="appendix.html#cb112-19" tabindex="-1"></a>        <span class="vs">r&quot;Umsatzerl.{1,2}se|Materialaufwand|Personalaufwand|Abschreibungen|Jahres.{1,2}berschuss|Jahresfehlbetrag|Steuern|Vertriebskosten|Verwaltungskosten|Aufwendungen|Ertr.{1,2}ge&quot;</span>,</span>
<span id="cb112-20"><a href="appendix.html#cb112-20" tabindex="-1"></a>        <span class="vs">r&quot;\s([a-zA-Z]|[0-9]{1,2}|[iI]+)[\.\)]\s&quot;</span></span>
<span id="cb112-21"><a href="appendix.html#cb112-21" tabindex="-1"></a>    ]</span>
<span id="cb112-22"><a href="appendix.html#cb112-22" tabindex="-1"></a>}</span></code></pre></div>
</details>
<details class=chunk-details open><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb113"><pre class="sourceCode python fold-show"><code class="sourceCode python"><span id="cb113-1"><a href="appendix.html#cb113-1" tabindex="-1"></a>regex_patterns_3 <span class="op">=</span> {</span>
<span id="cb113-2"><a href="appendix.html#cb113-2" tabindex="-1"></a>    <span class="st">&quot;Aktiva&quot;</span>: [</span>
<span id="cb113-3"><a href="appendix.html#cb113-3" tabindex="-1"></a>        <span class="vs">r&quot;a\s*k\s*t\s*i\s*v\s*a|a\s*k\s*t\s*i\s*v\s*s\s*e\s*i\s*t\s*e|anlageverm.{1,2}gen&quot;</span>,</span>
<span id="cb113-4"><a href="appendix.html#cb113-4" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|((20\d</span><span class="sc">{2}</span><span class="vs">).*vorjahr)|vorjahr&quot;</span></span>
<span id="cb113-5"><a href="appendix.html#cb113-5" tabindex="-1"></a>    ],</span>
<span id="cb113-6"><a href="appendix.html#cb113-6" tabindex="-1"></a>    <span class="st">&quot;Passiva&quot;</span>: [</span>
<span id="cb113-7"><a href="appendix.html#cb113-7" tabindex="-1"></a>        <span class="vs">r&quot;p\s*a\s*s\s*s\s*i\s*v\s*a|p\s*a\s*s\s*s\s*i\s*v\s*s\s*e\s*i\s*t\s*e|eigenkapital&quot;</span>,</span>
<span id="cb113-8"><a href="appendix.html#cb113-8" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|((20\d</span><span class="sc">{2}</span><span class="vs">).*vorjahr)|vorjahr&quot;</span></span>
<span id="cb113-9"><a href="appendix.html#cb113-9" tabindex="-1"></a>    ],</span>
<span id="cb113-10"><a href="appendix.html#cb113-10" tabindex="-1"></a>    <span class="st">&quot;GuV&quot;</span>: [</span>
<span id="cb113-11"><a href="appendix.html#cb113-11" tabindex="-1"></a>        <span class="vs">r&quot;gewinn|guv&quot;</span>,</span>
<span id="cb113-12"><a href="appendix.html#cb113-12" tabindex="-1"></a>        <span class="vs">r&quot;verlust|guv&quot;</span>,</span>
<span id="cb113-13"><a href="appendix.html#cb113-13" tabindex="-1"></a>        <span class="vs">r&quot;rechnung|guv&quot;</span>,</span>
<span id="cb113-14"><a href="appendix.html#cb113-14" tabindex="-1"></a>        <span class="vs">r&quot;((20\d</span><span class="sc">{2}</span><span class="vs">).*(20\d</span><span class="sc">{2}</span><span class="vs">))|vorjahr&quot;</span></span>
<span id="cb113-15"><a href="appendix.html#cb113-15" tabindex="-1"></a>    ]</span>
<span id="cb113-16"><a href="appendix.html#cb113-16" tabindex="-1"></a>}</span></code></pre></div>
</details>
</div>
<div id="annual-comprehensive-financial-report-balance-sheet" class="section level2 hasAnchor" number="8.7">
<h2><span class="header-section-number">8.7</span> Annual Comprehensive Financial Report Balance Sheet<a href="appendix.html#annual-comprehensive-financial-report-balance-sheet" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div class="pdf-embed">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="appendix.html#cb114-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;./images/acfr23_balance.pdf&quot;</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:acfr23-balance-sheet"></span>
<embed src="./images/acfr23_balance.pdf" title="Example balance sheet pagefom Californias Annual Comprehensive Financial Report 2023" width="100%" height="95%" keepaspectratio type="application/pdf" />
<p class="caption">
Figure 8.28: Example balance sheet pagefom Californias Annual Comprehensive Financial Report 2023
</p>
</div>
</div>
</div>
<div id="extraction-framework-flow-chart" class="section level2 hasAnchor" number="8.8">
<h2><span class="header-section-number">8.8</span> Extraction framework flow chart<a href="appendix.html#extraction-framework-flow-chart" class="anchor-section" aria-label="Anchor link to header"></a></h2>

<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="appendix.html#cb115-1" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">&quot;./images/extraction_framework_flow_chart.png&quot;</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:extraction-framework-flow-chart"></span>
<img src="images/extraction_framework_flow_chart.png" alt="Flowchart of the extraction framework of Auer et al. (2024)" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 8.29: Flowchart of the extraction framework of <span class="citation">Auer et al. (<a href="#ref-auerDoclingTechnicalReport2024">2024</a>)</span>
</p>
</div>
</div>
<div id="regex-extraction-mistakes" class="section level2 hasAnchor" number="8.9">
<h2><span class="header-section-number">8.9</span> Table extraction with regular expressions<a href="appendix.html#regex-extraction-mistakes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Extract by pdfium for ‘../../benchmark_truth/synthetic_tables/separate_files/final/aktiva_table__3_columns__span_False__thin_False__year_as_text__unit_in_first_cell_True__Mio. €__enumeration_False__shuffle_True__text_around_True__max_length_50__sum_in_same_row_False__0.pdf’:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb116-1"><a href="appendix.html#cb116-1" tabindex="-1"></a>A</span>
<span id="cb116-2"><a href="appendix.html#cb116-2" tabindex="-1"></a></span>
<span id="cb116-3"><a href="appendix.html#cb116-3" tabindex="-1"></a>ktiva(inMio. €)GeschäftsjahrVorjahr</span>
<span id="cb116-4"><a href="appendix.html#cb116-4" tabindex="-1"></a></span>
<span id="cb116-5"><a href="appendix.html#cb116-5" tabindex="-1"></a>Anlagevermögen Immaterielle Verm</span>
<span id="cb116-6"><a href="appendix.html#cb116-6" tabindex="-1"></a></span>
<span id="cb116-7"><a href="appendix.html#cb116-7" tabindex="-1"></a>ögensgegenstände</span>
<span id="cb116-8"><a href="appendix.html#cb116-8" tabindex="-1"></a></span>
<span id="cb116-9"><a href="appendix.html#cb116-9" tabindex="-1"></a>SelbstgeschaffenegewerblicheSchutzrechteund</span>
<span id="cb116-10"><a href="appendix.html#cb116-10" tabindex="-1"></a></span>
<span id="cb116-11"><a href="appendix.html#cb116-11" tabindex="-1"></a>ähnlicheRechteundWerte</span>
<span id="cb116-12"><a href="appendix.html#cb116-12" tabindex="-1"></a></span>
<span id="cb116-13"><a href="appendix.html#cb116-13" tabindex="-1"></a>0,184,77</span>
<span id="cb116-14"><a href="appendix.html#cb116-14" tabindex="-1"></a></span>
<span id="cb116-15"><a href="appendix.html#cb116-15" tabindex="-1"></a>Geschäfts-oderFirmenwert4,426,78</span>
<span id="cb116-16"><a href="appendix.html#cb116-16" tabindex="-1"></a></span>
<span id="cb116-17"><a href="appendix.html#cb116-17" tabindex="-1"></a>geleisteteAnzahlungen1,780,65</span>
<span id="cb116-18"><a href="appendix.html#cb116-18" tabindex="-1"></a></span>
<span id="cb116-19"><a href="appendix.html#cb116-19" tabindex="-1"></a>entgeltlicherworbeneKonzessionen, gewerbliche</span>
<span id="cb116-20"><a href="appendix.html#cb116-20" tabindex="-1"></a></span>
<span id="cb116-21"><a href="appendix.html#cb116-21" tabindex="-1"></a>SchutzrechteundähnlicheRechteundWertesowie</span>
<span id="cb116-22"><a href="appendix.html#cb116-22" tabindex="-1"></a></span>
<span id="cb116-23"><a href="appendix.html#cb116-23" tabindex="-1"></a>LizenzenansolchenRechtenundWerten</span>
<span id="cb116-24"><a href="appendix.html#cb116-24" tabindex="-1"></a></span>
<span id="cb116-25"><a href="appendix.html#cb116-25" tabindex="-1"></a>4,646,71</span>
<span id="cb116-26"><a href="appendix.html#cb116-26" tabindex="-1"></a></span>
<span id="cb116-27"><a href="appendix.html#cb116-27" tabindex="-1"></a>11,0218,91</span>
<span id="cb116-28"><a href="appendix.html#cb116-28" tabindex="-1"></a></span>
<span id="cb116-29"><a href="appendix.html#cb116-29" tabindex="-1"></a>Sachanlagen</span>
<span id="cb116-30"><a href="appendix.html#cb116-30" tabindex="-1"></a></span>
<span id="cb116-31"><a href="appendix.html#cb116-31" tabindex="-1"></a>Grundstücke, grundstücksgleicheRechteundBauten</span>
<span id="cb116-32"><a href="appendix.html#cb116-32" tabindex="-1"></a></span>
<span id="cb116-33"><a href="appendix.html#cb116-33" tabindex="-1"></a>einschließlichderBautenauffremdenGrundstücken</span>
<span id="cb116-34"><a href="appendix.html#cb116-34" tabindex="-1"></a></span>
<span id="cb116-35"><a href="appendix.html#cb116-35" tabindex="-1"></a>2,802,55</span>
<span id="cb116-36"><a href="appendix.html#cb116-36" tabindex="-1"></a></span>
<span id="cb116-37"><a href="appendix.html#cb116-37" tabindex="-1"></a>TechnischeAnlagenundMaschinen5,205,53</span>
<span id="cb116-38"><a href="appendix.html#cb116-38" tabindex="-1"></a></span>
<span id="cb116-39"><a href="appendix.html#cb116-39" tabindex="-1"></a>AndereAnlagen, Betriebs-undGeschäftsausstattung1,601,93</span>
<span id="cb116-40"><a href="appendix.html#cb116-40" tabindex="-1"></a></span>
<span id="cb116-41"><a href="appendix.html#cb116-41" tabindex="-1"></a>geleisteteAnzahlungenundAnlagen imBau3,255,81</span>
<span id="cb116-42"><a href="appendix.html#cb116-42" tabindex="-1"></a></span>
<span id="cb116-43"><a href="appendix.html#cb116-43" tabindex="-1"></a>12,8615,83</span>
<span id="cb116-44"><a href="appendix.html#cb116-44" tabindex="-1"></a></span>
<span id="cb116-45"><a href="appendix.html#cb116-45" tabindex="-1"></a>Finanzanlagen</span>
<span id="cb116-46"><a href="appendix.html#cb116-46" tabindex="-1"></a></span>
<span id="cb116-47"><a href="appendix.html#cb116-47" tabindex="-1"></a>SonstigeFinanzanlagen7,446,51</span>
<span id="cb116-48"><a href="appendix.html#cb116-48" tabindex="-1"></a></span>
<span id="cb116-49"><a href="appendix.html#cb116-49" tabindex="-1"></a>AnteileanverbundenenUnternehmen0,499,83</span>
<span id="cb116-50"><a href="appendix.html#cb116-50" tabindex="-1"></a></span>
<span id="cb116-51"><a href="appendix.html#cb116-51" tabindex="-1"></a>AusleihungenanverbundeneUnternehmen0,573,49</span>
<span id="cb116-52"><a href="appendix.html#cb116-52" tabindex="-1"></a></span>
<span id="cb116-53"><a href="appendix.html#cb116-53" tabindex="-1"></a>Beteiligungen1,059,43</span>
<span id="cb116-54"><a href="appendix.html#cb116-54" tabindex="-1"></a></span>
<span id="cb116-55"><a href="appendix.html#cb116-55" tabindex="-1"></a>AusleihungenanUnternehmen, mitdenenein</span>
<span id="cb116-56"><a href="appendix.html#cb116-56" tabindex="-1"></a></span>
<span id="cb116-57"><a href="appendix.html#cb116-57" tabindex="-1"></a>Beteiligungsverhältnisbesteht</span>
<span id="cb116-58"><a href="appendix.html#cb116-58" tabindex="-1"></a></span>
<span id="cb116-59"><a href="appendix.html#cb116-59" tabindex="-1"></a>6,957,65</span>
<span id="cb116-60"><a href="appendix.html#cb116-60" tabindex="-1"></a></span>
<span id="cb116-61"><a href="appendix.html#cb116-61" tabindex="-1"></a>WertpapieredesAnlagevermögens2,002,71</span>
<span id="cb116-62"><a href="appendix.html#cb116-62" tabindex="-1"></a></span>
<span id="cb116-63"><a href="appendix.html#cb116-63" tabindex="-1"></a>SonstigeAusleihungen9,091,52</span>
<span id="cb116-64"><a href="appendix.html#cb116-64" tabindex="-1"></a></span>
<span id="cb116-65"><a href="appendix.html#cb116-65" tabindex="-1"></a>27,5841,13</span>
<span id="cb116-66"><a href="appendix.html#cb116-66" tabindex="-1"></a></span>
<span id="cb116-67"><a href="appendix.html#cb116-67" tabindex="-1"></a>51,4675,87</span>
<span id="cb116-68"><a href="appendix.html#cb116-68" tabindex="-1"></a></span>
<span id="cb116-69"><a href="appendix.html#cb116-69" tabindex="-1"></a>Umlaufvermögen</span>
<span id="cb116-70"><a href="appendix.html#cb116-70" tabindex="-1"></a></span>
<span id="cb116-71"><a href="appendix.html#cb116-71" tabindex="-1"></a>Vorräte</span>
<span id="cb116-72"><a href="appendix.html#cb116-72" tabindex="-1"></a></span>
<span id="cb116-73"><a href="appendix.html#cb116-73" tabindex="-1"></a>Roh-, Hilfs-undBetriebsstoffe0,382,98</span>
<span id="cb116-74"><a href="appendix.html#cb116-74" tabindex="-1"></a></span>
<span id="cb116-75"><a href="appendix.html#cb116-75" tabindex="-1"></a>UnfertigeErzeugnisse, unfertigeLeistungen3,236,19</span>
<span id="cb116-76"><a href="appendix.html#cb116-76" tabindex="-1"></a></span>
<span id="cb116-77"><a href="appendix.html#cb116-77" tabindex="-1"></a>FertigeErzeugnisseundWaren6,724,98</span>
<span id="cb116-78"><a href="appendix.html#cb116-78" tabindex="-1"></a></span>
<span id="cb116-79"><a href="appendix.html#cb116-79" tabindex="-1"></a>GeleisteteAnzahlungen4,024,83</span>
<span id="cb116-80"><a href="appendix.html#cb116-80" tabindex="-1"></a></span>
<span id="cb116-81"><a href="appendix.html#cb116-81" tabindex="-1"></a>14,3418,98</span>
<span id="cb116-82"><a href="appendix.html#cb116-82" tabindex="-1"></a></span>
<span id="cb116-83"><a href="appendix.html#cb116-83" tabindex="-1"></a>ForderungenundsonstigeVermögensgegenstände</span>
<span id="cb116-84"><a href="appendix.html#cb116-84" tabindex="-1"></a></span>
<span id="cb116-85"><a href="appendix.html#cb116-85" tabindex="-1"></a>ForderungenausLieferungenundLeistungen4,328,36</span>
<span id="cb116-86"><a href="appendix.html#cb116-86" tabindex="-1"></a></span>
<span id="cb116-87"><a href="appendix.html#cb116-87" tabindex="-1"></a>ForderungengegenverbundeneUnternehmen6,082,38</span>
<span id="cb116-88"><a href="appendix.html#cb116-88" tabindex="-1"></a></span>
<span id="cb116-89"><a href="appendix.html#cb116-89" tabindex="-1"></a>ForderungengegenUnternehmen, mitdenenein</span>
<span id="cb116-90"><a href="appendix.html#cb116-90" tabindex="-1"></a></span>
<span id="cb116-91"><a href="appendix.html#cb116-91" tabindex="-1"></a>Beteiligungsverhältnisbesteht</span>
<span id="cb116-92"><a href="appendix.html#cb116-92" tabindex="-1"></a></span>
<span id="cb116-93"><a href="appendix.html#cb116-93" tabindex="-1"></a>7,878,11</span>
<span id="cb116-94"><a href="appendix.html#cb116-94" tabindex="-1"></a></span>
<span id="cb116-95"><a href="appendix.html#cb116-95" tabindex="-1"></a>SonstigeVermögensgegenstände1,968,30</span>
<span id="cb116-96"><a href="appendix.html#cb116-96" tabindex="-1"></a></span>
<span id="cb116-97"><a href="appendix.html#cb116-97" tabindex="-1"></a>20,2227,15</span>
<span id="cb116-98"><a href="appendix.html#cb116-98" tabindex="-1"></a></span>
<span id="cb116-99"><a href="appendix.html#cb116-99" tabindex="-1"></a>Wertpapiere</span>
<span id="cb116-100"><a href="appendix.html#cb116-100" tabindex="-1"></a></span>
<span id="cb116-101"><a href="appendix.html#cb116-101" tabindex="-1"></a>AnteileanverbundenenUnternehmen2,383,24</span>
<span id="cb116-102"><a href="appendix.html#cb116-102" tabindex="-1"></a></span>
<span id="cb116-103"><a href="appendix.html#cb116-103" tabindex="-1"></a>SonstigeWertpapiere0,077,65</span>
<span id="cb116-104"><a href="appendix.html#cb116-104" tabindex="-1"></a></span>
<span id="cb116-105"><a href="appendix.html#cb116-105" tabindex="-1"></a>2,4410,88</span>
<span id="cb116-106"><a href="appendix.html#cb116-106" tabindex="-1"></a></span>
<span id="cb116-107"><a href="appendix.html#cb116-107" tabindex="-1"></a>Kassenbestand, Bundesbankguthaben, Guthabenbei Kreditinstituten und Schecks</span>
<span id="cb116-108"><a href="appendix.html#cb116-108" tabindex="-1"></a></span>
<span id="cb116-109"><a href="appendix.html#cb116-109" tabindex="-1"></a>4,144,00</span>
<span id="cb116-110"><a href="appendix.html#cb116-110" tabindex="-1"></a></span>
<span id="cb116-111"><a href="appendix.html#cb116-111" tabindex="-1"></a>41,1561,01</span>
<span id="cb116-112"><a href="appendix.html#cb116-112" tabindex="-1"></a></span>
<span id="cb116-113"><a href="appendix.html#cb116-113" tabindex="-1"></a>Rechnungsabgrenzungsposten2,746,78</span>
<span id="cb116-114"><a href="appendix.html#cb116-114" tabindex="-1"></a></span>
<span id="cb116-115"><a href="appendix.html#cb116-115" tabindex="-1"></a>Aktive latenteSteuern8,464,60</span>
<span id="cb116-116"><a href="appendix.html#cb116-116" tabindex="-1"></a></span>
<span id="cb116-117"><a href="appendix.html#cb116-117" tabindex="-1"></a>AktiverUnterschiedsbetragausder</span>
<span id="cb116-118"><a href="appendix.html#cb116-118" tabindex="-1"></a></span>
<span id="cb116-119"><a href="appendix.html#cb116-119" tabindex="-1"></a>Vermögensverrechnung</span>
<span id="cb116-120"><a href="appendix.html#cb116-120" tabindex="-1"></a></span>
<span id="cb116-121"><a href="appendix.html#cb116-121" tabindex="-1"></a>2,863,35</span>
<span id="cb116-122"><a href="appendix.html#cb116-122" tabindex="-1"></a></span>
<span id="cb116-123"><a href="appendix.html#cb116-123" tabindex="-1"></a>106,67151,61</span></code></pre></div>
<p>Extract by pdfminer for ‘../../benchmark_truth/synthetic_tables/separate_files/final/aktiva_table__3_columns__span_False__thin_False__year_as_text__unit_in_first_cell_True__Mio. €__enumeration_False__shuffle_True__text_around_True__max_length_50__sum_in_same_row_False__0.pdf’:</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb117-1"><a href="appendix.html#cb117-1" tabindex="-1"></a>Aktiva (in Mio. €)</span>
<span id="cb117-2"><a href="appendix.html#cb117-2" tabindex="-1"></a></span>
<span id="cb117-3"><a href="appendix.html#cb117-3" tabindex="-1"></a>Anlagevermögen</span>
<span id="cb117-4"><a href="appendix.html#cb117-4" tabindex="-1"></a></span>
<span id="cb117-5"><a href="appendix.html#cb117-5" tabindex="-1"></a>Immaterielle Vermögensgegenstände</span>
<span id="cb117-6"><a href="appendix.html#cb117-6" tabindex="-1"></a></span>
<span id="cb117-7"><a href="appendix.html#cb117-7" tabindex="-1"></a>Selbst geschaffene gewerbliche Schutzrechte und</span>
<span id="cb117-8"><a href="appendix.html#cb117-8" tabindex="-1"></a>ähnliche Rechte und Werte</span>
<span id="cb117-9"><a href="appendix.html#cb117-9" tabindex="-1"></a></span>
<span id="cb117-10"><a href="appendix.html#cb117-10" tabindex="-1"></a>Geschäfts- oder Firmenwert</span>
<span id="cb117-11"><a href="appendix.html#cb117-11" tabindex="-1"></a></span>
<span id="cb117-12"><a href="appendix.html#cb117-12" tabindex="-1"></a>geleistete Anzahlungen</span>
<span id="cb117-13"><a href="appendix.html#cb117-13" tabindex="-1"></a></span>
<span id="cb117-14"><a href="appendix.html#cb117-14" tabindex="-1"></a>entgeltlich erworbene Konzessionen, gewerbliche</span>
<span id="cb117-15"><a href="appendix.html#cb117-15" tabindex="-1"></a>Schutzrechte und ähnliche Rechte und Werte sowie</span>
<span id="cb117-16"><a href="appendix.html#cb117-16" tabindex="-1"></a>Lizenzen an solchen Rechten und Werten</span>
<span id="cb117-17"><a href="appendix.html#cb117-17" tabindex="-1"></a></span>
<span id="cb117-18"><a href="appendix.html#cb117-18" tabindex="-1"></a>Sachanlagen</span>
<span id="cb117-19"><a href="appendix.html#cb117-19" tabindex="-1"></a></span>
<span id="cb117-20"><a href="appendix.html#cb117-20" tabindex="-1"></a>Grundstücke, grundstücksgleiche Rechte und Bauten</span>
<span id="cb117-21"><a href="appendix.html#cb117-21" tabindex="-1"></a>einschließlich der Bauten auf fremden Grundstücken</span>
<span id="cb117-22"><a href="appendix.html#cb117-22" tabindex="-1"></a></span>
<span id="cb117-23"><a href="appendix.html#cb117-23" tabindex="-1"></a>Technische Anlagen und Maschinen</span>
<span id="cb117-24"><a href="appendix.html#cb117-24" tabindex="-1"></a></span>
<span id="cb117-25"><a href="appendix.html#cb117-25" tabindex="-1"></a>Andere Anlagen, Betriebs- und Geschäftsausstattung</span>
<span id="cb117-26"><a href="appendix.html#cb117-26" tabindex="-1"></a></span>
<span id="cb117-27"><a href="appendix.html#cb117-27" tabindex="-1"></a>geleistete Anzahlungen und Anlagen im Bau</span>
<span id="cb117-28"><a href="appendix.html#cb117-28" tabindex="-1"></a></span>
<span id="cb117-29"><a href="appendix.html#cb117-29" tabindex="-1"></a>Finanzanlagen</span>
<span id="cb117-30"><a href="appendix.html#cb117-30" tabindex="-1"></a></span>
<span id="cb117-31"><a href="appendix.html#cb117-31" tabindex="-1"></a>Sonstige Finanzanlagen</span>
<span id="cb117-32"><a href="appendix.html#cb117-32" tabindex="-1"></a></span>
<span id="cb117-33"><a href="appendix.html#cb117-33" tabindex="-1"></a>Anteile an verbundenen Unternehmen</span>
<span id="cb117-34"><a href="appendix.html#cb117-34" tabindex="-1"></a></span>
<span id="cb117-35"><a href="appendix.html#cb117-35" tabindex="-1"></a>Ausleihungen an verbundene Unternehmen</span>
<span id="cb117-36"><a href="appendix.html#cb117-36" tabindex="-1"></a></span>
<span id="cb117-37"><a href="appendix.html#cb117-37" tabindex="-1"></a>Beteiligungen</span>
<span id="cb117-38"><a href="appendix.html#cb117-38" tabindex="-1"></a></span>
<span id="cb117-39"><a href="appendix.html#cb117-39" tabindex="-1"></a>Ausleihungen an Unternehmen, mit denen ein</span>
<span id="cb117-40"><a href="appendix.html#cb117-40" tabindex="-1"></a>Beteiligungsverhältnis besteht</span>
<span id="cb117-41"><a href="appendix.html#cb117-41" tabindex="-1"></a></span>
<span id="cb117-42"><a href="appendix.html#cb117-42" tabindex="-1"></a>Wertpapiere des Anlagevermögens</span>
<span id="cb117-43"><a href="appendix.html#cb117-43" tabindex="-1"></a></span>
<span id="cb117-44"><a href="appendix.html#cb117-44" tabindex="-1"></a>Sonstige Ausleihungen</span>
<span id="cb117-45"><a href="appendix.html#cb117-45" tabindex="-1"></a></span>
<span id="cb117-46"><a href="appendix.html#cb117-46" tabindex="-1"></a>Umlaufvermögen</span>
<span id="cb117-47"><a href="appendix.html#cb117-47" tabindex="-1"></a></span>
<span id="cb117-48"><a href="appendix.html#cb117-48" tabindex="-1"></a>Vorräte</span>
<span id="cb117-49"><a href="appendix.html#cb117-49" tabindex="-1"></a></span>
<span id="cb117-50"><a href="appendix.html#cb117-50" tabindex="-1"></a>Roh-, Hilfs- und Betriebsstoffe</span>
<span id="cb117-51"><a href="appendix.html#cb117-51" tabindex="-1"></a></span>
<span id="cb117-52"><a href="appendix.html#cb117-52" tabindex="-1"></a>Unfertige Erzeugnisse, unfertige Leistungen</span>
<span id="cb117-53"><a href="appendix.html#cb117-53" tabindex="-1"></a></span>
<span id="cb117-54"><a href="appendix.html#cb117-54" tabindex="-1"></a>Fertige Erzeugnisse und Waren</span>
<span id="cb117-55"><a href="appendix.html#cb117-55" tabindex="-1"></a></span>
<span id="cb117-56"><a href="appendix.html#cb117-56" tabindex="-1"></a>Geleistete Anzahlungen</span>
<span id="cb117-57"><a href="appendix.html#cb117-57" tabindex="-1"></a></span>
<span id="cb117-58"><a href="appendix.html#cb117-58" tabindex="-1"></a>Forderungen und sonstige Vermögensgegenstände</span>
<span id="cb117-59"><a href="appendix.html#cb117-59" tabindex="-1"></a></span>
<span id="cb117-60"><a href="appendix.html#cb117-60" tabindex="-1"></a>Forderungen aus Lieferungen und Leistungen</span>
<span id="cb117-61"><a href="appendix.html#cb117-61" tabindex="-1"></a></span>
<span id="cb117-62"><a href="appendix.html#cb117-62" tabindex="-1"></a>Forderungen gegen verbundene Unternehmen</span>
<span id="cb117-63"><a href="appendix.html#cb117-63" tabindex="-1"></a></span>
<span id="cb117-64"><a href="appendix.html#cb117-64" tabindex="-1"></a>Forderungen gegen Unternehmen, mit denen ein</span>
<span id="cb117-65"><a href="appendix.html#cb117-65" tabindex="-1"></a>Beteiligungsverhältnis besteht</span>
<span id="cb117-66"><a href="appendix.html#cb117-66" tabindex="-1"></a></span>
<span id="cb117-67"><a href="appendix.html#cb117-67" tabindex="-1"></a>Sonstige Vermögensgegenstände</span>
<span id="cb117-68"><a href="appendix.html#cb117-68" tabindex="-1"></a></span>
<span id="cb117-69"><a href="appendix.html#cb117-69" tabindex="-1"></a>Wertpapiere</span>
<span id="cb117-70"><a href="appendix.html#cb117-70" tabindex="-1"></a></span>
<span id="cb117-71"><a href="appendix.html#cb117-71" tabindex="-1"></a>Anteile an verbundenen Unternehmen</span>
<span id="cb117-72"><a href="appendix.html#cb117-72" tabindex="-1"></a></span>
<span id="cb117-73"><a href="appendix.html#cb117-73" tabindex="-1"></a>Sonstige Wertpapiere</span>
<span id="cb117-74"><a href="appendix.html#cb117-74" tabindex="-1"></a></span>
<span id="cb117-75"><a href="appendix.html#cb117-75" tabindex="-1"></a>Kassenbestand, Bundesbankguthaben, Guthaben bei</span>
<span id="cb117-76"><a href="appendix.html#cb117-76" tabindex="-1"></a>Kreditinstituten und Schecks</span>
<span id="cb117-77"><a href="appendix.html#cb117-77" tabindex="-1"></a></span>
<span id="cb117-78"><a href="appendix.html#cb117-78" tabindex="-1"></a>Rechnungsabgrenzungsposten</span>
<span id="cb117-79"><a href="appendix.html#cb117-79" tabindex="-1"></a></span>
<span id="cb117-80"><a href="appendix.html#cb117-80" tabindex="-1"></a>Aktive latente Steuern</span>
<span id="cb117-81"><a href="appendix.html#cb117-81" tabindex="-1"></a></span>
<span id="cb117-82"><a href="appendix.html#cb117-82" tabindex="-1"></a>Aktiver Unterschiedsbetrag aus der</span>
<span id="cb117-83"><a href="appendix.html#cb117-83" tabindex="-1"></a>Vermögensverrechnung</span>
<span id="cb117-84"><a href="appendix.html#cb117-84" tabindex="-1"></a></span>
<span id="cb117-85"><a href="appendix.html#cb117-85" tabindex="-1"></a>Geschäftsjahr</span>
<span id="cb117-86"><a href="appendix.html#cb117-86" tabindex="-1"></a></span>
<span id="cb117-87"><a href="appendix.html#cb117-87" tabindex="-1"></a>Vorjahr</span>
<span id="cb117-88"><a href="appendix.html#cb117-88" tabindex="-1"></a></span>
<span id="cb117-89"><a href="appendix.html#cb117-89" tabindex="-1"></a>0,18</span>
<span id="cb117-90"><a href="appendix.html#cb117-90" tabindex="-1"></a></span>
<span id="cb117-91"><a href="appendix.html#cb117-91" tabindex="-1"></a>4,42</span>
<span id="cb117-92"><a href="appendix.html#cb117-92" tabindex="-1"></a></span>
<span id="cb117-93"><a href="appendix.html#cb117-93" tabindex="-1"></a>1,78</span>
<span id="cb117-94"><a href="appendix.html#cb117-94" tabindex="-1"></a></span>
<span id="cb117-95"><a href="appendix.html#cb117-95" tabindex="-1"></a>4,64</span>
<span id="cb117-96"><a href="appendix.html#cb117-96" tabindex="-1"></a></span>
<span id="cb117-97"><a href="appendix.html#cb117-97" tabindex="-1"></a>11,02</span>
<span id="cb117-98"><a href="appendix.html#cb117-98" tabindex="-1"></a></span>
<span id="cb117-99"><a href="appendix.html#cb117-99" tabindex="-1"></a>2,80</span>
<span id="cb117-100"><a href="appendix.html#cb117-100" tabindex="-1"></a></span>
<span id="cb117-101"><a href="appendix.html#cb117-101" tabindex="-1"></a>5,20</span>
<span id="cb117-102"><a href="appendix.html#cb117-102" tabindex="-1"></a></span>
<span id="cb117-103"><a href="appendix.html#cb117-103" tabindex="-1"></a>1,60</span>
<span id="cb117-104"><a href="appendix.html#cb117-104" tabindex="-1"></a></span>
<span id="cb117-105"><a href="appendix.html#cb117-105" tabindex="-1"></a>3,25</span>
<span id="cb117-106"><a href="appendix.html#cb117-106" tabindex="-1"></a></span>
<span id="cb117-107"><a href="appendix.html#cb117-107" tabindex="-1"></a>12,86</span>
<span id="cb117-108"><a href="appendix.html#cb117-108" tabindex="-1"></a></span>
<span id="cb117-109"><a href="appendix.html#cb117-109" tabindex="-1"></a>7,44</span>
<span id="cb117-110"><a href="appendix.html#cb117-110" tabindex="-1"></a></span>
<span id="cb117-111"><a href="appendix.html#cb117-111" tabindex="-1"></a>0,49</span>
<span id="cb117-112"><a href="appendix.html#cb117-112" tabindex="-1"></a></span>
<span id="cb117-113"><a href="appendix.html#cb117-113" tabindex="-1"></a>0,57</span>
<span id="cb117-114"><a href="appendix.html#cb117-114" tabindex="-1"></a></span>
<span id="cb117-115"><a href="appendix.html#cb117-115" tabindex="-1"></a>1,05</span>
<span id="cb117-116"><a href="appendix.html#cb117-116" tabindex="-1"></a></span>
<span id="cb117-117"><a href="appendix.html#cb117-117" tabindex="-1"></a>6,95</span>
<span id="cb117-118"><a href="appendix.html#cb117-118" tabindex="-1"></a></span>
<span id="cb117-119"><a href="appendix.html#cb117-119" tabindex="-1"></a>2,00</span>
<span id="cb117-120"><a href="appendix.html#cb117-120" tabindex="-1"></a></span>
<span id="cb117-121"><a href="appendix.html#cb117-121" tabindex="-1"></a>9,09</span>
<span id="cb117-122"><a href="appendix.html#cb117-122" tabindex="-1"></a></span>
<span id="cb117-123"><a href="appendix.html#cb117-123" tabindex="-1"></a>27,58</span>
<span id="cb117-124"><a href="appendix.html#cb117-124" tabindex="-1"></a></span>
<span id="cb117-125"><a href="appendix.html#cb117-125" tabindex="-1"></a>51,46</span>
<span id="cb117-126"><a href="appendix.html#cb117-126" tabindex="-1"></a></span>
<span id="cb117-127"><a href="appendix.html#cb117-127" tabindex="-1"></a>0,38</span>
<span id="cb117-128"><a href="appendix.html#cb117-128" tabindex="-1"></a></span>
<span id="cb117-129"><a href="appendix.html#cb117-129" tabindex="-1"></a>3,23</span>
<span id="cb117-130"><a href="appendix.html#cb117-130" tabindex="-1"></a></span>
<span id="cb117-131"><a href="appendix.html#cb117-131" tabindex="-1"></a>6,72</span>
<span id="cb117-132"><a href="appendix.html#cb117-132" tabindex="-1"></a></span>
<span id="cb117-133"><a href="appendix.html#cb117-133" tabindex="-1"></a>4,02</span>
<span id="cb117-134"><a href="appendix.html#cb117-134" tabindex="-1"></a></span>
<span id="cb117-135"><a href="appendix.html#cb117-135" tabindex="-1"></a>14,34</span>
<span id="cb117-136"><a href="appendix.html#cb117-136" tabindex="-1"></a></span>
<span id="cb117-137"><a href="appendix.html#cb117-137" tabindex="-1"></a>4,32</span>
<span id="cb117-138"><a href="appendix.html#cb117-138" tabindex="-1"></a></span>
<span id="cb117-139"><a href="appendix.html#cb117-139" tabindex="-1"></a>6,08</span>
<span id="cb117-140"><a href="appendix.html#cb117-140" tabindex="-1"></a></span>
<span id="cb117-141"><a href="appendix.html#cb117-141" tabindex="-1"></a>7,87</span>
<span id="cb117-142"><a href="appendix.html#cb117-142" tabindex="-1"></a></span>
<span id="cb117-143"><a href="appendix.html#cb117-143" tabindex="-1"></a>1,96</span>
<span id="cb117-144"><a href="appendix.html#cb117-144" tabindex="-1"></a></span>
<span id="cb117-145"><a href="appendix.html#cb117-145" tabindex="-1"></a>20,22</span>
<span id="cb117-146"><a href="appendix.html#cb117-146" tabindex="-1"></a></span>
<span id="cb117-147"><a href="appendix.html#cb117-147" tabindex="-1"></a>2,38</span>
<span id="cb117-148"><a href="appendix.html#cb117-148" tabindex="-1"></a></span>
<span id="cb117-149"><a href="appendix.html#cb117-149" tabindex="-1"></a>0,07</span>
<span id="cb117-150"><a href="appendix.html#cb117-150" tabindex="-1"></a></span>
<span id="cb117-151"><a href="appendix.html#cb117-151" tabindex="-1"></a>2,44</span>
<span id="cb117-152"><a href="appendix.html#cb117-152" tabindex="-1"></a></span>
<span id="cb117-153"><a href="appendix.html#cb117-153" tabindex="-1"></a>4,14</span>
<span id="cb117-154"><a href="appendix.html#cb117-154" tabindex="-1"></a></span>
<span id="cb117-155"><a href="appendix.html#cb117-155" tabindex="-1"></a>41,15</span>
<span id="cb117-156"><a href="appendix.html#cb117-156" tabindex="-1"></a></span>
<span id="cb117-157"><a href="appendix.html#cb117-157" tabindex="-1"></a>2,74</span>
<span id="cb117-158"><a href="appendix.html#cb117-158" tabindex="-1"></a></span>
<span id="cb117-159"><a href="appendix.html#cb117-159" tabindex="-1"></a>8,46</span>
<span id="cb117-160"><a href="appendix.html#cb117-160" tabindex="-1"></a></span>
<span id="cb117-161"><a href="appendix.html#cb117-161" tabindex="-1"></a>2,86</span>
<span id="cb117-162"><a href="appendix.html#cb117-162" tabindex="-1"></a></span>
<span id="cb117-163"><a href="appendix.html#cb117-163" tabindex="-1"></a>4,77</span>
<span id="cb117-164"><a href="appendix.html#cb117-164" tabindex="-1"></a></span>
<span id="cb117-165"><a href="appendix.html#cb117-165" tabindex="-1"></a>6,78</span>
<span id="cb117-166"><a href="appendix.html#cb117-166" tabindex="-1"></a></span>
<span id="cb117-167"><a href="appendix.html#cb117-167" tabindex="-1"></a>0,65</span>
<span id="cb117-168"><a href="appendix.html#cb117-168" tabindex="-1"></a></span>
<span id="cb117-169"><a href="appendix.html#cb117-169" tabindex="-1"></a>6,71</span>
<span id="cb117-170"><a href="appendix.html#cb117-170" tabindex="-1"></a></span>
<span id="cb117-171"><a href="appendix.html#cb117-171" tabindex="-1"></a>18,91</span>
<span id="cb117-172"><a href="appendix.html#cb117-172" tabindex="-1"></a></span>
<span id="cb117-173"><a href="appendix.html#cb117-173" tabindex="-1"></a>2,55</span>
<span id="cb117-174"><a href="appendix.html#cb117-174" tabindex="-1"></a></span>
<span id="cb117-175"><a href="appendix.html#cb117-175" tabindex="-1"></a>5,53</span>
<span id="cb117-176"><a href="appendix.html#cb117-176" tabindex="-1"></a></span>
<span id="cb117-177"><a href="appendix.html#cb117-177" tabindex="-1"></a>1,93</span>
<span id="cb117-178"><a href="appendix.html#cb117-178" tabindex="-1"></a></span>
<span id="cb117-179"><a href="appendix.html#cb117-179" tabindex="-1"></a>5,81</span>
<span id="cb117-180"><a href="appendix.html#cb117-180" tabindex="-1"></a></span>
<span id="cb117-181"><a href="appendix.html#cb117-181" tabindex="-1"></a>15,83</span>
<span id="cb117-182"><a href="appendix.html#cb117-182" tabindex="-1"></a></span>
<span id="cb117-183"><a href="appendix.html#cb117-183" tabindex="-1"></a>6,51</span>
<span id="cb117-184"><a href="appendix.html#cb117-184" tabindex="-1"></a></span>
<span id="cb117-185"><a href="appendix.html#cb117-185" tabindex="-1"></a>9,83</span>
<span id="cb117-186"><a href="appendix.html#cb117-186" tabindex="-1"></a></span>
<span id="cb117-187"><a href="appendix.html#cb117-187" tabindex="-1"></a>3,49</span>
<span id="cb117-188"><a href="appendix.html#cb117-188" tabindex="-1"></a></span>
<span id="cb117-189"><a href="appendix.html#cb117-189" tabindex="-1"></a>9,43</span>
<span id="cb117-190"><a href="appendix.html#cb117-190" tabindex="-1"></a></span>
<span id="cb117-191"><a href="appendix.html#cb117-191" tabindex="-1"></a>7,65</span>
<span id="cb117-192"><a href="appendix.html#cb117-192" tabindex="-1"></a></span>
<span id="cb117-193"><a href="appendix.html#cb117-193" tabindex="-1"></a>2,71</span>
<span id="cb117-194"><a href="appendix.html#cb117-194" tabindex="-1"></a></span>
<span id="cb117-195"><a href="appendix.html#cb117-195" tabindex="-1"></a>1,52</span>
<span id="cb117-196"><a href="appendix.html#cb117-196" tabindex="-1"></a></span>
<span id="cb117-197"><a href="appendix.html#cb117-197" tabindex="-1"></a>41,13</span>
<span id="cb117-198"><a href="appendix.html#cb117-198" tabindex="-1"></a></span>
<span id="cb117-199"><a href="appendix.html#cb117-199" tabindex="-1"></a>75,87</span>
<span id="cb117-200"><a href="appendix.html#cb117-200" tabindex="-1"></a></span>
<span id="cb117-201"><a href="appendix.html#cb117-201" tabindex="-1"></a>2,98</span>
<span id="cb117-202"><a href="appendix.html#cb117-202" tabindex="-1"></a></span>
<span id="cb117-203"><a href="appendix.html#cb117-203" tabindex="-1"></a>6,19</span>
<span id="cb117-204"><a href="appendix.html#cb117-204" tabindex="-1"></a></span>
<span id="cb117-205"><a href="appendix.html#cb117-205" tabindex="-1"></a>4,98</span>
<span id="cb117-206"><a href="appendix.html#cb117-206" tabindex="-1"></a></span>
<span id="cb117-207"><a href="appendix.html#cb117-207" tabindex="-1"></a>4,83</span>
<span id="cb117-208"><a href="appendix.html#cb117-208" tabindex="-1"></a></span>
<span id="cb117-209"><a href="appendix.html#cb117-209" tabindex="-1"></a>18,98</span>
<span id="cb117-210"><a href="appendix.html#cb117-210" tabindex="-1"></a></span>
<span id="cb117-211"><a href="appendix.html#cb117-211" tabindex="-1"></a>8,36</span>
<span id="cb117-212"><a href="appendix.html#cb117-212" tabindex="-1"></a></span>
<span id="cb117-213"><a href="appendix.html#cb117-213" tabindex="-1"></a>2,38</span>
<span id="cb117-214"><a href="appendix.html#cb117-214" tabindex="-1"></a></span>
<span id="cb117-215"><a href="appendix.html#cb117-215" tabindex="-1"></a>8,11</span>
<span id="cb117-216"><a href="appendix.html#cb117-216" tabindex="-1"></a></span>
<span id="cb117-217"><a href="appendix.html#cb117-217" tabindex="-1"></a>8,30</span>
<span id="cb117-218"><a href="appendix.html#cb117-218" tabindex="-1"></a></span>
<span id="cb117-219"><a href="appendix.html#cb117-219" tabindex="-1"></a>27,15</span>
<span id="cb117-220"><a href="appendix.html#cb117-220" tabindex="-1"></a></span>
<span id="cb117-221"><a href="appendix.html#cb117-221" tabindex="-1"></a>3,24</span>
<span id="cb117-222"><a href="appendix.html#cb117-222" tabindex="-1"></a></span>
<span id="cb117-223"><a href="appendix.html#cb117-223" tabindex="-1"></a>7,65</span>
<span id="cb117-224"><a href="appendix.html#cb117-224" tabindex="-1"></a></span>
<span id="cb117-225"><a href="appendix.html#cb117-225" tabindex="-1"></a>10,88</span>
<span id="cb117-226"><a href="appendix.html#cb117-226" tabindex="-1"></a></span>
<span id="cb117-227"><a href="appendix.html#cb117-227" tabindex="-1"></a>4,00</span>
<span id="cb117-228"><a href="appendix.html#cb117-228" tabindex="-1"></a></span>
<span id="cb117-229"><a href="appendix.html#cb117-229" tabindex="-1"></a>61,01</span>
<span id="cb117-230"><a href="appendix.html#cb117-230" tabindex="-1"></a></span>
<span id="cb117-231"><a href="appendix.html#cb117-231" tabindex="-1"></a>6,78</span>
<span id="cb117-232"><a href="appendix.html#cb117-232" tabindex="-1"></a></span>
<span id="cb117-233"><a href="appendix.html#cb117-233" tabindex="-1"></a>4,60</span>
<span id="cb117-234"><a href="appendix.html#cb117-234" tabindex="-1"></a></span>
<span id="cb117-235"><a href="appendix.html#cb117-235" tabindex="-1"></a>3,35</span>
<span id="cb117-236"><a href="appendix.html#cb117-236" tabindex="-1"></a></span>
<span id="cb117-237"><a href="appendix.html#cb117-237" tabindex="-1"></a>106,67</span>
<span id="cb117-238"><a href="appendix.html#cb117-238" tabindex="-1"></a></span>
<span id="cb117-239"><a href="appendix.html#cb117-239" tabindex="-1"></a>151,61</span></code></pre></div>
<p>Extract by PdfReader for ‘../Geschaeftsberichte/IBB/ibb_geschaeftsbericht_2006.pdf’, p. 67:</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode default"><code class="sourceCode default"><span id="cb118-1"><a href="appendix.html#cb118-1" tabindex="-1"></a>&#39;\x18\x18</span>
<span id="cb118-2"><a href="appendix.html#cb118-2" tabindex="-1"></a>Jahresbilanz zum 31. Dezember 2006</span>
<span id="cb118-3"><a href="appendix.html#cb118-3" tabindex="-1"></a>a ktivseite in te U r</span>
<span id="cb118-4"><a href="appendix.html#cb118-4" tabindex="-1"></a>31.12.2006 31.12.2005</span>
<span id="cb118-5"><a href="appendix.html#cb118-5" tabindex="-1"></a>1. Barreserve</span>
<span id="cb118-6"><a href="appendix.html#cb118-6" tabindex="-1"></a>    </span>
<span id="cb118-7"><a href="appendix.html#cb118-7" tabindex="-1"></a>    </span>
<span id="cb118-8"><a href="appendix.html#cb118-8" tabindex="-1"></a>b)  </span>
<span id="cb118-9"><a href="appendix.html#cb118-9" tabindex="-1"></a>    </span>
<span id="cb118-10"><a href="appendix.html#cb118-10" tabindex="-1"></a>Guthaben</span>
<span id="cb118-11"><a href="appendix.html#cb118-11" tabindex="-1"></a>    </span>
<span id="cb118-12"><a href="appendix.html#cb118-12" tabindex="-1"></a>bei</span>
<span id="cb118-13"><a href="appendix.html#cb118-13" tabindex="-1"></a>    </span>
<span id="cb118-14"><a href="appendix.html#cb118-14" tabindex="-1"></a>Zentralnotenbanken  </span>
<span id="cb118-15"><a href="appendix.html#cb118-15" tabindex="-1"></a>darunter:</span>
<span id="cb118-16"><a href="appendix.html#cb118-16" tabindex="-1"></a>    </span>
<span id="cb118-17"><a href="appendix.html#cb118-17" tabindex="-1"></a>bei</span>
<span id="cb118-18"><a href="appendix.html#cb118-18" tabindex="-1"></a>    </span>
<span id="cb118-19"><a href="appendix.html#cb118-19" tabindex="-1"></a>der</span>
<span id="cb118-20"><a href="appendix.html#cb118-20" tabindex="-1"></a>    </span>
<span id="cb118-21"><a href="appendix.html#cb118-21" tabindex="-1"></a>Deutschen</span>
<span id="cb118-22"><a href="appendix.html#cb118-22" tabindex="-1"></a>    </span>
<span id="cb118-23"><a href="appendix.html#cb118-23" tabindex="-1"></a>Bundesbank: </span>
<span id="cb118-24"><a href="appendix.html#cb118-24" tabindex="-1"></a>TEUR</span>
<span id="cb118-25"><a href="appendix.html#cb118-25" tabindex="-1"></a>    </span>
<span id="cb118-26"><a href="appendix.html#cb118-26" tabindex="-1"></a>19.823</span>
<span id="cb118-27"><a href="appendix.html#cb118-27" tabindex="-1"></a>    </span>
<span id="cb118-28"><a href="appendix.html#cb118-28" tabindex="-1"></a>(31.12.2005</span>
<span id="cb118-29"><a href="appendix.html#cb118-29" tabindex="-1"></a>    </span>
<span id="cb118-30"><a href="appendix.html#cb118-30" tabindex="-1"></a>:</span>
<span id="cb118-31"><a href="appendix.html#cb118-31" tabindex="-1"></a>    </span>
<span id="cb118-32"><a href="appendix.html#cb118-32" tabindex="-1"></a>TEUR</span>
<span id="cb118-33"><a href="appendix.html#cb118-33" tabindex="-1"></a>    </span>
<span id="cb118-34"><a href="appendix.html#cb118-34" tabindex="-1"></a>28.873)</span>
<span id="cb118-35"><a href="appendix.html#cb118-35" tabindex="-1"></a>3. Forderungen an </span>
<span id="cb118-36"><a href="appendix.html#cb118-36" tabindex="-1"></a>k</span>
<span id="cb118-37"><a href="appendix.html#cb118-37" tabindex="-1"></a>reditinstitute</span>
<span id="cb118-38"><a href="appendix.html#cb118-38" tabindex="-1"></a>     a)</span>
<span id="cb118-39"><a href="appendix.html#cb118-39" tabindex="-1"></a>    </span>
<span id="cb118-40"><a href="appendix.html#cb118-40" tabindex="-1"></a>täglich</span>
<span id="cb118-41"><a href="appendix.html#cb118-41" tabindex="-1"></a>    </span>
<span id="cb118-42"><a href="appendix.html#cb118-42" tabindex="-1"></a>fällig</span>
<span id="cb118-43"><a href="appendix.html#cb118-43" tabindex="-1"></a>     b)</span>
<span id="cb118-44"><a href="appendix.html#cb118-44" tabindex="-1"></a>    </span>
<span id="cb118-45"><a href="appendix.html#cb118-45" tabindex="-1"></a>andere</span>
<span id="cb118-46"><a href="appendix.html#cb118-46" tabindex="-1"></a>    </span>
<span id="cb118-47"><a href="appendix.html#cb118-47" tabindex="-1"></a>Forderungen</span>
<span id="cb118-48"><a href="appendix.html#cb118-48" tabindex="-1"></a>4. Forderungen an </span>
<span id="cb118-49"><a href="appendix.html#cb118-49" tabindex="-1"></a>k</span>
<span id="cb118-50"><a href="appendix.html#cb118-50" tabindex="-1"></a>unden</span>
<span id="cb118-51"><a href="appendix.html#cb118-51" tabindex="-1"></a>    </span>
<span id="cb118-52"><a href="appendix.html#cb118-52" tabindex="-1"></a>    </span>
<span id="cb118-53"><a href="appendix.html#cb118-53" tabindex="-1"></a>darunter:</span>
<span id="cb118-54"><a href="appendix.html#cb118-54" tabindex="-1"></a>        </span>
<span id="cb118-55"><a href="appendix.html#cb118-55" tabindex="-1"></a>durch</span>
<span id="cb118-56"><a href="appendix.html#cb118-56" tabindex="-1"></a>    </span>
<span id="cb118-57"><a href="appendix.html#cb118-57" tabindex="-1"></a>Grundpfandrechte</span>
<span id="cb118-58"><a href="appendix.html#cb118-58" tabindex="-1"></a>    </span>
<span id="cb118-59"><a href="appendix.html#cb118-59" tabindex="-1"></a>gesichert:  </span>
<span id="cb118-60"><a href="appendix.html#cb118-60" tabindex="-1"></a>TEUR</span>
<span id="cb118-61"><a href="appendix.html#cb118-61" tabindex="-1"></a>    </span>
<span id="cb118-62"><a href="appendix.html#cb118-62" tabindex="-1"></a>9.496.661</span>
<span id="cb118-63"><a href="appendix.html#cb118-63" tabindex="-1"></a>    </span>
<span id="cb118-64"><a href="appendix.html#cb118-64" tabindex="-1"></a>(31.12.2005</span>
<span id="cb118-65"><a href="appendix.html#cb118-65" tabindex="-1"></a>    </span>
<span id="cb118-66"><a href="appendix.html#cb118-66" tabindex="-1"></a>:</span>
<span id="cb118-67"><a href="appendix.html#cb118-67" tabindex="-1"></a>    </span>
<span id="cb118-68"><a href="appendix.html#cb118-68" tabindex="-1"></a>TEUR</span>
<span id="cb118-69"><a href="appendix.html#cb118-69" tabindex="-1"></a>    </span>
<span id="cb118-70"><a href="appendix.html#cb118-70" tabindex="-1"></a>10.660.277) </span>
<span id="cb118-71"><a href="appendix.html#cb118-71" tabindex="-1"></a>Kommunalkredite:</span>
<span id="cb118-72"><a href="appendix.html#cb118-72" tabindex="-1"></a>    </span>
<span id="cb118-73"><a href="appendix.html#cb118-73" tabindex="-1"></a>TEUR</span>
<span id="cb118-74"><a href="appendix.html#cb118-74" tabindex="-1"></a>    </span>
<span id="cb118-75"><a href="appendix.html#cb118-75" tabindex="-1"></a>3.532.796</span>
<span id="cb118-76"><a href="appendix.html#cb118-76" tabindex="-1"></a>    </span>
<span id="cb118-77"><a href="appendix.html#cb118-77" tabindex="-1"></a>(31.12.2005</span>
<span id="cb118-78"><a href="appendix.html#cb118-78" tabindex="-1"></a>    </span>
<span id="cb118-79"><a href="appendix.html#cb118-79" tabindex="-1"></a>:</span>
<span id="cb118-80"><a href="appendix.html#cb118-80" tabindex="-1"></a>    </span>
<span id="cb118-81"><a href="appendix.html#cb118-81" tabindex="-1"></a>TEUR</span>
<span id="cb118-82"><a href="appendix.html#cb118-82" tabindex="-1"></a>    </span>
<span id="cb118-83"><a href="appendix.html#cb118-83" tabindex="-1"></a>2.338.961)</span>
<span id="cb118-84"><a href="appendix.html#cb118-84" tabindex="-1"></a>5. Schuldverschreibungen und andere festverzinsliche Wertpapiere</span>
<span id="cb118-85"><a href="appendix.html#cb118-85" tabindex="-1"></a>     a)</span>
<span id="cb118-86"><a href="appendix.html#cb118-86" tabindex="-1"></a>    </span>
<span id="cb118-87"><a href="appendix.html#cb118-87" tabindex="-1"></a>    Geldmarktpapiere</span>
<span id="cb118-88"><a href="appendix.html#cb118-88" tabindex="-1"></a>    </span>
<span id="cb118-89"><a href="appendix.html#cb118-89" tabindex="-1"></a>         ab)</span>
<span id="cb118-90"><a href="appendix.html#cb118-90" tabindex="-1"></a>    </span>
<span id="cb118-91"><a href="appendix.html#cb118-91" tabindex="-1"></a>von</span>
<span id="cb118-92"><a href="appendix.html#cb118-92" tabindex="-1"></a>    </span>
<span id="cb118-93"><a href="appendix.html#cb118-93" tabindex="-1"></a>anderen</span>
<span id="cb118-94"><a href="appendix.html#cb118-94" tabindex="-1"></a>    </span>
<span id="cb118-95"><a href="appendix.html#cb118-95" tabindex="-1"></a>Emittenten  </span>
<span id="cb118-96"><a href="appendix.html#cb118-96" tabindex="-1"></a>     b)</span>
<span id="cb118-97"><a href="appendix.html#cb118-97" tabindex="-1"></a>    </span>
<span id="cb118-98"><a href="appendix.html#cb118-98" tabindex="-1"></a>    Anleihen</span>
<span id="cb118-99"><a href="appendix.html#cb118-99" tabindex="-1"></a>    </span>
<span id="cb118-100"><a href="appendix.html#cb118-100" tabindex="-1"></a>und</span>
<span id="cb118-101"><a href="appendix.html#cb118-101" tabindex="-1"></a>    </span>
<span id="cb118-102"><a href="appendix.html#cb118-102" tabindex="-1"></a>Schuldverschreibungen</span>
<span id="cb118-103"><a href="appendix.html#cb118-103" tabindex="-1"></a>    </span>
<span id="cb118-104"><a href="appendix.html#cb118-104" tabindex="-1"></a>         ba)</span>
<span id="cb118-105"><a href="appendix.html#cb118-105" tabindex="-1"></a>    </span>
<span id="cb118-106"><a href="appendix.html#cb118-106" tabindex="-1"></a>von</span>
<span id="cb118-107"><a href="appendix.html#cb118-107" tabindex="-1"></a>    </span>
<span id="cb118-108"><a href="appendix.html#cb118-108" tabindex="-1"></a>öffentlichen</span>
<span id="cb118-109"><a href="appendix.html#cb118-109" tabindex="-1"></a>    </span>
<span id="cb118-110"><a href="appendix.html#cb118-110" tabindex="-1"></a>Emittenten</span>
<span id="cb118-111"><a href="appendix.html#cb118-111" tabindex="-1"></a>    </span>
<span id="cb118-112"><a href="appendix.html#cb118-112" tabindex="-1"></a>         darunter:</span>
<span id="cb118-113"><a href="appendix.html#cb118-113" tabindex="-1"></a>    </span>
<span id="cb118-114"><a href="appendix.html#cb118-114" tabindex="-1"></a>beleihbar</span>
<span id="cb118-115"><a href="appendix.html#cb118-115" tabindex="-1"></a>    </span>
<span id="cb118-116"><a href="appendix.html#cb118-116" tabindex="-1"></a>bei</span>
<span id="cb118-117"><a href="appendix.html#cb118-117" tabindex="-1"></a>    </span>
<span id="cb118-118"><a href="appendix.html#cb118-118" tabindex="-1"></a>der</span>
<span id="cb118-119"><a href="appendix.html#cb118-119" tabindex="-1"></a>    </span>
<span id="cb118-120"><a href="appendix.html#cb118-120" tabindex="-1"></a>Deutschen</span>
<span id="cb118-121"><a href="appendix.html#cb118-121" tabindex="-1"></a>    </span>
<span id="cb118-122"><a href="appendix.html#cb118-122" tabindex="-1"></a>Bundesbank</span>
<span id="cb118-123"><a href="appendix.html#cb118-123" tabindex="-1"></a>    </span>
<span id="cb118-124"><a href="appendix.html#cb118-124" tabindex="-1"></a>         bb)</span>
<span id="cb118-125"><a href="appendix.html#cb118-125" tabindex="-1"></a>    </span>
<span id="cb118-126"><a href="appendix.html#cb118-126" tabindex="-1"></a>von</span>
<span id="cb118-127"><a href="appendix.html#cb118-127" tabindex="-1"></a>    </span>
<span id="cb118-128"><a href="appendix.html#cb118-128" tabindex="-1"></a>anderen</span>
<span id="cb118-129"><a href="appendix.html#cb118-129" tabindex="-1"></a>    </span>
<span id="cb118-130"><a href="appendix.html#cb118-130" tabindex="-1"></a>Emittenten</span>
<span id="cb118-131"><a href="appendix.html#cb118-131" tabindex="-1"></a>    </span>
<span id="cb118-132"><a href="appendix.html#cb118-132" tabindex="-1"></a>         darunter:</span>
<span id="cb118-133"><a href="appendix.html#cb118-133" tabindex="-1"></a>    </span>
<span id="cb118-134"><a href="appendix.html#cb118-134" tabindex="-1"></a>beleihbar</span>
<span id="cb118-135"><a href="appendix.html#cb118-135" tabindex="-1"></a>    </span>
<span id="cb118-136"><a href="appendix.html#cb118-136" tabindex="-1"></a>bei</span>
<span id="cb118-137"><a href="appendix.html#cb118-137" tabindex="-1"></a>    </span>
<span id="cb118-138"><a href="appendix.html#cb118-138" tabindex="-1"></a>der</span>
<span id="cb118-139"><a href="appendix.html#cb118-139" tabindex="-1"></a>    </span>
<span id="cb118-140"><a href="appendix.html#cb118-140" tabindex="-1"></a>Deutschen</span>
<span id="cb118-141"><a href="appendix.html#cb118-141" tabindex="-1"></a>    </span>
<span id="cb118-142"><a href="appendix.html#cb118-142" tabindex="-1"></a>Bundesbank</span>
<span id="cb118-143"><a href="appendix.html#cb118-143" tabindex="-1"></a>     c)</span>
<span id="cb118-144"><a href="appendix.html#cb118-144" tabindex="-1"></a>    </span>
<span id="cb118-145"><a href="appendix.html#cb118-145" tabindex="-1"></a>    eigene</span>
<span id="cb118-146"><a href="appendix.html#cb118-146" tabindex="-1"></a>    </span>
<span id="cb118-147"><a href="appendix.html#cb118-147" tabindex="-1"></a>Schuldverschreibungen</span>
<span id="cb118-148"><a href="appendix.html#cb118-148" tabindex="-1"></a>         Nennbetrag</span>
<span id="cb118-149"><a href="appendix.html#cb118-149" tabindex="-1"></a>7. Beteiligungen    </span>
<span id="cb118-150"><a href="appendix.html#cb118-150" tabindex="-1"></a>    </span>
<span id="cb118-151"><a href="appendix.html#cb118-151" tabindex="-1"></a>    </span>
<span id="cb118-152"><a href="appendix.html#cb118-152" tabindex="-1"></a>darunter:</span>
<span id="cb118-153"><a href="appendix.html#cb118-153" tabindex="-1"></a>        </span>
<span id="cb118-154"><a href="appendix.html#cb118-154" tabindex="-1"></a>an</span>
<span id="cb118-155"><a href="appendix.html#cb118-155" tabindex="-1"></a>    </span>
<span id="cb118-156"><a href="appendix.html#cb118-156" tabindex="-1"></a>Kreditinstituten</span>
<span id="cb118-157"><a href="appendix.html#cb118-157" tabindex="-1"></a>    </span>
<span id="cb118-158"><a href="appendix.html#cb118-158" tabindex="-1"></a>TEUR</span>
<span id="cb118-159"><a href="appendix.html#cb118-159" tabindex="-1"></a>    </span>
<span id="cb118-160"><a href="appendix.html#cb118-160" tabindex="-1"></a>0</span>
<span id="cb118-161"><a href="appendix.html#cb118-161" tabindex="-1"></a>    </span>
<span id="cb118-162"><a href="appendix.html#cb118-162" tabindex="-1"></a>(31.12.2005</span>
<span id="cb118-163"><a href="appendix.html#cb118-163" tabindex="-1"></a>    </span>
<span id="cb118-164"><a href="appendix.html#cb118-164" tabindex="-1"></a>:</span>
<span id="cb118-165"><a href="appendix.html#cb118-165" tabindex="-1"></a>    </span>
<span id="cb118-166"><a href="appendix.html#cb118-166" tabindex="-1"></a>TEUR</span>
<span id="cb118-167"><a href="appendix.html#cb118-167" tabindex="-1"></a>    </span>
<span id="cb118-168"><a href="appendix.html#cb118-168" tabindex="-1"></a>0)</span>
<span id="cb118-169"><a href="appendix.html#cb118-169" tabindex="-1"></a>8. </span>
<span id="cb118-170"><a href="appendix.html#cb118-170" tabindex="-1"></a>a</span>
<span id="cb118-171"><a href="appendix.html#cb118-171" tabindex="-1"></a>nteile an verbundenen Unternehmen</span>
<span id="cb118-172"><a href="appendix.html#cb118-172" tabindex="-1"></a>    </span>
<span id="cb118-173"><a href="appendix.html#cb118-173" tabindex="-1"></a>    </span>
<span id="cb118-174"><a href="appendix.html#cb118-174" tabindex="-1"></a>darunter:</span>
<span id="cb118-175"><a href="appendix.html#cb118-175" tabindex="-1"></a>        </span>
<span id="cb118-176"><a href="appendix.html#cb118-176" tabindex="-1"></a>an</span>
<span id="cb118-177"><a href="appendix.html#cb118-177" tabindex="-1"></a>    </span>
<span id="cb118-178"><a href="appendix.html#cb118-178" tabindex="-1"></a>Kreditinstituten</span>
<span id="cb118-179"><a href="appendix.html#cb118-179" tabindex="-1"></a>    </span>
<span id="cb118-180"><a href="appendix.html#cb118-180" tabindex="-1"></a>TEUR</span>
<span id="cb118-181"><a href="appendix.html#cb118-181" tabindex="-1"></a>    </span>
<span id="cb118-182"><a href="appendix.html#cb118-182" tabindex="-1"></a>0</span>
<span id="cb118-183"><a href="appendix.html#cb118-183" tabindex="-1"></a>    </span>
<span id="cb118-184"><a href="appendix.html#cb118-184" tabindex="-1"></a>(31.12.2005</span>
<span id="cb118-185"><a href="appendix.html#cb118-185" tabindex="-1"></a>    </span>
<span id="cb118-186"><a href="appendix.html#cb118-186" tabindex="-1"></a>:</span>
<span id="cb118-187"><a href="appendix.html#cb118-187" tabindex="-1"></a>    </span>
<span id="cb118-188"><a href="appendix.html#cb118-188" tabindex="-1"></a>TEUR</span>
<span id="cb118-189"><a href="appendix.html#cb118-189" tabindex="-1"></a>    </span>
<span id="cb118-190"><a href="appendix.html#cb118-190" tabindex="-1"></a>0)</span>
<span id="cb118-191"><a href="appendix.html#cb118-191" tabindex="-1"></a>9. </span>
<span id="cb118-192"><a href="appendix.html#cb118-192" tabindex="-1"></a>t</span>
<span id="cb118-193"><a href="appendix.html#cb118-193" tabindex="-1"></a>reuhandvermögen</span>
<span id="cb118-194"><a href="appendix.html#cb118-194" tabindex="-1"></a>    </span>
<span id="cb118-195"><a href="appendix.html#cb118-195" tabindex="-1"></a>    darunter:</span>
<span id="cb118-196"><a href="appendix.html#cb118-196" tabindex="-1"></a>    </span>
<span id="cb118-197"><a href="appendix.html#cb118-197" tabindex="-1"></a>Treuhandkredite</span>
<span id="cb118-198"><a href="appendix.html#cb118-198" tabindex="-1"></a>11. Immaterielle </span>
<span id="cb118-199"><a href="appendix.html#cb118-199" tabindex="-1"></a>a</span>
<span id="cb118-200"><a href="appendix.html#cb118-200" tabindex="-1"></a>nlagewerte</span>
<span id="cb118-201"><a href="appendix.html#cb118-201" tabindex="-1"></a>12. Sachanlagen</span>
<span id="cb118-202"><a href="appendix.html#cb118-202" tabindex="-1"></a>15. Sonstige </span>
<span id="cb118-203"><a href="appendix.html#cb118-203" tabindex="-1"></a>v</span>
<span id="cb118-204"><a href="appendix.html#cb118-204" tabindex="-1"></a>ermögensgegenstände</span>
<span id="cb118-205"><a href="appendix.html#cb118-205" tabindex="-1"></a>16. </span>
<span id="cb118-206"><a href="appendix.html#cb118-206" tabindex="-1"></a>r</span>
<span id="cb118-207"><a href="appendix.html#cb118-207" tabindex="-1"></a>echnungsabgrenzungsposten</span>
<span id="cb118-208"><a href="appendix.html#cb118-208" tabindex="-1"></a>Summe der </span>
<span id="cb118-209"><a href="appendix.html#cb118-209" tabindex="-1"></a>a</span>
<span id="cb118-210"><a href="appendix.html#cb118-210" tabindex="-1"></a>ktiva</span>
<span id="cb118-211"><a href="appendix.html#cb118-211" tabindex="-1"></a>19.823</span>
<span id="cb118-212"><a href="appendix.html#cb118-212" tabindex="-1"></a> </span>
<span id="cb118-213"><a href="appendix.html#cb118-213" tabindex="-1"></a> </span>
<span id="cb118-214"><a href="appendix.html#cb118-214" tabindex="-1"></a>132.272</span>
<span id="cb118-215"><a href="appendix.html#cb118-215" tabindex="-1"></a>1.562.290</span>
<span id="cb118-216"><a href="appendix.html#cb118-216" tabindex="-1"></a>24.138</span>
<span id="cb118-217"><a href="appendix.html#cb118-217" tabindex="-1"></a>126.223</span>
<span id="cb118-218"><a href="appendix.html#cb118-218" tabindex="-1"></a>126.223 </span>
<span id="cb118-219"><a href="appendix.html#cb118-219" tabindex="-1"></a>3.115.852</span>
<span id="cb118-220"><a href="appendix.html#cb118-220" tabindex="-1"></a>2.976.213</span>
<span id="cb118-221"><a href="appendix.html#cb118-221" tabindex="-1"></a>718</span>
<span id="cb118-222"><a href="appendix.html#cb118-222" tabindex="-1"></a>718</span>
<span id="cb118-223"><a href="appendix.html#cb118-223" tabindex="-1"></a>101.246</span>
<span id="cb118-224"><a href="appendix.html#cb118-224" tabindex="-1"></a>19.823</span>
<span id="cb118-225"><a href="appendix.html#cb118-225" tabindex="-1"></a>1.694.562</span>
<span id="cb118-226"><a href="appendix.html#cb118-226" tabindex="-1"></a>14.758.008</span>
<span id="cb118-227"><a href="appendix.html#cb118-227" tabindex="-1"></a>3.266.931</span>
<span id="cb118-228"><a href="appendix.html#cb118-228" tabindex="-1"></a>11.440</span>
<span id="cb118-229"><a href="appendix.html#cb118-229" tabindex="-1"></a>178.004</span>
<span id="cb118-230"><a href="appendix.html#cb118-230" tabindex="-1"></a>101.246</span>
<span id="cb118-231"><a href="appendix.html#cb118-231" tabindex="-1"></a>10.038</span>
<span id="cb118-232"><a href="appendix.html#cb118-232" tabindex="-1"></a>46.863</span>
<span id="cb118-233"><a href="appendix.html#cb118-233" tabindex="-1"></a>141.626</span>
<span id="cb118-234"><a href="appendix.html#cb118-234" tabindex="-1"></a>17.804</span>
<span id="cb118-235"><a href="appendix.html#cb118-235" tabindex="-1"></a>20.246.345</span>
<span id="cb118-236"><a href="appendix.html#cb118-236" tabindex="-1"></a>28.873</span>
<span id="cb118-237"><a href="appendix.html#cb118-237" tabindex="-1"></a>2.195.434</span>
<span id="cb118-238"><a href="appendix.html#cb118-238" tabindex="-1"></a>205.129</span>
<span id="cb118-239"><a href="appendix.html#cb118-239" tabindex="-1"></a>1.990.305</span>
<span id="cb118-240"><a href="appendix.html#cb118-240" tabindex="-1"></a>14.728.310</span>
<span id="cb118-241"><a href="appendix.html#cb118-241" tabindex="-1"></a>1.682.660</span>
<span id="cb118-242"><a href="appendix.html#cb118-242" tabindex="-1"></a>0</span>
<span id="cb118-243"><a href="appendix.html#cb118-243" tabindex="-1"></a>49.152</span>
<span id="cb118-244"><a href="appendix.html#cb118-244" tabindex="-1"></a>49.152</span>
<span id="cb118-245"><a href="appendix.html#cb118-245" tabindex="-1"></a>1.585.752</span>
<span id="cb118-246"><a href="appendix.html#cb118-246" tabindex="-1"></a>1.585.752</span>
<span id="cb118-247"><a href="appendix.html#cb118-247" tabindex="-1"></a>47.756</span>
<span id="cb118-248"><a href="appendix.html#cb118-248" tabindex="-1"></a>47.722</span>
<span id="cb118-249"><a href="appendix.html#cb118-249" tabindex="-1"></a>11.440</span>
<span id="cb118-250"><a href="appendix.html#cb118-250" tabindex="-1"></a>178.004</span>
<span id="cb118-251"><a href="appendix.html#cb118-251" tabindex="-1"></a>103.297</span>
<span id="cb118-252"><a href="appendix.html#cb118-252" tabindex="-1"></a>103.297</span>
<span id="cb118-253"><a href="appendix.html#cb118-253" tabindex="-1"></a>17.705</span>
<span id="cb118-254"><a href="appendix.html#cb118-254" tabindex="-1"></a>50.334</span>
<span id="cb118-255"><a href="appendix.html#cb118-255" tabindex="-1"></a>141.791</span>
<span id="cb118-256"><a href="appendix.html#cb118-256" tabindex="-1"></a>11.957</span>
<span id="cb118-257"><a href="appendix.html#cb118-257" tabindex="-1"></a>19.149.805</span>
<span id="cb118-258"><a href="appendix.html#cb118-258" tabindex="-1"></a>Jahresabschluss  | Jahresbilanz&#39;</span></code></pre></div>
</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-auerDoclingTechnicalReport2024" class="csl-entry">
Auer, C., Lysak, M., Nassar, A., Dolfi, M., Livathinos, N., Vagenas, P., Ramis, C. B., Omenetti, M., Lindlbauer, F., Dinkla, K., Mishra, L., Kim, Y., Gupta, S., Lima, R. T. de, Weber, V., Morin, L., Meijer, I., Kuropiatnyk, V., &amp; Staar, P. W. J. (2024). <em>Docling <span>Technical Report</span></em> (arXiv:2408.09869). arXiv. <a href="https://doi.org/10.48550/arXiv.2408.09869">https://doi.org/10.48550/arXiv.2408.09869</a>
</div>
<div id="ref-liExtractingFinancialData2023" class="csl-entry">
Li, H., Gao, H. (Harry)., Wu, C., &amp; Vasarhelyi, M. A. (2023). <em>Extracting <span>Financial Data</span> from <span>Unstructured Sources</span>: <span>Leveraging Large Language Models</span></em> ({{SSRN Scholarly Paper}} 4567607). Social Science Research Network. <a href="https://doi.org/10.2139/ssrn.4567607">https://doi.org/10.2139/ssrn.4567607</a>
</div>
<div id="ref-mosqueira-reyHumanintheloopMachineLearning2023" class="csl-entry">
Mosqueira-Rey, E., Hernández-Pereira, E., Alonso-Ríos, D., Bobes-Bascarán, J., &amp; Fernández-Leal, Á. (2023). Human-in-the-loop machine learning: A state of the art. <em>Artificial Intelligence Review</em>, <em>56</em>(4), 3005–3054. <a href="https://doi.org/10.1007/s10462-022-10246-w">https://doi.org/10.1007/s10462-022-10246-w</a>
</div>
<div id="ref-natarajanHumanintheloopAIintheloopAutomate2024" class="csl-entry">
Natarajan, S., Mathur, S., Sidheekh, S., Stammer, W., &amp; Kersting, K. (2024). <em>Human-in-the-loop or <span class="nocase">AI-in-the-loop</span>? <span>Automate</span> or <span>Collaborate</span>?</em> (arXiv:2412.14232). arXiv. <a href="https://doi.org/10.48550/arXiv.2412.14232">https://doi.org/10.48550/arXiv.2412.14232</a>
</div>
<div id="ref-wuSurveyHumanintheloopMachine2022" class="csl-entry">
Wu, X., Xiao, L., Sun, Y., Zhang, J., Ma, T., &amp; He, L. (2022). A <span>Survey</span> of <span class="nocase">Human-in-the-loop</span> for <span>Machine Learning</span>. <em>Future Generation Computer Systems</em>, <em>135</em>, 364–381. <a href="https://doi.org/10.1016/j.future.2022.05.014">https://doi.org/10.1016/j.future.2022.05.014</a>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="19">
<li id="fn19"><p>The idea is that the regular expression approach is
computationally cheap. If we can rely on the fact, that it keeps all
relevant pages we can use additional, computationally more expensive
approaches to further refine the page range.<a href="appendix.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p>See Figure
<a href="figures.html#fig:display-metrics-plot-regex-page-identification">10.2</a> for a
graphical representation.<a href="appendix.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p>I don’t understand why the restricted version is
finding the page but the non-restricted regex is not.<a href="appendix.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p>Since the results are not depending on the text
extraction library, the <em>exhaustive regex restricted</em> ran only with
the text extracted by the fastest extraction library: <em>pdfium</em>. This
library is used for the most tasks in this thesis. Later faced
issues with the text extracted by <em>pdfium</em> are discussed in @ref().<a href="appendix.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>This result is based on a single test run.<a href="appendix.html#fnref23" class="footnote-back">↩︎</a></p></li>
<li id="fn24"><p>With json the key <em>page_number</em> gets repeated every
line, while it is just mentiones once in the beginning of the
markdown formatted tables.<a href="appendix.html#fnref24" class="footnote-back">↩︎</a></p></li>
<li id="fn25"><p>See also Table
<a href="#tab:comparing-actual-number-of-in-context-examples">9.1</a>.<a href="appendix.html#fnref25" class="footnote-back">↩︎</a></p></li>
<li id="fn26"><p>It takes around 30 minutes to setup a vllm instance
with Llama-4 Scout compared to 4:30 minutes setuptime for Mistral 8B
2410.<a href="appendix.html#fnref26" class="footnote-back">↩︎</a></p></li>
<li id="fn27"><p>This is not due to a temporary technical problems
caused by a bug in the transformers version shipped with the vllm
0-9-2 image. Those problems have been overcome. The performance
stays bad.<a href="appendix.html#fnref27" class="footnote-back">↩︎</a></p></li>
<li id="fn28"><p>It has a better F1 score, when examples from the same
company are permitted. The recall is better with examples from same
company. The precision is better without. The improvement in the
recall is stronger.<a href="appendix.html#fnref28" class="footnote-back">↩︎</a></p></li>
<li id="fn29"><p>In this case five examples for the target table type
and two examples for each other type are provided, totaling at
twelve examples.<a href="appendix.html#fnref29" class="footnote-back">↩︎</a></p></li>
<li id="fn30"><p>Earlier experiments on a subset of the pages have been
run five times indicating stable results. Running the experiments up
to tree times in this very task indicate this as well.<a href="appendix.html#fnref30" class="footnote-back">↩︎</a></p></li>
<li id="fn31"><p>The model could be forced to return multiple answers,
but it was not. The confidence score is given as log probability.
The exponential function was applied to show the results on the more
common scale of 0 to 1.<a href="appendix.html#fnref31" class="footnote-back">↩︎</a></p></li>
<li id="fn32"><p>There was a single prediction where <a href="glossary.html#acronyms_LLM">LLM</a> predicts
<strong>Aktiva</strong> with high confidence, when the truth is <strong>Passiva</strong>
instead. Because Qwen was showing the same wrong prediction for one
<strong>Passiva</strong> table, I double checked the ground truth. I found, that
the page shows <strong>Aktiva</strong> and <strong>Passiva</strong> simultaneously and was not
correct codified. This was not the only time, where a mistake in the
gold truth was found, by examining potential <a href="glossary.html#acronyms_LLM">LLM</a> mistakes.<a href="appendix.html#fnref32" class="footnote-back">↩︎</a></p></li>
<li id="fn33"><p>Thus, a human has in average to check four pages and
select the correct <strong>Passiva</strong> page among them.<a href="appendix.html#fnref33" class="footnote-back">↩︎</a></p></li>
<li id="fn34"><p>It might be possible to request the n most probable
answers to get confidence scores for all different predictions. But
this was not investigated.<a href="appendix.html#fnref34" class="footnote-back">↩︎</a></p></li>
<li id="fn35"><p>The best performance results with
<em>top_11_rag_examples</em> but the plot was less interesting and its F1
score was not listed in Table
<a href="appendix.html#tab:table-metrics-llm-page-identification-multi-small-models">8.10</a>.<a href="appendix.html#fnref35" class="footnote-back">↩︎</a></p></li>
<li id="fn36"><p>The size of intervals has been narrowed down to 0.1 %
and still there was no range without wrong classification for Llama
4 Scout.<a href="appendix.html#fnref36" class="footnote-back">↩︎</a></p></li>
<li id="fn37"><p>The random forest build with undersampling performs
much better as a classifier, that is trained using n oversamples
train dataset.<a href="appendix.html#fnref37" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = '⟨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next ⟩';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="glossary.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tables.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
