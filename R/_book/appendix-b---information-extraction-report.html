<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon SchÃ¤fer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="page-identification-report.html"/>
<link rel="next" href="appendix-c---error-rate-guidance-report.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#to-place-in-chapters-above"><i class="fa fa-check"></i><b>1.6</b> To place in chapters above</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#unstrukturierte-daten"><i class="fa fa-check"></i><b>1.7</b> Unstrukturierte Daten</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#portable-document-format"><i class="fa fa-check"></i><b>1.7.1</b> Portable Document Format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#information-retrieval"><i class="fa fa-check"></i><b>2.1</b> Information extraction / retrieval</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#term-frequency"><i class="fa fa-check"></i><b>2.1.1</b> Term frequency</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.2</b> Text processing</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#regular-expressions"><i class="fa fa-check"></i><b>2.1.3</b> Regular expressions</a></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.4</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.4.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.4.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.4.2" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.4.2</b> Encoder</a></li>
<li class="chapter" data-level="2.1.4.3" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.4.3</b> Decoder</a></li>
<li class="chapter" data-level="2.1.4.4" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.4.4</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.4.5" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.4.5</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.4.6" data-path="literature-review.html"><a href="literature-review.html#mixed-modal"><i class="fa fa-check"></i><b>2.1.4.6</b> Mixed modal</a></li>
</ul></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.5</b> Methods for LLM application</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#few-shot-learning"><i class="fa fa-check"></i><b>2.1.5.1</b> Few-shot Learning</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.5.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.5.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> Other concepts</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-0.5-p"><i class="fa fa-check"></i><b>2.3</b> Summary (0.5 p)</a></li>
<li class="chapter" data-level="2.4" data-path="literature-review.html"><a href="literature-review.html#to-place-in-chapters-above-1"><i class="fa fa-check"></i><b>2.4</b> To place in chapters above</a></li>
<li class="chapter" data-level="2.5" data-path="literature-review.html"><a href="literature-review.html#table-extraction-tasks"><i class="fa fa-check"></i><b>2.5</b> Table extraction tasks</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="literature-review.html"><a href="literature-review.html#difficulties"><i class="fa fa-check"></i><b>2.5.1</b> Difficulties</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="literature-review.html"><a href="literature-review.html#document-extraction-process"><i class="fa fa-check"></i><b>2.6</b> Document Extraction Process</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis"><i class="fa fa-check"></i><b>2.6.1</b> Document Layout Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="literature-review.html"><a href="literature-review.html#tools"><i class="fa fa-check"></i><b>2.7</b> Tools</a>
<ul>
<li class="chapter" data-level="2.7.0.1" data-path="literature-review.html"><a href="literature-review.html#vision-grid-transformer"><i class="fa fa-check"></i><b>2.7.0.1</b> Vision Grid Transformer</a></li>
<li class="chapter" data-level="2.7.0.2" data-path="literature-review.html"><a href="literature-review.html#tableformer"><i class="fa fa-check"></i><b>2.7.0.2</b> TableFormer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#evaluation-framework"><i class="fa fa-check"></i><b>3.2.2</b> Evaluation framework</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#metrics"><i class="fa fa-check"></i><b>3.3.1</b> Metrics</a></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#gpu-benchmark"><i class="fa fa-check"></i><b>3.5.2</b> Hardware normalization</a></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#error-analysis"><i class="fa fa-check"></i><b>3.5.3</b> Error analysis</a></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#baseline-selection-rationale"><i class="fa fa-check"></i><b>3.5.4</b> Baseline selection rationale</a></li>
<li class="chapter" data-level="3.5.5" data-path="methodology.html"><a href="methodology.html#prompt-building"><i class="fa fa-check"></i><b>3.5.5</b> Prompt building</a></li>
<li class="chapter" data-level="3.5.6" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.6</b> Evaluation methods</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#ethical-practical-considerations-eher-am-ende-oder-weg"><i class="fa fa-check"></i><b>3.6</b> Ethical &amp; Practical Considerations (eher am Ende oder weg?)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="methodology.html"><a href="methodology.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>3.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="3.6.2" data-path="methodology.html"><a href="methodology.html#computational-constraints"><i class="fa fa-check"></i><b>3.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="3.6.3" data-path="methodology.html"><a href="methodology.html#generalizability-scope"><i class="fa fa-check"></i><b>3.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="3.6.4" data-path="methodology.html"><a href="methodology.html#ethical-considerations"><i class="fa fa-check"></i><b>3.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.2</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.3</b> Software Packages</a></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.4</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#text-extraction"><i class="fa fa-check"></i><b>4.5</b> Text extraction</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.6</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#interpretations"><i class="fa fa-check"></i><b>6.1</b> Interpretations</a>
<ul>
<li class="chapter" data-level="6.1.0.1" data-path="discussion.html"><a href="discussion.html#table-extraction"><i class="fa fa-check"></i><b>6.1.0.1</b> Table extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#limitations"><i class="fa fa-check"></i><b>6.2</b> Limitations</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#table-extraction-1"><i class="fa fa-check"></i><b>6.2.1</b> table extraction</a>
<ul>
<li class="chapter" data-level="6.2.1.1" data-path="discussion.html"><a href="discussion.html#regex-baseline"><i class="fa fa-check"></i><b>6.2.1.1</b> Regex baseline</a></li>
</ul></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#classification"><i class="fa fa-check"></i><b>6.2.2</b> classification</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.3</b> Not covered</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="discussion.html"><a href="discussion.html#table-detection-extraction"><i class="fa fa-check"></i><b>6.3.1</b> Table detection / extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#outlook"><i class="fa fa-check"></i><b>6.4</b> Outlook</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="discussion.html"><a href="discussion.html#vision-model"><i class="fa fa-check"></i><b>6.4.1</b> Vision Model</a></li>
<li class="chapter" data-level="6.4.2" data-path="discussion.html"><a href="discussion.html#docling-and-co"><i class="fa fa-check"></i><b>6.4.2</b> Docling and Co</a></li>
<li class="chapter" data-level="6.4.3" data-path="discussion.html"><a href="discussion.html#table-extraction-2"><i class="fa fa-check"></i><b>6.4.3</b> Table extraction</a></li>
<li class="chapter" data-level="6.4.4" data-path="discussion.html"><a href="discussion.html#sophisticated-approaches-for-text-extraction"><i class="fa fa-check"></i><b>6.4.4</b> Sophisticated approaches for text extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#error-analysis-1"><i class="fa fa-check"></i><b>6.5</b> Error analysis</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>8</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="8.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>8.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-1"><i class="fa fa-check"></i><b>8.2.2</b> Results</a></li>
<li class="chapter" data-level="8.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>8.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>8.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification"><i class="fa fa-check"></i><b>8.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification"><i class="fa fa-check"></i><b>8.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>8.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="8.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-2"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html"><i class="fa fa-check"></i><b>9</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="9.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>9.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="9.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>9.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>9.2.1</b> Real tables</a></li>
<li class="chapter" data-level="9.2.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>9.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>9.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#summary-3"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html"><i class="fa fa-check"></i><b>10</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="10.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#page-identification-4"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#binary-classification-1"><i class="fa fa-check"></i><b>10.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="10.1.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>10.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>10.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#real-tables-1"><i class="fa fa-check"></i><b>10.2.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#synthetic-tables-1"><i class="fa fa-check"></i><b>10.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="10.2.3" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#hybrid-aproach"><i class="fa fa-check"></i><b>10.2.3</b> Hybrid aproach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html"><i class="fa fa-check"></i><b>11</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#regular-expressions-3"><i class="fa fa-check"></i><b>11.1</b> Regular expressions</a></li>
<li class="chapter" data-level="11.2" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#real-tables-2"><i class="fa fa-check"></i><b>11.2</b> Real tables</a></li>
<li class="chapter" data-level="11.3" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#hybrid-approach-1"><i class="fa fa-check"></i><b>11.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>12</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="12.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>12.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>12.2</b> Local machine</a></li>
<li class="chapter" data-level="12.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>12.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>12.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="12.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>12.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="12.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo-benchmark-and-table-transformer"><i class="fa fa-check"></i><b>12.3.2.1</b> yolo benchmark and table transformer</a></li>
<li class="chapter" data-level="12.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>12.3.2.2</b> old classification with llm</a></li>
</ul></li>
<li class="chapter" data-level="12.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>12.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>12.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>12.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="12.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>12.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>12.5</b> Regular expressions</a></li>
<li class="chapter" data-level="12.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>12.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="12.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#extraction-framework-flow-chart"><i class="fa fa-check"></i><b>12.7</b> Extraction framework flow chart</a></li>
<li class="chapter" data-level="12.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>12.8</b> Table extraction with regular expressions</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#classification-1"><i class="fa fa-check"></i><b>13.1</b> Classification</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#table-extraction-3"><i class="fa fa-check"></i><b>13.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-2"><i class="fa fa-check"></i><b>13.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>14</b> Figures</a>
<ul>
<li class="chapter" data-level="14.1" data-path="figures.html"><a href="figures.html#page-identification-5"><i class="fa fa-check"></i><b>14.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="figures.html"><a href="figures.html#regex-baseline-1"><i class="fa fa-check"></i><b>14.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="14.1.2" data-path="figures.html"><a href="figures.html#toc-understanding-1"><i class="fa fa-check"></i><b>14.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="14.1.3" data-path="figures.html"><a href="figures.html#classification-2"><i class="fa fa-check"></i><b>14.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1.3.1" data-path="figures.html"><a href="figures.html#binary"><i class="fa fa-check"></i><b>14.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="14.1.3.2" data-path="figures.html"><a href="figures.html#multi-class-classification-2"><i class="fa fa-check"></i><b>14.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="figures.html"><a href="figures.html#table-extraction-4"><i class="fa fa-check"></i><b>14.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="figures.html"><a href="figures.html#regex-approach"><i class="fa fa-check"></i><b>14.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="14.2.1.1" data-path="figures.html"><a href="figures.html#real-tables-3"><i class="fa fa-check"></i><b>14.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="14.2.1.2" data-path="figures.html"><a href="figures.html#synthetic-tables-2"><i class="fa fa-check"></i><b>14.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="14.2.2" data-path="figures.html"><a href="figures.html#real-tables-4"><i class="fa fa-check"></i><b>14.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="14.2.2.1" data-path="figures.html"><a href="figures.html#examples-from-same-company"><i class="fa fa-check"></i><b>14.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="14.2.2.2" data-path="figures.html"><a href="figures.html#openai-models-1"><i class="fa fa-check"></i><b>14.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="14.2.2.3" data-path="figures.html"><a href="figures.html#hypotheses-5"><i class="fa fa-check"></i><b>14.2.2.3</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="14.2.3" data-path="figures.html"><a href="figures.html#synthetic-tables-3"><i class="fa fa-check"></i><b>14.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="14.2.3.1" data-path="figures.html"><a href="figures.html#confidence-4"><i class="fa fa-check"></i><b>14.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="14.2.4" data-path="figures.html"><a href="figures.html#hybrid-approach-3"><i class="fa fa-check"></i><b>14.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>15</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix-b---information-extraction-report" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">9</span> Appendix B - Information extraction report<a href="appendix-b---information-extraction-report.html#appendix-b---information-extraction-report" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>(ref:information-extraction-intro-text)</p>
<div id="baseline-regex" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Baseline: Regex<a href="appendix-b---information-extraction-report.html#baseline-regex" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The baseline for the table extraction task is set by an approach using
regular expressions on the text extract. Figure
<a href="appendix-b---information-extraction-report.html#fig:table-extraction-regex-performance">9.1</a> shows the performance of
this approach. In the first row (A) the percentage of correct predicted
numeric values and the percentage of total correct responses is shown.
The second row (B) shows the precision, recall and F1 score for
identifying a value as missing and thus predicting <em>null</em>. The
percentage of total correct responses is calculated as</p>
<p><span class="math display">\[
percentage\_correct\_total = \frac{n_{correct\_numeric} + n_{missing\_true\_positive}}{n_{total\_entries}}
\]</span></p>
<p>with <span class="math inline">\(n_{total\_entries} = 58\)</span> . This implies that the correct
prediction of missing values has more influence for tables, that have
only a few numeric values in the ground truth. The minimal number of
numeric values in a tables is ten. Figure
<a href="figures.html#fig:display-extraction-metrics-full-NA">14.1</a> shows, that the percentage
of total correct responses is not a sufficient metric, because responses
that only predicted <em>null</em> can have a high score if there are only a few
numeric values in the ground truth table.</p>
<div id="performance-1" class="section level5 hasAnchor paragraph-start" number="9.1.0.0.1">
<h5><span class="header-section-number">9.1.0.0.1</span> Performance<a href="appendix-b---information-extraction-report.html#performance-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In each frame there are two groups of two box-plots. The left group is
showing the performance on real <strong>Aktiva</strong> tables. The right group shows
the performance on synthetic <strong>Aktiva</strong> tables. Within the group the
green (left) box shows the performance on text extracted with the
<em>pdfium</em> library. The peach colored (right) box shows the performance on
text extracted with the <em>pymupdf</em> library.</p>
</div>
<p>Figure <a href="appendix-b---information-extraction-report.html#fig:table-extraction-regex-performance">9.1</a> shows, that the
<a href="glossary.html#acronyms_regex">regex</a> approach performs better<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a> on the synthetic
tables compared to the real tables. Even though, the performance is not
perfect and more consistent on the text extracted with <em>pymupdf</em>
compared to <em>pdfium</em>. In contrast, the used text extraction library has
no noticeable influence on the real <strong>Aktiva</strong> tables.</p>
<p>The performance for the <a href="glossary.html#acronyms_regex">regex</a> based table extraction is much
better than the <a href="glossary.html#acronyms_regex">regex</a> based page identification performance. The
median performance scores of the <a href="glossary.html#acronyms_regex">regex</a> approaches will be
reflected by a dashed line in the box-plots in subsequent sections. The
scores for the real <strong>Aktiva</strong> table extraction are:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="appendix-b---information-extraction-report.html#cb40-1" tabindex="-1"></a>table_extraction_regex_baseline_medians <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb40-2"><a href="appendix-b---information-extraction-report.html#cb40-2" tabindex="-1"></a>  <span class="fu">across</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb40-3"><a href="appendix-b---information-extraction-report.html#cb40-3" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;Summarizing the median performance of the regex approaches for the real and synthetic table extracion task.&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-regex-baseline-medians">Table 9.1: </span>Summarizing the median performance of the regex approaches for the real and synthetic table extracion task.
</caption>
<thead>
<tr>
<th style="text-align:left;">
measure
</th>
<th style="text-align:right;">
real_mean
</th>
<th style="text-align:right;">
real_median
</th>
<th style="text-align:right;">
synthetic_mean
</th>
<th style="text-align:right;">
synthetic_median
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
percentage of correct predictions total
</td>
<td style="text-align:right;">
0.686
</td>
<td style="text-align:right;">
0.707
</td>
<td style="text-align:right;">
0.969
</td>
<td style="text-align:right;">
0.966
</td>
</tr>
<tr>
<td style="text-align:left;">
percentage of correct numeric predictions
</td>
<td style="text-align:right;">
0.778
</td>
<td style="text-align:right;">
0.909
</td>
<td style="text-align:right;">
0.973
</td>
<td style="text-align:right;">
0.966
</td>
</tr>
<tr>
<td style="text-align:left;">
F1 score
</td>
<td style="text-align:right;">
0.789
</td>
<td style="text-align:right;">
0.800
</td>
<td style="text-align:right;">
0.979
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="appendix-b---information-extraction-report.html#cb41-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> df_table_extraction_regex <span class="sc">%&gt;%</span></span>
<span id="cb41-2"><a href="appendix-b---information-extraction-report.html#cb41-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(table_type, percentage_correct_numeric, percentage_correct_total, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="appendix-b---information-extraction-report.html#cb41-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(table_type, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="appendix-b---information-extraction-report.html#cb41-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-5"><a href="appendix-b---information-extraction-report.html#cb41-5" tabindex="-1"></a>  <span class="co"># geom_point(</span></span>
<span id="cb41-6"><a href="appendix-b---information-extraction-report.html#cb41-6" tabindex="-1"></a>  <span class="co">#   data= . %&gt;% filter(table_type == &quot;real_tables&quot;, name == &quot;percentage_correct_numeric&quot;),</span></span>
<span id="cb41-7"><a href="appendix-b---information-extraction-report.html#cb41-7" tabindex="-1"></a>  <span class="co">#   aes(x = table_type, y = value, alpha = extraction_backend), color = &quot;#264DEB&quot;,</span></span>
<span id="cb41-8"><a href="appendix-b---information-extraction-report.html#cb41-8" tabindex="-1"></a>  <span class="co">#   shape = 4, position=position_jitterdodge(dodge.width=0.9, jitter.width = 0.2, jitter.height = 0.005)</span></span>
<span id="cb41-9"><a href="appendix-b---information-extraction-report.html#cb41-9" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb41-10"><a href="appendix-b---information-extraction-report.html#cb41-10" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> table_type, <span class="at">y =</span> value, <span class="at">fill =</span> extraction_backend), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb41-11"><a href="appendix-b---information-extraction-report.html#cb41-11" tabindex="-1"></a>  <span class="co"># geom_jitter(data= . %&gt;% filter(table_type == &quot;real_tables&quot;), aes(x = table_type, y = value, color = T_EUR), alpha = .8, height = 0, shape = 4) +</span></span>
<span id="cb41-12"><a href="appendix-b---information-extraction-report.html#cb41-12" tabindex="-1"></a>  <span class="co"># facet_wrap(~name, ncol = 1) +</span></span>
<span id="cb41-13"><a href="appendix-b---information-extraction-report.html#cb41-13" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb41-14"><a href="appendix-b---information-extraction-report.html#cb41-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#94EB1F&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb41-15"><a href="appendix-b---information-extraction-report.html#cb41-15" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb41-16"><a href="appendix-b---information-extraction-report.html#cb41-16" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>name) <span class="sc">+</span></span>
<span id="cb41-17"><a href="appendix-b---information-extraction-report.html#cb41-17" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb41-18"><a href="appendix-b---information-extraction-report.html#cb41-18" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb41-19"><a href="appendix-b---information-extraction-report.html#cb41-19" tabindex="-1"></a>  )</span>
<span id="cb41-20"><a href="appendix-b---information-extraction-report.html#cb41-20" tabindex="-1"></a></span>
<span id="cb41-21"><a href="appendix-b---information-extraction-report.html#cb41-21" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> df_table_extraction_regex <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(table_type, NA_precision, NA_recall, NA_F1, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-22"><a href="appendix-b---information-extraction-report.html#cb41-22" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(table_type, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb41-23"><a href="appendix-b---information-extraction-report.html#cb41-23" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-24"><a href="appendix-b---information-extraction-report.html#cb41-24" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> table_type, <span class="at">y =</span> value, <span class="at">fill =</span> extraction_backend), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb41-25"><a href="appendix-b---information-extraction-report.html#cb41-25" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb41-26"><a href="appendix-b---information-extraction-report.html#cb41-26" tabindex="-1"></a><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#94EB1F&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb41-27"><a href="appendix-b---information-extraction-report.html#cb41-27" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb41-28"><a href="appendix-b---information-extraction-report.html#cb41-28" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>name)</span>
<span id="cb41-29"><a href="appendix-b---information-extraction-report.html#cb41-29" tabindex="-1"></a></span>
<span id="cb41-30"><a href="appendix-b---information-extraction-report.html#cb41-30" tabindex="-1"></a>design <span class="ot">&lt;-</span> <span class="st">&quot;ac </span><span class="sc">\n</span><span class="st"> bb&quot;</span></span>
<span id="cb41-31"><a href="appendix-b---information-extraction-report.html#cb41-31" tabindex="-1"></a></span>
<span id="cb41-32"><a href="appendix-b---information-extraction-report.html#cb41-32" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">guide_area</span>() <span class="sc">+</span> </span>
<span id="cb41-33"><a href="appendix-b---information-extraction-report.html#cb41-33" tabindex="-1"></a>  <span class="fu">plot_layout</span>(</span>
<span id="cb41-34"><a href="appendix-b---information-extraction-report.html#cb41-34" tabindex="-1"></a>    <span class="at">design =</span> design, </span>
<span id="cb41-35"><a href="appendix-b---information-extraction-report.html#cb41-35" tabindex="-1"></a>    <span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>, </span>
<span id="cb41-36"><a href="appendix-b---information-extraction-report.html#cb41-36" tabindex="-1"></a>    <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb41-37"><a href="appendix-b---information-extraction-report.html#cb41-37" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">&#39;A&#39;</span>)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-extraction-regex-performance"></span>
<img src="_main_files/figure-html/table-extraction-regex-performance-1.png" alt="Performance overall and on numeric value extraction with regular expressions." width="100%" />
<p class="caption">
Figure 9.1: Performance overall and on numeric value extraction with regular expressions.
</p>
</div>
</div>
<div id="extraction-with-llms-real-tables" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Extraction with LLMs<a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="appendix-b---information-extraction-report.html#cb42-1" tabindex="-1"></a>df_real_table_extraction <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/real_table_extraction_extended_llm.rds&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="appendix-b---information-extraction-report.html#cb42-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;deepseek-ai_DeepSeek-R1-Distill-Qwen-32B&quot;</span>, <span class="st">&#39;google_gemma-3n-E4B-it&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="appendix-b---information-extraction-report.html#cb42-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-4"><a href="appendix-b---information-extraction-report.html#cb42-4" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model),</span>
<span id="cb42-5"><a href="appendix-b---information-extraction-report.html#cb42-5" tabindex="-1"></a>    <span class="at">company =</span> <span class="fu">map_chr</span>(filepath, <span class="sc">~</span><span class="fu">str_split</span>(<span class="fu">str_split</span>(., <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">5</span>], <span class="st">&quot;__&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>])</span>
<span id="cb42-6"><a href="appendix-b---information-extraction-report.html#cb42-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(company <span class="sc">!=</span> <span class="st">&quot;MEAB GmbH&quot;</span>)</span>
<span id="cb42-7"><a href="appendix-b---information-extraction-report.html#cb42-7" tabindex="-1"></a>df_real_table_extraction_synth <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/real_table_extraction_extended_synth.rds&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-8"><a href="appendix-b---information-extraction-report.html#cb42-8" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-9"><a href="appendix-b---information-extraction-report.html#cb42-9" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model),</span>
<span id="cb42-10"><a href="appendix-b---information-extraction-report.html#cb42-10" tabindex="-1"></a>    <span class="at">company =</span> <span class="fu">map_chr</span>(filepath, <span class="sc">~</span><span class="fu">str_split</span>(<span class="fu">str_split</span>(., <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">5</span>], <span class="st">&quot;__&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>])</span>
<span id="cb42-11"><a href="appendix-b---information-extraction-report.html#cb42-11" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(company <span class="sc">!=</span> <span class="st">&quot;MEAB GmbH&quot;</span>)</span>
<span id="cb42-12"><a href="appendix-b---information-extraction-report.html#cb42-12" tabindex="-1"></a>df_real_table_extraction_azure <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/real_table_extraction_extended_azure.rds&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-13"><a href="appendix-b---information-extraction-report.html#cb42-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-14"><a href="appendix-b---information-extraction-report.html#cb42-14" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model),</span>
<span id="cb42-15"><a href="appendix-b---information-extraction-report.html#cb42-15" tabindex="-1"></a>    <span class="at">company =</span> <span class="fu">map_chr</span>(filepath, <span class="sc">~</span><span class="fu">str_split</span>(<span class="fu">str_split</span>(., <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">5</span>], <span class="st">&quot;__&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>])</span>
<span id="cb42-16"><a href="appendix-b---information-extraction-report.html#cb42-16" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(company <span class="sc">!=</span> <span class="st">&quot;MEAB GmbH&quot;</span>)</span>
<span id="cb42-17"><a href="appendix-b---information-extraction-report.html#cb42-17" tabindex="-1"></a></span>
<span id="cb42-18"><a href="appendix-b---information-extraction-report.html#cb42-18" tabindex="-1"></a>model_by_size <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb42-19"><a href="appendix-b---information-extraction-report.html#cb42-19" tabindex="-1"></a>  <span class="st">&#39;gemma-3-4b-it&#39;</span>, <span class="co">#&#39;gemma-3n-E4B-it&#39;, </span></span>
<span id="cb42-20"><a href="appendix-b---information-extraction-report.html#cb42-20" tabindex="-1"></a>  <span class="st">&quot;gemma-3-12b-it&quot;</span>, <span class="st">&quot;gemma-3-27b-it&quot;</span>,</span>
<span id="cb42-21"><a href="appendix-b---information-extraction-report.html#cb42-21" tabindex="-1"></a>  <span class="st">&quot;gpt-oss-20b&quot;</span>, <span class="st">&quot;gpt-oss-120b&quot;</span>,</span>
<span id="cb42-22"><a href="appendix-b---information-extraction-report.html#cb42-22" tabindex="-1"></a>  <span class="st">&quot;Llama-3.1-8B-Instruct&quot;</span>, <span class="st">&quot;Llama-3.1-70B-Instruct&quot;</span>, <span class="st">&quot;Llama-3.3-70B-Instruct&quot;</span>,</span>
<span id="cb42-23"><a href="appendix-b---information-extraction-report.html#cb42-23" tabindex="-1"></a>  <span class="st">&quot;Llama-4-Scout-17B-16E-Instruct&quot;</span>, <span class="st">&quot;Llama-4-Maverick-17B-128E-Instruct-FP8&quot;</span>,</span>
<span id="cb42-24"><a href="appendix-b---information-extraction-report.html#cb42-24" tabindex="-1"></a>  <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Mistral-Small-3.1-24B-Instruct-2503&quot;</span>,</span>
<span id="cb42-25"><a href="appendix-b---information-extraction-report.html#cb42-25" tabindex="-1"></a>  <span class="st">&quot;Mistral-Large-Instruct-2411&quot;</span>, <span class="st">&quot;Qwen2.5-0.5B-Instruct&quot;</span>,</span>
<span id="cb42-26"><a href="appendix-b---information-extraction-report.html#cb42-26" tabindex="-1"></a>  <span class="st">&quot;Qwen2.5-1.5B-Instruct&quot;</span>, <span class="st">&quot;Qwen2.5-3B-Instruct&quot;</span>, <span class="st">&quot;Qwen2.5-7B-Instruct&quot;</span>,</span>
<span id="cb42-27"><a href="appendix-b---information-extraction-report.html#cb42-27" tabindex="-1"></a>  <span class="st">&quot;Qwen2.5-14B-Instruct&quot;</span>, <span class="st">&quot;Qwen2.5-32B-Instruct&quot;</span>, <span class="st">&quot;Qwen2.5-72B-Instruct&quot;</span>,</span>
<span id="cb42-28"><a href="appendix-b---information-extraction-report.html#cb42-28" tabindex="-1"></a>  <span class="st">&quot;Qwen3-0.6B&quot;</span>, <span class="st">&quot;Qwen3-1.7B&quot;</span>, <span class="st">&quot;Qwen3-4B&quot;</span>,</span>
<span id="cb42-29"><a href="appendix-b---information-extraction-report.html#cb42-29" tabindex="-1"></a>  <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-14B&quot;</span>, <span class="st">&quot;Qwen3-30B-A3B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen3-32B&quot;</span>,</span>
<span id="cb42-30"><a href="appendix-b---information-extraction-report.html#cb42-30" tabindex="-1"></a>  <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507&quot;</span>,</span>
<span id="cb42-31"><a href="appendix-b---information-extraction-report.html#cb42-31" tabindex="-1"></a>  <span class="co"># &quot;gpt-4.1-nano&quot;, &quot;gpt-4.1-mini&quot;, &quot;gpt-4.1&quot;,</span></span>
<span id="cb42-32"><a href="appendix-b---information-extraction-report.html#cb42-32" tabindex="-1"></a>  <span class="st">&quot;Falcon3-10B-Instruct&quot;</span>, <span class="st">&quot;phi-4&quot;</span></span>
<span id="cb42-33"><a href="appendix-b---information-extraction-report.html#cb42-33" tabindex="-1"></a>)</span>
<span id="cb42-34"><a href="appendix-b---information-extraction-report.html#cb42-34" tabindex="-1"></a></span>
<span id="cb42-35"><a href="appendix-b---information-extraction-report.html#cb42-35" tabindex="-1"></a>method_order <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>, <span class="st">&quot;top_n_rag_examples_out_of_sample&quot;</span>, <span class="st">&quot;static_example&quot;</span>, <span class="st">&quot;zero_shot&quot;</span> )</span>
<span id="cb42-36"><a href="appendix-b---information-extraction-report.html#cb42-36" tabindex="-1"></a></span>
<span id="cb42-37"><a href="appendix-b---information-extraction-report.html#cb42-37" tabindex="-1"></a>norm_factors <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../benchmark_jobs/page_identification/gpu_benchmark/runtime_factors_real_table_extraction.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-38"><a href="appendix-b---information-extraction-report.html#cb42-38" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-39"><a href="appendix-b---information-extraction-report.html#cb42-39" tabindex="-1"></a>    <span class="at">model_name =</span> model_name <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="st">&quot;/&quot;</span>, <span class="st">&quot;_&quot;</span>)</span>
<span id="cb42-40"><a href="appendix-b---information-extraction-report.html#cb42-40" tabindex="-1"></a>  )</span>
<span id="cb42-41"><a href="appendix-b---information-extraction-report.html#cb42-41" tabindex="-1"></a>norm_factors_few_examples <span class="ot">&lt;-</span> norm_factors <span class="sc">%&gt;%</span> <span class="fu">filter</span>((<span class="fu">str_ends</span>(filename, <span class="st">&quot;binary.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;multi.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;vllm_batched.yaml&quot;</span>)))</span>
<span id="cb42-42"><a href="appendix-b---information-extraction-report.html#cb42-42" tabindex="-1"></a></span>
<span id="cb42-43"><a href="appendix-b---information-extraction-report.html#cb42-43" tabindex="-1"></a>df_real_table_extraction <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(</span>
<span id="cb42-44"><a href="appendix-b---information-extraction-report.html#cb42-44" tabindex="-1"></a>  norm_factors_few_examples <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model_name)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model_name, parameter_count, normalization_factor),</span>
<span id="cb42-45"><a href="appendix-b---information-extraction-report.html#cb42-45" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;model&quot;</span> <span class="ot">=</span> <span class="st">&quot;model_name&quot;</span>)</span>
<span id="cb42-46"><a href="appendix-b---information-extraction-report.html#cb42-46" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">normalized_runtime =</span> <span class="fu">round</span>(runtime<span class="sc">*</span>normalization_factor, <span class="dv">0</span>))</span>
<span id="cb42-47"><a href="appendix-b---information-extraction-report.html#cb42-47" tabindex="-1"></a></span>
<span id="cb42-48"><a href="appendix-b---information-extraction-report.html#cb42-48" tabindex="-1"></a>df_overview <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb42-49"><a href="appendix-b---information-extraction-report.html#cb42-49" tabindex="-1"></a>  <span class="fu">filter</span>(out_of_company <span class="sc">!=</span> <span class="cn">TRUE</span> <span class="sc">|</span> <span class="fu">is.na</span>(out_of_company), n_examples <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-50"><a href="appendix-b---information-extraction-report.html#cb42-50" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size) <span class="sc">%&gt;%</span></span>
<span id="cb42-51"><a href="appendix-b---information-extraction-report.html#cb42-51" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">!=</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb42-52"><a href="appendix-b---information-extraction-report.html#cb42-52" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-53"><a href="appendix-b---information-extraction-report.html#cb42-53" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size),</span>
<span id="cb42-54"><a href="appendix-b---information-extraction-report.html#cb42-54" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb42-55"><a href="appendix-b---information-extraction-report.html#cb42-55" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb42-56"><a href="appendix-b---information-extraction-report.html#cb42-56" tabindex="-1"></a>    )</span>
<span id="cb42-57"><a href="appendix-b---information-extraction-report.html#cb42-57" tabindex="-1"></a></span>
<span id="cb42-58"><a href="appendix-b---information-extraction-report.html#cb42-58" tabindex="-1"></a>units_real_tables <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../benchmark_truth/real_tables_extended/table_characteristics_more_examples.csv&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb42-59"><a href="appendix-b---information-extraction-report.html#cb42-59" tabindex="-1"></a>  <span class="at">filepath =</span> <span class="fu">paste0</span>(<span class="st">&#39;/pvc/benchmark_truth/real_tables_extended/&#39;</span>, company, <span class="st">&#39;__&#39;</span>, filename),</span>
<span id="cb42-60"><a href="appendix-b---information-extraction-report.html#cb42-60" tabindex="-1"></a>  <span class="at">T_EUR =</span> (T_in_year <span class="sc">+</span> T_in_previous_year)<span class="sc">&gt;</span><span class="dv">0</span>,</span>
<span id="cb42-61"><a href="appendix-b---information-extraction-report.html#cb42-61" tabindex="-1"></a>  <span class="at">T_EUR_both =</span> (T_in_year <span class="sc">+</span> T_in_previous_year)<span class="sc">&gt;</span><span class="dv">1</span></span>
<span id="cb42-62"><a href="appendix-b---information-extraction-report.html#cb42-62" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(filepath, T_EUR, T_EUR_both)</span>
<span id="cb42-63"><a href="appendix-b---information-extraction-report.html#cb42-63" tabindex="-1"></a></span>
<span id="cb42-64"><a href="appendix-b---information-extraction-report.html#cb42-64" tabindex="-1"></a>df_real_table_extraction_synth <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(units_real_tables)</span></code></pre></div>
</details>
<p>where to put?:</p>
<ul>
<li>GESOBAU AG and WBM GmbH bad, text selection with mouse odd</li>
<li>shift median upwards for GESOBAU: Qwen3, mitral, microsoft, Llama</li>
<li>shift median upwards for WBM: Llama 4</li>
</ul>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="appendix-b---information-extraction-report.html#cb43-1" tabindex="-1"></a>df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model, <span class="st">&quot;oss&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="appendix-b---information-extraction-report.html#cb43-2" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">==</span> <span class="dv">3</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="appendix-b---information-extraction-report.html#cb43-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.before =</span> <span class="dv">1</span>, <span class="at">company =</span> <span class="fu">map_chr</span>(filepath, <span class="sc">~</span><span class="fu">str_split</span>(<span class="fu">str_split</span>(., <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">5</span>], <span class="st">&quot;__&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>])) <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="appendix-b---information-extraction-report.html#cb43-4" tabindex="-1"></a>  <span class="fu">group_by</span>(company) <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="appendix-b---information-extraction-report.html#cb43-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-6"><a href="appendix-b---information-extraction-report.html#cb43-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> percentage_correct_numeric)) <span class="sc">+</span> </span>
<span id="cb43-7"><a href="appendix-b---information-extraction-report.html#cb43-7" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> percentage_correct_numeric), <span class="at">alpha=</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb43-8"><a href="appendix-b---information-extraction-report.html#cb43-8" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span> </span>
<span id="cb43-9"><a href="appendix-b---information-extraction-report.html#cb43-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model_family <span class="sc">~</span> .)</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="appendix-b---information-extraction-report.html#cb44-1" tabindex="-1"></a>df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(model, <span class="st">&quot;235B&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="appendix-b---information-extraction-report.html#cb44-2" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">==</span> <span class="dv">5</span>, method_family <span class="sc">==</span> <span class="st">&quot;top_n_rag_examples&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb44-3"><a href="appendix-b---information-extraction-report.html#cb44-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.before =</span> <span class="dv">1</span>, <span class="at">company =</span> <span class="fu">map_chr</span>(filepath, <span class="sc">~</span><span class="fu">str_split</span>(<span class="fu">str_split</span>(., <span class="st">&quot;/&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">5</span>], <span class="st">&quot;__&quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span>])) <span class="sc">%&gt;%</span> </span>
<span id="cb44-4"><a href="appendix-b---information-extraction-report.html#cb44-4" tabindex="-1"></a>  <span class="fu">group_by</span>(company) <span class="sc">%&gt;%</span> </span>
<span id="cb44-5"><a href="appendix-b---information-extraction-report.html#cb44-5" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb44-6"><a href="appendix-b---information-extraction-report.html#cb44-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> percentage_correct_numeric)) <span class="sc">+</span> </span>
<span id="cb44-7"><a href="appendix-b---information-extraction-report.html#cb44-7" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> percentage_correct_numeric), <span class="at">alpha=</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb44-8"><a href="appendix-b---information-extraction-report.html#cb44-8" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span> </span>
<span id="cb44-9"><a href="appendix-b---information-extraction-report.html#cb44-9" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model_family <span class="sc">~</span> .)</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<p>This section presents the results for the table extraction task
performed with <a href="glossary.html#acronyms_LLM">LLM</a>s on <strong>Aktiva</strong> tables. Subsection
<a href="appendix-b---information-extraction-report.html#real-table-extraction-results">9.2.1</a> compraes the performance of open
source models on real tables. It also compares those results with the
table extraction performance achieved with models by OpenAI.</p>
<p>Subsection <a href="appendix-b---information-extraction-report.html#synthetic-table-extraction">9.2.2</a> presents the results on
synthetic <strong>Aktiva</strong> tables. Subsection
<a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context">9.2.3</a> shows a hybrid approach,
where synthetic tables are used for the in-context learning, to extract
real <strong>Aktiva</strong> tables. Finally, we summarize the results for all
approaches in subsection <a href="results.html#comparing-table-extraction-methods">5.2.2</a>.</p>
<ul>
<li>confidence usable to head for user checks?</li>
<li>not handled new entries</li>
<li>five examples bring not much more, but a little</li>
</ul>
<p>Explain <em>static_example</em> method.</p>
<div id="real-table-extraction-results" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Real tables<a href="appendix-b---information-extraction-report.html#real-table-extraction-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="appendix-b---information-extraction-report.html#cb45-1" tabindex="-1"></a>df_top_scoring_models_big <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="appendix-b---information-extraction-report.html#cb45-2" tabindex="-1"></a>  <span class="co"># filter(parameter_count&gt;20) %&gt;% </span></span>
<span id="cb45-3"><a href="appendix-b---information-extraction-report.html#cb45-3" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="appendix-b---information-extraction-report.html#cb45-4" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-5"><a href="appendix-b---information-extraction-report.html#cb45-5" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-6"><a href="appendix-b---information-extraction-report.html#cb45-6" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-7"><a href="appendix-b---information-extraction-report.html#cb45-7" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-8"><a href="appendix-b---information-extraction-report.html#cb45-8" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-9"><a href="appendix-b---information-extraction-report.html#cb45-9" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, parameter_count, mean_total, median_total, normalized_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb45-10"><a href="appendix-b---information-extraction-report.html#cb45-10" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total))</span>
<span id="cb45-11"><a href="appendix-b---information-extraction-report.html#cb45-11" tabindex="-1"></a></span>
<span id="cb45-12"><a href="appendix-b---information-extraction-report.html#cb45-12" tabindex="-1"></a>top_scoring_model_big_mean <span class="ot">&lt;-</span> df_top_scoring_models_big <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>mean_total <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb45-13"><a href="appendix-b---information-extraction-report.html#cb45-13" tabindex="-1"></a></span>
<span id="cb45-14"><a href="appendix-b---information-extraction-report.html#cb45-14" tabindex="-1"></a>df_top_scoring_models_small <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb45-15"><a href="appendix-b---information-extraction-report.html#cb45-15" tabindex="-1"></a>  <span class="fu">filter</span>(parameter_count<span class="sc">&lt;</span><span class="dv">17</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-16"><a href="appendix-b---information-extraction-report.html#cb45-16" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb45-17"><a href="appendix-b---information-extraction-report.html#cb45-17" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb45-18"><a href="appendix-b---information-extraction-report.html#cb45-18" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb45-19"><a href="appendix-b---information-extraction-report.html#cb45-19" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb45-20"><a href="appendix-b---information-extraction-report.html#cb45-20" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb45-21"><a href="appendix-b---information-extraction-report.html#cb45-21" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-22"><a href="appendix-b---information-extraction-report.html#cb45-22" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, parameter_count, mean_total, median_total, normalized_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb45-23"><a href="appendix-b---information-extraction-report.html#cb45-23" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) </span>
<span id="cb45-24"><a href="appendix-b---information-extraction-report.html#cb45-24" tabindex="-1"></a></span>
<span id="cb45-25"><a href="appendix-b---information-extraction-report.html#cb45-25" tabindex="-1"></a>top_scoring_model_small_mean <span class="ot">&lt;-</span> df_top_scoring_models_small <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>mean_total <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb45-26"><a href="appendix-b---information-extraction-report.html#cb45-26" tabindex="-1"></a></span>
<span id="cb45-27"><a href="appendix-b---information-extraction-report.html#cb45-27" tabindex="-1"></a>zero_shot_stars <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb45-28"><a href="appendix-b---information-extraction-report.html#cb45-28" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>real_table_extraction_regex_NA_F1_median)</span>
<span id="cb45-29"><a href="appendix-b---information-extraction-report.html#cb45-29" tabindex="-1"></a></span>
<span id="cb45-30"><a href="appendix-b---information-extraction-report.html#cb45-30" tabindex="-1"></a>static_example_stars <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;static_example&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb45-31"><a href="appendix-b---information-extraction-report.html#cb45-31" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>real_table_extraction_regex_NA_F1_median)</span>
<span id="cb45-32"><a href="appendix-b---information-extraction-report.html#cb45-32" tabindex="-1"></a></span>
<span id="cb45-33"><a href="appendix-b---information-extraction-report.html#cb45-33" tabindex="-1"></a>underperformer <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb45-34"><a href="appendix-b---information-extraction-report.html#cb45-34" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>real_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb45-35"><a href="appendix-b---information-extraction-report.html#cb45-35" tabindex="-1"></a></span>
<span id="cb45-36"><a href="appendix-b---information-extraction-report.html#cb45-36" tabindex="-1"></a>super_underperformer <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>), n_examples<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method, parameter_count) <span class="sc">%&gt;%</span> </span>
<span id="cb45-37"><a href="appendix-b---information-extraction-report.html#cb45-37" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>real_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
</details>
<div id="performance-2" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.1">
<h5><span class="header-section-number">9.2.1.0.1</span> Performance<a href="appendix-b---information-extraction-report.html#performance-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the table extraction task
32 open source models
from 9 model
families have been benchmarked<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>. Table
<a href="appendix-b---information-extraction-report.html#tab:table-metrics-llm-real-table-extraction">9.2</a> shows the best
performing combination of <a href="glossary.html#acronyms_LLM">LLM</a> and prompting strategy for each
model family. The results are sorted by their mean percentage of total
correct predictions. It also shows the normalized runtime in seconds and
the parameter number of the model.</p>
</div>
<p>Qwen3-235B-A22B-Instruct performed best with a mean score of
0.97. This is equal with the performance that
we achieved building the ground truth dataset. There are other models
that perform almost as good with a score of 0.96 and more, but that
donât match the human performance. These models show a median score of
1.0. Qwen3-235B-A22B-Instruct is the second fastest of those well
performing models and needs less than six minutes. Only Llama 4 Maverick
is faster. It needs half the time to extract the information.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="appendix-b---information-extraction-report.html#cb46-1" tabindex="-1"></a>df_top_scoring_models_big <span class="sc">%&gt;%</span> </span>
<span id="cb46-2"><a href="appendix-b---information-extraction-report.html#cb46-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-3"><a href="appendix-b---information-extraction-report.html#cb46-3" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>),</span>
<span id="cb46-4"><a href="appendix-b---information-extraction-report.html#cb46-4" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>)</span>
<span id="cb46-5"><a href="appendix-b---information-extraction-report.html#cb46-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="appendix-b---information-extraction-report.html#cb46-6" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best table extraction performance with real &#39;Aktiva&#39; dataset for each model family&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction">Table 9.2: </span>Comparing best table extraction performance with real âAktivaâ dataset for each model family
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-9e34617023c152e836d8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9e34617023c152e836d8">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["Qwen 3","mistralai","Qwen 2.5","Llama-4","Llama-3","microsoft","openai","tiiuae","google"],["Qwen3-235B-A22B-Instruct-2507-FP8","Mistral-Large-Instruct-2411","Qwen2.5-72B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","Llama-3.1-70B-Instruct","phi-4","gpt-oss-120b","Falcon3-10B-Instruct","gemma-3-27b-it"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["5","5","5","1","5","2","5","3","3"],["235","124","72","17","70","15","120","10","27"],["0.97","0.949","0.941","0.939","0.926","0.909","0.904","0.884","0.86"],["1","1","0.966","0.966","0.966","0.948","0.948","0.931","0.897"],["349","1292","475","158","429","664","657","117","116"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>parameter count<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>normalized runtime<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"targets":8,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"parameter count","targets":5},{"name":"mean total","targets":6},{"name":"median total","targets":7},{"name":"normalized runtime","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-small">9.3</a> shows the
performance of models with less than 17B parameters, that have not been
listed above. Qwen3-14B performs best among the smaller models achieving
a mean of 0.93 and median of 1.0. It takes
1:49 minutes to extract the information from all <strong>Aktiva</strong> tables.
Ministral-8B-Instruct does not perform as good as in the page
identification task.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="appendix-b---information-extraction-report.html#cb47-1" tabindex="-1"></a>df_top_scoring_models_small <span class="sc">%&gt;%</span> </span>
<span id="cb47-2"><a href="appendix-b---information-extraction-report.html#cb47-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>model <span class="sc">%in%</span> df_top_scoring_models_big<span class="sc">$</span>model) <span class="sc">%&gt;%</span> </span>
<span id="cb47-3"><a href="appendix-b---information-extraction-report.html#cb47-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb47-4"><a href="appendix-b---information-extraction-report.html#cb47-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>),</span>
<span id="cb47-5"><a href="appendix-b---information-extraction-report.html#cb47-5" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>)</span>
<span id="cb47-6"><a href="appendix-b---information-extraction-report.html#cb47-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb47-7"><a href="appendix-b---information-extraction-report.html#cb47-7" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best table extraction performance with real &#39;Aktiva&#39; dataset for each model family for models with less than 17B parameters. Models that have been listes in the previous table are not listed again.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-small">Table 9.3: </span>Comparing best table extraction performance with real âAktivaâ dataset for each model family for models with less than 17B parameters. Models that have been listes in the previous table are not listed again.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-860f615e8294a4db4f2e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-860f615e8294a4db4f2e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["Qwen 3","Qwen 2.5","mistralai","Llama-3","google"],["Qwen3-8B","Qwen2.5-14B-Instruct","Ministral-8B-Instruct-2410","Llama-3.1-8B-Instruct","gemma-3-12b-it"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["5","5","5","5","3"],["8","14","8","8","12"],["0.927","0.925","0.895","0.832","0.811"],["0.966","0.966","0.931","0.879","0.862"],["133","233","220","98","95"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>parameter count<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>normalized runtime<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"targets":8,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"parameter count","targets":5},{"name":"mean total","targets":6},{"name":"median total","targets":7},{"name":"normalized runtime","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Most models need a context learning approach to beat the performance of
the regular expression approach at total and numeric correctness rate
and F1 score. Table <a href="appendix-b---information-extraction-report.html#tab:zero-and-synth-performing-models-tab">9.4</a>
shows, that 3 models perform better without any
guidance<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>. 6 models achieved
an performance better than the <a href="glossary.html#acronyms_regex">regex</a> baseline using the approach
to learn with a fixed example from the synthetic dataset.</p>
<p>In contrast: most of the models achieved a better performance than the
regex baseline when they were provided with one or more examples from
real <strong>Aktiva</strong> tables. Table
<a href="appendix-b---information-extraction-report.html#tab:super-underperforming-models-tab">9.5</a> shows, that
11 donât consitently achieve a better score,
when provided with three or five real <strong>Aktiva</strong> table examples. Here we
find the smallest models with less than 2B parameters which donât
achieve a consistence performance no matter how many examples they get.
But we also find models that start to perform bad if they get a too long
context with too many examples like the very recent and large model
Llama 4 Maverick.</p>
<p>The results for all models are presented in Figure
<a href="figures.html#fig:table-extraction-llm-performance-total-overview">14.15</a>,
<a href="figures.html#fig:table-extraction-llm-performance-numeric-overview">14.16</a> and
<a href="figures.html#fig:table-extraction-llm-f1-overview">14.17</a>. In general the performance
within a model family is positive correlated with the models number of
parameters, if we provide real <strong>Aktiva</strong> examples. Once the 4B
parameters are passed, the improvements get less and less, approaching
the perfect performance. But no model achieves sperfect result on all
documents. The <em>zero_shot</em> and <em>static_example</em> approach show some
unpredicted performance drop, i.e.Â for Qwen3-14B.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="appendix-b---information-extraction-report.html#cb48-1" tabindex="-1"></a>zero_shot_stars <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(static_example_stars, <span class="fu">join_by</span>(model), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_zero_shot&quot;</span>, <span class="st">&quot;_static_example&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model, <span class="fu">starts_with</span>(<span class="st">&quot;median_total&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb48-2"><a href="appendix-b---information-extraction-report.html#cb48-2" tabindex="-1"></a><span class="fu">mutate_if</span>(</span>
<span id="cb48-3"><a href="appendix-b---information-extraction-report.html#cb48-3" tabindex="-1"></a>    is.numeric, </span>
<span id="cb48-4"><a href="appendix-b---information-extraction-report.html#cb48-4" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb48-5"><a href="appendix-b---information-extraction-report.html#cb48-5" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb48-6"><a href="appendix-b---information-extraction-report.html#cb48-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb48-7"><a href="appendix-b---information-extraction-report.html#cb48-7" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb48-8"><a href="appendix-b---information-extraction-report.html#cb48-8" tabindex="-1"></a>    )</span>
<span id="cb48-9"><a href="appendix-b---information-extraction-report.html#cb48-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb48-10"><a href="appendix-b---information-extraction-report.html#cb48-10" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb48-11"><a href="appendix-b---information-extraction-report.html#cb48-11" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrr&quot;</span>,</span>
<span id="cb48-12"><a href="appendix-b---information-extraction-report.html#cb48-12" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for models that perform well without or with little context learning&quot;</span>,</span>
<span id="cb48-13"><a href="appendix-b---information-extraction-report.html#cb48-13" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:zero-and-synth-performing-models-tab">Table 9.4: </span>Comparing table extraction performance with real âAktivaâ dataset for models that perform well without or with little context learning
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-5833abb9f79736f1770e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5833abb9f79736f1770e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["Llama-4-Maverick-17B-128E-Instruct-FP8","Qwen3-235B-A22B-Instruct-2507-FP8","gpt-oss-120b","Qwen2.5-32B-Instruct","Qwen2.5-72B-Instruct","Qwen3-30B-A3B-Instruct-2507"],["<b>0.897<\/b>","<b>0.897<\/b>","<b>0.897<\/b>",null,null,null],["0.922","<b>0.931<\/b>","0.897","<b>0.931<\/b>","0.897","0.879"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>median total zero shot<\/th>\n      <th>median total static example<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"median total zero shot","targets":2},{"name":"median total static example","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="appendix-b---information-extraction-report.html#cb49-1" tabindex="-1"></a>super_underperformer <span class="sc">%&gt;%</span> <span class="fu">select</span>(model, method, parameter_count, median_total) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="co"># mutate(model = str_replace_all(model, &quot;_&quot;, &quot; &quot;)) %&gt;% </span></span>
<span id="cb49-2"><a href="appendix-b---information-extraction-report.html#cb49-2" tabindex="-1"></a><span class="fu">mutate_if</span>(</span>
<span id="cb49-3"><a href="appendix-b---information-extraction-report.html#cb49-3" tabindex="-1"></a>    is.numeric, </span>
<span id="cb49-4"><a href="appendix-b---information-extraction-report.html#cb49-4" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb49-5"><a href="appendix-b---information-extraction-report.html#cb49-5" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb49-6"><a href="appendix-b---information-extraction-report.html#cb49-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb49-7"><a href="appendix-b---information-extraction-report.html#cb49-7" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb49-8"><a href="appendix-b---information-extraction-report.html#cb49-8" tabindex="-1"></a>    )</span>
<span id="cb49-9"><a href="appendix-b---information-extraction-report.html#cb49-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb49-10"><a href="appendix-b---information-extraction-report.html#cb49-10" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb49-11"><a href="appendix-b---information-extraction-report.html#cb49-11" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrr&quot;</span>,</span>
<span id="cb49-12"><a href="appendix-b---information-extraction-report.html#cb49-12" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for models that perform worse than the regex baselin with 3 or 5 examples for in-context learning&quot;</span>,</span>
<span id="cb49-13"><a href="appendix-b---information-extraction-report.html#cb49-13" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:super-underperforming-models-tab">Table 9.5: </span>Comparing table extraction performance with real âAktivaâ dataset for models that perform worse than the regex baselin with 3 or 5 examples for in-context learning
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-3ed447cd0ef4053a5919" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-3ed447cd0ef4053a5919">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11"],["Llama-3.1-8B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","Qwen2.5-0.5B-Instruct","Qwen2.5-1.5B-Instruct","Qwen2.5-3B-Instruct","Qwen2.5-7B-Instruct","Qwen3-0.6B","Qwen3-1.7B","gemma-3-12b-it","gemma-3-4b-it","gpt-oss-20b"],["3_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples"],["8","17","0.5","1.5","3","7","0.6","1.7","12","4","<b>20<\/b>"],["0.81","0.017","0.586","0.724","0.759","0.862","0.612","0.776","0.793","0.664","<b>0.897<\/b>"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>parameter count<\/th>\n      <th>median total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"parameter count","targets":3},{"name":"median total","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="appendix-b---information-extraction-report.html#cb50-1" tabindex="-1"></a>model_by_size_gpt <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb50-2"><a href="appendix-b---information-extraction-report.html#cb50-2" tabindex="-1"></a>  <span class="st">&quot;Qwen3-0.6B&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-30B-A3B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>,</span>
<span id="cb50-3"><a href="appendix-b---information-extraction-report.html#cb50-3" tabindex="-1"></a> <span class="st">&quot;gpt-4.1-nano&quot;</span>, <span class="st">&quot;gpt-5-nano&quot;</span>, <span class="st">&quot;gpt-4.1-mini&quot;</span>, <span class="st">&quot;gpt-5-mini&quot;</span>,</span>
<span id="cb50-4"><a href="appendix-b---information-extraction-report.html#cb50-4" tabindex="-1"></a> <span class="st">&quot;gpt-oss-20b&quot;</span>, <span class="st">&quot;gpt-oss-120b&quot;</span>, <span class="st">&quot;gpt-4.1&quot;</span></span>
<span id="cb50-5"><a href="appendix-b---information-extraction-report.html#cb50-5" tabindex="-1"></a>)</span>
<span id="cb50-6"><a href="appendix-b---information-extraction-report.html#cb50-6" tabindex="-1"></a></span>
<span id="cb50-7"><a href="appendix-b---information-extraction-report.html#cb50-7" tabindex="-1"></a>df_overview_gpt <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb50-8"><a href="appendix-b---information-extraction-report.html#cb50-8" tabindex="-1"></a>  <span class="fu">filter</span>(out_of_company <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">|</span> <span class="fu">is.na</span>(out_of_company), n_examples <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb50-9"><a href="appendix-b---information-extraction-report.html#cb50-9" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_gpt) <span class="sc">%&gt;%</span></span>
<span id="cb50-10"><a href="appendix-b---information-extraction-report.html#cb50-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-11"><a href="appendix-b---information-extraction-report.html#cb50-11" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_gpt),</span>
<span id="cb50-12"><a href="appendix-b---information-extraction-report.html#cb50-12" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb50-13"><a href="appendix-b---information-extraction-report.html#cb50-13" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb50-14"><a href="appendix-b---information-extraction-report.html#cb50-14" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb50-15"><a href="appendix-b---information-extraction-report.html#cb50-15" tabindex="-1"></a>      <span class="at">n_predicted_values =</span> NA_true_positive<span class="sc">+</span>NA_false_positive<span class="sc">+</span>NA_false_negative<span class="sc">+</span>NA_true_negative</span>
<span id="cb50-16"><a href="appendix-b---information-extraction-report.html#cb50-16" tabindex="-1"></a>    )</span>
<span id="cb50-17"><a href="appendix-b---information-extraction-report.html#cb50-17" tabindex="-1"></a></span>
<span id="cb50-18"><a href="appendix-b---information-extraction-report.html#cb50-18" tabindex="-1"></a>perc_wrong_prediction_count <span class="ot">&lt;-</span> <span class="fu">round</span>((df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model, <span class="st">&quot;Qwen&quot;</span>), n_predicted_values <span class="sc">!=</span> <span class="dv">58</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()<span class="sc">/</span>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model, <span class="st">&quot;Qwen&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)</span></code></pre></div>
</details>
<div id="openai-models" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.2">
<h5><span class="header-section-number">9.2.1.0.2</span> OpenAI models<a href="appendix-b---information-extraction-report.html#openai-models" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Even though a lot of documents to process at <a href="glossary.html#acronyms_RHvB">RHvB</a> will not be
public and thus must not be processed on public cloud infrastructure,
the performance of models like OpenAIâs GPT are interesting benchmark
references within this thesis and for comparing these findings with
other papers results. Therefore for this thesis the public available
versions of annual reports have been used instead of the ones used
internally or for public administration purposes. Those public available
reports often are visually more appealing and more heterogeneous in
their structure.</p>
</div>
<p>Table @ref(tab.table-extraction-llm-performance-total-gpt-ranking)
shows the ranking for the best model-method combinations Qwen3 235B is
performing best. gpt-4.1 and gpt-5-mini perform equally well and are
almost as good as Qwen3 235B. All models but gpt-4.1-nano, gpt-5-nano
and Qwen3-0.6B manage to beat the <a href="glossary.html#acronyms_regex">regex</a> threshold. Qwen3-0.6B
performs better than the nano models once it gets provided with an
example.</p>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:costs-azure">9.7</a> shows the accumulated costs for the table
extraction task for the models provided by Azure. Using gpt-4.1 is most
expensive, followed by gpt-5-mini. Next is gpt-5-nano. This is caused by
an unexpected high cost for output tokens. In general we find, that the
ratio of output costs to input costs is much higher for gpt-5 models.
Since gpt-5-mini gives consistently good results already with one
provided example, this could be the most cost efficient strategy. But it
takes gpt-5-mini more than three times longer to respond than gpt-4.1.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="appendix-b---information-extraction-report.html#cb51-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb51-2"><a href="appendix-b---information-extraction-report.html#cb51-2" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb51-3"><a href="appendix-b---information-extraction-report.html#cb51-3" tabindex="-1"></a>    <span class="at">mean_percentage_correct_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb51-4"><a href="appendix-b---information-extraction-report.html#cb51-4" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb51-5"><a href="appendix-b---information-extraction-report.html#cb51-5" tabindex="-1"></a>    <span class="co"># median_runtime = median(runtime)</span></span>
<span id="cb51-6"><a href="appendix-b---information-extraction-report.html#cb51-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-7"><a href="appendix-b---information-extraction-report.html#cb51-7" tabindex="-1"></a>  <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb51-8"><a href="appendix-b---information-extraction-report.html#cb51-8" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_percentage_correct_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb51-9"><a href="appendix-b---information-extraction-report.html#cb51-9" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb51-10"><a href="appendix-b---information-extraction-report.html#cb51-10" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb51-11"><a href="appendix-b---information-extraction-report.html#cb51-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-12"><a href="appendix-b---information-extraction-report.html#cb51-12" tabindex="-1"></a>    <span class="at">mean_percentage_correct_total =</span> <span class="fu">round</span>(mean_percentage_correct_total, <span class="dv">2</span>),</span>
<span id="cb51-13"><a href="appendix-b---information-extraction-report.html#cb51-13" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">round</span>(median_percentage_correct_total, <span class="dv">2</span>),</span>
<span id="cb51-14"><a href="appendix-b---information-extraction-report.html#cb51-14" tabindex="-1"></a>    <span class="co"># median_runtime = round(median_runtime)</span></span>
<span id="cb51-15"><a href="appendix-b---information-extraction-report.html#cb51-15" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">&quot;median correct total&quot;</span> <span class="ot">=</span> median_percentage_correct_total) <span class="sc">%&gt;%</span> </span>
<span id="cb51-16"><a href="appendix-b---information-extraction-report.html#cb51-16" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb51-17"><a href="appendix-b---information-extraction-report.html#cb51-17" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrr&quot;</span>,</span>
<span id="cb51-18"><a href="appendix-b---information-extraction-report.html#cb51-18" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for OPenAIs GPT models with a selection of Qwen3 models.&quot;</span>,</span>
<span id="cb51-19"><a href="appendix-b---information-extraction-report.html#cb51-19" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb51-20"><a href="appendix-b---information-extraction-report.html#cb51-20" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-llm-performance-total-gpt-ranking">Table 9.6: </span>Comparing table extraction performance with real âAktivaâ dataset for OPenAIs GPT models with a selection of Qwen3 models.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-5c2d7bd7aec7268db4d8" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-5c2d7bd7aec7268db4d8">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11"],["Qwen3-235B-A22B-Instruct-2507-FP8","gpt-4.1","gpt-5-mini","Qwen3-30B-A3B-Instruct-2507","gpt-4.1-mini","Qwen3-8B","gpt-oss-120b","gpt-oss-20b","Qwen3-0.6B","gpt-5-nano","gpt-4.1-nano"],["5_<wbr>random_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>3_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","zero_<wbr>shot"],["0.97","0.95","0.95","0.92","0.91","0.89","0.88","0.84","0.65","0.3","0.21"],["1","0.97","0.97","0.97","0.96","0.93","0.93","0.9","0.65","0.24","0.14"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>mean percentage correct total<\/th>\n      <th>median correct total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"mean percentage correct total","targets":3},{"name":"median correct total","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="appendix-b---information-extraction-report.html#cb52-1" tabindex="-1"></a>costs_azure <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../CostManagement_master-thesis_2025.csv&quot;</span>)</span>
<span id="cb52-2"><a href="appendix-b---information-extraction-report.html#cb52-2" tabindex="-1"></a></span>
<span id="cb52-3"><a href="appendix-b---information-extraction-report.html#cb52-3" tabindex="-1"></a>costs_azure <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="appendix-b---information-extraction-report.html#cb52-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Model =</span> <span class="fu">map_chr</span>(</span>
<span id="cb52-5"><a href="appendix-b---information-extraction-report.html#cb52-5" tabindex="-1"></a>    Model, <span class="sc">~</span>{<span class="fu">paste</span>(<span class="fu">str_split</span>(., <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)}</span>
<span id="cb52-6"><a href="appendix-b---information-extraction-report.html#cb52-6" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb52-7"><a href="appendix-b---information-extraction-report.html#cb52-7" tabindex="-1"></a>      <span class="at">Model =</span> <span class="fu">str_replace_all</span>(<span class="fu">tolower</span>(<span class="fu">str_remove</span>(Model, <span class="st">&quot; Inp| Outp| cached&quot;</span>)), <span class="st">&quot; &quot;</span>, <span class="st">&quot;-&quot;</span>),</span>
<span id="cb52-8"><a href="appendix-b---information-extraction-report.html#cb52-8" tabindex="-1"></a>      <span class="at">Cost =</span> <span class="fu">round</span>(Cost, <span class="dv">2</span>)</span>
<span id="cb52-9"><a href="appendix-b---information-extraction-report.html#cb52-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Model, Meter) <span class="sc">%&gt;%</span> </span>
<span id="cb52-10"><a href="appendix-b---information-extraction-report.html#cb52-10" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb52-11"><a href="appendix-b---information-extraction-report.html#cb52-11" tabindex="-1"></a>      <span class="at">Cost =</span> <span class="fu">sum</span>(Cost)</span>
<span id="cb52-12"><a href="appendix-b---information-extraction-report.html#cb52-12" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-13"><a href="appendix-b---information-extraction-report.html#cb52-13" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Meter, <span class="at">values_from =</span> Cost, <span class="at">names_prefix =</span> <span class="st">&quot;Cost_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-14"><a href="appendix-b---information-extraction-report.html#cb52-14" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb52-15"><a href="appendix-b---information-extraction-report.html#cb52-15" tabindex="-1"></a>    <span class="at">Cost_total =</span> Cost_Input<span class="sc">+</span>Cost_Output,</span>
<span id="cb52-16"><a href="appendix-b---information-extraction-report.html#cb52-16" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-17"><a href="appendix-b---information-extraction-report.html#cb52-17" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Cost_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb52-18"><a href="appendix-b---information-extraction-report.html#cb52-18" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">tolower</span>(<span class="fu">colnames</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb52-19"><a href="appendix-b---information-extraction-report.html#cb52-19" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb52-20"><a href="appendix-b---information-extraction-report.html#cb52-20" tabindex="-1"></a>    df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb52-21"><a href="appendix-b---information-extraction-report.html#cb52-21" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="st">&quot;median runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">median</span>(runtime)<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(<span class="fu">median</span>(runtime)<span class="sc">%%</span><span class="dv">60</span>)))</span>
<span id="cb52-22"><a href="appendix-b---information-extraction-report.html#cb52-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb52-23"><a href="appendix-b---information-extraction-report.html#cb52-23" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb52-24"><a href="appendix-b---information-extraction-report.html#cb52-24" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrrrr&quot;</span>,</span>
<span id="cb52-25"><a href="appendix-b---information-extraction-report.html#cb52-25" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the costs for OpenAIs GPT models provided by Azure. Notice the high output cost for GPT 5 Nano.&quot;</span>,</span>
<span id="cb52-26"><a href="appendix-b---information-extraction-report.html#cb52-26" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb52-27"><a href="appendix-b---information-extraction-report.html#cb52-27" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:costs-azure">Table 9.7: </span>Comparing the costs for OpenAIs GPT models provided by Azure. Notice the high output cost for GPT 5 Nano.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-95d11c910bced7255b5d" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-95d11c910bced7255b5d">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["gpt-4.1","gpt-5-mini","gpt-5-nano","gpt-4.1-mini","gpt-4.1-nano"],["18.07","1.93","0.41","3.76","0.08"],["10.35","10.28","6.99","2.02","0.06"],["28.42","12.21","7.4","5.78","0.14"],["29:53","110:50","135:37","31:48","10:28"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>cost input<\/th>\n      <th>cost output<\/th>\n      <th>cost total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"cost input","targets":2},{"name":"cost output","targets":3},{"name":"cost total","targets":4},{"name":"median runtime in minutes","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Discussion?:</p>
<p>Since the output token costs are not that different (2 $ for 1M output
tokens with gpt-5-mini vs 1.6 $ with gpt-4.1-mini), the generated
output token number has to be much higher for the gpt-5-mini models. But
since the responses are based on the same schema and required the same
numeric values there shouldnât be a big difference<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>.</p>
<p>Figure <a href="appendix-b---information-extraction-report.html#fig:table-extraction-llm-f1-gpt-slice">9.2</a> shows the
distribution of F1 score for up to three examples. It shows green
crosses at the bottom of the abscissa that indicate prediction, where no
<em>null</em> value is reported. This means, the model hallucinates many
numeric values. This is only the case for OpenAIâs models but not for
Qwen3 models. This behaviour persists up to five examples for the nano
as well the gpt-oss 20b model. For gpt-4.1 and gpt-4.1-mini these cases
vanish when we provide three or more examples and never appeared for
gpt-5-mini.</p>
<p>One can find the full plots in Figures
<a href="figures.html#fig:table-extraction-llm-performance-total-gpt">14.19</a>,
<a href="figures.html#fig:table-extraction-llm-performance-numeric-gpt">14.20</a> and
<a href="figures.html#fig:table-extraction-llm-f1-gpt">14.21</a>).</p>
<p>We were not able to get OpenAIâs models to stick to the provided
<a href="glossary.html#acronyms_json">json</a> schema strictly. Passing the <a href="glossary.html#acronyms_ebnf">ebnf</a> grammar did not work
at all. This means that with gpt-4.1-nano there have been
88
predictions that have been completely empty. For gpt-5-nano we find
6
such predictions. Figure
@red(fig:table-extraction-llm-prediction-count-gpt) shows the
distribution of responses with a wrong number of predictions (including
<em>null</em> and numeric predictions). Overall there have been
34.3 % of the responses of OpenAIâs models
that were compatible with the schema but had a wrong number of rows
predicted. The maximum number of returned values (by gpt-5-nano) is 714.</p>
<p>Using gpt-5-chat for the table extraction task with structured output is
not working, returning an error informing that a <em>json_schema</em> canât be
used with this model. Figure <a href="appendix-b---information-extraction-report.html#fig:table-extraction-llm-errors-gpt">9.4</a>
shows, where other models produced an answer that could not be parsed as
valid <a href="glossary.html#acronyms_json">json</a>.Most errors occured for gpt-oss-20B and the
<em>static_example</em> method. Over half of all tables could not be
transcripted in <a href="glossary.html#acronyms_json">json</a> with in the 40_000 response token
limit<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a>. Only with gpt-5-mini we had no <a href="glossary.html#acronyms_json">json</a> parsing
error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="appendix-b---information-extraction-report.html#cb53-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="appendix-b---information-extraction-report.html#cb53-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="appendix-b---information-extraction-report.html#cb53-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NA_F1 =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(NA_F1), <span class="dv">0</span>, NA_F1)) <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a href="appendix-b---information-extraction-report.html#cb53-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-5"><a href="appendix-b---information-extraction-report.html#cb53-5" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb53-6"><a href="appendix-b---information-extraction-report.html#cb53-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> NA_F1, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb53-7"><a href="appendix-b---information-extraction-report.html#cb53-7" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(NA_F1), <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">&lt;</span> <span class="dv">5</span>), <span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> <span class="dv">0</span>), <span class="at">height =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">shape =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb53-8"><a href="appendix-b---information-extraction-report.html#cb53-8" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb53-9"><a href="appendix-b---information-extraction-report.html#cb53-9" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb53-10"><a href="appendix-b---information-extraction-report.html#cb53-10" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb53-11"><a href="appendix-b---information-extraction-report.html#cb53-11" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb53-12"><a href="appendix-b---information-extraction-report.html#cb53-12" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-extraction-llm-f1-gpt-slice"></span>
<img src="_main_files/figure-html/table-extraction-llm-f1-gpt-slice-1.png" alt="Comparing the F1 score for predicting the missingness of a value for OpenAi's LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values." width="100%" height="90%" keepaspectratio />
<p class="caption">
Figure 9.2: Comparing the F1 score for predicting the missingness of a value for OpenAiâs LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="appendix-b---information-extraction-report.html#cb54-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_predicted_values <span class="sc">!=</span> <span class="dv">58</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="appendix-b---information-extraction-report.html#cb54-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">color_code =</span> <span class="fu">if_else</span>(n_predicted_values<span class="sc">==</span><span class="dv">0</span>, <span class="st">&quot;zero&quot;</span>, <span class="fu">if_else</span>(n_predicted_values <span class="sc">&gt;</span> <span class="dv">58</span>, <span class="st">&quot;too many&quot;</span>, <span class="st">&quot;too little&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="appendix-b---information-extraction-report.html#cb54-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb54-4"><a href="appendix-b---information-extraction-report.html#cb54-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> n_predicted_values, <span class="at">fill =</span> color_code), <span class="at">binwidth =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(model<span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb54-5"><a href="appendix-b---information-extraction-report.html#cb54-5" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">66</span>))</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-extraction-llm-prediction-count-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-prediction-count-gpt-1.png" alt="Showing the number of predictions OpenAI's models made." width="100%" />
<p class="caption">
Figure 9.3: Showing the number of predictions OpenAIâs models made.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="appendix-b---information-extraction-report.html#cb55-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_pred =</span> <span class="fu">map_dbl</span>(predictions, <span class="sc">~</span><span class="fu">nrow</span>(.)), <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_pred <span class="sc">!=</span> <span class="dv">29</span>) <span class="sc">%&gt;%</span> <span class="co"># select(model, method, n_pred, filepath) %&gt;% </span></span>
<span id="cb55-2"><a href="appendix-b---information-extraction-report.html#cb55-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-3"><a href="appendix-b---information-extraction-report.html#cb55-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> method_family, <span class="at">fill =</span> n_examples)) <span class="sc">+</span> </span>
<span id="cb55-4"><a href="appendix-b---information-extraction-report.html#cb55-4" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model<span class="sc">~</span>.)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-extraction-llm-errors-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-errors-gpt-1.png" alt="Showing the number of predictions OpenAI's models made." width="100%" />
<p class="caption">
Figure 9.4: Showing the number of predictions OpenAIâs models made.
</p>
</div>
<div id="out-of-company-performance" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.3">
<h5><span class="header-section-number">9.2.1.0.3</span> Out of company performance<a href="appendix-b---information-extraction-report.html#out-of-company-performance" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:table-extraction-same-company-improvement-table">9.8</a> shows
the improvement for the percentage of correct predictions total, when
<strong>Aktiva</strong> tables from the same company as the target tables company are
provided for the in-context learning. It shows that this improvement is
biggest for goolge and Qwen and smallest for Llama models.</p>
</div>
<p>Figure
<a href="figures.html#fig:table-extraction-llm-performance-total-overview-out-of-company">14.18</a>
shows, that using <strong>Aktiva</strong> in-company examples improves the
performance, mainly by reducing the number of bad predictions. The found
improvement is present for all models but Llama 4 Maverick. Here the
number of bad predictions gets larger if we provide three or more
examples. With five examples the performances totally collapses.</p>
<p>The perfromance improvement for GPT-4.1-mini and GTP-4.1 with only one
provided example seems to be big, because the box is getting much more
narrow. But the median shifts not more than for other models.</p>
<p>Check results for openai, when 5 nano finished</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="appendix-b---information-extraction-report.html#cb56-1" tabindex="-1"></a><span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="appendix-b---information-extraction-report.html#cb56-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-3"><a href="appendix-b---information-extraction-report.html#cb56-3" tabindex="-1"></a>    <span class="at">examples_from_same_company =</span> <span class="sc">!</span>out_of_company</span>
<span id="cb56-4"><a href="appendix-b---information-extraction-report.html#cb56-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb56-5"><a href="appendix-b---information-extraction-report.html#cb56-5" tabindex="-1"></a>    <span class="co"># str_detect(filepath, &quot;Statistik&quot;), </span></span>
<span id="cb56-6"><a href="appendix-b---information-extraction-report.html#cb56-6" tabindex="-1"></a>    method_family <span class="sc">==</span> <span class="st">&quot;top_n_rag_examples&quot;</span>,</span>
<span id="cb56-7"><a href="appendix-b---information-extraction-report.html#cb56-7" tabindex="-1"></a>    n_examples <span class="sc">!=</span> <span class="dv">2</span>,</span>
<span id="cb56-8"><a href="appendix-b---information-extraction-report.html#cb56-8" tabindex="-1"></a>    n_examples <span class="sc">&lt;</span> <span class="dv">5</span>,</span>
<span id="cb56-9"><a href="appendix-b---information-extraction-report.html#cb56-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model_family, examples_from_same_company) <span class="sc">%&gt;%</span> </span>
<span id="cb56-10"><a href="appendix-b---information-extraction-report.html#cb56-10" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb56-11"><a href="appendix-b---information-extraction-report.html#cb56-11" tabindex="-1"></a>      <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb56-12"><a href="appendix-b---information-extraction-report.html#cb56-12" tabindex="-1"></a>      <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb56-13"><a href="appendix-b---information-extraction-report.html#cb56-13" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> examples_from_same_company, <span class="at">values_from =</span> <span class="fu">c</span>(mean_total, median_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-14"><a href="appendix-b---information-extraction-report.html#cb56-14" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb56-15"><a href="appendix-b---information-extraction-report.html#cb56-15" tabindex="-1"></a>      <span class="at">improvement_mean =</span> <span class="fu">round</span>(mean_total_TRUE <span class="sc">-</span> mean_total_FALSE, <span class="dv">2</span>),</span>
<span id="cb56-16"><a href="appendix-b---information-extraction-report.html#cb56-16" tabindex="-1"></a>      <span class="at">improvement_median =</span> <span class="fu">round</span>(median_total_TRUE <span class="sc">-</span> median_total_FALSE, <span class="dv">2</span>)</span>
<span id="cb56-17"><a href="appendix-b---information-extraction-report.html#cb56-17" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model_family, improvement_mean, improvement_median) <span class="sc">%&gt;%</span> </span>
<span id="cb56-18"><a href="appendix-b---information-extraction-report.html#cb56-18" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(improvement_mean)) <span class="sc">%&gt;%</span> <span class="co">#kbl()</span></span>
<span id="cb56-19"><a href="appendix-b---information-extraction-report.html#cb56-19" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb56-20"><a href="appendix-b---information-extraction-report.html#cb56-20" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrr&quot;</span>,</span>
<span id="cb56-21"><a href="appendix-b---information-extraction-report.html#cb56-21" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the extraction performance when Aktiva tables from the same company can be used for in-context learning or not.&quot;</span>,</span>
<span id="cb56-22"><a href="appendix-b---information-extraction-report.html#cb56-22" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb56-23"><a href="appendix-b---information-extraction-report.html#cb56-23" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-same-company-improvement-table">Table 9.8: </span>Comparing the extraction performance when Aktiva tables from the same company can be used for in-context learning or not.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-1a5bb4bf25dd9c5d166a" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-1a5bb4bf25dd9c5d166a">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["google","Qwen 3","chat-gpt","Qwen 2.5","tiiuae","mistralai","Llama-3","microsoft","openai","Llama-4"],["0.13","0.12","0.12","0.1","0.09","0.08","0.07","0.07","0.05","0.03"],["0.14","0.07","0.17","0.12","0.07","0.07","0.05","0.06","0.07","0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>improvement mean<\/th>\n      <th>improvement median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"improvement mean","targets":2},{"name":"improvement median","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="synthetic-table-extraction" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Synthetic tables<a href="appendix-b---information-extraction-report.html#synthetic-table-extraction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="appendix-b---information-extraction-report.html#cb57-1" tabindex="-1"></a>df_synth_table_extraction <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/synth_table_extraction_llm.rds&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb57-2"><a href="appendix-b---information-extraction-report.html#cb57-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">if_else</span>(model <span class="sc">==</span> <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>, model)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="appendix-b---information-extraction-report.html#cb57-3" tabindex="-1"></a>  <span class="fu">sample_frac</span>(<span class="at">size =</span> .<span class="dv">05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="appendix-b---information-extraction-report.html#cb57-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;deepseek-ai_DeepSeek-R1-Distill-Qwen-32B&quot;</span>, <span class="st">&#39;google_gemma-3n-E4B-it&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-5"><a href="appendix-b---information-extraction-report.html#cb57-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-6"><a href="appendix-b---information-extraction-report.html#cb57-6" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model)</span>
<span id="cb57-7"><a href="appendix-b---information-extraction-report.html#cb57-7" tabindex="-1"></a>    )</span>
<span id="cb57-8"><a href="appendix-b---information-extraction-report.html#cb57-8" tabindex="-1"></a></span>
<span id="cb57-9"><a href="appendix-b---information-extraction-report.html#cb57-9" tabindex="-1"></a>norm_factors <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../benchmark_jobs/page_identification/gpu_benchmark/runtime_factors_synth_table_extraction.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-10"><a href="appendix-b---information-extraction-report.html#cb57-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-11"><a href="appendix-b---information-extraction-report.html#cb57-11" tabindex="-1"></a>    <span class="at">model_name =</span> model_name <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="st">&quot;/&quot;</span>, <span class="st">&quot;_&quot;</span>)</span>
<span id="cb57-12"><a href="appendix-b---information-extraction-report.html#cb57-12" tabindex="-1"></a>  )</span>
<span id="cb57-13"><a href="appendix-b---information-extraction-report.html#cb57-13" tabindex="-1"></a>norm_factors_few_examples <span class="ot">&lt;-</span> norm_factors <span class="sc">%&gt;%</span> <span class="fu">filter</span>((<span class="fu">str_ends</span>(filename, <span class="st">&quot;binary.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;multi.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;vllm_batched.yaml&quot;</span>)))</span>
<span id="cb57-14"><a href="appendix-b---information-extraction-report.html#cb57-14" tabindex="-1"></a></span>
<span id="cb57-15"><a href="appendix-b---information-extraction-report.html#cb57-15" tabindex="-1"></a>df_synth_table_extraction <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(</span>
<span id="cb57-16"><a href="appendix-b---information-extraction-report.html#cb57-16" tabindex="-1"></a>  norm_factors_few_examples <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model_name)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model_name, parameter_count, normalization_factor),</span>
<span id="cb57-17"><a href="appendix-b---information-extraction-report.html#cb57-17" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;model&quot;</span> <span class="ot">=</span> <span class="st">&quot;model_name&quot;</span>)</span>
<span id="cb57-18"><a href="appendix-b---information-extraction-report.html#cb57-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb57-19"><a href="appendix-b---information-extraction-report.html#cb57-19" tabindex="-1"></a>    <span class="at">normalized_runtime =</span> normalization_factor <span class="sc">*</span> runtime</span>
<span id="cb57-20"><a href="appendix-b---information-extraction-report.html#cb57-20" tabindex="-1"></a>  )</span>
<span id="cb57-21"><a href="appendix-b---information-extraction-report.html#cb57-21" tabindex="-1"></a></span>
<span id="cb57-22"><a href="appendix-b---information-extraction-report.html#cb57-22" tabindex="-1"></a>df_overview_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb57-23"><a href="appendix-b---information-extraction-report.html#cb57-23" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-24"><a href="appendix-b---information-extraction-report.html#cb57-24" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size),</span>
<span id="cb57-25"><a href="appendix-b---information-extraction-report.html#cb57-25" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb57-26"><a href="appendix-b---information-extraction-report.html#cb57-26" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb57-27"><a href="appendix-b---information-extraction-report.html#cb57-27" tabindex="-1"></a>  )</span>
<span id="cb57-28"><a href="appendix-b---information-extraction-report.html#cb57-28" tabindex="-1"></a></span>
<span id="cb57-29"><a href="appendix-b---information-extraction-report.html#cb57-29" tabindex="-1"></a><span class="co"># synth</span></span>
<span id="cb57-30"><a href="appendix-b---information-extraction-report.html#cb57-30" tabindex="-1"></a></span>
<span id="cb57-31"><a href="appendix-b---information-extraction-report.html#cb57-31" tabindex="-1"></a>zero_shot_stars_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb57-32"><a href="appendix-b---information-extraction-report.html#cb57-32" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>synth_table_extraction_regex_NA_F1_median)</span>
<span id="cb57-33"><a href="appendix-b---information-extraction-report.html#cb57-33" tabindex="-1"></a></span>
<span id="cb57-34"><a href="appendix-b---information-extraction-report.html#cb57-34" tabindex="-1"></a>static_example_stars_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;static_example&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb57-35"><a href="appendix-b---information-extraction-report.html#cb57-35" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>synth_table_extraction_regex_NA_F1_median)</span>
<span id="cb57-36"><a href="appendix-b---information-extraction-report.html#cb57-36" tabindex="-1"></a></span>
<span id="cb57-37"><a href="appendix-b---information-extraction-report.html#cb57-37" tabindex="-1"></a>underperformer_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb57-38"><a href="appendix-b---information-extraction-report.html#cb57-38" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>synth_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb57-39"><a href="appendix-b---information-extraction-report.html#cb57-39" tabindex="-1"></a></span>
<span id="cb57-40"><a href="appendix-b---information-extraction-report.html#cb57-40" tabindex="-1"></a>super_underperformer_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>), n_examples<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb57-41"><a href="appendix-b---information-extraction-report.html#cb57-41" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>synth_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb57-42"><a href="appendix-b---information-extraction-report.html#cb57-42" tabindex="-1"></a></span>
<span id="cb57-43"><a href="appendix-b---information-extraction-report.html#cb57-43" tabindex="-1"></a>df_synth_top_performance <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb57-44"><a href="appendix-b---information-extraction-report.html#cb57-44" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-45"><a href="appendix-b---information-extraction-report.html#cb57-45" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-46"><a href="appendix-b---information-extraction-report.html#cb57-46" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-47"><a href="appendix-b---information-extraction-report.html#cb57-47" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-48"><a href="appendix-b---information-extraction-report.html#cb57-48" tabindex="-1"></a>    <span class="at">median_runtime =</span> <span class="fu">median</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-49"><a href="appendix-b---information-extraction-report.html#cb57-49" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb57-50"><a href="appendix-b---information-extraction-report.html#cb57-50" tabindex="-1"></a>  <span class="co"># arrange(desc(median_total)) %&gt;% </span></span>
<span id="cb57-51"><a href="appendix-b---information-extraction-report.html#cb57-51" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-52"><a href="appendix-b---information-extraction-report.html#cb57-52" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, mean_total, median_total, median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb57-53"><a href="appendix-b---information-extraction-report.html#cb57-53" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-54"><a href="appendix-b---information-extraction-report.html#cb57-54" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-55"><a href="appendix-b---information-extraction-report.html#cb57-55" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>),</span>
<span id="cb57-56"><a href="appendix-b---information-extraction-report.html#cb57-56" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>)</span>
<span id="cb57-57"><a href="appendix-b---information-extraction-report.html#cb57-57" tabindex="-1"></a>    )</span>
<span id="cb57-58"><a href="appendix-b---information-extraction-report.html#cb57-58" tabindex="-1"></a></span>
<span id="cb57-59"><a href="appendix-b---information-extraction-report.html#cb57-59" tabindex="-1"></a>df_synth_top_performance_small <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb57-60"><a href="appendix-b---information-extraction-report.html#cb57-60" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-61"><a href="appendix-b---information-extraction-report.html#cb57-61" tabindex="-1"></a>  <span class="fu">filter</span>(parameter_count <span class="sc">&lt;</span> <span class="dv">17</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-62"><a href="appendix-b---information-extraction-report.html#cb57-62" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb57-63"><a href="appendix-b---information-extraction-report.html#cb57-63" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-64"><a href="appendix-b---information-extraction-report.html#cb57-64" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-65"><a href="appendix-b---information-extraction-report.html#cb57-65" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb57-66"><a href="appendix-b---information-extraction-report.html#cb57-66" tabindex="-1"></a>    <span class="at">median_runtime =</span> <span class="fu">median</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb57-67"><a href="appendix-b---information-extraction-report.html#cb57-67" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb57-68"><a href="appendix-b---information-extraction-report.html#cb57-68" tabindex="-1"></a>  <span class="co"># arrange(desc(median_total)) %&gt;% </span></span>
<span id="cb57-69"><a href="appendix-b---information-extraction-report.html#cb57-69" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-70"><a href="appendix-b---information-extraction-report.html#cb57-70" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, mean_total, median_total, median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb57-71"><a href="appendix-b---information-extraction-report.html#cb57-71" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-72"><a href="appendix-b---information-extraction-report.html#cb57-72" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-73"><a href="appendix-b---information-extraction-report.html#cb57-73" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>),</span>
<span id="cb57-74"><a href="appendix-b---information-extraction-report.html#cb57-74" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>)</span>
<span id="cb57-75"><a href="appendix-b---information-extraction-report.html#cb57-75" tabindex="-1"></a>    )</span>
<span id="cb57-76"><a href="appendix-b---information-extraction-report.html#cb57-76" tabindex="-1"></a></span>
<span id="cb57-77"><a href="appendix-b---information-extraction-report.html#cb57-77" tabindex="-1"></a>n_better_as_regex <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb57-78"><a href="appendix-b---information-extraction-report.html#cb57-78" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb57-79"><a href="appendix-b---information-extraction-report.html#cb57-79" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb57-80"><a href="appendix-b---information-extraction-report.html#cb57-80" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_total))  <span class="sc">%&gt;%</span> </span>
<span id="cb57-81"><a href="appendix-b---information-extraction-report.html#cb57-81" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-82"><a href="appendix-b---information-extraction-report.html#cb57-82" tabindex="-1"></a>    <span class="at">better_than_regex =</span>  median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median</span>
<span id="cb57-83"><a href="appendix-b---information-extraction-report.html#cb57-83" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(better_than_regex) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb57-84"><a href="appendix-b---information-extraction-report.html#cb57-84" tabindex="-1"></a></span>
<span id="cb57-85"><a href="appendix-b---information-extraction-report.html#cb57-85" tabindex="-1"></a>n_better_as_regex_families <span class="ot">&lt;-</span> df_synth_top_performance <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb57-86"><a href="appendix-b---information-extraction-report.html#cb57-86" tabindex="-1"></a>    <span class="at">better_than_regex =</span>  median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median</span>
<span id="cb57-87"><a href="appendix-b---information-extraction-report.html#cb57-87" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(better_than_regex) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb57-88"><a href="appendix-b---information-extraction-report.html#cb57-88" tabindex="-1"></a></span>
<span id="cb57-89"><a href="appendix-b---information-extraction-report.html#cb57-89" tabindex="-1"></a>n_synth_tables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb57-90"><a href="appendix-b---information-extraction-report.html#cb57-90" tabindex="-1"></a>  <span class="st">&quot;../benchmark_truth/synthetic_tables/separate_files/final/&quot;</span></span>
<span id="cb57-91"><a href="appendix-b---information-extraction-report.html#cb57-91" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb57-92"><a href="appendix-b---information-extraction-report.html#cb57-92" tabindex="-1"></a></span>
<span id="cb57-93"><a href="appendix-b---information-extraction-report.html#cb57-93" tabindex="-1"></a>n_synth_table_extraction <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb57-94"><a href="appendix-b---information-extraction-report.html#cb57-94" tabindex="-1"></a>  <span class="st">&quot;../benchmark_results/table_extraction/llm/final/synth_tables/&quot;</span></span>
<span id="cb57-95"><a href="appendix-b---information-extraction-report.html#cb57-95" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb57-96"><a href="appendix-b---information-extraction-report.html#cb57-96" tabindex="-1"></a></span>
<span id="cb57-97"><a href="appendix-b---information-extraction-report.html#cb57-97" tabindex="-1"></a><span class="co"># confidence_vs_truth_synth &lt;- df_synth_table_extraction %&gt;% </span></span>
<span id="cb57-98"><a href="appendix-b---information-extraction-report.html#cb57-98" tabindex="-1"></a><span class="co">#   # filter(method_family %in% c(&quot;top_n_rag_examples&quot;, &quot;n_random_examples&quot;)) %&gt;% </span></span>
<span id="cb57-99"><a href="appendix-b---information-extraction-report.html#cb57-99" tabindex="-1"></a><span class="co">#   filter(model %in% c(&quot;Ministral-8B-Instruct-2410&quot;, &quot;Qwen3-8B&quot;, &quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;)) %&gt;% </span></span>
<span id="cb57-100"><a href="appendix-b---information-extraction-report.html#cb57-100" tabindex="-1"></a><span class="co">#   group_by(method, model, loop) %&gt;% mutate(</span></span>
<span id="cb57-101"><a href="appendix-b---information-extraction-report.html#cb57-101" tabindex="-1"></a><span class="co">#     mean_percentage_correct_total = mean(percentage_correct_total, na.rm=TRUE), .before = 1,</span></span>
<span id="cb57-102"><a href="appendix-b---information-extraction-report.html#cb57-102" tabindex="-1"></a><span class="co">#     respect_units = !ignore_units</span></span>
<span id="cb57-103"><a href="appendix-b---information-extraction-report.html#cb57-103" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(respect_units, model, filepath) %&gt;% </span></span>
<span id="cb57-104"><a href="appendix-b---information-extraction-report.html#cb57-104" tabindex="-1"></a><span class="co">#   # arrange(desc(mean_percentage_correct_total)) %&gt;% </span></span>
<span id="cb57-105"><a href="appendix-b---information-extraction-report.html#cb57-105" tabindex="-1"></a><span class="co">#   slice_max(mean_percentage_correct_total, n = 1, with_ties = FALSE) %&gt;% </span></span>
<span id="cb57-106"><a href="appendix-b---information-extraction-report.html#cb57-106" tabindex="-1"></a><span class="co">#   mutate(predictions_processed = map(predictions, ~{</span></span>
<span id="cb57-107"><a href="appendix-b---information-extraction-report.html#cb57-107" tabindex="-1"></a><span class="co">#     .x %&gt;% </span></span>
<span id="cb57-108"><a href="appendix-b---information-extraction-report.html#cb57-108" tabindex="-1"></a><span class="co">#       select(-&quot;_merge&quot;) %&gt;% </span></span>
<span id="cb57-109"><a href="appendix-b---information-extraction-report.html#cb57-109" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb57-110"><a href="appendix-b---information-extraction-report.html#cb57-110" tabindex="-1"></a><span class="co">#         match = (year_truth == year_result) | (is.na(year_truth) &amp; is.na(year_result)),</span></span>
<span id="cb57-111"><a href="appendix-b---information-extraction-report.html#cb57-111" tabindex="-1"></a><span class="co">#         confidence = confidence_this_year,</span></span>
<span id="cb57-112"><a href="appendix-b---information-extraction-report.html#cb57-112" tabindex="-1"></a><span class="co">#         truth_NA = is.na(year_truth),</span></span>
<span id="cb57-113"><a href="appendix-b---information-extraction-report.html#cb57-113" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(year_result),</span></span>
<span id="cb57-114"><a href="appendix-b---information-extraction-report.html#cb57-114" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb57-115"><a href="appendix-b---information-extraction-report.html#cb57-115" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb57-116"><a href="appendix-b---information-extraction-report.html#cb57-116" tabindex="-1"></a><span class="co">#         tuple_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb57-117"><a href="appendix-b---information-extraction-report.html#cb57-117" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb57-118"><a href="appendix-b---information-extraction-report.html#cb57-118" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb57-119"><a href="appendix-b---information-extraction-report.html#cb57-119" tabindex="-1"></a><span class="co">#         confidence = confidence_previous_year,</span></span>
<span id="cb57-120"><a href="appendix-b---information-extraction-report.html#cb57-120" tabindex="-1"></a><span class="co">#         match = (previous_year_truth == previous_year_result) | (is.na(previous_year_truth) &amp; is.na(previous_year_result)),</span></span>
<span id="cb57-121"><a href="appendix-b---information-extraction-report.html#cb57-121" tabindex="-1"></a><span class="co">#         truth_NA = is.na(previous_year_truth),</span></span>
<span id="cb57-122"><a href="appendix-b---information-extraction-report.html#cb57-122" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(previous_year_result),</span></span>
<span id="cb57-123"><a href="appendix-b---information-extraction-report.html#cb57-123" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb57-124"><a href="appendix-b---information-extraction-report.html#cb57-124" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb57-125"><a href="appendix-b---information-extraction-report.html#cb57-125" tabindex="-1"></a><span class="co">#         tuple_previous_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb57-126"><a href="appendix-b---information-extraction-report.html#cb57-126" tabindex="-1"></a><span class="co">#       ) %&gt;% select(</span></span>
<span id="cb57-127"><a href="appendix-b---information-extraction-report.html#cb57-127" tabindex="-1"></a><span class="co">#         -c(year_truth, previous_year_truth, year_result, previous_year_result,</span></span>
<span id="cb57-128"><a href="appendix-b---information-extraction-report.html#cb57-128" tabindex="-1"></a><span class="co">#            confidence_this_year, confidence_previous_year)</span></span>
<span id="cb57-129"><a href="appendix-b---information-extraction-report.html#cb57-129" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb57-130"><a href="appendix-b---information-extraction-report.html#cb57-130" tabindex="-1"></a><span class="co">#       pivot_longer(-c(&quot;E1&quot;, &quot;E2&quot;, &quot;E3&quot;)) %&gt;% </span></span>
<span id="cb57-131"><a href="appendix-b---information-extraction-report.html#cb57-131" tabindex="-1"></a><span class="co">#       unnest(cols = value) %&gt;% mutate(</span></span>
<span id="cb57-132"><a href="appendix-b---information-extraction-report.html#cb57-132" tabindex="-1"></a><span class="co">#         match = if_else(is.na(match), FALSE, match)</span></span>
<span id="cb57-133"><a href="appendix-b---information-extraction-report.html#cb57-133" tabindex="-1"></a><span class="co">#       )</span></span>
<span id="cb57-134"><a href="appendix-b---information-extraction-report.html#cb57-134" tabindex="-1"></a><span class="co">#   })) %&gt;% </span></span>
<span id="cb57-135"><a href="appendix-b---information-extraction-report.html#cb57-135" tabindex="-1"></a><span class="co">#   unnest(predictions_processed) %&gt;% mutate(</span></span>
<span id="cb57-136"><a href="appendix-b---information-extraction-report.html#cb57-136" tabindex="-1"></a><span class="co">#     match = factor(match, levels = c(F, T)),</span></span>
<span id="cb57-137"><a href="appendix-b---information-extraction-report.html#cb57-137" tabindex="-1"></a><span class="co">#     truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb57-138"><a href="appendix-b---information-extraction-report.html#cb57-138" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb57-139"><a href="appendix-b---information-extraction-report.html#cb57-139" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb57-140"><a href="appendix-b---information-extraction-report.html#cb57-140" tabindex="-1"></a><span class="co"># confidence_intervals_synth &lt;- confidence_vs_truth_synth %&gt;% #rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb57-141"><a href="appendix-b---information-extraction-report.html#cb57-141" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb57-142"><a href="appendix-b---information-extraction-report.html#cb57-142" tabindex="-1"></a><span class="co">#     conf_interval = cut(confidence, breaks = seq(0, 1, by = 0.05), include.lowest = TRUE),</span></span>
<span id="cb57-143"><a href="appendix-b---information-extraction-report.html#cb57-143" tabindex="-1"></a><span class="co">#     conf_center = as.numeric(sub(&quot;\\((.+),(.+)\\]&quot;, &quot;\\1&quot;, levels(conf_interval))[conf_interval]) + 0.025</span></span>
<span id="cb57-144"><a href="appendix-b---information-extraction-report.html#cb57-144" tabindex="-1"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb57-145"><a href="appendix-b---information-extraction-report.html#cb57-145" tabindex="-1"></a><span class="co">#   group_by(conf_center, predicted_NA, model, respect_units) %&gt;%</span></span>
<span id="cb57-146"><a href="appendix-b---information-extraction-report.html#cb57-146" tabindex="-1"></a><span class="co">#   summarise(</span></span>
<span id="cb57-147"><a href="appendix-b---information-extraction-report.html#cb57-147" tabindex="-1"></a><span class="co">#     n_true = sum(match == TRUE, na.rm = TRUE),</span></span>
<span id="cb57-148"><a href="appendix-b---information-extraction-report.html#cb57-148" tabindex="-1"></a><span class="co">#     n_false = sum(match == FALSE, na.rm = TRUE),</span></span>
<span id="cb57-149"><a href="appendix-b---information-extraction-report.html#cb57-149" tabindex="-1"></a><span class="co">#     total = n_true + n_false,</span></span>
<span id="cb57-150"><a href="appendix-b---information-extraction-report.html#cb57-150" tabindex="-1"></a><span class="co">#     chance_false = if_else(total &gt; 0, n_false / total * 100, NA_real_),</span></span>
<span id="cb57-151"><a href="appendix-b---information-extraction-report.html#cb57-151" tabindex="-1"></a><span class="co">#     chance_zero = chance_false == 0,</span></span>
<span id="cb57-152"><a href="appendix-b---information-extraction-report.html#cb57-152" tabindex="-1"></a><span class="co">#     chance_below_1 = chance_false &lt; 1,</span></span>
<span id="cb57-153"><a href="appendix-b---information-extraction-report.html#cb57-153" tabindex="-1"></a><span class="co">#     chance_low = if_else(chance_zero, 0, if_else(chance_below_1, 1, 2)),</span></span>
<span id="cb57-154"><a href="appendix-b---information-extraction-report.html#cb57-154" tabindex="-1"></a><span class="co">#     chance_low = factor(chance_low, levels = c(0,1,2), labels = c(&quot;equls 0 %&quot;, &quot;below 1 %&quot;, &quot;more&quot;))</span></span>
<span id="cb57-155"><a href="appendix-b---information-extraction-report.html#cb57-155" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(predicted_NA, model, respect_units) %&gt;% mutate(</span></span>
<span id="cb57-156"><a href="appendix-b---information-extraction-report.html#cb57-156" tabindex="-1"></a><span class="co">#     perc = total/sum(total)*100</span></span>
<span id="cb57-157"><a href="appendix-b---information-extraction-report.html#cb57-157" tabindex="-1"></a><span class="co">#   ) %&gt;% ungroup() %&gt;% </span></span>
<span id="cb57-158"><a href="appendix-b---information-extraction-report.html#cb57-158" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb57-159"><a href="appendix-b---information-extraction-report.html#cb57-159" tabindex="-1"></a><span class="co">#     chance_false_interval = cut(</span></span>
<span id="cb57-160"><a href="appendix-b---information-extraction-report.html#cb57-160" tabindex="-1"></a><span class="co">#       chance_false,</span></span>
<span id="cb57-161"><a href="appendix-b---information-extraction-report.html#cb57-161" tabindex="-1"></a><span class="co">#       breaks = c(0, 1, 2, 4, 8, 16, 32, 64, Inf),</span></span>
<span id="cb57-162"><a href="appendix-b---information-extraction-report.html#cb57-162" tabindex="-1"></a><span class="co">#       labels = c(&quot;[0,1)&quot;, &quot;[1,2)&quot;, &quot;[2,4)&quot;, &quot;[4,8)&quot;, </span></span>
<span id="cb57-163"><a href="appendix-b---information-extraction-report.html#cb57-163" tabindex="-1"></a><span class="co">#                  &quot;[8,16)&quot;, &quot;[16,32)&quot;, &quot;[32,64)&quot;, &quot;[64,Inf)&quot;),</span></span>
<span id="cb57-164"><a href="appendix-b---information-extraction-report.html#cb57-164" tabindex="-1"></a><span class="co">#       right = FALSE,</span></span>
<span id="cb57-165"><a href="appendix-b---information-extraction-report.html#cb57-165" tabindex="-1"></a><span class="co">#       ordered_result = TRUE</span></span>
<span id="cb57-166"><a href="appendix-b---information-extraction-report.html#cb57-166" tabindex="-1"></a><span class="co">#     ),</span></span>
<span id="cb57-167"><a href="appendix-b---information-extraction-report.html#cb57-167" tabindex="-1"></a><span class="co">#   )</span></span></code></pre></div>
</details>
<div id="ground-truth-dataset" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.1">
<h5><span class="header-section-number">9.2.2.0.1</span> Ground truth dataset<a href="appendix-b---information-extraction-report.html#ground-truth-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For this task we created synthetic <strong>Aktiva</strong> tables that should allow
to investigate the influence certain characteristics of tables on the
extraction task. We systematically created <strong>Aktiva</strong> tables that vary
over the following characteristics:</p>
</div>
<ol style="list-style-type: decimal">
<li>n_columns: Number of columns the numeric values are distributed over
ranging from 2 to 4.</li>
<li>header_span: Span in the header rows.</li>
<li>thin: Including just a subset of all possible entries for a
<strong>Aktiva</strong> table.</li>
<li>unit_in_first_cell: Is the currency unit (e.g.Â Tâ¬) given in the
beginning of the table instead for each column.</li>
<li>enumeration: Are the rows numerated following the schema in the
legal text.</li>
<li>many_line_breaks: Limiting the character length for the row
descriptions to 50 to introduce line breaks.</li>
<li>shuffle_rows: The order of the rows within lower hierarchies can
vary.</li>
<li>text_around: There is some random text before and after the table on
the generated page.</li>
<li>sum_same_line: Summed values are in the same line as single values
if there are more than two columns.</li>
<li>unit: Eight different currency units from. E.g.: â¬, TEUR, Mio. â¬</li>
<li>input_format: Table is exported as PDF, HTML or Markdown document.</li>
</ol>
<p>This results in 49152 tables. A sample of 10 % is used for
the extraction task. The <em>header_span</em> and <em>text_around</em> are only varied
for the PDF format.</p>
<div id="extraction-task-overview" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.2">
<h5><span class="header-section-number">9.2.2.0.2</span> Extraction task overview<a href="appendix-b---information-extraction-report.html#extraction-task-overview" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the table extraction task with synthetic <strong>Aktiva</strong> tables
17 open source models
from 6 model
families have been benchmarked. There have been the same seven methods
tested with each <a href="glossary.html#acronyms_LLM">LLM</a> as described in section
<a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables">9.2</a>. Each method was used twice,
because in one trial the <a href="glossary.html#acronyms_LLM">LLM</a> is prompted to respect the currency
units and in the other trail it is not.</p>
</div>
<p>This results in 531 files, that hold the
results of 4_915 table extractions each. For the investigation of
potential predictors influences the random forest is generated with a
sample of 50_000 of these 68_810 results and finally, the <a href="glossary.html#acronyms_SHAP">SHAP</a>
values are calculated with 2_000 rows of data.</p>
<div id="performance-3" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.3">
<h5><span class="header-section-number">9.2.2.0.3</span> Performance<a href="appendix-b---information-extraction-report.html#performance-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context">9.9</a>
shows the best performing combination of <a href="glossary.html#acronyms_LLM">LLM</a> and prompting
strategy for each model family. The results are sorted by their mean
percentage of total correct predictions. We only compare results for
table extractions that work with a PDF document based table here.</p>
</div>
<p>For every model family there is at least one model-method combination
that performed better than the <a href="glossary.html#acronyms_regex">regex</a> baseline. For the synthetic
table extraction task the baseline is
0.966.
67 from 129
model-method combinations perform better than this baseline. There has
been no model that performed better than this baseline with the
<em>zero_shot</em> or <em>static_example</em> method.</p>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context">9.9</a>
shows, that Qwen3-235B-A22B-Instruct performs best. Llama 4 Scout also
performs very good but is three times faster. Table
<a href="appendix-b---information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context-small">9.10</a>
shows three small <a href="glossary.html#acronyms_LLM">LLM</a>s that also beat the median threshold for the
synthetic table extraction task. But we would not prefer the Qwen3-8B
model over the Llama Scout model, because its speed advantage is to
small, compared to the performance decrease. But if there is limited
VRAM available the Qwen3 model is a good choice. It can run well with 40
GB VRAM. The Llama Scout needs 640 GB VRAM to run well<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>.</p>
<p>Detail:</p>
<p>Figure
<a href="figures.html#fig:synth-table-extraction-llm-performance-numeric-overview">14.24</a>
shows, that Llama 3.3 70B never manages to reduce the spread in the
numeric prediction performance.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="appendix-b---information-extraction-report.html#cb58-1" tabindex="-1"></a>df_synth_top_performance <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="appendix-b---information-extraction-report.html#cb58-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-3"><a href="appendix-b---information-extraction-report.html#cb58-3" tabindex="-1"></a>    <span class="st">&quot;median_runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(median_runtime<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(median_runtime<span class="sc">%%</span><span class="dv">60</span>)),</span>
<span id="cb58-4"><a href="appendix-b---information-extraction-report.html#cb58-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">if_else</span>(</span>
<span id="cb58-5"><a href="appendix-b---information-extraction-report.html#cb58-5" tabindex="-1"></a>      median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median,</span>
<span id="cb58-6"><a href="appendix-b---information-extraction-report.html#cb58-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, median_total, <span class="st">&quot;**&quot;</span>),</span>
<span id="cb58-7"><a href="appendix-b---information-extraction-report.html#cb58-7" tabindex="-1"></a>      <span class="fu">as.character</span>(median_total)</span>
<span id="cb58-8"><a href="appendix-b---information-extraction-report.html#cb58-8" tabindex="-1"></a>      )</span>
<span id="cb58-9"><a href="appendix-b---information-extraction-report.html#cb58-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb58-10"><a href="appendix-b---information-extraction-report.html#cb58-10" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best median table extraction performance with synthetic &#39;Aktiva&#39; dataset for each model family&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-synth-context">Table 9.9: </span>Comparing best median table extraction performance with synthetic âAktivaâ dataset for each model family
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-7cb9153756637de40111" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7cb9153756637de40111">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["Qwen 3","mistralai","Qwen 2.5","Llama-4","google","Llama-3"],["Qwen3-235B-A22B-Instruct-2507","Mistral-Large-Instruct-2411","Qwen2.5-72B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","gemma-3-27b-it","Llama-3.1-70B-Instruct"],["static_<wbr>example","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["1","3","5","1","5","3"],["0.993","0.987","0.979","0.97","0.917","0.91"],["<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","0.931","<b>1<\/b>"],["33:6","111:47","96:45","27:27","33:36","60:41"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"mean total","targets":5},{"name":"median total","targets":6},{"name":"median runtime in minutes","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="appendix-b---information-extraction-report.html#cb59-1" tabindex="-1"></a>df_synth_top_performance_small <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="appendix-b---information-extraction-report.html#cb59-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-3"><a href="appendix-b---information-extraction-report.html#cb59-3" tabindex="-1"></a>    <span class="st">&quot;median_runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(median_runtime<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(median_runtime<span class="sc">%%</span><span class="dv">60</span>)),</span>
<span id="cb59-4"><a href="appendix-b---information-extraction-report.html#cb59-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">if_else</span>(</span>
<span id="cb59-5"><a href="appendix-b---information-extraction-report.html#cb59-5" tabindex="-1"></a>      median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median,</span>
<span id="cb59-6"><a href="appendix-b---information-extraction-report.html#cb59-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, median_total, <span class="st">&quot;**&quot;</span>),</span>
<span id="cb59-7"><a href="appendix-b---information-extraction-report.html#cb59-7" tabindex="-1"></a>      <span class="fu">as.character</span>(median_total)</span>
<span id="cb59-8"><a href="appendix-b---information-extraction-report.html#cb59-8" tabindex="-1"></a>      )</span>
<span id="cb59-9"><a href="appendix-b---information-extraction-report.html#cb59-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb59-10"><a href="appendix-b---information-extraction-report.html#cb59-10" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best median table extraction performance with synthetic &#39;Aktiva&#39; dataset for each model family for models with less than 17B parameters&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-synth-context-small">Table 9.10: </span>Comparing best median table extraction performance with synthetic âAktivaâ dataset for each model family for models with less than 17B parameters
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-58d7175b9e3e8fecc073" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-58d7175b9e3e8fecc073">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["Qwen 3","Qwen 2.5","google","mistralai","Llama-3"],["Qwen3-8B","Qwen2.5-7B-Instruct","gemma-3-12b-it","Ministral-8B-Instruct-2410","Llama-3.1-8B-Instruct"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["3","5","3","3","5"],["0.934","0.928","0.904","0.886","0.835"],["<b>1<\/b>","<b>0.983<\/b>","<b>0.974<\/b>","<b>0.966<\/b>","0.914"],["21:39","16:19","19:55","35:35","21:5"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"mean total","targets":5},{"name":"median total","targets":6},{"name":"median runtime in minutes","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="hypotheses-1" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.4">
<h5><span class="header-section-number">9.2.2.0.4</span> Hypotheses<a href="appendix-b---information-extraction-report.html#hypotheses-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="appendix-b---information-extraction-report.html#tab:hypotheses-and-results-synth-table-extraction-llm-table">9.11</a>
shows some unsupported hypotheses for predictors with strong effects.
The observations suggest, that prompting the model to respect the
currency units is decreasing its performance to predict the correct
numeric values. This is understandable, if the task is reflected
properly and we made a mistake there, when we formulated our hypothesis.</p>
</div>
<p>If the model is not prompted to respect the currency units, it is
presented with examples that just copy over the numeric values. And it
gets evaluated if it copied the values correctly. If the model is
prompted to respect the currency units, it is presented with examples,
where the values not only get copied but also transformed. And they get
evaluated if they do the transformation correct as well. Thus the task
is harder, if numeric values should be respected and the effect is
having a negative direction.</p>
<p>Figure
<a href="appendix-b---information-extraction-report.html#fig:better-performance-for-value-transformation-with-html-and-md">9.5</a>
shows that the transformation task is handled best, if the examples are
provided with the <em>top_n_rag</em> strategy. It does not work with the
<em>zero_shot</em> strategy. It also shows, that the performance is lower with
the PDF <em>input_format</em> and that the models have difficulties, if the
<em>unit_multiplier</em> is one million. This also shows a strong effect and is
strongest for the PDF <em>input_format</em>. This is a general effect. We see
in <a href="appendix-c---error-rate-guidance-report.html#fig:table-extraction-llm-confidence-lm-synth">10.13</a> that it can be
different for single models like Qwen3-235B.</p>
<p>old:</p>
<p>HTML and Markdown better but expected interaction effects mostly not
found - except: - columns help pdf - thinning least bad for pdf - pdf
worst with numbers that have currency units (short numbers, maybe no
1000er delimiter) - enumeration positive for pdf (and interaction with
log10 mult)</p>
<p>line breaks are no problem</p>
<p>zero shot gets confused by text around</p>
<p>Markdown might be even better than HTML</p>
<p>respecting units was bad - except for: Top n rag finds examples with
same currency units (shorter numbers more important than currnency in
header?)</p>
<p>log10 multiplier has many interaction effects</p>
<p>LLama 4 Maverick again problem with five examples</p>
<p>Positive column count effect (different for real data)</p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="appendix-b---information-extraction-report.html#cb60-1" tabindex="-1"></a><span class="fu">create_hypotheses_table</span>(<span class="st">&quot;../benchmark_results/table_extraction/hypotheses_and_results_synth_table_extraction_llm.html&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Comparing the formulated hypotheses and the found results for the table extraction on synthetic Aktiva tables with the LLM approach.&quot;</span>, <span class="at">detect =</span> <span class="st">&quot;:&quot;</span>)</span></code></pre></div>
</details>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:hypotheses-and-results-synth-table-extraction-llm-table">Table 9.11: </span>Comparing the formulated hypotheses and the found results for the table extraction on synthetic Aktiva tables with the LLM approach.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
F1
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
% correct numeric
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
binomial
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
confidence
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
predictor
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">model_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">google worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Qwen3 &amp; mistral best</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unkown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">google &amp; llama 3 worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral (except for Maverick)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">parameter_count</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">method_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">zero shot worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">top_n_rag best</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">top_n_rag best</span>
</td>
<td style="text-align:left;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_examples</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive (except for Llama 4 Maverick)</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral (Maverick bad with 5 examples)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_columns</span>
</td>
<td style="text-align:left;">
<span style="     ">3 is worse</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">3 is worse</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">3 is worse</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">n_columns:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">less for html and md</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">less for html and md</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">effect only for pdf</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">less for html and md</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">positive for pdf</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">less for html and md</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">less for html and md</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">sum_same_line</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">sum_same_line:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">header_span:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">Canât be evaluated</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     "></span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">Canât be evaluated</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     "></span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">Canât be evaluated</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">Canât be evaluated</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">header_span:respect_units</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">thin</span>
</td>
<td style="text-align:left;">
<span style="     ">Canât be evaluated</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">Neutral (positive for pdf)</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative (for small log10 mult)</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">respect_units</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">respect_units:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style=" font-weight: bold;    ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">input_format</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">md and html better</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">md and html better</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">md and html better</span>
</td>
<td style="text-align:left;">
<span style="     ">md and html better</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">md and html better</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">md and html better</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">year_as</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">Text positive for zero shot</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">Text positive for zero shot</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">unit_in_first_cell</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Negative for big log10 multiplier</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">unit_in_first_cell:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">log10_unit_multiplier</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">log10_unit_multiplier:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">negative for pdf</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">worst for pdf</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">most for pdf</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     color: darkred !important;">negative for pdf</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">enumeration</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">Positive for big log10 multiplier or pdf</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive for pdf</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">shuffle_rows</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">text_around</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">many_line_breaks</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">many_line_breaks:input_format</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">better for html and md</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label_length</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">missing</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Positive (i.e.Â for big log10 mult)</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">confidence</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
</tbody>
</table>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="appendix-b---information-extraction-report.html#cb61-1" tabindex="-1"></a>df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">!=</span> <span class="st">&quot;static_example&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="appendix-b---information-extraction-report.html#cb61-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">respect_units =</span> <span class="sc">!</span>ignore_units) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="appendix-b---information-extraction-report.html#cb61-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb61-4"><a href="appendix-b---information-extraction-report.html#cb61-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> percentage_correct_numeric, <span class="at">x =</span> <span class="fu">factor</span>(unit_multiplier), <span class="at">fill =</span> input_format), <span class="at">alpha =</span> .<span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb61-5"><a href="appendix-b---information-extraction-report.html#cb61-5" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="fu">paste</span>(<span class="st">&quot;respect units:&quot;</span>, respect_units)<span class="sc">~</span>method_family)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:better-performance-for-value-transformation-with-html-and-md"></span>
<img src="_main_files/figure-html/better-performance-for-value-transformation-with-html-and-md-1.png" alt="Comparing the percentage of correct extracted numeric values grouped by input format, method family and the fact, if currency should be respected." width="100%" />
<p class="caption">
Figure 9.5: Comparing the percentage of correct extracted numeric values grouped by input format, method family and the fact, if currency should be respected.
</p>
</div>
</div>
<div id="real-table-extraction-synth-context" class="section level3 hasAnchor" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Hybrid approach<a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="appendix-b---information-extraction-report.html#cb62-1" tabindex="-1"></a>best_models_with_examples <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="appendix-b---information-extraction-report.html#cb62-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(method_family, <span class="st">&quot;n_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="appendix-b---information-extraction-report.html#cb62-3" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb62-4"><a href="appendix-b---information-extraction-report.html#cb62-4" tabindex="-1"></a>    model, method</span>
<span id="cb62-5"><a href="appendix-b---information-extraction-report.html#cb62-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-6"><a href="appendix-b---information-extraction-report.html#cb62-6" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-7"><a href="appendix-b---information-extraction-report.html#cb62-7" tabindex="-1"></a>    <span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total),</span>
<span id="cb62-8"><a href="appendix-b---information-extraction-report.html#cb62-8" tabindex="-1"></a>    <span class="co"># mean_synth = mean(percentage_correct_total)</span></span>
<span id="cb62-9"><a href="appendix-b---information-extraction-report.html#cb62-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-10"><a href="appendix-b---information-extraction-report.html#cb62-10" tabindex="-1"></a>  <span class="co"># arrange(desc(median_synth)) %&gt;% </span></span>
<span id="cb62-11"><a href="appendix-b---information-extraction-report.html#cb62-11" tabindex="-1"></a>  <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb62-12"><a href="appendix-b---information-extraction-report.html#cb62-12" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, median_synth, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-13"><a href="appendix-b---information-extraction-report.html#cb62-13" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-14"><a href="appendix-b---information-extraction-report.html#cb62-14" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb62-15"><a href="appendix-b---information-extraction-report.html#cb62-15" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb62-16"><a href="appendix-b---information-extraction-report.html#cb62-16" tabindex="-1"></a>      model, method</span>
<span id="cb62-17"><a href="appendix-b---information-extraction-report.html#cb62-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_real =</span> <span class="fu">median</span>(percentage_correct_total))) <span class="sc">%&gt;%</span> </span>
<span id="cb62-18"><a href="appendix-b---information-extraction-report.html#cb62-18" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb62-19"><a href="appendix-b---information-extraction-report.html#cb62-19" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb62-20"><a href="appendix-b---information-extraction-report.html#cb62-20" tabindex="-1"></a>      model, method</span>
<span id="cb62-21"><a href="appendix-b---information-extraction-report.html#cb62-21" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-22"><a href="appendix-b---information-extraction-report.html#cb62-22" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">median_zero_shot =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>method)</span>
<span id="cb62-23"><a href="appendix-b---information-extraction-report.html#cb62-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-24"><a href="appendix-b---information-extraction-report.html#cb62-24" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb62-25"><a href="appendix-b---information-extraction-report.html#cb62-25" tabindex="-1"></a></span>
<span id="cb62-26"><a href="appendix-b---information-extraction-report.html#cb62-26" tabindex="-1"></a>median_models_with_examples <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb62-27"><a href="appendix-b---information-extraction-report.html#cb62-27" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(method_family, <span class="st">&quot;n_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-28"><a href="appendix-b---information-extraction-report.html#cb62-28" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb62-29"><a href="appendix-b---information-extraction-report.html#cb62-29" tabindex="-1"></a>    model<span class="co">#, method</span></span>
<span id="cb62-30"><a href="appendix-b---information-extraction-report.html#cb62-30" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-31"><a href="appendix-b---information-extraction-report.html#cb62-31" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-32"><a href="appendix-b---information-extraction-report.html#cb62-32" tabindex="-1"></a>  <span class="co"># arrange(desc(median_synth)) %&gt;% </span></span>
<span id="cb62-33"><a href="appendix-b---information-extraction-report.html#cb62-33" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, median_synth, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-34"><a href="appendix-b---information-extraction-report.html#cb62-34" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-35"><a href="appendix-b---information-extraction-report.html#cb62-35" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb62-36"><a href="appendix-b---information-extraction-report.html#cb62-36" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb62-37"><a href="appendix-b---information-extraction-report.html#cb62-37" tabindex="-1"></a>      model<span class="co">#, method</span></span>
<span id="cb62-38"><a href="appendix-b---information-extraction-report.html#cb62-38" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_real =</span> <span class="fu">median</span>(percentage_correct_total))) <span class="sc">%&gt;%</span> </span>
<span id="cb62-39"><a href="appendix-b---information-extraction-report.html#cb62-39" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb62-40"><a href="appendix-b---information-extraction-report.html#cb62-40" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb62-41"><a href="appendix-b---information-extraction-report.html#cb62-41" tabindex="-1"></a>      model, method</span>
<span id="cb62-42"><a href="appendix-b---information-extraction-report.html#cb62-42" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-43"><a href="appendix-b---information-extraction-report.html#cb62-43" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">median_zero_shot =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>method)</span>
<span id="cb62-44"><a href="appendix-b---information-extraction-report.html#cb62-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-45"><a href="appendix-b---information-extraction-report.html#cb62-45" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb62-46"><a href="appendix-b---information-extraction-report.html#cb62-46" tabindex="-1"></a></span>
<span id="cb62-47"><a href="appendix-b---information-extraction-report.html#cb62-47" tabindex="-1"></a>best_mistral <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model_family <span class="sc">==</span> <span class="st">&quot;mistralai&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(median_synth)</span>
<span id="cb62-48"><a href="appendix-b---information-extraction-report.html#cb62-48" tabindex="-1"></a></span>
<span id="cb62-49"><a href="appendix-b---information-extraction-report.html#cb62-49" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb62-50"><a href="appendix-b---information-extraction-report.html#cb62-50" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_col_T_EUR =</span> T_EUR_both <span class="sc">+</span> T_EUR) <span class="sc">%&gt;%</span> </span>
<span id="cb62-51"><a href="appendix-b---information-extraction-report.html#cb62-51" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-52"><a href="appendix-b---information-extraction-report.html#cb62-52" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb62-53"><a href="appendix-b---information-extraction-report.html#cb62-53" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples))),</span>
<span id="cb62-54"><a href="appendix-b---information-extraction-report.html#cb62-54" tabindex="-1"></a>    <span class="at">respect_units =</span> <span class="sc">!</span>ignore_units</span>
<span id="cb62-55"><a href="appendix-b---information-extraction-report.html#cb62-55" tabindex="-1"></a>  )</span>
<span id="cb62-56"><a href="appendix-b---information-extraction-report.html#cb62-56" tabindex="-1"></a></span>
<span id="cb62-57"><a href="appendix-b---information-extraction-report.html#cb62-57" tabindex="-1"></a>n_tables_n_cols <span class="ot">&lt;-</span> df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> <span class="fu">select</span>(filepath, n_col_T_EUR) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(n_col_T_EUR) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb62-58"><a href="appendix-b---information-extraction-report.html#cb62-58" tabindex="-1"></a></span>
<span id="cb62-59"><a href="appendix-b---information-extraction-report.html#cb62-59" tabindex="-1"></a>confidence_vs_truth_hybrid <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb62-60"><a href="appendix-b---information-extraction-report.html#cb62-60" tabindex="-1"></a>  <span class="fu">filter</span>(method_family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-61"><a href="appendix-b---information-extraction-report.html#cb62-61" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-62"><a href="appendix-b---information-extraction-report.html#cb62-62" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb62-63"><a href="appendix-b---information-extraction-report.html#cb62-63" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span>,</span>
<span id="cb62-64"><a href="appendix-b---information-extraction-report.html#cb62-64" tabindex="-1"></a>    <span class="at">respect_units =</span> <span class="sc">!</span>ignore_units</span>
<span id="cb62-65"><a href="appendix-b---information-extraction-report.html#cb62-65" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(respect_units, model, filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb62-66"><a href="appendix-b---information-extraction-report.html#cb62-66" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-67"><a href="appendix-b---information-extraction-report.html#cb62-67" tabindex="-1"></a>  <span class="fu">slice_max</span>(median_percentage_correct_total, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-68"><a href="appendix-b---information-extraction-report.html#cb62-68" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predictions_processed =</span> <span class="fu">map</span>(predictions, <span class="sc">~</span>{</span>
<span id="cb62-69"><a href="appendix-b---information-extraction-report.html#cb62-69" tabindex="-1"></a>    .x <span class="sc">%&gt;%</span> </span>
<span id="cb62-70"><a href="appendix-b---information-extraction-report.html#cb62-70" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span><span class="st">&quot;_merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb62-71"><a href="appendix-b---information-extraction-report.html#cb62-71" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb62-72"><a href="appendix-b---information-extraction-report.html#cb62-72" tabindex="-1"></a>        <span class="at">match =</span> (year_truth <span class="sc">==</span> year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(year_result)),</span>
<span id="cb62-73"><a href="appendix-b---information-extraction-report.html#cb62-73" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_this_year,</span>
<span id="cb62-74"><a href="appendix-b---information-extraction-report.html#cb62-74" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(year_truth),</span>
<span id="cb62-75"><a href="appendix-b---information-extraction-report.html#cb62-75" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(year_result),</span>
<span id="cb62-76"><a href="appendix-b---information-extraction-report.html#cb62-76" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb62-77"><a href="appendix-b---information-extraction-report.html#cb62-77" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb62-78"><a href="appendix-b---information-extraction-report.html#cb62-78" tabindex="-1"></a>        <span class="at">tuple_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb62-79"><a href="appendix-b---information-extraction-report.html#cb62-79" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-80"><a href="appendix-b---information-extraction-report.html#cb62-80" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb62-81"><a href="appendix-b---information-extraction-report.html#cb62-81" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_previous_year,</span>
<span id="cb62-82"><a href="appendix-b---information-extraction-report.html#cb62-82" tabindex="-1"></a>        <span class="at">match =</span> (previous_year_truth <span class="sc">==</span> previous_year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(previous_year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(previous_year_result)),</span>
<span id="cb62-83"><a href="appendix-b---information-extraction-report.html#cb62-83" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(previous_year_truth),</span>
<span id="cb62-84"><a href="appendix-b---information-extraction-report.html#cb62-84" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(previous_year_result),</span>
<span id="cb62-85"><a href="appendix-b---information-extraction-report.html#cb62-85" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb62-86"><a href="appendix-b---information-extraction-report.html#cb62-86" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb62-87"><a href="appendix-b---information-extraction-report.html#cb62-87" tabindex="-1"></a>        <span class="at">tuple_previous_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb62-88"><a href="appendix-b---information-extraction-report.html#cb62-88" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb62-89"><a href="appendix-b---information-extraction-report.html#cb62-89" tabindex="-1"></a>        <span class="sc">-</span><span class="fu">c</span>(year_truth, previous_year_truth, year_result, previous_year_result,</span>
<span id="cb62-90"><a href="appendix-b---information-extraction-report.html#cb62-90" tabindex="-1"></a>           confidence_this_year, confidence_previous_year)</span>
<span id="cb62-91"><a href="appendix-b---information-extraction-report.html#cb62-91" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-92"><a href="appendix-b---information-extraction-report.html#cb62-92" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;E1&quot;</span>, <span class="st">&quot;E2&quot;</span>, <span class="st">&quot;E3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb62-93"><a href="appendix-b---information-extraction-report.html#cb62-93" tabindex="-1"></a>      <span class="fu">unnest</span>(<span class="at">cols =</span> value) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb62-94"><a href="appendix-b---information-extraction-report.html#cb62-94" tabindex="-1"></a>        <span class="at">match =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(match), <span class="cn">FALSE</span>, match)</span>
<span id="cb62-95"><a href="appendix-b---information-extraction-report.html#cb62-95" tabindex="-1"></a>      )</span>
<span id="cb62-96"><a href="appendix-b---information-extraction-report.html#cb62-96" tabindex="-1"></a>  })) <span class="sc">%&gt;%</span> </span>
<span id="cb62-97"><a href="appendix-b---information-extraction-report.html#cb62-97" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions_processed) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb62-98"><a href="appendix-b---information-extraction-report.html#cb62-98" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb62-99"><a href="appendix-b---information-extraction-report.html#cb62-99" tabindex="-1"></a>    <span class="at">truth_NA =</span> <span class="fu">factor</span>(truth_NA, <span class="at">levels =</span> <span class="fu">c</span>(F, T))</span>
<span id="cb62-100"><a href="appendix-b---information-extraction-report.html#cb62-100" tabindex="-1"></a>  )</span>
<span id="cb62-101"><a href="appendix-b---information-extraction-report.html#cb62-101" tabindex="-1"></a></span>
<span id="cb62-102"><a href="appendix-b---information-extraction-report.html#cb62-102" tabindex="-1"></a>confidence_intervals_hybrid <span class="ot">&lt;-</span> confidence_vs_truth_hybrid <span class="sc">%&gt;%</span> <span class="co">#rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb62-103"><a href="appendix-b---information-extraction-report.html#cb62-103" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-104"><a href="appendix-b---information-extraction-report.html#cb62-104" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-105"><a href="appendix-b---information-extraction-report.html#cb62-105" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb62-106"><a href="appendix-b---information-extraction-report.html#cb62-106" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb62-107"><a href="appendix-b---information-extraction-report.html#cb62-107" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, predicted_NA, model, respect_units) <span class="sc">%&gt;%</span></span>
<span id="cb62-108"><a href="appendix-b---information-extraction-report.html#cb62-108" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb62-109"><a href="appendix-b---information-extraction-report.html#cb62-109" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-110"><a href="appendix-b---information-extraction-report.html#cb62-110" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-111"><a href="appendix-b---information-extraction-report.html#cb62-111" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb62-112"><a href="appendix-b---information-extraction-report.html#cb62-112" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb62-113"><a href="appendix-b---information-extraction-report.html#cb62-113" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb62-114"><a href="appendix-b---information-extraction-report.html#cb62-114" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb62-115"><a href="appendix-b---information-extraction-report.html#cb62-115" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb62-116"><a href="appendix-b---information-extraction-report.html#cb62-116" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb62-117"><a href="appendix-b---information-extraction-report.html#cb62-117" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(predicted_NA, model, respect_units) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb62-118"><a href="appendix-b---information-extraction-report.html#cb62-118" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb62-119"><a href="appendix-b---information-extraction-report.html#cb62-119" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-120"><a href="appendix-b---information-extraction-report.html#cb62-120" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-121"><a href="appendix-b---information-extraction-report.html#cb62-121" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb62-122"><a href="appendix-b---information-extraction-report.html#cb62-122" tabindex="-1"></a>      chance_false,</span>
<span id="cb62-123"><a href="appendix-b---information-extraction-report.html#cb62-123" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb62-124"><a href="appendix-b---information-extraction-report.html#cb62-124" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb62-125"><a href="appendix-b---information-extraction-report.html#cb62-125" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb62-126"><a href="appendix-b---information-extraction-report.html#cb62-126" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb62-127"><a href="appendix-b---information-extraction-report.html#cb62-127" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb62-128"><a href="appendix-b---information-extraction-report.html#cb62-128" tabindex="-1"></a>    ),</span>
<span id="cb62-129"><a href="appendix-b---information-extraction-report.html#cb62-129" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<p>In this section we present the results of using synthetic <strong>Aktiva</strong>
tables for the in-context learning to extract information from real
<strong>Aktiva</strong> tables. We show that even such a hybrid approach can be used,
to extend the extraction task by a unit conversation task.</p>
<div id="performance-4" class="section level5 hasAnchor paragraph-start" number="9.2.3.0.1">
<h5><span class="header-section-number">9.2.3.0.1</span> Performance<a href="appendix-b---information-extraction-report.html#performance-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table
<a href="appendix-b---information-extraction-report.html#tab:comparing-extraction-performance-real-and-synth-context-learning">9.12</a>
compares the overall performance for the extraction task of the best
model-method combination in the hybrid approach per model with the
<em>zero_shot</em> and real example training performance. Using real examples
for in-context-learning for those model-method combinations is better
than using the generated synthetic data. Qwen3-8B and gemma3-12b can
improve the most using real examples instead of sythetic examples,
normalized on the possible improvement from the synthetic learning
results using this formula:</p>
</div>
<p><span class="math display">\[
delta\_rate_{synth} = \frac{median \left( real \right)-median \left( synth \right)}{1-median \left( synth \right)}
\]</span></p>
<p>On the same time, gemma3-12b shows the lowest <em>delta_rate</em> with under 10
%, when the improvement of using synthetic examples is compared with the
<em>zero_shot</em> method. For the other models this is more tan 48 % and
highest for Llama Scout 4 with 87.5 % improving from 0.45 to 0.93.
Qwen-235B score as high with both learning approaches, but scored best
with just using a single synthetic example. Table
<a href="tables.html#tab:comparing-extraction-performance-real-and-synth-context-learning-median">13.2</a>
shows that these observations are valid for the improvement with in the
models independent from the selected method. Figure
<a href="figures.html#fig:compare-real-table-extraction-by-context-type">14.27</a> shows, that the
improvement for using one or three synthetic examples is biggest for
Qwen3-8B.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="appendix-b---information-extraction-report.html#cb63-1" tabindex="-1"></a>best_models_with_examples <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="appendix-b---information-extraction-report.html#cb63-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-3"><a href="appendix-b---information-extraction-report.html#cb63-3" tabindex="-1"></a>    <span class="at">delta_real_synth =</span> median_real<span class="sc">-</span>median_synth,</span>
<span id="cb63-4"><a href="appendix-b---information-extraction-report.html#cb63-4" tabindex="-1"></a>    <span class="at">delta_rate_real_synth =</span> (delta_real_synth)<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>median_synth),</span>
<span id="cb63-5"><a href="appendix-b---information-extraction-report.html#cb63-5" tabindex="-1"></a>    <span class="at">delta_synth_zero =</span> median_synth<span class="sc">-</span>median_zero_shot,</span>
<span id="cb63-6"><a href="appendix-b---information-extraction-report.html#cb63-6" tabindex="-1"></a>    <span class="at">delta_rate_synth_zero =</span> (delta_synth_zero)<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>median_zero_shot)</span>
<span id="cb63-7"><a href="appendix-b---information-extraction-report.html#cb63-7" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-8"><a href="appendix-b---information-extraction-report.html#cb63-8" tabindex="-1"></a>  <span class="fu">mutate_if</span>(</span>
<span id="cb63-9"><a href="appendix-b---information-extraction-report.html#cb63-9" tabindex="-1"></a>    is.numeric, </span>
<span id="cb63-10"><a href="appendix-b---information-extraction-report.html#cb63-10" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb63-11"><a href="appendix-b---information-extraction-report.html#cb63-11" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb63-12"><a href="appendix-b---information-extraction-report.html#cb63-12" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb63-13"><a href="appendix-b---information-extraction-report.html#cb63-13" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb63-14"><a href="appendix-b---information-extraction-report.html#cb63-14" tabindex="-1"></a>    )</span>
<span id="cb63-15"><a href="appendix-b---information-extraction-report.html#cb63-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb63-16"><a href="appendix-b---information-extraction-report.html#cb63-16" tabindex="-1"></a>    model, method, median_real, median_synth, median_zero_shot, </span>
<span id="cb63-17"><a href="appendix-b---information-extraction-report.html#cb63-17" tabindex="-1"></a>    <span class="co"># delta_real_synth, delta_synth_zero, </span></span>
<span id="cb63-18"><a href="appendix-b---information-extraction-report.html#cb63-18" tabindex="-1"></a>    delta_rate_real_synth, delta_rate_synth_zero</span>
<span id="cb63-19"><a href="appendix-b---information-extraction-report.html#cb63-19" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb63-20"><a href="appendix-b---information-extraction-report.html#cb63-20" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb63-21"><a href="appendix-b---information-extraction-report.html#cb63-21" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrrrrr&quot;</span>,</span>
<span id="cb63-22"><a href="appendix-b---information-extraction-report.html#cb63-22" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing extraction performance for real Aktiva extraction task with synthetic and real examples for in-context learning with a zero shot approach for the best performing model-method combination in the hybrid&quot;</span>,</span>
<span id="cb63-23"><a href="appendix-b---information-extraction-report.html#cb63-23" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:comparing-extraction-performance-real-and-synth-context-learning">Table 9.12: </span>Comparing extraction performance for real Aktiva extraction task with synthetic and real examples for in-context learning with a zero shot approach for the best performing model-method combination in the hybrid
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-0df69b2ea2f052406c22" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-0df69b2ea2f052406c22">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Qwen3-235B-A22B-Instruct-2507-FP8","Llama-4-Scout-17B-16E-Instruct","Mistral-Large-Instruct-2411","Qwen3-8B","Llama-3.1-8B-Instruct","Ministral-8B-Instruct-2410","gemma-3-27b-it","gemma-3-12b-it"],["1_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","top_<wbr>1_<wbr>rag_<wbr>examples"],["<b>0.966<\/b>","<b>0.966<\/b>","<b>0.966<\/b>","0.94","0.836","0.897","0.828","0.862"],["<b>0.966<\/b>","0.931","0.922","0.802","0.776","0.767","0.724","0.586"],["<b>0.897<\/b>","0.448","0.776","0.336","0.552","0.552","0.207","0.543"],["0","0.507","0.564","<b>0.697<\/b>","0.268","0.558","0.377","0.667"],["0.67","<b>0.875<\/b>","0.652","0.702","0.5","0.48","0.652","0.094"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>median real<\/th>\n      <th>median synth<\/th>\n      <th>median zero shot<\/th>\n      <th>delta rate real synth<\/th>\n      <th>delta rate synth zero<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"median real","targets":3},{"name":"median synth","targets":4},{"name":"median zero shot","targets":5},{"name":"delta rate real synth","targets":6},{"name":"delta rate synth zero","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="learning-to-respect-currency-units" class="section level5 hasAnchor paragraph-start" number="9.2.3.0.2">
<h5><span class="header-section-number">9.2.3.0.2</span> Learning to respect currency units<a href="appendix-b---information-extraction-report.html#learning-to-respect-currency-units" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table
<a href="appendix-b---information-extraction-report.html#tab:comparing-extraction-performance-synth-context-learning-respecting-units-table">9.13</a>
shows, the difference in the percentage of correct predicted numeric
values, if the <a href="glossary.html#acronyms_LLM">LLM</a> is prompted to respect currency units and gets
synthetic <strong>Aktiva</strong> tables that show how to cope with different
currency units, separate for the number of columns with currency units.
There are 17 tables that have
<em>Tâ¬</em> in the previous year column and
9 tables that have all
columns listed in <em>Tâ¬</em>.</p>
</div>
<p>It shows, that Qwen3-235B, Llama 4 Scout, Mistral-Large and Ministral-8B
all can apply the demonstrated numeric transformation for most of the
values, if both columns have the <em>Tâ¬</em> unit. Qwen3-235B, Llama 4 Scout
and Mistral-Large also can apply this, if only one columns has a unit
corrency. This works best for Qwen3-235B. The target value to archive
here is 0.5 instead of 1.0. This is worth to mentioning because there
are no synthetic examples that haf different currency units for
different columns. Ministral can not generalize this skill. It seems,
that Qwen3 apllies numeric transformations regardles the fact, if there
are currency units given for a column. Thus, it performs noticeably
worse on the majority of all tables. Figure
<a href="appendix-b---information-extraction-report.html#fig:table-extraction-llm-respecting-units-plot">9.6</a> shows, that the
performance of Llama 3.1 8B and gemma3 27B on colums with currency units
does not change.</p>
<p><a href="figures.html#fig:compare-effect-of-respecting-units-on-overall-performance">14.28</a>,
<a href="figures.html#fig:compare-effect-of-respecting-units-on-numeric-performance">14.29</a> and
<a href="figures.html#fig:compare-effect-of-respecting-units-on-NA-F1">14.30</a></p>
<p>Thus, synthetic data can be used to solve new tasks and substitute
missing data for rare classes.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="appendix-b---information-extraction-report.html#cb64-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="appendix-b---information-extraction-report.html#cb64-2" tabindex="-1"></a>  <span class="fu">filter</span>(method_family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="appendix-b---information-extraction-report.html#cb64-3" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method, method_family, respect_units, n_col_T_EUR) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="appendix-b---information-extraction-report.html#cb64-4" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-5"><a href="appendix-b---information-extraction-report.html#cb64-5" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> respect_units, <span class="at">values_from =</span> median_num, <span class="at">names_prefix =</span> <span class="st">&quot;units_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-6"><a href="appendix-b---information-extraction-report.html#cb64-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">delta =</span> units_TRUE <span class="sc">-</span> units_FALSE) <span class="sc">%&gt;%</span> </span>
<span id="cb64-7"><a href="appendix-b---information-extraction-report.html#cb64-7" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(units_FALSE, units_TRUE)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-8"><a href="appendix-b---information-extraction-report.html#cb64-8" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> n_col_T_EUR, <span class="at">values_from =</span> delta, <span class="at">names_prefix =</span> <span class="st">&quot;n_cols_T_EUR_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-9"><a href="appendix-b---information-extraction-report.html#cb64-9" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb64-10"><a href="appendix-b---information-extraction-report.html#cb64-10" tabindex="-1"></a>    model<span class="co">#, method_family</span></span>
<span id="cb64-11"><a href="appendix-b---information-extraction-report.html#cb64-11" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb64-12"><a href="appendix-b---information-extraction-report.html#cb64-12" tabindex="-1"></a>  <span class="fu">summarise_if</span>(is.numeric, median) <span class="sc">%&gt;%</span> </span>
<span id="cb64-13"><a href="appendix-b---information-extraction-report.html#cb64-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">2</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb64-14"><a href="appendix-b---information-extraction-report.html#cb64-14" tabindex="-1"></a>  <span class="co"># group_by(method_family) %&gt;% </span></span>
<span id="cb64-15"><a href="appendix-b---information-extraction-report.html#cb64-15" tabindex="-1"></a>  <span class="fu">mutate_if</span>(</span>
<span id="cb64-16"><a href="appendix-b---information-extraction-report.html#cb64-16" tabindex="-1"></a>    is.numeric, </span>
<span id="cb64-17"><a href="appendix-b---information-extraction-report.html#cb64-17" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb64-18"><a href="appendix-b---information-extraction-report.html#cb64-18" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb64-19"><a href="appendix-b---information-extraction-report.html#cb64-19" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, ., <span class="st">&quot;**&quot;</span>),</span>
<span id="cb64-20"><a href="appendix-b---information-extraction-report.html#cb64-20" tabindex="-1"></a>      .</span>
<span id="cb64-21"><a href="appendix-b---information-extraction-report.html#cb64-21" tabindex="-1"></a>    )</span>
<span id="cb64-22"><a href="appendix-b---information-extraction-report.html#cb64-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb64-23"><a href="appendix-b---information-extraction-report.html#cb64-23" tabindex="-1"></a>  <span class="co"># arrange(method_family) %&gt;% </span></span>
<span id="cb64-24"><a href="appendix-b---information-extraction-report.html#cb64-24" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb64-25"><a href="appendix-b---information-extraction-report.html#cb64-25" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrrr&quot;</span>,</span>
<span id="cb64-26"><a href="appendix-b---information-extraction-report.html#cb64-26" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing extraction performance for real Aktiva extraction task dependent on the promt addition to respect currency units&quot;</span>,</span>
<span id="cb64-27"><a href="appendix-b---information-extraction-report.html#cb64-27" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:comparing-extraction-performance-synth-context-learning-respecting-units-table">Table 9.13: </span>Comparing extraction performance for real Aktiva extraction task dependent on the promt addition to respect currency units
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-be57c74bac22db66d4b9" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-be57c74bac22db66d4b9">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Llama-3.1-8B-Instruct","Llama-4-Scout-17B-16E-Instruct","Ministral-8B-Instruct-2410","Mistral-Large-Instruct-2411","Qwen3-235B-A22B-Instruct-2507-FP8","Qwen3-8B","gemma-3-12b-it","gemma-3-27b-it"],["-0.03","<b>0<\/b>","-0.08","<b>0<\/b>","<b>0<\/b>","-0.48","-0.03","<b>0<\/b>"],["-0.02","0.28","0","0.39","<b>0.44<\/b>","0","0.17","0.06"],["0.01","0.89","0.79","0.9","<b>0.96<\/b>","0.28","0.48","0.02"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>n cols T EUR 0<\/th>\n      <th>n cols T EUR 1<\/th>\n      <th>n cols T EUR 2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"n cols T EUR 0","targets":2},{"name":"n cols T EUR 1","targets":3},{"name":"n cols T EUR 2","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="appendix-b---information-extraction-report.html#cb65-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="appendix-b---information-extraction-report.html#cb65-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb65-3"><a href="appendix-b---information-extraction-report.html#cb65-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_numeric)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="appendix-b---information-extraction-report.html#cb65-4" tabindex="-1"></a>  <span class="fu">facet_nested</span>(respect_units<span class="sc">+</span>n_col_T_EUR<span class="sc">~</span>.)</span></code></pre></div>
</details>
<div class="figure"><span style="display:block;" id="fig:table-extraction-llm-respecting-units-plot"></span>
<img src="_main_files/figure-html/table-extraction-llm-respecting-units-plot-1.png" alt="Comparing the numeric prediction performance for the hybrid approach, based on the fact, if the LLM is prompted to respect currency units." width="100%" />
<p class="caption">
Figure 9.6: Comparing the numeric prediction performance for the hybrid approach, based on the fact, if the LLM is prompted to respect currency units.
</p>
</div>
</div>
</div>
<div id="summary-3" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Summary<a href="appendix-b---information-extraction-report.html#summary-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="26">
<li id="fn26"><p>A comparison of the numeric values over all methods
can be found in section <a href="results.html#comparing-table-extraction-methods">5.2.2</a>.<a href="appendix-b---information-extraction-report.html#fnref26" class="footnote-back">â©ï¸</a></p></li>
<li id="fn27"><p>The models <em>deepseek-ai_DeepSeek-R1-Distill-Qwen-32B</em>
and <em>google_gemma-3n-E4B-it</em> have been tested as well but donât get
presented as they never performed anywhere beyond random guessing.<a href="appendix-b---information-extraction-report.html#fnref27" class="footnote-back">â©ï¸</a></p></li>
<li id="fn28"><p>There is an external guidance through the provided
xgrammar template but it is not communicated to the model in form of
a promt.<a href="appendix-b---information-extraction-report.html#fnref28" class="footnote-back">â©ï¸</a></p></li>
<li id="fn29"><p>With the gpt-oss models we found the new Harmony
response format to produce a lot of tokens in the chain of thought
stream, we discarded, because we only need the <a href="glossary.html#acronyms_json">json</a> in the
final stream Maybe this is similar for gpt-5 models as well but the
chain of thought stream is kept on Azures side?<a href="appendix-b---information-extraction-report.html#fnref29" class="footnote-back">â©ï¸</a></p></li>
<li id="fn30"><p>Without the Harmony format 4_000 are enough.<a href="appendix-b---information-extraction-report.html#fnref30" class="footnote-back">â©ï¸</a></p></li>
<li id="fn31"><p>When we say, it runs well, it gets rated as <em>okay</em> on
the <a href="https://apxml.com/tools/vram-calculator">LLM Inference: VRAM &amp; Performance
Calculator</a>.<a href="appendix-b---information-extraction-report.html#fnref31" class="footnote-back">â©ï¸</a></p></li>
</ol>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'â¨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next â©';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="page-identification-report.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-c---error-rate-guidance-report.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
