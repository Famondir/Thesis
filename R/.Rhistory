filter(str_detect(name, "false")) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = orderd(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company) +
scale_fill_ordinal(drop = TRUE)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>% select(value)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>% select(value) %>% unique()
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false"))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = ordered(value))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = droplevels(ordered(value)))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = droplevels(factor(value)))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = droplevels(ordered(value)))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>% select(value) %>% unique()
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>% pull(value) %>% unique()
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = ordered(value))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
group_by(name) %>% reframe(mean = mean(value))
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
group_by(name) %>% reframe(mean = mean(value), median = median(value))
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
group_by(name) %>% reframe(mean = mean(value), median = median(value), sum = sum(value))
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
group_by(name) %>% reframe(mean = mean(value), median = median(value), sum = sum(value))
df_temp <- df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = ordered(value))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_best <- df_qwen235 %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE)
df_best <- df_qwen235 %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
ungroup()
df_best
df_best %>% mutate(across(T_in_year:multiple_this_years, ~as.character(.))) %>%
pivot_longer(T_in_year:multiple_this_years) %>%
group_by(name, value) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
ggplot() +
geom_point(aes(x = name, y = mean_total, color = value)) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_temp <- df_best %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = ordered(value))
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
mutate(value = ordered(value))
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
group_by(company) %>%
mutate(value = sum(value)/n()) %>%
mutate(value = ordered(value))
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false")) %>%
group_by(company) %>%
mutate(value = sum(value)/n())
df_temp %>% ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false"))
df_temp %>%
group_by(company) %>%
mutate(value = sum(value)/n()) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_temp %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_total)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_best %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_total)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_total)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_umeric)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_numeric)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_best %>% group_by(company) %>%
reframe(mean_numeric = mean(percentage_correct_numeric))
df_best <- df_qwen235 %>% filter(input_format == "text") %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
ungroup()
df_best %>% mutate(across(T_in_year:multiple_this_years, ~as.character(.))) %>%
pivot_longer(T_in_year:multiple_this_years) %>%
group_by(name, value) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
ggplot() +
geom_point(aes(x = name, y = mean_total, color = value)) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false"))
df_temp %>%
group_by(company) %>%
mutate(value = sum(value)/n()) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
group_by(name) %>% reframe(mean = mean(value), median = median(value), sum = sum(value))
df_best %>% group_by(company) %>%
reframe(mean_numeric = mean(percentage_correct_numeric))
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_numeric)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_best %>% select(extractor)
df_best <- df_qwen235 %>% filter(input_format == "text", extractor == "pdfium") %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
ungroup()
df_best %>% mutate(across(T_in_year:multiple_this_years, ~as.character(.))) %>%
pivot_longer(T_in_year:multiple_this_years) %>%
group_by(name, value) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
ggplot() +
geom_point(aes(x = name, y = mean_total, color = value)) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false"))
df_temp %>%
group_by(company) %>%
mutate(value = sum(value)/n()) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_best %>% group_by(company) %>%
reframe(mean_numeric = mean(percentage_correct_numeric))
df_best %>% group_by(company) %>%
reframe(mean_numeric = mean(percentage_correct_numeric)) %>%
arrange(mean_numeric)
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
# select(model, method, extractor, input_format, mean_total, filepath) %>%
ggplot() +
geom_boxplot(aes(x = company, y = percentage_correct_numeric)) +
facet_nested(extractor+input_format~.) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_best
df_best %>% select(method) %>% unique()
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE)
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>% select(model, method, extractor, input_format) %>% unique()
df_qwen235 %>% group_by(model, method, extractor, input_format) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
group_by(model, extractor, input_format, filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>% ungroup() %>%  select(model, method, extractor, input_format) %>% unique()
df_best <- df_qwen235 %>% filter(input_format == "text", extractor == "pdfium") %>%
group_by(method) %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
ungroup()
df_best %>% mutate(across(T_in_year:multiple_this_years, ~as.character(.))) %>%
pivot_longer(T_in_year:multiple_this_years) %>%
group_by(name, value) %>%
mutate(mean_total = mean(percentage_correct_total)) %>%
ggplot() +
geom_point(aes(x = name, y = mean_total, color = value)) +
scale_x_discrete(guide = guide_axis(angle = 30))
df_temp <- df_best %>%
pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(
predicted = !str_detect(name, "negative"),
truth = !(name %in% c("NA_true_negative", "NA_false_positive"))
) %>%
filter(str_detect(name, "false"))
df_temp %>%
group_by(company) %>%
mutate(value = sum(value)/n()) %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = value)) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~company)
df_temp %>%
ggplot() +
geom_tile(aes(y = truth, x = predicted, fill = ordered(value))) +
geom_text(
data = . %>% select(name, truth, predicted) %>% unique(),
aes(label = name, y = truth, x = predicted), color = "white"
) +
facet_wrap(~filepath)
df_qwen235 %>% pivot_longer(NA_true_positive:NA_true_negative) %>%
mutate(mean_total = mean(percentage_correct_total), .before = 1) %>%
group_by(filepath) %>%
slice_max(n = 1, mean_total, with_ties = FALSE) %>%
group_by(name) %>% reframe(mean = mean(value), median = median(value), sum = sum(value))
df_best %>% group_by(company) %>%
reframe(mean_numeric = mean(percentage_correct_numeric)) %>%
arrange(mean_numeric)
df_best %>% group_by(company) %>%
reframe(
mean_numeric = mean(percentage_correct_numeric),
mean_F1 = mean(NA_F1)
) %>%
arrange(mean_numeric)
df_best %>% group_by(filepath) %>%
reframe(
mean_numeric = mean(percentage_correct_numeric),
mean_F1 = mean(NA_F1)
) %>%
arrange(mean_numeric)
knitr::include_graphics("images/beteiligungsunternehmen.png")
knitr::include_graphics("images/HITL_flowchart.png")
gc()
knitr::include_graphics("images/compare_results.png")
cat("<ol><li>test</li><li>ho</li></ol>")
