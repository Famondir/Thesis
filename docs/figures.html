<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Figures | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="14 Figures | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Figures | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Figures | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon Schäfer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tables.html"/>
<link rel="next" href="layout-testing.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#information-retrieval"><i class="fa fa-check"></i><b>2.1</b> Natural language processing</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis-edit-this"><i class="fa fa-check"></i><b>2.1.1</b> Document Layout Analysis (edit this)</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#term-frequency"><i class="fa fa-check"></i><b>2.1.2</b> Term frequency</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.3</b> Text processing</a></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#regular-expressions"><i class="fa fa-check"></i><b>2.1.4</b> Regular expressions</a></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.5</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.5.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#attention"><i class="fa fa-check"></i><b>2.1.5.2</b> Attention</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.5.3</b> Encoder</a></li>
<li class="chapter" data-level="2.1.5.4" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.5.4</b> Decoder</a></li>
<li class="chapter" data-level="2.1.5.5" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.5.5</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.5.6" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.5.6</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.5.7" data-path="literature-review.html"><a href="literature-review.html#mixed-modal"><i class="fa fa-check"></i><b>2.1.5.7</b> Mixed modal</a></li>
</ul></li>
<li class="chapter" data-level="2.1.6" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.6</b> Methods for LLM application</a>
<ul>
<li class="chapter" data-level="2.1.6.1" data-path="literature-review.html"><a href="literature-review.html#few-shot-learning"><i class="fa fa-check"></i><b>2.1.6.1</b> Few-shot Learning</a></li>
<li class="chapter" data-level="2.1.6.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.6.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.6.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.6.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> General machine learning and statistics</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-0.5-p"><i class="fa fa-check"></i><b>2.3</b> Summary (0.5 p)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#hypotheses"><i class="fa fa-check"></i><b>3.2.2</b> Hypotheses</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-framework"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation framework</a></li>
<li class="chapter" data-level="3.2.4" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.4</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#metrics"><i class="fa fa-check"></i><b>3.3.1</b> Metrics</a></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#approaches"><i class="fa fa-check"></i><b>3.5.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="3.5.2.1" data-path="methodology.html"><a href="methodology.html#page-identification-4"><i class="fa fa-check"></i><b>3.5.2.1</b> Page identification</a></li>
<li class="chapter" data-level="3.5.2.2" data-path="methodology.html"><a href="methodology.html#information-extraction-3"><i class="fa fa-check"></i><b>3.5.2.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#gpu-benchmark"><i class="fa fa-check"></i><b>3.5.3</b> Hardware normalization</a></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#error-analysis"><i class="fa fa-check"></i><b>3.5.4</b> Error analysis</a></li>
<li class="chapter" data-level="3.5.5" data-path="methodology.html"><a href="methodology.html#baseline-selection-rationale"><i class="fa fa-check"></i><b>3.5.5</b> Baseline selection rationale</a></li>
<li class="chapter" data-level="3.5.6" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.6</b> Evaluation methods</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#ethical-practical-considerations-eher-am-ende-oder-weg"><i class="fa fa-check"></i><b>3.6</b> Ethical &amp; Practical Considerations (eher am Ende oder weg?)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="methodology.html"><a href="methodology.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>3.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="3.6.2" data-path="methodology.html"><a href="methodology.html#computational-constraints"><i class="fa fa-check"></i><b>3.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="3.6.3" data-path="methodology.html"><a href="methodology.html#generalizability-scope"><i class="fa fa-check"></i><b>3.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="3.6.4" data-path="methodology.html"><a href="methodology.html#ethical-considerations"><i class="fa fa-check"></i><b>3.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.2</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.3</b> Software Packages</a></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.4</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#text-extraction"><i class="fa fa-check"></i><b>4.5</b> Text extraction</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.6</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-2"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#page-identification-5"><i class="fa fa-check"></i><b>6.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="discussion.html"><a href="discussion.html#general-performance-page-identification"><i class="fa fa-check"></i><b>6.1.1</b> General performance</a></li>
<li class="chapter" data-level="6.1.2" data-path="discussion.html"><a href="discussion.html#energy-usage-and-runtime-1"><i class="fa fa-check"></i><b>6.1.2</b> Energy usage and runtime</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#information-extraction-4"><i class="fa fa-check"></i><b>6.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#general-performance"><i class="fa fa-check"></i><b>6.2.1</b> General performance</a></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#company-specific-results"><i class="fa fa-check"></i><b>6.2.2</b> Company specific results</a></li>
<li class="chapter" data-level="6.2.3" data-path="discussion.html"><a href="discussion.html#error-analysis-1"><i class="fa fa-check"></i><b>6.2.3</b> Error analysis</a>
<ul>
<li class="chapter" data-level="6.2.3.1" data-path="discussion.html"><a href="discussion.html#ground-truth-creation"><i class="fa fa-check"></i><b>6.2.3.1</b> Ground truth creation</a></li>
<li class="chapter" data-level="6.2.3.2" data-path="discussion.html"><a href="discussion.html#regex-synth-backend-discussion"><i class="fa fa-check"></i><b>6.2.3.2</b> Regular expression approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-1"><i class="fa fa-check"></i><b>6.3</b> Error rate guidance</a></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#feature-effect-analysis"><i class="fa fa-check"></i><b>6.4</b> Feature effect analysis</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="discussion.html"><a href="discussion.html#general-performance-1"><i class="fa fa-check"></i><b>6.4.1</b> General performance</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary</a></li>
<li class="chapter" data-level="6.6" data-path="discussion.html"><a href="discussion.html#limitations-4"><i class="fa fa-check"></i><b>6.6</b> Limitations</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="discussion.html"><a href="discussion.html#context-rot"><i class="fa fa-check"></i><b>6.6.1</b> Context rot</a>
<ul>
<li class="chapter" data-level="6.6.1.1" data-path="discussion.html"><a href="discussion.html#page-identification-6"><i class="fa fa-check"></i><b>6.6.1.1</b> Page identification</a></li>
<li class="chapter" data-level="6.6.1.2" data-path="discussion.html"><a href="discussion.html#information-extraction-5"><i class="fa fa-check"></i><b>6.6.1.2</b> Information extraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.7</b> Not covered</a></li>
<li class="chapter" data-level="6.8" data-path="discussion.html"><a href="discussion.html#outlook"><i class="fa fa-check"></i><b>6.8</b> Outlook</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discussion.html"><a href="discussion.html#conclusion"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>8</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="8.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>8.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-5"><i class="fa fa-check"></i><b>8.2.2</b> Results</a></li>
<li class="chapter" data-level="8.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>8.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>8.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification-1"><i class="fa fa-check"></i><b>8.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>8.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>8.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="8.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-3"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html"><i class="fa fa-check"></i><b>9</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="9.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>9.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="9.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>9.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>9.2.1</b> Real tables</a></li>
<li class="chapter" data-level="9.2.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>9.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>9.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#summary-4"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html"><i class="fa fa-check"></i><b>10</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="10.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#page-identification-7"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#binary-classification-2"><i class="fa fa-check"></i><b>10.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="10.1.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#multi-class-classification-2"><i class="fa fa-check"></i><b>10.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>10.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#real-tables-3"><i class="fa fa-check"></i><b>10.2.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#synthetic-tables-3"><i class="fa fa-check"></i><b>10.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="10.2.3" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#hybrid-aproach"><i class="fa fa-check"></i><b>10.2.3</b> Hybrid aproach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html"><i class="fa fa-check"></i><b>11</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#regular-expressions-5"><i class="fa fa-check"></i><b>11.1</b> Regular expressions</a></li>
<li class="chapter" data-level="11.2" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#real-tables-4"><i class="fa fa-check"></i><b>11.2</b> Real tables</a></li>
<li class="chapter" data-level="11.3" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#synthetic-tables-4"><i class="fa fa-check"></i><b>11.3</b> Synthetic tables</a></li>
<li class="chapter" data-level="11.4" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#hybrid-approach-3"><i class="fa fa-check"></i><b>11.4</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>12</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="12.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>12.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>12.2</b> Local machine</a></li>
<li class="chapter" data-level="12.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>12.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>12.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="12.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>12.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="12.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>12.3.2.1</b> old classification with llm</a></li>
<li class="chapter" data-level="12.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo"><i class="fa fa-check"></i><b>12.3.2.2</b> yolo benchmark and table transformer</a></li>
</ul></li>
<li class="chapter" data-level="12.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>12.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>12.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>12.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="12.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>12.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>12.5</b> Regular expressions</a></li>
<li class="chapter" data-level="12.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>12.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="12.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#extraction-framework-flow-chart"><i class="fa fa-check"></i><b>12.7</b> Extraction framework flow chart</a></li>
<li class="chapter" data-level="12.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>12.8</b> Table extraction with regular expressions</a></li>
<li class="chapter" data-level="12.9" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#tf-missclassifications"><i class="fa fa-check"></i><b>12.9</b> Term frequency missclassifications</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#classification"><i class="fa fa-check"></i><b>13.1</b> Classification</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#table-extraction"><i class="fa fa-check"></i><b>13.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-4"><i class="fa fa-check"></i><b>13.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>14</b> Figures</a>
<ul>
<li class="chapter" data-level="14.1" data-path="figures.html"><a href="figures.html#page-identification-8"><i class="fa fa-check"></i><b>14.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="figures.html"><a href="figures.html#regex-baseline"><i class="fa fa-check"></i><b>14.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="14.1.2" data-path="figures.html"><a href="figures.html#toc-understanding-1"><i class="fa fa-check"></i><b>14.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="14.1.3" data-path="figures.html"><a href="figures.html#classification-1"><i class="fa fa-check"></i><b>14.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1.3.1" data-path="figures.html"><a href="figures.html#binary"><i class="fa fa-check"></i><b>14.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="14.1.3.2" data-path="figures.html"><a href="figures.html#multi-class-classification-3"><i class="fa fa-check"></i><b>14.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="figures.html"><a href="figures.html#table-extraction-1"><i class="fa fa-check"></i><b>14.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="figures.html"><a href="figures.html#regex-approach"><i class="fa fa-check"></i><b>14.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="14.2.1.1" data-path="figures.html"><a href="figures.html#real-tables-5"><i class="fa fa-check"></i><b>14.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="14.2.1.2" data-path="figures.html"><a href="figures.html#synthetic-tables-5"><i class="fa fa-check"></i><b>14.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="14.2.2" data-path="figures.html"><a href="figures.html#real-tables-6"><i class="fa fa-check"></i><b>14.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="14.2.2.1" data-path="figures.html"><a href="figures.html#examples-from-same-company"><i class="fa fa-check"></i><b>14.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="14.2.2.2" data-path="figures.html"><a href="figures.html#openai-models-1"><i class="fa fa-check"></i><b>14.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="14.2.2.3" data-path="figures.html"><a href="figures.html#comparing-input-formats-and-text-extration-libraries"><i class="fa fa-check"></i><b>14.2.2.3</b> Comparing input formats and text extration libraries</a></li>
<li class="chapter" data-level="14.2.2.4" data-path="figures.html"><a href="figures.html#hypotheses-6"><i class="fa fa-check"></i><b>14.2.2.4</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="14.2.3" data-path="figures.html"><a href="figures.html#synthetic-tables-6"><i class="fa fa-check"></i><b>14.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="14.2.3.1" data-path="figures.html"><a href="figures.html#confidence-4"><i class="fa fa-check"></i><b>14.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="14.2.4" data-path="figures.html"><a href="figures.html#hybrid-approach-5"><i class="fa fa-check"></i><b>14.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>15</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="figures" class="section level1 hasAnchor" number="14">
<h1><span class="header-section-number">14</span> Figures<a href="figures.html#figures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>NA predicting</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="figures.html#cb143-1" tabindex="-1"></a>metrics <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb143-2"><a href="figures.html#cb143-2" tabindex="-1"></a></span>
<span id="cb143-3"><a href="figures.html#cb143-3" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">29</span>) {</span>
<span id="cb143-4"><a href="figures.html#cb143-4" tabindex="-1"></a>  <span class="co"># print(i)</span></span>
<span id="cb143-5"><a href="figures.html#cb143-5" tabindex="-1"></a>  precision <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>(<span class="dv">29</span><span class="sc">-</span>i)<span class="sc">/</span><span class="dv">58</span></span>
<span id="cb143-6"><a href="figures.html#cb143-6" tabindex="-1"></a>  recall <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb143-7"><a href="figures.html#cb143-7" tabindex="-1"></a>  F1 <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">*</span>precision<span class="sc">*</span>recall<span class="sc">/</span>(precision<span class="sc">+</span>recall)</span>
<span id="cb143-8"><a href="figures.html#cb143-8" tabindex="-1"></a>  metrics[[i]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">i =</span> i, <span class="at">perc_correct_num =</span> <span class="dv">0</span>, <span class="at">F1 =</span> F1, <span class="at">perc_correct_total =</span> (<span class="dv">58-2</span><span class="sc">*</span>i)<span class="sc">/</span><span class="dv">58</span>)</span>
<span id="cb143-9"><a href="figures.html#cb143-9" tabindex="-1"></a>}</span>
<span id="cb143-10"><a href="figures.html#cb143-10" tabindex="-1"></a></span>
<span id="cb143-11"><a href="figures.html#cb143-11" tabindex="-1"></a>metrics <span class="sc">%&gt;%</span> <span class="fu">tibble</span>() <span class="sc">%&gt;%</span> <span class="fu">unnest_wider</span>(<span class="st">&quot;.&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-12"><a href="figures.html#cb143-12" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>i, <span class="at">names_to =</span> <span class="st">&quot;metric&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-13"><a href="figures.html#cb143-13" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb143-14"><a href="figures.html#cb143-14" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">2</span><span class="sc">*</span>i, <span class="at">y =</span> value, <span class="at">color =</span> metric)) <span class="sc">+</span></span>
<span id="cb143-15"><a href="figures.html#cb143-15" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">10</span>, <span class="at">linetype =</span><span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-16"><a href="figures.html#cb143-16" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> <span class="dv">40</span>, <span class="at">linetype =</span><span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb143-17"><a href="figures.html#cb143-17" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb143-18"><a href="figures.html#cb143-18" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;number of numeric values in ground truth&quot;</span>,</span>
<span id="cb143-19"><a href="figures.html#cb143-19" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;metric score&quot;</span></span>
<span id="cb143-20"><a href="figures.html#cb143-20" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:display-extraction-metrics-full-NA"></span>
<img src="_main_files/figure-html/display-extraction-metrics-full-NA-1.png" alt="Displaying the performance metrics a LLMs response would have, if all predictions are 'null'. The area between the two dashed lines shows the number of numeric values found in the real Aktiva tables." width="100%" />
<p class="caption">
Figure 14.1: Displaying the performance metrics a LLMs response would have, if all predictions are ‘null’. The area between the two dashed lines shows the number of numeric values found in the real Aktiva tables.
</p>
</div>
<div id="page-identification-8" class="section level2 hasAnchor" number="14.1">
<h2><span class="header-section-number">14.1</span> Page identification<a href="figures.html#page-identification-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="regex-baseline" class="section level3 hasAnchor" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Regex baseline<a href="figures.html#regex-baseline" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="figures.html#cb144-1" tabindex="-1"></a>metrics_plot_regex_page_identification</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:display-metrics-plot-regex-page-identification"></span>
<img src="_main_files/figure-html/display-metrics-plot-regex-page-identification-1.png" alt="Comparing page identification metrics for different regular expressions for each classification task by type of the target table." width="100%" />
<p class="caption">
Figure 14.2: Comparing page identification metrics for different regular expressions for each classification task by type of the target table.
</p>
</div>
</div>
<div id="toc-understanding-1" class="section level3 hasAnchor" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> TOC understanding<a href="figures.html#toc-understanding-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="figures.html#cb145-1" tabindex="-1"></a>balanced_df_toc_benchmark <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb145-2"><a href="figures.html#cb145-2" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">fill =</span> in_range, <span class="at">colour =</span> min_distance <span class="sc">&lt;=</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb145-3"><a href="figures.html#cb145-3" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb145-4"><a href="figures.html#cb145-4" tabindex="-1"></a>    <span class="at">data =</span> balanced_df_toc_benchmark <span class="sc">%&gt;%</span> <span class="fu">filter</span>(in_range <span class="sc">==</span> <span class="cn">TRUE</span>),</span>
<span id="cb145-5"><a href="figures.html#cb145-5" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb145-6"><a href="figures.html#cb145-6" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb145-7"><a href="figures.html#cb145-7" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.2</span>,</span>
<span id="cb145-8"><a href="figures.html#cb145-8" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb145-9"><a href="figures.html#cb145-9" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb145-10"><a href="figures.html#cb145-10" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb145-11"><a href="figures.html#cb145-11" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> type, <span class="at">label =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="dv">1</span><span class="sc">-</span>perc_correct, <span class="dv">2</span>), <span class="st">&quot;&quot;</span>)),</span>
<span id="cb145-12"><a href="figures.html#cb145-12" tabindex="-1"></a>    <span class="at">stat =</span> <span class="st">&quot;count&quot;</span>,</span>
<span id="cb145-13"><a href="figures.html#cb145-13" tabindex="-1"></a>    <span class="at">vjust =</span> <span class="fl">1.5</span>,</span>
<span id="cb145-14"><a href="figures.html#cb145-14" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;white&quot;</span></span>
<span id="cb145-15"><a href="figures.html#cb145-15" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb145-16"><a href="figures.html#cb145-16" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>benchmark_type, <span class="at">nrow =</span> <span class="dv">1</span>) <span class="co"># +</span></span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:page-identification-toc-analysis-balanced"></span>
<img src="_main_files/figure-html/page-identification-toc-analysis-balanced-1.png" alt="Comparing number of fount TOC and amount of correct and incorrect predicted page ranges" width="100%" />
<p class="caption">
Figure 14.3: Comparing number of fount TOC and amount of correct and incorrect predicted page ranges
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="figures.html#cb146-1" tabindex="-1"></a>  <span class="co"># theme(</span></span>
<span id="cb146-2"><a href="figures.html#cb146-2" tabindex="-1"></a>  <span class="co">#   legend.position = &quot;bottom&quot;</span></span>
<span id="cb146-3"><a href="figures.html#cb146-3" tabindex="-1"></a>  <span class="co"># )</span></span></code></pre></div>
</details>
</div>
<div id="classification-1" class="section level3 hasAnchor" number="14.1.3">
<h3><span class="header-section-number">14.1.3</span> Classification<a href="figures.html#classification-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="binary" class="section level4 hasAnchor" number="14.1.3.1">
<h4><span class="header-section-number">14.1.3.1</span> Binary<a href="figures.html#binary" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Binary classification F1 score over runtime limited to 60 minutes</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="figures.html#cb147-1" tabindex="-1"></a>design <span class="ot">=</span> <span class="st">&quot;</span></span>
<span id="cb147-2"><a href="figures.html#cb147-2" tabindex="-1"></a><span class="st">ABCD##X</span></span>
<span id="cb147-3"><a href="figures.html#cb147-3" tabindex="-1"></a><span class="st">EFGHI#Y</span></span>
<span id="cb147-4"><a href="figures.html#cb147-4" tabindex="-1"></a><span class="st">JKL####</span></span>
<span id="cb147-5"><a href="figures.html#cb147-5" tabindex="-1"></a><span class="st">MNOPQRS</span></span>
<span id="cb147-6"><a href="figures.html#cb147-6" tabindex="-1"></a><span class="st">TUVW###</span></span>
<span id="cb147-7"><a href="figures.html#cb147-7" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb147-8"><a href="figures.html#cb147-8" tabindex="-1"></a></span>
<span id="cb147-9"><a href="figures.html#cb147-9" tabindex="-1"></a>df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;Aktiva&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-10"><a href="figures.html#cb147-10" tabindex="-1"></a>  <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb147-11"><a href="figures.html#cb147-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_runtime =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb147-12"><a href="figures.html#cb147-12" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb147-13"><a href="figures.html#cb147-13" tabindex="-1"></a>  <span class="co"># left_join(model_letters, by = &quot;model&quot;) %&gt;%</span></span>
<span id="cb147-14"><a href="figures.html#cb147-14" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb147-15"><a href="figures.html#cb147-15" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb147-16"><a href="figures.html#cb147-16" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb147-17"><a href="figures.html#cb147-17" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb147-18"><a href="figures.html#cb147-18" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-19"><a href="figures.html#cb147-19" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb147-20"><a href="figures.html#cb147-20" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb147-21"><a href="figures.html#cb147-21" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_classification), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb147-22"><a href="figures.html#cb147-22" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-23"><a href="figures.html#cb147-23" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb147-24"><a href="figures.html#cb147-24" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb147-25"><a href="figures.html#cb147-25" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb147-26"><a href="figures.html#cb147-26" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb147-27"><a href="figures.html#cb147-27" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>) <span class="sc">+</span></span>
<span id="cb147-28"><a href="figures.html#cb147-28" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">60</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:binary-classification-performance-over-runtime"></span>
<img src="_main_files/figure-html/binary-classification-performance-over-runtime-1.png" alt="Comparing F1 score over normalized runtime for binary classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 60 minutes of runtime." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.4: Comparing F1 score over normalized runtime for binary classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 60 minutes of runtime.
</p>
</div>
<p>Binary classification F1 score over runtime unlimited</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="figures.html#cb148-1" tabindex="-1"></a>df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(classification_type <span class="sc">==</span> <span class="st">&quot;Aktiva&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb148-2"><a href="figures.html#cb148-2" tabindex="-1"></a>  <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb148-3"><a href="figures.html#cb148-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_runtime =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb148-4"><a href="figures.html#cb148-4" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb148-5"><a href="figures.html#cb148-5" tabindex="-1"></a>  <span class="co"># left_join(model_letters, by = &quot;model&quot;) %&gt;%</span></span>
<span id="cb148-6"><a href="figures.html#cb148-6" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb148-7"><a href="figures.html#cb148-7" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb148-8"><a href="figures.html#cb148-8" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb148-9"><a href="figures.html#cb148-9" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb148-10"><a href="figures.html#cb148-10" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb148-11"><a href="figures.html#cb148-11" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb148-12"><a href="figures.html#cb148-12" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb148-13"><a href="figures.html#cb148-13" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_classification), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb148-14"><a href="figures.html#cb148-14" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb148-15"><a href="figures.html#cb148-15" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb148-16"><a href="figures.html#cb148-16" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb148-17"><a href="figures.html#cb148-17" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb148-18"><a href="figures.html#cb148-18" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb148-19"><a href="figures.html#cb148-19" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:binary-classification-performance-over-runtime-full-time"></span>
<img src="_main_files/figure-html/binary-classification-performance-over-runtime-full-time-1.png" alt="Comparing F1 score over normalized runtime for binary classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.5: Comparing F1 score over normalized runtime for binary classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded.
</p>
</div>
</div>
<div id="multi-class-classification-3" class="section level4 hasAnchor" number="14.1.3.2">
<h4><span class="header-section-number">14.1.3.2</span> Multi-class classification<a href="figures.html#multi-class-classification-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Multi-class classification micro minorites F1 score over runtime limited to 60 minutes</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="figures.html#cb149-1" tabindex="-1"></a>design <span class="ot">=</span> <span class="st">&quot;</span></span>
<span id="cb149-2"><a href="figures.html#cb149-2" tabindex="-1"></a><span class="st">ABCD##X</span></span>
<span id="cb149-3"><a href="figures.html#cb149-3" tabindex="-1"></a><span class="st">EFGHI#Y</span></span>
<span id="cb149-4"><a href="figures.html#cb149-4" tabindex="-1"></a><span class="st">JKL####</span></span>
<span id="cb149-5"><a href="figures.html#cb149-5" tabindex="-1"></a><span class="st">MNOPQRS</span></span>
<span id="cb149-6"><a href="figures.html#cb149-6" tabindex="-1"></a><span class="st">TUVW###</span></span>
<span id="cb149-7"><a href="figures.html#cb149-7" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb149-8"><a href="figures.html#cb149-8" tabindex="-1"></a></span>
<span id="cb149-9"><a href="figures.html#cb149-9" tabindex="-1"></a>df_multi <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(metric_type <span class="sc">==</span> <span class="st">&quot;micro_minorities&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb149-10"><a href="figures.html#cb149-10" tabindex="-1"></a>  <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb149-11"><a href="figures.html#cb149-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_runtime =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb149-12"><a href="figures.html#cb149-12" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb149-13"><a href="figures.html#cb149-13" tabindex="-1"></a>  <span class="co"># left_join(model_letters, by = &quot;model&quot;) %&gt;%</span></span>
<span id="cb149-14"><a href="figures.html#cb149-14" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb149-15"><a href="figures.html#cb149-15" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb149-16"><a href="figures.html#cb149-16" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb149-17"><a href="figures.html#cb149-17" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb149-18"><a href="figures.html#cb149-18" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb149-19"><a href="figures.html#cb149-19" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb149-20"><a href="figures.html#cb149-20" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb149-21"><a href="figures.html#cb149-21" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_classification), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb149-22"><a href="figures.html#cb149-22" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb149-23"><a href="figures.html#cb149-23" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb149-24"><a href="figures.html#cb149-24" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb149-25"><a href="figures.html#cb149-25" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb149-26"><a href="figures.html#cb149-26" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb149-27"><a href="figures.html#cb149-27" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>) <span class="sc">+</span></span>
<span id="cb149-28"><a href="figures.html#cb149-28" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">60</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:multi-classification-performance-over-runtime"></span>
<img src="_main_files/figure-html/multi-classification-performance-over-runtime-1.png" alt="Comparing F1 score over normalized runtime for multi-class classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 60 minutes of runtime." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.6: Comparing F1 score over normalized runtime for multi-class classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 60 minutes of runtime.
</p>
</div>
<p>Multi-class classification micro minorites F1 score over runtime</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="figures.html#cb150-1" tabindex="-1"></a>design <span class="ot">=</span> <span class="st">&quot;</span></span>
<span id="cb150-2"><a href="figures.html#cb150-2" tabindex="-1"></a><span class="st">ABCD##X</span></span>
<span id="cb150-3"><a href="figures.html#cb150-3" tabindex="-1"></a><span class="st">EFGHI#Y</span></span>
<span id="cb150-4"><a href="figures.html#cb150-4" tabindex="-1"></a><span class="st">JKL####</span></span>
<span id="cb150-5"><a href="figures.html#cb150-5" tabindex="-1"></a><span class="st">MNOPQRS</span></span>
<span id="cb150-6"><a href="figures.html#cb150-6" tabindex="-1"></a><span class="st">TUVW###</span></span>
<span id="cb150-7"><a href="figures.html#cb150-7" tabindex="-1"></a><span class="st">&quot;</span></span>
<span id="cb150-8"><a href="figures.html#cb150-8" tabindex="-1"></a></span>
<span id="cb150-9"><a href="figures.html#cb150-9" tabindex="-1"></a>df_multi <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(metric_type <span class="sc">==</span> <span class="st">&quot;micro_minorities&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb150-10"><a href="figures.html#cb150-10" tabindex="-1"></a>  <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_classification) <span class="sc">%&gt;%</span> </span>
<span id="cb150-11"><a href="figures.html#cb150-11" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">norm_runtime =</span> norm_runtime<span class="sc">/</span><span class="dv">60</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb150-12"><a href="figures.html#cb150-12" tabindex="-1"></a>  <span class="fu">filter</span>(n_examples <span class="sc">&lt;=</span> <span class="dv">3</span> <span class="sc">|</span> <span class="fu">is.na</span>(n_examples)) <span class="sc">%&gt;%</span> </span>
<span id="cb150-13"><a href="figures.html#cb150-13" tabindex="-1"></a>  <span class="co"># left_join(model_letters, by = &quot;model&quot;) %&gt;%</span></span>
<span id="cb150-14"><a href="figures.html#cb150-14" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> norm_runtime, <span class="at">y =</span> f1_score)) <span class="sc">+</span></span>
<span id="cb150-15"><a href="figures.html#cb150-15" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb150-16"><a href="figures.html#cb150-16" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb150-17"><a href="figures.html#cb150-17" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb150-18"><a href="figures.html#cb150-18" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb150-19"><a href="figures.html#cb150-19" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb150-20"><a href="figures.html#cb150-20" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb150-21"><a href="figures.html#cb150-21" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_classification), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb150-22"><a href="figures.html#cb150-22" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb150-23"><a href="figures.html#cb150-23" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb150-24"><a href="figures.html#cb150-24" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb150-25"><a href="figures.html#cb150-25" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb150-26"><a href="figures.html#cb150-26" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb150-27"><a href="figures.html#cb150-27" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:multi-classification-performance-over-runtime-full-time"></span>
<img src="_main_files/figure-html/multi-classification-performance-over-runtime-full-time-1.png" alt="Comparing F1 score over normalized runtime for multi-class classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.7: Comparing F1 score over normalized runtime for multi-class classification task. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="figures.html#cb151-1" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">&quot;Llama-4-Scout-17B-16E-Instruct&quot;</span></span>
<span id="cb151-2"><a href="figures.html#cb151-2" tabindex="-1"></a>method_name <span class="ot">&lt;-</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb151-3"><a href="figures.html#cb151-3" tabindex="-1"></a></span>
<span id="cb151-4"><a href="figures.html#cb151-4" tabindex="-1"></a>df_temp_llama_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb151-5"><a href="figures.html#cb151-5" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb151-6"><a href="figures.html#cb151-6" tabindex="-1"></a>    model <span class="sc">==</span> model_name,</span>
<span id="cb151-7"><a href="figures.html#cb151-7" tabindex="-1"></a>    method <span class="sc">==</span> method_name</span>
<span id="cb151-8"><a href="figures.html#cb151-8" tabindex="-1"></a>  ) <span class="co"># %&gt;% unnest(metrics) # %&gt;% calc_micro_f1(model, method)</span></span>
<span id="cb151-9"><a href="figures.html#cb151-9" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp_llama_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb151-10"><a href="figures.html#cb151-10" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp_llama_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb151-11"><a href="figures.html#cb151-11" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp_llama_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb151-12"><a href="figures.html#cb151-12" tabindex="-1"></a></span>
<span id="cb151-13"><a href="figures.html#cb151-13" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb151-14"><a href="figures.html#cb151-14" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb151-15"><a href="figures.html#cb151-15" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model_name, <span class="st">&quot; with &quot;</span>, method_name))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:micro-pr-curve-llm-multi-llama-scout"></span>
<img src="_main_files/figure-html/micro-pr-curve-llm-multi-llama-scout-1.png" alt="Showing the precsion-recall-curve for Llama-4-Scout-17B-16E-Instruct." width="100%" />
<p class="caption">
Figure 14.8: Showing the precsion-recall-curve for Llama-4-Scout-17B-16E-Instruct.
</p>
</div>
</div>
</div>
</div>
<div id="table-extraction-1" class="section level2 hasAnchor" number="14.2">
<h2><span class="header-section-number">14.2</span> Table extraction<a href="figures.html#table-extraction-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="figures.html#cb152-1" tabindex="-1"></a>df_overview_synth <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">target_data =</span> <span class="st">&quot;synth&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="figures.html#cb152-2" tabindex="-1"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb152-3"><a href="figures.html#cb152-3" tabindex="-1"></a>    df_overview <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model <span class="sc">%in%</span> df_overview_synth<span class="sc">$</span>model) <span class="sc">%&gt;%</span> </span>
<span id="cb152-4"><a href="figures.html#cb152-4" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb152-5"><a href="figures.html#cb152-5" tabindex="-1"></a>        <span class="at">target_data =</span> <span class="st">&quot;real&quot;</span>, </span>
<span id="cb152-6"><a href="figures.html#cb152-6" tabindex="-1"></a>        <span class="at">n_examples =</span> <span class="fu">factor</span>(</span>
<span id="cb152-7"><a href="figures.html#cb152-7" tabindex="-1"></a>          n_examples, </span>
<span id="cb152-8"><a href="figures.html#cb152-8" tabindex="-1"></a>          <span class="at">levels =</span> <span class="fu">levels</span>(df_overview_synth<span class="sc">$</span>n_examples), </span>
<span id="cb152-9"><a href="figures.html#cb152-9" tabindex="-1"></a>          <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb152-10"><a href="figures.html#cb152-10" tabindex="-1"></a>          )</span>
<span id="cb152-11"><a href="figures.html#cb152-11" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>request_tokens)</span>
<span id="cb152-12"><a href="figures.html#cb152-12" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">as.numeric</span>(n_examples) <span class="sc">!=</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb152-13"><a href="figures.html#cb152-13" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb152-14"><a href="figures.html#cb152-14" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> synth_table_extraction_regex_total_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb152-15"><a href="figures.html#cb152-15" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> target_data, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb152-16"><a href="figures.html#cb152-16" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb152-17"><a href="figures.html#cb152-17" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> model_family<span class="sc">+</span>model) <span class="sc">+</span></span>
<span id="cb152-18"><a href="figures.html#cb152-18" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb152-19"><a href="figures.html#cb152-19" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb152-20"><a href="figures.html#cb152-20" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:comparing-table-extraction-performance-among-real-and-synth-aktiva-data"></span>
<img src="_main_files/figure-html/comparing-table-extraction-performance-among-real-and-synth-aktiva-data-1.png" alt="Comparing the table extraction performance among real and synthetic Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.9: Comparing the table extraction performance among real and synthetic Aktiva tables
</p>
</div>
<div id="regex-approach" class="section level3 hasAnchor" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> Regex approach<a href="figures.html#regex-approach" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="real-tables-5" class="section level4 hasAnchor" number="14.2.1.1">
<h4><span class="header-section-number">14.2.1.1</span> Real tables<a href="figures.html#real-tables-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="figures.html#cb153-1" tabindex="-1"></a>real_table_extraction_regex_shap_plot</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:real-table-extraction-regex-shap-plot"></span>
<img src="_main_files/figure-html/real-table-extraction-regex-shap-plot-1.png" alt="Mean absolute SHAP values and beeswarm plots for real table extraction with regular expression approach" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.10: Mean absolute SHAP values and beeswarm plots for real table extraction with regular expression approach
</p>
</div>
</div>
<div id="synthetic-tables-5" class="section level4 hasAnchor" number="14.2.1.2">
<h4><span class="header-section-number">14.2.1.2</span> Synthetic tables<a href="figures.html#synthetic-tables-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="figures.html#cb154-1" tabindex="-1"></a>synth_table_extraction_regex_shap_plot</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-regex-shap-plot"></span>
<img src="_main_files/figure-html/synth-table-extraction-regex-shap-plot-1.png" alt="Mean absolute SHAP values and beeswarm plots for synth table extraction with regular expression approach" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.11: Mean absolute SHAP values and beeswarm plots for synth table extraction with regular expression approach
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="figures.html#cb155-1" tabindex="-1"></a>shap_f1_extraction_backend</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-regex-dependence-plot-backend"></span>
<img src="_main_files/figure-html/synth-table-extraction-regex-dependence-plot-backend-1.png" alt="Showing the interactions of the extraction backend pdfium with the table characteristics for F1 score." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.12: Showing the interactions of the extraction backend pdfium with the table characteristics for F1 score.
</p>
</div>
</div>
</div>
<div id="real-tables-6" class="section level3 hasAnchor" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> Real tables<a href="figures.html#real-tables-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="figures.html#cb156-1" tabindex="-1"></a>design <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb156-2"><a href="figures.html#cb156-2" tabindex="-1"></a>   <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">29</span>,<span class="dv">30</span>,  </span>
<span id="cb156-3"><a href="figures.html#cb156-3" tabindex="-1"></a>   <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>,<span class="dv">10</span>,<span class="cn">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>,</span>
<span id="cb156-4"><a href="figures.html#cb156-4" tabindex="-1"></a>  <span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span>
<span id="cb156-5"><a href="figures.html#cb156-5" tabindex="-1"></a>  <span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>,<span class="dv">20</span>,<span class="cn">NA</span>,</span>
<span id="cb156-6"><a href="figures.html#cb156-6" tabindex="-1"></a>  <span class="dv">21</span>,<span class="dv">22</span>,<span class="dv">23</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">27</span>,<span class="dv">28</span></span>
<span id="cb156-7"><a href="figures.html#cb156-7" tabindex="-1"></a>  ), <span class="dv">5</span>, <span class="dv">8</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb156-8"><a href="figures.html#cb156-8" tabindex="-1"></a></span>
<span id="cb156-9"><a href="figures.html#cb156-9" tabindex="-1"></a>df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb156-10"><a href="figures.html#cb156-10" tabindex="-1"></a>  model, method, method_family, out_of_company, n_examples</span>
<span id="cb156-11"><a href="figures.html#cb156-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb156-12"><a href="figures.html#cb156-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_examples =</span> <span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb156-13"><a href="figures.html#cb156-13" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb156-14"><a href="figures.html#cb156-14" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb156-15"><a href="figures.html#cb156-15" tabindex="-1"></a>    <span class="at">mean_runtime =</span> <span class="fu">mean</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">60</span></span>
<span id="cb156-16"><a href="figures.html#cb156-16" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb156-17"><a href="figures.html#cb156-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean_runtime, <span class="at">y =</span> mean_total)) <span class="sc">+</span></span>
<span id="cb156-18"><a href="figures.html#cb156-18" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb156-19"><a href="figures.html#cb156-19" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb156-20"><a href="figures.html#cb156-20" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb156-21"><a href="figures.html#cb156-21" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb156-22"><a href="figures.html#cb156-22" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb156-23"><a href="figures.html#cb156-23" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb156-24"><a href="figures.html#cb156-24" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb156-25"><a href="figures.html#cb156-25" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb156-26"><a href="figures.html#cb156-26" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb156-27"><a href="figures.html#cb156-27" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb156-28"><a href="figures.html#cb156-28" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb156-29"><a href="figures.html#cb156-29" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb156-30"><a href="figures.html#cb156-30" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>) <span class="sc">+</span></span>
<span id="cb156-31"><a href="figures.html#cb156-31" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">5</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:real-table-extraction-performance-over-runtime"></span>
<img src="_main_files/figure-html/real-table-extraction-performance-over-runtime-1.png" alt="Comparing percentage of correct predictions total over the normalized runtime. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 5 minutes of runtime." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.13: Comparing percentage of correct predictions total over the normalized runtime. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Focussing on small models showing only 5 minutes of runtime.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="figures.html#cb157-1" tabindex="-1"></a>design <span class="ot">=</span> <span class="fu">matrix</span>(<span class="fu">c</span>(</span>
<span id="cb157-2"><a href="figures.html#cb157-2" tabindex="-1"></a>   <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="dv">29</span>,<span class="dv">30</span>,  </span>
<span id="cb157-3"><a href="figures.html#cb157-3" tabindex="-1"></a>   <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>,<span class="dv">10</span>,<span class="cn">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>,</span>
<span id="cb157-4"><a href="figures.html#cb157-4" tabindex="-1"></a>  <span class="dv">11</span>,<span class="dv">12</span>,<span class="dv">13</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,<span class="cn">NA</span>,</span>
<span id="cb157-5"><a href="figures.html#cb157-5" tabindex="-1"></a>  <span class="dv">14</span>,<span class="dv">15</span>,<span class="dv">16</span>,<span class="dv">17</span>,<span class="dv">18</span>,<span class="dv">19</span>,<span class="dv">20</span>,<span class="cn">NA</span>,</span>
<span id="cb157-6"><a href="figures.html#cb157-6" tabindex="-1"></a>  <span class="dv">21</span>,<span class="dv">22</span>,<span class="dv">23</span>,<span class="dv">24</span>,<span class="dv">25</span>,<span class="dv">26</span>,<span class="dv">27</span>,<span class="dv">28</span></span>
<span id="cb157-7"><a href="figures.html#cb157-7" tabindex="-1"></a>  ), <span class="dv">5</span>, <span class="dv">8</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb157-8"><a href="figures.html#cb157-8" tabindex="-1"></a></span>
<span id="cb157-9"><a href="figures.html#cb157-9" tabindex="-1"></a>df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb157-10"><a href="figures.html#cb157-10" tabindex="-1"></a>  model, method, method_family, out_of_company, n_examples</span>
<span id="cb157-11"><a href="figures.html#cb157-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb157-12"><a href="figures.html#cb157-12" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_examples =</span> <span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb157-13"><a href="figures.html#cb157-13" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb157-14"><a href="figures.html#cb157-14" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb157-15"><a href="figures.html#cb157-15" tabindex="-1"></a>    <span class="at">mean_runtime =</span> <span class="fu">mean</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)<span class="sc">/</span><span class="dv">60</span></span>
<span id="cb157-16"><a href="figures.html#cb157-16" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb157-17"><a href="figures.html#cb157-17" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mean_runtime, <span class="at">y =</span> mean_total)) <span class="sc">+</span></span>
<span id="cb157-18"><a href="figures.html#cb157-18" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = recall)) +</span></span>
<span id="cb157-19"><a href="figures.html#cb157-19" tabindex="-1"></a>  <span class="co"># ggplot(aes(x = norm_runtime, y = precision)) +</span></span>
<span id="cb157-20"><a href="figures.html#cb157-20" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> method_family, <span class="at">shape =</span> out_of_company), <span class="at">size =</span> <span class="dv">7</span>, <span class="at">alpha =</span> .<span class="dv">6</span>) <span class="sc">+</span></span>
<span id="cb157-21"><a href="figures.html#cb157-21" tabindex="-1"></a>  <span class="fu">scale_shape</span>(<span class="at">na.value =</span> <span class="dv">15</span>, <span class="at">guide =</span> <span class="st">&quot;legend&quot;</span>) <span class="sc">+</span></span>
<span id="cb157-22"><a href="figures.html#cb157-22" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n_examples)) <span class="sc">+</span></span>
<span id="cb157-23"><a href="figures.html#cb157-23" tabindex="-1"></a>  <span class="co"># facet_grid(classification_type~model) +</span></span>
<span id="cb157-24"><a href="figures.html#cb157-24" tabindex="-1"></a>  ggh4x<span class="sc">::</span><span class="fu">facet_manual</span>(<span class="sc">~</span><span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size), <span class="at">design =</span> design) <span class="sc">+</span></span>
<span id="cb157-25"><a href="figures.html#cb157-25" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>) <span class="sc">+</span></span>
<span id="cb157-26"><a href="figures.html#cb157-26" tabindex="-1"></a>  <span class="fu">guides</span>(</span>
<span id="cb157-27"><a href="figures.html#cb157-27" tabindex="-1"></a>    <span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>),</span>
<span id="cb157-28"><a href="figures.html#cb157-28" tabindex="-1"></a>    <span class="at">shape =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">1</span>)</span>
<span id="cb157-29"><a href="figures.html#cb157-29" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb157-30"><a href="figures.html#cb157-30" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;normalized runtime in minutes&quot;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:real-table-extraction-performance-over-runtime-full"></span>
<img src="_main_files/figure-html/real-table-extraction-performance-over-runtime-full-1.png" alt="Comparing percentage of correct predictions total over the normalized runtime. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Showing the full runtime range." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.14: Comparing percentage of correct predictions total over the normalized runtime. The normalized runtime is given in minutes of processing on a single B200. The time to load the model into the VRAM is excluded. Showing the full runtime range.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="figures.html#cb158-1" tabindex="-1"></a>df_overview <span class="sc">%&gt;%</span> </span>
<span id="cb158-2"><a href="figures.html#cb158-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb158-3"><a href="figures.html#cb158-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_total_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb158-4"><a href="figures.html#cb158-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb158-5"><a href="figures.html#cb158-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb158-6"><a href="figures.html#cb158-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb158-7"><a href="figures.html#cb158-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb158-8"><a href="figures.html#cb158-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb158-9"><a href="figures.html#cb158-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-performance-total-overview"></span>
<img src="_main_files/figure-html/table-extraction-llm-performance-total-overview-1.png" alt="Percentage of correct extracted or as missing categorized values for table extraction task on real Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.15: Percentage of correct extracted or as missing categorized values for table extraction task on real Aktiva tables
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="figures.html#cb159-1" tabindex="-1"></a>df_overview <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="figures.html#cb159-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb159-3"><a href="figures.html#cb159-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_num_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb159-4"><a href="figures.html#cb159-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_numeric, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb159-5"><a href="figures.html#cb159-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb159-6"><a href="figures.html#cb159-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb159-7"><a href="figures.html#cb159-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb159-8"><a href="figures.html#cb159-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb159-9"><a href="figures.html#cb159-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-performance-numeric-overview"></span>
<img src="_main_files/figure-html/table-extraction-llm-performance-numeric-overview-1.png" alt="Percentage of correct extracted numeric values for table extraction task on real Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.16: Percentage of correct extracted numeric values for table extraction task on real Aktiva tables
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="figures.html#cb160-1" tabindex="-1"></a>df_overview <span class="sc">%&gt;%</span> </span>
<span id="cb160-2"><a href="figures.html#cb160-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb160-3"><a href="figures.html#cb160-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb160-4"><a href="figures.html#cb160-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> NA_F1, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb160-5"><a href="figures.html#cb160-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb160-6"><a href="figures.html#cb160-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb160-7"><a href="figures.html#cb160-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb160-8"><a href="figures.html#cb160-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb160-9"><a href="figures.html#cb160-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-f1-overview"></span>
<img src="_main_files/figure-html/table-extraction-llm-f1-overview-1.png" alt="F1 score for the missing classification if a value is missing for table extraction task on real Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.17: F1 score for the missing classification if a value is missing for table extraction task on real Aktiva tables
</p>
</div>
<div id="examples-from-same-company" class="section level4 hasAnchor" number="14.2.2.1">
<h4><span class="header-section-number">14.2.2.1</span> Examples from same company<a href="figures.html#examples-from-same-company" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="figures.html#cb161-1" tabindex="-1"></a>model_selection <span class="ot">&lt;-</span> <span class="fu">c</span>(model_by_size, <span class="st">&quot;gpt-4.1-nano&quot;</span>, <span class="st">&quot;gpt-5-nano&quot;</span>, <span class="st">&quot;gpt-4.1-mini&quot;</span>, <span class="st">&quot;gpt-5-mini&quot;</span>, <span class="st">&quot;gpt-4.1&quot;</span>)</span>
<span id="cb161-2"><a href="figures.html#cb161-2" tabindex="-1"></a></span>
<span id="cb161-3"><a href="figures.html#cb161-3" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb161-4"><a href="figures.html#cb161-4" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb161-5"><a href="figures.html#cb161-5" tabindex="-1"></a>    <span class="co"># str_detect(filepath, &quot;Statistik&quot;), </span></span>
<span id="cb161-6"><a href="figures.html#cb161-6" tabindex="-1"></a>    method_family <span class="sc">==</span> <span class="st">&quot;top_n_rag_examples&quot;</span>,</span>
<span id="cb161-7"><a href="figures.html#cb161-7" tabindex="-1"></a>    n_examples <span class="sc">!=</span> <span class="dv">2</span>,</span>
<span id="cb161-8"><a href="figures.html#cb161-8" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb161-9"><a href="figures.html#cb161-9" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_selection) <span class="sc">%&gt;%</span></span>
<span id="cb161-10"><a href="figures.html#cb161-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb161-11"><a href="figures.html#cb161-11" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_selection),</span>
<span id="cb161-12"><a href="figures.html#cb161-12" tabindex="-1"></a>    <span class="at">model_family =</span> <span class="fu">factor</span>(model_family),</span>
<span id="cb161-13"><a href="figures.html#cb161-13" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb161-14"><a href="figures.html#cb161-14" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples))),</span>
<span id="cb161-15"><a href="figures.html#cb161-15" tabindex="-1"></a>    <span class="at">examples_from_same_company =</span> <span class="sc">!</span>out_of_company</span>
<span id="cb161-16"><a href="figures.html#cb161-16" tabindex="-1"></a>  )</span>
<span id="cb161-17"><a href="figures.html#cb161-17" tabindex="-1"></a></span>
<span id="cb161-18"><a href="figures.html#cb161-18" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model_family, <span class="st">&quot;Qwen&quot;</span>), model_family <span class="sc">!=</span> <span class="st">&quot;microsoft&quot;</span>, model_family <span class="sc">!=</span> <span class="st">&quot;tiiuae&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb161-19"><a href="figures.html#cb161-19" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> examples_from_same_company, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb161-20"><a href="figures.html#cb161-20" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-21"><a href="figures.html#cb161-21" tabindex="-1"></a>  <span class="co"># geom_jitter(</span></span>
<span id="cb161-22"><a href="figures.html#cb161-22" tabindex="-1"></a>  <span class="co">#   aes(x = examples_from_same_company, y = percentage_correct_total),</span></span>
<span id="cb161-23"><a href="figures.html#cb161-23" tabindex="-1"></a>  <span class="co">#   shape = 4, height = 0.005, alpha = .5</span></span>
<span id="cb161-24"><a href="figures.html#cb161-24" tabindex="-1"></a>  <span class="co">#   ) +</span></span>
<span id="cb161-25"><a href="figures.html#cb161-25" tabindex="-1"></a>  <span class="co"># scale_x_discrete(guide = guide_axis(angle = 30)) +</span></span>
<span id="cb161-26"><a href="figures.html#cb161-26" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">guide =</span> <span class="st">&quot;none&quot;</span>, <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb161-27"><a href="figures.html#cb161-27" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> model_family <span class="sc">+</span> model) <span class="sc">+</span></span>
<span id="cb161-28"><a href="figures.html#cb161-28" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb161-29"><a href="figures.html#cb161-29" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>,</span>
<span id="cb161-30"><a href="figures.html#cb161-30" tabindex="-1"></a>    <span class="co"># axis.title.x = element_blank()</span></span>
<span id="cb161-31"><a href="figures.html#cb161-31" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb161-32"><a href="figures.html#cb161-32" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb161-33"><a href="figures.html#cb161-33" tabindex="-1"></a></span>
<span id="cb161-34"><a href="figures.html#cb161-34" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb161-35"><a href="figures.html#cb161-35" tabindex="-1"></a>  <span class="fu">str_detect</span>(model_family, <span class="st">&quot;Qwen&quot;</span>) <span class="sc">|</span> model_family <span class="sc">==</span> <span class="st">&quot;microsoft&quot;</span> <span class="sc">|</span> model_family <span class="sc">==</span> <span class="st">&quot;tiiuae&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb161-36"><a href="figures.html#cb161-36" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> examples_from_same_company, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family), <span class="at">show.legend =</span> T) <span class="sc">+</span></span>
<span id="cb161-37"><a href="figures.html#cb161-37" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb161-38"><a href="figures.html#cb161-38" tabindex="-1"></a>  <span class="co"># geom_jitter(</span></span>
<span id="cb161-39"><a href="figures.html#cb161-39" tabindex="-1"></a>  <span class="co">#   aes(x = examples_from_same_company, y = percentage_correct_total),</span></span>
<span id="cb161-40"><a href="figures.html#cb161-40" tabindex="-1"></a>  <span class="co">#   shape = 4, height = 0.005, alpha = .5</span></span>
<span id="cb161-41"><a href="figures.html#cb161-41" tabindex="-1"></a>  <span class="co">#   ) +</span></span>
<span id="cb161-42"><a href="figures.html#cb161-42" tabindex="-1"></a>  <span class="co"># scale_x_discrete(guide = guide_axis(angle = 30)) +</span></span>
<span id="cb161-43"><a href="figures.html#cb161-43" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb161-44"><a href="figures.html#cb161-44" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> model_family <span class="sc">+</span> model) <span class="sc">+</span></span>
<span id="cb161-45"><a href="figures.html#cb161-45" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb161-46"><a href="figures.html#cb161-46" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb161-47"><a href="figures.html#cb161-47" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb161-48"><a href="figures.html#cb161-48" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</span>
<span id="cb161-49"><a href="figures.html#cb161-49" tabindex="-1"></a></span>
<span id="cb161-50"><a href="figures.html#cb161-50" tabindex="-1"></a>p1 <span class="sc">/</span></span>
<span id="cb161-51"><a href="figures.html#cb161-51" tabindex="-1"></a>  p2</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-performance-total-overview-out-of-company"></span>
<img src="_main_files/figure-html/table-extraction-llm-performance-total-overview-out-of-company-1.png" alt="Comparing the overall extraction performance depending on the condition if examples from the same company can be used." width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.18: Comparing the overall extraction performance depending on the condition if examples from the same company can be used.
</p>
</div>
</div>
<div id="openai-models-1" class="section level4 hasAnchor" number="14.2.2.2">
<h4><span class="header-section-number">14.2.2.2</span> OpenAI models<a href="figures.html#openai-models-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="figures.html#cb162-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> </span>
<span id="cb162-2"><a href="figures.html#cb162-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb162-3"><a href="figures.html#cb162-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_total_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb162-4"><a href="figures.html#cb162-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb162-5"><a href="figures.html#cb162-5" tabindex="-1"></a>  <span class="co"># geom_jitter(aes(x = model, y = percentage_correct_total)) +</span></span>
<span id="cb162-6"><a href="figures.html#cb162-6" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb162-7"><a href="figures.html#cb162-7" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb162-8"><a href="figures.html#cb162-8" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb162-9"><a href="figures.html#cb162-9" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb162-10"><a href="figures.html#cb162-10" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-performance-total-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-performance-total-gpt-1.png" alt="Comparing the percentage of correct predictions overall for OpenAi's LLMs with some Qwen 3 models" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.19: Comparing the percentage of correct predictions overall for OpenAi’s LLMs with some Qwen 3 models
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="figures.html#cb163-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> </span>
<span id="cb163-2"><a href="figures.html#cb163-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb163-3"><a href="figures.html#cb163-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_num_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb163-4"><a href="figures.html#cb163-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_numeric, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb163-5"><a href="figures.html#cb163-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb163-6"><a href="figures.html#cb163-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb163-7"><a href="figures.html#cb163-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb163-8"><a href="figures.html#cb163-8" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb163-9"><a href="figures.html#cb163-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-performance-numeric-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-performance-numeric-gpt-1.png" alt="Comparing the percentage of correct numeric predictions for OpenAi's LLMs with some Qwen 3 models" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.20: Comparing the percentage of correct numeric predictions for OpenAi’s LLMs with some Qwen 3 models
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="figures.html#cb164-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> </span>
<span id="cb164-2"><a href="figures.html#cb164-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NA_F1 =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(NA_F1), <span class="dv">0</span>, NA_F1)) <span class="sc">%&gt;%</span> </span>
<span id="cb164-3"><a href="figures.html#cb164-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb164-4"><a href="figures.html#cb164-4" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb164-5"><a href="figures.html#cb164-5" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> NA_F1, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb164-6"><a href="figures.html#cb164-6" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(NA_F1)), <span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> <span class="dv">0</span>), <span class="at">height =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">shape =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb164-7"><a href="figures.html#cb164-7" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb164-8"><a href="figures.html#cb164-8" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb164-9"><a href="figures.html#cb164-9" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb164-10"><a href="figures.html#cb164-10" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb164-11"><a href="figures.html#cb164-11" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-f1-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-f1-gpt-1.png" alt="Comparing the F1 score for predicting the missingness of a value for OpenAi's LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values." width="100%" height="90%" keepaspectratio />
<p class="caption">
Figure 14.21: Comparing the F1 score for predicting the missingness of a value for OpenAi’s LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values.
</p>
</div>
</div>
<div id="comparing-input-formats-and-text-extration-libraries" class="section level4 hasAnchor" number="14.2.2.3">
<h4><span class="header-section-number">14.2.2.3</span> Comparing input formats and text extration libraries<a href="figures.html#comparing-input-formats-and-text-extration-libraries" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="figures.html#cb165-1" tabindex="-1"></a>df_qwen235 <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method, extractor, input_format) <span class="sc">%&gt;%</span> </span>
<span id="cb165-2"><a href="figures.html#cb165-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb165-3"><a href="figures.html#cb165-3" tabindex="-1"></a>  <span class="fu">group_by</span>(model, extractor, input_format, filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb165-4"><a href="figures.html#cb165-4" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb165-5"><a href="figures.html#cb165-5" tabindex="-1"></a>  <span class="co"># select(model, method, extractor, input_format, mean_total, filepath) %&gt;% </span></span>
<span id="cb165-6"><a href="figures.html#cb165-6" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb165-7"><a href="figures.html#cb165-7" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> company, <span class="at">y =</span> percentage_correct_total)) <span class="sc">+</span></span>
<span id="cb165-8"><a href="figures.html#cb165-8" tabindex="-1"></a>  <span class="fu">facet_nested</span>(extractor<span class="sc">+</span>input_format<span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb165-9"><a href="figures.html#cb165-9" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>))</span></code></pre></div>
</details>
<p><img src="_main_files/figure-html/unnamed-chunk-25-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="hypotheses-6" class="section level4 hasAnchor" number="14.2.2.4">
<h4><span class="header-section-number">14.2.2.4</span> Hypotheses<a href="figures.html#hypotheses-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="figures.html#cb166-1" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb166-2"><a href="figures.html#cb166-2" tabindex="-1"></a>  real_table_extraction_llm_shap_plot[[i]] <span class="ot">&lt;-</span> real_table_extraction_llm_shap_plot[[i]] <span class="sc">+</span> <span class="fu">plot_layout</span>(<span class="at">tag_level =</span> <span class="st">&#39;new&#39;</span>)</span>
<span id="cb166-3"><a href="figures.html#cb166-3" tabindex="-1"></a>}</span>
<span id="cb166-4"><a href="figures.html#cb166-4" tabindex="-1"></a>  </span>
<span id="cb166-5"><a href="figures.html#cb166-5" tabindex="-1"></a>real_table_extraction_llm_shap_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="fu">c</span>(<span class="st">&#39;A&#39;</span>, <span class="st">&#39;1&#39;</span>), <span class="at">tag_sep =</span> <span class="st">&#39;.&#39;</span>) <span class="sc">+</span></span>
<span id="cb166-6"><a href="figures.html#cb166-6" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(</span>
<span id="cb166-7"><a href="figures.html#cb166-7" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">&#39;The surprising truth about mtcars&#39;</span>,</span>
<span id="cb166-8"><a href="figures.html#cb166-8" tabindex="-1"></a>  <span class="at">subtitle =</span> <span class="st">&#39;These 3 plots will reveal yet-untold secrets about our beloved data-set&#39;</span>,</span>
<span id="cb166-9"><a href="figures.html#cb166-9" tabindex="-1"></a>  <span class="at">caption =</span> <span class="st">&#39;Disclaimer: None of these plots are insightful&#39;</span></span>
<span id="cb166-10"><a href="figures.html#cb166-10" tabindex="-1"></a>) <span class="sc">&amp;</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">22</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:real-table-extraction-llm-shap-plot"></span>
<img src="_main_files/figure-html/real-table-extraction-llm-shap-plot-1.png" alt="Mean absolute SHAP values and beeswarm plots for real table extraction with LLMs" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.22: Mean absolute SHAP values and beeswarm plots for real table extraction with LLMs
</p>
</div>
</div>
</div>
<div id="synthetic-tables-6" class="section level3 hasAnchor" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> Synthetic tables<a href="figures.html#synthetic-tables-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="figures.html#cb167-1" tabindex="-1"></a>df_overview_synth <span class="sc">%&gt;%</span> </span>
<span id="cb167-2"><a href="figures.html#cb167-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb167-3"><a href="figures.html#cb167-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> synth_table_extraction_regex_total_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb167-4"><a href="figures.html#cb167-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_total, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb167-5"><a href="figures.html#cb167-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb167-6"><a href="figures.html#cb167-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb167-7"><a href="figures.html#cb167-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb167-8"><a href="figures.html#cb167-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb167-9"><a href="figures.html#cb167-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-llm-performance-total-overview"></span>
<img src="_main_files/figure-html/synth-table-extraction-llm-performance-total-overview-1.png" alt="Percentage of correct extracted or as missing categorized values for table extraction task on synthetic Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.23: Percentage of correct extracted or as missing categorized values for table extraction task on synthetic Aktiva tables
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="figures.html#cb168-1" tabindex="-1"></a>df_overview_synth <span class="sc">%&gt;%</span> </span>
<span id="cb168-2"><a href="figures.html#cb168-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb168-3"><a href="figures.html#cb168-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> synth_table_extraction_regex_num_performance_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb168-4"><a href="figures.html#cb168-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_numeric, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb168-5"><a href="figures.html#cb168-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb168-6"><a href="figures.html#cb168-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb168-7"><a href="figures.html#cb168-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb168-8"><a href="figures.html#cb168-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb168-9"><a href="figures.html#cb168-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-llm-performance-numeric-overview"></span>
<img src="_main_files/figure-html/synth-table-extraction-llm-performance-numeric-overview-1.png" alt="Percentage of correct extracted numeric values for table extraction task on synthetic Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.24: Percentage of correct extracted numeric values for table extraction task on synthetic Aktiva tables
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="figures.html#cb169-1" tabindex="-1"></a>df_overview_synth <span class="sc">%&gt;%</span> </span>
<span id="cb169-2"><a href="figures.html#cb169-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb169-3"><a href="figures.html#cb169-3" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> synth_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb169-4"><a href="figures.html#cb169-4" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> NA_F1, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb169-5"><a href="figures.html#cb169-5" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb169-6"><a href="figures.html#cb169-6" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb169-7"><a href="figures.html#cb169-7" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb169-8"><a href="figures.html#cb169-8" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb169-9"><a href="figures.html#cb169-9" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-llm-f1-overview"></span>
<img src="_main_files/figure-html/synth-table-extraction-llm-f1-overview-1.png" alt="F1 score for the missing classification if a value is missing for table extraction task on synthetic Aktiva tables" width="100%" height="95%" keepaspectratio />
<p class="caption">
Figure 14.25: F1 score for the missing classification if a value is missing for table extraction task on synthetic Aktiva tables
</p>
</div>
<div id="confidence-4" class="section level4 hasAnchor" number="14.2.3.1">
<h4><span class="header-section-number">14.2.3.1</span> Confidence<a href="figures.html#confidence-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="figures.html#cb170-1" tabindex="-1"></a>confidence_intervals_synth_by_format <span class="ot">&lt;-</span>  <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/confidence_intervals_synth_by_format.rds&quot;</span>)</span>
<span id="cb170-2"><a href="figures.html#cb170-2" tabindex="-1"></a></span>
<span id="cb170-3"><a href="figures.html#cb170-3" tabindex="-1"></a><span class="co"># confidence_vs_truth_synth &lt;- df_synth_table_extraction %&gt;% </span></span>
<span id="cb170-4"><a href="figures.html#cb170-4" tabindex="-1"></a><span class="co">#   # filter(method_family %in% c(&quot;top_n_rag_examples&quot;, &quot;n_random_examples&quot;)) %&gt;% </span></span>
<span id="cb170-5"><a href="figures.html#cb170-5" tabindex="-1"></a><span class="co">#   filter(model %in% c(&quot;Ministral-8B-Instruct-2410&quot;, &quot;Qwen3-8B&quot;, &quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;)) %&gt;% </span></span>
<span id="cb170-6"><a href="figures.html#cb170-6" tabindex="-1"></a><span class="co">#   group_by(method, model, loop) %&gt;% mutate(</span></span>
<span id="cb170-7"><a href="figures.html#cb170-7" tabindex="-1"></a><span class="co">#     mean_percentage_correct_total = mean(percentage_correct_total, na.rm=TRUE), .before = 1,</span></span>
<span id="cb170-8"><a href="figures.html#cb170-8" tabindex="-1"></a><span class="co">#     respect_units = !ignore_units</span></span>
<span id="cb170-9"><a href="figures.html#cb170-9" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(respect_units, model, filepath, input_format) %&gt;% </span></span>
<span id="cb170-10"><a href="figures.html#cb170-10" tabindex="-1"></a><span class="co">#   # arrange(desc(mean_percentage_correct_total)) %&gt;% </span></span>
<span id="cb170-11"><a href="figures.html#cb170-11" tabindex="-1"></a><span class="co">#   slice_max(mean_percentage_correct_total, n = 1, with_ties = FALSE) %&gt;% </span></span>
<span id="cb170-12"><a href="figures.html#cb170-12" tabindex="-1"></a><span class="co">#   mutate(predictions_processed = map(predictions, ~{</span></span>
<span id="cb170-13"><a href="figures.html#cb170-13" tabindex="-1"></a><span class="co">#     .x %&gt;% </span></span>
<span id="cb170-14"><a href="figures.html#cb170-14" tabindex="-1"></a><span class="co">#       select(-&quot;_merge&quot;) %&gt;% </span></span>
<span id="cb170-15"><a href="figures.html#cb170-15" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb170-16"><a href="figures.html#cb170-16" tabindex="-1"></a><span class="co">#         match = (year_truth == year_result) | (is.na(year_truth) &amp; is.na(year_result)),</span></span>
<span id="cb170-17"><a href="figures.html#cb170-17" tabindex="-1"></a><span class="co">#         confidence = confidence_this_year,</span></span>
<span id="cb170-18"><a href="figures.html#cb170-18" tabindex="-1"></a><span class="co">#         truth_NA = is.na(year_truth),</span></span>
<span id="cb170-19"><a href="figures.html#cb170-19" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(year_result),</span></span>
<span id="cb170-20"><a href="figures.html#cb170-20" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb170-21"><a href="figures.html#cb170-21" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb170-22"><a href="figures.html#cb170-22" tabindex="-1"></a><span class="co">#         tuple_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb170-23"><a href="figures.html#cb170-23" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb170-24"><a href="figures.html#cb170-24" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb170-25"><a href="figures.html#cb170-25" tabindex="-1"></a><span class="co">#         confidence = confidence_previous_year,</span></span>
<span id="cb170-26"><a href="figures.html#cb170-26" tabindex="-1"></a><span class="co">#         match = (previous_year_truth == previous_year_result) | (is.na(previous_year_truth) &amp; is.na(previous_year_result)),</span></span>
<span id="cb170-27"><a href="figures.html#cb170-27" tabindex="-1"></a><span class="co">#         truth_NA = is.na(previous_year_truth),</span></span>
<span id="cb170-28"><a href="figures.html#cb170-28" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(previous_year_result),</span></span>
<span id="cb170-29"><a href="figures.html#cb170-29" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb170-30"><a href="figures.html#cb170-30" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb170-31"><a href="figures.html#cb170-31" tabindex="-1"></a><span class="co">#         tuple_previous_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb170-32"><a href="figures.html#cb170-32" tabindex="-1"></a><span class="co">#       ) %&gt;% select(</span></span>
<span id="cb170-33"><a href="figures.html#cb170-33" tabindex="-1"></a><span class="co">#         -c(year_truth, previous_year_truth, year_result, previous_year_result,</span></span>
<span id="cb170-34"><a href="figures.html#cb170-34" tabindex="-1"></a><span class="co">#            confidence_this_year, confidence_previous_year)</span></span>
<span id="cb170-35"><a href="figures.html#cb170-35" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb170-36"><a href="figures.html#cb170-36" tabindex="-1"></a><span class="co">#       pivot_longer(-c(&quot;E1&quot;, &quot;E2&quot;, &quot;E3&quot;)) %&gt;% </span></span>
<span id="cb170-37"><a href="figures.html#cb170-37" tabindex="-1"></a><span class="co">#       unnest(cols = value) %&gt;% mutate(</span></span>
<span id="cb170-38"><a href="figures.html#cb170-38" tabindex="-1"></a><span class="co">#         match = if_else(is.na(match), FALSE, match)</span></span>
<span id="cb170-39"><a href="figures.html#cb170-39" tabindex="-1"></a><span class="co">#       )</span></span>
<span id="cb170-40"><a href="figures.html#cb170-40" tabindex="-1"></a><span class="co">#   })) %&gt;% </span></span>
<span id="cb170-41"><a href="figures.html#cb170-41" tabindex="-1"></a><span class="co">#   unnest(predictions_processed) %&gt;% mutate(</span></span>
<span id="cb170-42"><a href="figures.html#cb170-42" tabindex="-1"></a><span class="co">#     match = factor(match, levels = c(F, T)),</span></span>
<span id="cb170-43"><a href="figures.html#cb170-43" tabindex="-1"></a><span class="co">#     truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb170-44"><a href="figures.html#cb170-44" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb170-45"><a href="figures.html#cb170-45" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb170-46"><a href="figures.html#cb170-46" tabindex="-1"></a><span class="co"># confidence_intervals_synth &lt;- confidence_vs_truth_synth %&gt;% #rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb170-47"><a href="figures.html#cb170-47" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb170-48"><a href="figures.html#cb170-48" tabindex="-1"></a><span class="co">#     conf_interval = cut(confidence, breaks = seq(0, 1, by = 0.05), include.lowest = TRUE),</span></span>
<span id="cb170-49"><a href="figures.html#cb170-49" tabindex="-1"></a><span class="co">#     conf_center = as.numeric(sub(&quot;\\((.+),(.+)\\]&quot;, &quot;\\1&quot;, levels(conf_interval))[conf_interval]) + 0.025</span></span>
<span id="cb170-50"><a href="figures.html#cb170-50" tabindex="-1"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb170-51"><a href="figures.html#cb170-51" tabindex="-1"></a><span class="co">#   group_by(conf_center, predicted_NA, model, respect_units, input_format) %&gt;%</span></span>
<span id="cb170-52"><a href="figures.html#cb170-52" tabindex="-1"></a><span class="co">#   summarise(</span></span>
<span id="cb170-53"><a href="figures.html#cb170-53" tabindex="-1"></a><span class="co">#     n_true = sum(match == TRUE, na.rm = TRUE),</span></span>
<span id="cb170-54"><a href="figures.html#cb170-54" tabindex="-1"></a><span class="co">#     n_false = sum(match == FALSE, na.rm = TRUE),</span></span>
<span id="cb170-55"><a href="figures.html#cb170-55" tabindex="-1"></a><span class="co">#     total = n_true + n_false,</span></span>
<span id="cb170-56"><a href="figures.html#cb170-56" tabindex="-1"></a><span class="co">#     chance_false = if_else(total &gt; 0, n_false / total * 100, NA_real_),</span></span>
<span id="cb170-57"><a href="figures.html#cb170-57" tabindex="-1"></a><span class="co">#     chance_zero = chance_false == 0,</span></span>
<span id="cb170-58"><a href="figures.html#cb170-58" tabindex="-1"></a><span class="co">#     chance_below_1 = chance_false &lt; 1,</span></span>
<span id="cb170-59"><a href="figures.html#cb170-59" tabindex="-1"></a><span class="co">#     chance_low = if_else(chance_zero, 0, if_else(chance_below_1, 1, 2)),</span></span>
<span id="cb170-60"><a href="figures.html#cb170-60" tabindex="-1"></a><span class="co">#     chance_low = factor(chance_low, levels = c(0,1,2), labels = c(&quot;equls 0 %&quot;, &quot;below 1 %&quot;, &quot;more&quot;))</span></span>
<span id="cb170-61"><a href="figures.html#cb170-61" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(predicted_NA, model, respect_units) %&gt;% mutate(</span></span>
<span id="cb170-62"><a href="figures.html#cb170-62" tabindex="-1"></a><span class="co">#     perc = total/sum(total)*100</span></span>
<span id="cb170-63"><a href="figures.html#cb170-63" tabindex="-1"></a><span class="co">#   ) %&gt;% ungroup() %&gt;% </span></span>
<span id="cb170-64"><a href="figures.html#cb170-64" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb170-65"><a href="figures.html#cb170-65" tabindex="-1"></a><span class="co">#     chance_false_interval = cut(</span></span>
<span id="cb170-66"><a href="figures.html#cb170-66" tabindex="-1"></a><span class="co">#       chance_false,</span></span>
<span id="cb170-67"><a href="figures.html#cb170-67" tabindex="-1"></a><span class="co">#       breaks = c(0, 1, 2, 4, 8, 16, 32, 64, Inf),</span></span>
<span id="cb170-68"><a href="figures.html#cb170-68" tabindex="-1"></a><span class="co">#       labels = c(&quot;[0,1)&quot;, &quot;[1,2)&quot;, &quot;[2,4)&quot;, &quot;[4,8)&quot;, </span></span>
<span id="cb170-69"><a href="figures.html#cb170-69" tabindex="-1"></a><span class="co">#                  &quot;[8,16)&quot;, &quot;[16,32)&quot;, &quot;[32,64)&quot;, &quot;[64,Inf)&quot;),</span></span>
<span id="cb170-70"><a href="figures.html#cb170-70" tabindex="-1"></a><span class="co">#       right = FALSE,</span></span>
<span id="cb170-71"><a href="figures.html#cb170-71" tabindex="-1"></a><span class="co">#       ordered_result = TRUE</span></span>
<span id="cb170-72"><a href="figures.html#cb170-72" tabindex="-1"></a><span class="co">#     ),</span></span>
<span id="cb170-73"><a href="figures.html#cb170-73" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb170-74"><a href="figures.html#cb170-74" tabindex="-1"></a></span>
<span id="cb170-75"><a href="figures.html#cb170-75" tabindex="-1"></a>confidence_intervals_synth_by_format <span class="sc">%&gt;%</span></span>
<span id="cb170-76"><a href="figures.html#cb170-76" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb170-77"><a href="figures.html#cb170-77" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(</span>
<span id="cb170-78"><a href="figures.html#cb170-78" tabindex="-1"></a>    <span class="at">x =</span> conf_center, <span class="at">y =</span> perc, </span>
<span id="cb170-79"><a href="figures.html#cb170-79" tabindex="-1"></a>    <span class="at">color =</span> chance_low, </span>
<span id="cb170-80"><a href="figures.html#cb170-80" tabindex="-1"></a>    <span class="at">fill =</span> chance_false_interval</span>
<span id="cb170-81"><a href="figures.html#cb170-81" tabindex="-1"></a>  ), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb170-82"><a href="figures.html#cb170-82" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb170-83"><a href="figures.html#cb170-83" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb170-84"><a href="figures.html#cb170-84" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb170-85"><a href="figures.html#cb170-85" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb170-86"><a href="figures.html#cb170-86" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb170-87"><a href="figures.html#cb170-87" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;below 1 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;more&quot;</span> <span class="ot">=</span> <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb170-88"><a href="figures.html#cb170-88" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb170-89"><a href="figures.html#cb170-89" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb170-90"><a href="figures.html#cb170-90" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb170-91"><a href="figures.html#cb170-91" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb170-92"><a href="figures.html#cb170-92" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb170-93"><a href="figures.html#cb170-93" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb170-94"><a href="figures.html#cb170-94" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb170-95"><a href="figures.html#cb170-95" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb170-96"><a href="figures.html#cb170-96" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb170-97"><a href="figures.html#cb170-97" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="fu">paste</span>(<span class="st">&quot;respect units:&quot;</span>, respect_units)<span class="sc">+</span><span class="fu">paste</span>(<span class="st">&quot;predicted NA:&quot;</span>, predicted_NA) <span class="sc">~</span> model<span class="sc">+</span>input_format)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-confidence-lm-synth-grouped-by-input-format"></span>
<img src="_main_files/figure-html/table-extraction-llm-confidence-lm-synth-grouped-by-input-format-1.png" alt="Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions for the synthetic table extraction task. Additionally grouped by input format." width="100%" />
<p class="caption">
Figure 14.26: Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions for the synthetic table extraction task. Additionally grouped by input format.
</p>
</div>
</div>
</div>
<div id="hybrid-approach-5" class="section level3 hasAnchor" number="14.2.4">
<h3><span class="header-section-number">14.2.4</span> Hybrid approach<a href="figures.html#hybrid-approach-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="figures.html#cb171-1" tabindex="-1"></a><span class="fu">bind_rows</span>(</span>
<span id="cb171-2"><a href="figures.html#cb171-2" tabindex="-1"></a>  df_real_table_extraction_synth <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">context =</span> <span class="st">&quot;synth&quot;</span>), </span>
<span id="cb171-3"><a href="figures.html#cb171-3" tabindex="-1"></a>  df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">context =</span> <span class="st">&quot;real&quot;</span>)</span>
<span id="cb171-4"><a href="figures.html#cb171-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb171-5"><a href="figures.html#cb171-5" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> best_models_with_examples<span class="sc">$</span>model) <span class="sc">%&gt;%</span> </span>
<span id="cb171-6"><a href="figures.html#cb171-6" tabindex="-1"></a>  <span class="fu">filter</span>(method_family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb171-7"><a href="figures.html#cb171-7" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb171-8"><a href="figures.html#cb171-8" tabindex="-1"></a>    <span class="co"># model = factor(model, levels = model_by_size),</span></span>
<span id="cb171-9"><a href="figures.html#cb171-9" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb171-10"><a href="figures.html#cb171-10" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb171-11"><a href="figures.html#cb171-11" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb171-12"><a href="figures.html#cb171-12" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb171-13"><a href="figures.html#cb171-13" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">fill=</span>context, <span class="at">y =</span> percentage_correct_total), <span class="at">alpha =</span> .<span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb171-14"><a href="figures.html#cb171-14" tabindex="-1"></a>  <span class="co"># scale_fill_manual(values = c(&quot;blue&quot;, &quot;orange&quot;)) +</span></span>
<span id="cb171-15"><a href="figures.html#cb171-15" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb171-16"><a href="figures.html#cb171-16" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family<span class="sc">+</span>n_examples<span class="sc">~</span>model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:compare-real-table-extraction-by-context-type"></span>
<img src="_main_files/figure-html/compare-real-table-extraction-by-context-type-1.png" alt="Comparing table extraction perfromance for real Aktiva extraction task with synthetic and real examples for in-context learning" width="100%" />
<p class="caption">
Figure 14.27: Comparing table extraction perfromance for real Aktiva extraction task with synthetic and real examples for in-context learning
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="figures.html#cb172-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="figures.html#cb172-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb172-3"><a href="figures.html#cb172-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">fill=</span>respect_units, <span class="at">y =</span> percentage_correct_total), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb172-4"><a href="figures.html#cb172-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb172-5"><a href="figures.html#cb172-5" tabindex="-1"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_col_T_EUR <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb172-6"><a href="figures.html#cb172-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">group=</span>respect_units, <span class="at">color =</span> <span class="fu">factor</span>(n_col_T_EUR), <span class="at">y =</span> percentage_correct_total), </span>
<span id="cb172-7"><a href="figures.html#cb172-7" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">0</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">width =</span> <span class="fl">0.3</span></span>
<span id="cb172-8"><a href="figures.html#cb172-8" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb172-9"><a href="figures.html#cb172-9" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb172-10"><a href="figures.html#cb172-10" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb172-11"><a href="figures.html#cb172-11" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family<span class="sc">+</span>n_examples<span class="sc">~</span>model<span class="sc">+</span>respect_units) <span class="sc">+</span></span>
<span id="cb172-12"><a href="figures.html#cb172-12" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb172-13"><a href="figures.html#cb172-13" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb172-14"><a href="figures.html#cb172-14" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:compare-effect-of-respecting-units-on-overall-performance"></span>
<img src="_main_files/figure-html/compare-effect-of-respecting-units-on-overall-performance-1.png" alt="Comparing the effect on overall perfrormance if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units." width="100%" />
<p class="caption">
Figure 14.28: Comparing the effect on overall perfrormance if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="figures.html#cb173-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb173-2"><a href="figures.html#cb173-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb173-3"><a href="figures.html#cb173-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">fill=</span>respect_units, <span class="at">y =</span> percentage_correct_numeric), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb173-4"><a href="figures.html#cb173-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb173-5"><a href="figures.html#cb173-5" tabindex="-1"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_col_T_EUR <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb173-6"><a href="figures.html#cb173-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">group=</span>respect_units, <span class="at">color =</span> <span class="fu">factor</span>(n_col_T_EUR), <span class="at">y =</span> percentage_correct_numeric), </span>
<span id="cb173-7"><a href="figures.html#cb173-7" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">0</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">width =</span> <span class="fl">0.3</span></span>
<span id="cb173-8"><a href="figures.html#cb173-8" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb173-9"><a href="figures.html#cb173-9" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb173-10"><a href="figures.html#cb173-10" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb173-11"><a href="figures.html#cb173-11" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family<span class="sc">+</span>n_examples<span class="sc">~</span>model<span class="sc">+</span>respect_units) <span class="sc">+</span></span>
<span id="cb173-12"><a href="figures.html#cb173-12" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb173-13"><a href="figures.html#cb173-13" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb173-14"><a href="figures.html#cb173-14" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:compare-effect-of-respecting-units-on-numeric-performance"></span>
<img src="_main_files/figure-html/compare-effect-of-respecting-units-on-numeric-performance-1.png" alt="Comparing the effect on numeric perfrormance if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units." width="100%" />
<p class="caption">
Figure 14.29: Comparing the effect on numeric perfrormance if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="figures.html#cb174-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb174-2"><a href="figures.html#cb174-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb174-3"><a href="figures.html#cb174-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">fill=</span>respect_units, <span class="at">y =</span> NA_F1), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb174-4"><a href="figures.html#cb174-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(</span>
<span id="cb174-5"><a href="figures.html#cb174-5" tabindex="-1"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_col_T_EUR <span class="sc">&gt;</span> <span class="dv">0</span>), </span>
<span id="cb174-6"><a href="figures.html#cb174-6" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">group=</span>respect_units, <span class="at">color =</span> <span class="fu">factor</span>(n_col_T_EUR), <span class="at">y =</span> NA_F1), </span>
<span id="cb174-7"><a href="figures.html#cb174-7" tabindex="-1"></a>    <span class="at">height =</span> <span class="dv">0</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">width =</span> <span class="fl">0.3</span></span>
<span id="cb174-8"><a href="figures.html#cb174-8" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb174-9"><a href="figures.html#cb174-9" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb174-10"><a href="figures.html#cb174-10" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb174-11"><a href="figures.html#cb174-11" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family<span class="sc">+</span>n_examples<span class="sc">~</span>model<span class="sc">+</span>respect_units) <span class="sc">+</span></span>
<span id="cb174-12"><a href="figures.html#cb174-12" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb174-13"><a href="figures.html#cb174-13" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb174-14"><a href="figures.html#cb174-14" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:compare-effect-of-respecting-units-on-NA-F1"></span>
<img src="_main_files/figure-html/compare-effect-of-respecting-units-on-NA-F1-1.png" alt="Comparing the effect on NA F1 score if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units." width="100%" />
<p class="caption">
Figure 14.30: Comparing the effect on NA F1 score if currency units should be respected on all predictions and specifically on predictions where all or just some columns have units.
</p>
</div>
<p>real_table_extraction_llm_synth_context_shap_plot</p>

</div>
</div>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = '⟨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next ⟩';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="tables.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="layout-testing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
