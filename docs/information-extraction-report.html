<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Appendix B - Information extraction report | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon SchÃ¤fer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="page-identification-report.html"/>
<link rel="next" href="error-guidance-report.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./index.html"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#computer-science"><i class="fa fa-check"></i><b>2.1</b> Computer science</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#sparse-retrieval"><i class="fa fa-check"></i><b>2.1.1</b> Information retrieval</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#nlp"><i class="fa fa-check"></i><b>2.1.2</b> Natural language processing</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.3</b> Text processing</a>
<ul>
<li class="chapter" data-level="2.1.3.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis"><i class="fa fa-check"></i><b>2.1.3.1</b> Document Layout Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.4</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.4.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.4.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.4.2" data-path="literature-review.html"><a href="literature-review.html#attention"><i class="fa fa-check"></i><b>2.1.4.2</b> Attention</a></li>
<li class="chapter" data-level="2.1.4.3" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.4.3</b> Encoder</a></li>
<li class="chapter" data-level="2.1.4.4" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.4.4</b> Decoder</a></li>
<li class="chapter" data-level="2.1.4.5" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.4.5</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.4.6" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.4.6</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.4.7" data-path="literature-review.html"><a href="literature-review.html#confidence-scores"><i class="fa fa-check"></i><b>2.1.4.7</b> Confidence scores</a></li>
</ul></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.5</b> Generation enhancing methods with LLMs</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#in-context-learning"><i class="fa fa-check"></i><b>2.1.5.1</b> In-context Learning</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.5.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.5.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> General machine learning and statistics</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#hypotheses"><i class="fa fa-check"></i><b>3.2.2</b> Hypotheses</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#evaluation-framework-and-metrics"><i class="fa fa-check"></i><b>3.3.1</b> Evaluation framework and metrics</a>
<ul>
<li class="chapter" data-level="3.3.1.1" data-path="methodology.html"><a href="methodology.html#page-identification"><i class="fa fa-check"></i><b>3.3.1.1</b> Page identification</a></li>
<li class="chapter" data-level="3.3.1.2" data-path="methodology.html"><a href="methodology.html#information-extraction"><i class="fa fa-check"></i><b>3.3.1.2</b> Information extraction</a></li>
<li class="chapter" data-level="3.3.1.3" data-path="methodology.html"><a href="methodology.html#error-rate-guidance"><i class="fa fa-check"></i><b>3.3.1.3</b> Error rate guidance</a></li>
</ul></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#approaches"><i class="fa fa-check"></i><b>3.5.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="3.5.2.1" data-path="methodology.html"><a href="methodology.html#page-identification-2"><i class="fa fa-check"></i><b>3.5.2.1</b> Page identification</a></li>
<li class="chapter" data-level="3.5.2.2" data-path="methodology.html"><a href="methodology.html#information-extraction-2"><i class="fa fa-check"></i><b>3.5.2.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#error-analysis-methodology"><i class="fa fa-check"></i><b>3.5.3</b> Error analysis</a>
<ul>
<li class="chapter" data-level="3.5.3.1" data-path="methodology.html"><a href="methodology.html#page-identificaion"><i class="fa fa-check"></i><b>3.5.3.1</b> Page identificaion</a></li>
<li class="chapter" data-level="3.5.3.2" data-path="methodology.html"><a href="methodology.html#inforamtion-extraction"><i class="fa fa-check"></i><b>3.5.3.2</b> Inforamtion extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.4</b> Evaluation methods</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.2</b> Software Packages</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#ground-truth-datasets"><i class="fa fa-check"></i><b>4.3</b> Ground truth datasets</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="implementation.html"><a href="implementation.html#ground-truth-creation"><i class="fa fa-check"></i><b>4.3.1</b> Ground truth creation</a></li>
<li class="chapter" data-level="4.3.2" data-path="implementation.html"><a href="implementation.html#ground-truth-database-composition"><i class="fa fa-check"></i><b>4.3.2</b> Ground truth database composition</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.4</b> Data processing</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.5</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.6</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.7" data-path="implementation.html"><a href="implementation.html#gpu-benchmark"><i class="fa fa-check"></i><b>4.7</b> Hardware normalization</a></li>
<li class="chapter" data-level="4.8" data-path="implementation.html"><a href="implementation.html#summary-2"><i class="fa fa-check"></i><b>4.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-2"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#answer-research-questions"><i class="fa fa-check"></i><b>6.1</b> Research questions</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="discussion.html"><a href="discussion.html#page-identification-5"><i class="fa fa-check"></i><b>6.1.1</b> Page identification</a></li>
<li class="chapter" data-level="6.1.2" data-path="discussion.html"><a href="discussion.html#information-extraction-4"><i class="fa fa-check"></i><b>6.1.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.1.2.1" data-path="discussion.html"><a href="discussion.html#extraction-performace-hypotheses-evaluation"><i class="fa fa-check"></i><b>6.1.2.1</b> Core capabilities</a></li>
<li class="chapter" data-level="6.1.2.2" data-path="discussion.html"><a href="discussion.html#extraction-performace-predictor-hypotheses-evaluation"><i class="fa fa-check"></i><b>6.1.2.2</b> Feature effects</a></li>
<li class="chapter" data-level="6.1.2.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-1"><i class="fa fa-check"></i><b>6.1.2.3</b> Error rate guidance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#error-analysis"><i class="fa fa-check"></i><b>6.2</b> Error analysis</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#page-identification-6"><i class="fa fa-check"></i><b>6.2.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.2.1.1" data-path="discussion.html"><a href="discussion.html#llm-approach"><i class="fa fa-check"></i><b>6.2.1.1</b> LLM approach</a></li>
<li class="chapter" data-level="6.2.1.2" data-path="discussion.html"><a href="discussion.html#error-analysis-tf"><i class="fa fa-check"></i><b>6.2.1.2</b> Term frequency approach</a></li>
</ul></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#information-extraction-5"><i class="fa fa-check"></i><b>6.2.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.2.2.1" data-path="discussion.html"><a href="discussion.html#real-tables-3"><i class="fa fa-check"></i><b>6.2.2.1</b> Real tables</a></li>
<li class="chapter" data-level="6.2.2.2" data-path="discussion.html"><a href="discussion.html#same-company-evaluation"><i class="fa fa-check"></i><b>6.2.2.2</b> Company specific results</a></li>
<li class="chapter" data-level="6.2.2.3" data-path="discussion.html"><a href="discussion.html#synthetic-tables-3"><i class="fa fa-check"></i><b>6.2.2.3</b> Synthetic tables</a></li>
<li class="chapter" data-level="6.2.2.4" data-path="discussion.html"><a href="discussion.html#numeric-transformation-discussion"><i class="fa fa-check"></i><b>6.2.2.4</b> Numeric transformations</a></li>
<li class="chapter" data-level="6.2.2.5" data-path="discussion.html"><a href="discussion.html#regex-synth-backend-discussion"><i class="fa fa-check"></i><b>6.2.2.5</b> Regular expression approach</a></li>
<li class="chapter" data-level="6.2.2.6" data-path="discussion.html"><a href="discussion.html#openai-discussion"><i class="fa fa-check"></i><b>6.2.2.6</b> OpenAI models</a></li>
</ul></li>
<li class="chapter" data-level="6.2.3" data-path="discussion.html"><a href="discussion.html#unconsistent-label-matching"><i class="fa fa-check"></i><b>6.2.3</b> Ground truth creation</a></li>
<li class="chapter" data-level="6.2.4" data-path="discussion.html"><a href="discussion.html#context-rot"><i class="fa fa-check"></i><b>6.2.4</b> Context rot</a>
<ul>
<li class="chapter" data-level="6.2.4.1" data-path="discussion.html"><a href="discussion.html#page-identification-7"><i class="fa fa-check"></i><b>6.2.4.1</b> Page identification</a></li>
<li class="chapter" data-level="6.2.4.2" data-path="discussion.html"><a href="discussion.html#information-extraction-6"><i class="fa fa-check"></i><b>6.2.4.2</b> Information extraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#general-performance"><i class="fa fa-check"></i><b>6.3</b> Practical Implications and Limitations</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="discussion.html"><a href="discussion.html#page-identification-8"><i class="fa fa-check"></i><b>6.3.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.3.1.1" data-path="discussion.html"><a href="discussion.html#transfering-the-system-to-new-problems"><i class="fa fa-check"></i><b>6.3.1.1</b> Transfering the system to new problems</a></li>
<li class="chapter" data-level="6.3.1.2" data-path="discussion.html"><a href="discussion.html#limitations-of-transfer"><i class="fa fa-check"></i><b>6.3.1.2</b> Limitations of transfer</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="discussion.html"><a href="discussion.html#toc-discussion"><i class="fa fa-check"></i><b>6.3.1.3</b> Possible improvement</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="discussion.html"><a href="discussion.html#conclusion-4"><i class="fa fa-check"></i><b>6.3.1.4</b> Conclusion</a></li>
<li class="chapter" data-level="6.3.1.5" data-path="discussion.html"><a href="discussion.html#efficency-discussion"><i class="fa fa-check"></i><b>6.3.1.5</b> Energy usage and runtime</a></li>
</ul></li>
<li class="chapter" data-level="6.3.2" data-path="discussion.html"><a href="discussion.html#alternative-input-formats-extraction"><i class="fa fa-check"></i><b>6.3.2</b> Information extraction</a></li>
<li class="chapter" data-level="6.3.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-2"><i class="fa fa-check"></i><b>6.3.3</b> Error rate guidance</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.4</b> Not covered</a></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#outlook-implementation"><i class="fa fa-check"></i><b>6.5</b> Outlook</a></li>
<li class="chapter" data-level="6.6" data-path="discussion.html"><a href="discussion.html#ethics"><i class="fa fa-check"></i><b>6.6</b> Ethical &amp; Practical Considerations</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="discussion.html"><a href="discussion.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>6.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="6.6.2" data-path="discussion.html"><a href="discussion.html#computational-constraints"><i class="fa fa-check"></i><b>6.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="6.6.3" data-path="discussion.html"><a href="discussion.html#generalizability-scope"><i class="fa fa-check"></i><b>6.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="6.6.4" data-path="discussion.html"><a href="discussion.html#ethical-considerations"><i class="fa fa-check"></i><b>6.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discussion.html"><a href="discussion.html#conclusion"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>8</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="8.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>8.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-5"><i class="fa fa-check"></i><b>8.2.2</b> Results</a>
<ul>
<li class="chapter" data-level="8.2.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#comparison-of-the-different-approaches"><i class="fa fa-check"></i><b>8.2.2.1</b> Comparison of the different approaches</a></li>
</ul></li>
<li class="chapter" data-level="8.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>8.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>8.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification-1"><i class="fa fa-check"></i><b>8.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>8.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>8.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="8.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-4"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="information-extraction-report.html"><a href="information-extraction-report.html"><i class="fa fa-check"></i><b>9</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="9.1" data-path="information-extraction-report.html"><a href="information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>9.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="9.2" data-path="information-extraction-report.html"><a href="information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>9.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="information-extraction-report.html"><a href="information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>9.2.1</b> Real tables</a></li>
<li class="chapter" data-level="9.2.2" data-path="information-extraction-report.html"><a href="information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>9.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="information-extraction-report.html"><a href="information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>9.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="information-extraction-report.html"><a href="information-extraction-report.html#summary-5"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="error-guidance-report.html"><a href="error-guidance-report.html"><i class="fa fa-check"></i><b>10</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="10.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#page-identification-9"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#binary-classification-2"><i class="fa fa-check"></i><b>10.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="10.1.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#multi-class-classification-2"><i class="fa fa-check"></i><b>10.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>10.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#real-tables-4"><i class="fa fa-check"></i><b>10.2.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#synthetic-tables-4"><i class="fa fa-check"></i><b>10.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="10.2.3" data-path="error-guidance-report.html"><a href="error-guidance-report.html#hybrid-respect-units"><i class="fa fa-check"></i><b>10.2.3</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html"><i class="fa fa-check"></i><b>11</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#regular-expressions-4"><i class="fa fa-check"></i><b>11.1</b> Regular expressions</a></li>
<li class="chapter" data-level="11.2" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#real-tables-5"><i class="fa fa-check"></i><b>11.2</b> Real tables</a></li>
<li class="chapter" data-level="11.3" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#synthetic-tables-5"><i class="fa fa-check"></i><b>11.3</b> Synthetic tables</a></li>
<li class="chapter" data-level="11.4" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#hybrid-approach-3"><i class="fa fa-check"></i><b>11.4</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>12</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="12.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>12.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>12.2</b> Local machine</a></li>
<li class="chapter" data-level="12.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>12.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>12.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="12.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>12.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="12.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>12.3.2.1</b> old classification with llm</a></li>
<li class="chapter" data-level="12.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo"><i class="fa fa-check"></i><b>12.3.2.2</b> yolo benchmark and table transformer</a></li>
</ul></li>
<li class="chapter" data-level="12.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>12.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>12.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>12.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="12.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>12.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>12.5</b> Regular expressions</a></li>
<li class="chapter" data-level="12.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>12.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="12.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>12.7</b> Table extraction with regular expressions</a></li>
<li class="chapter" data-level="12.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#tf-missclassifications"><i class="fa fa-check"></i><b>12.8</b> Term frequency missclassifications</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#classification"><i class="fa fa-check"></i><b>13.1</b> Classification</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#table-extraction"><i class="fa fa-check"></i><b>13.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-4"><i class="fa fa-check"></i><b>13.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="figure-collection.html"><a href="figure-collection.html"><i class="fa fa-check"></i><b>14</b> Figures</a>
<ul>
<li class="chapter" data-level="14.1" data-path="figure-collection.html"><a href="figure-collection.html#page-identification-10"><i class="fa fa-check"></i><b>14.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="figure-collection.html"><a href="figure-collection.html#regex-baseline"><i class="fa fa-check"></i><b>14.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="14.1.2" data-path="figure-collection.html"><a href="figure-collection.html#toc-understanding-1"><i class="fa fa-check"></i><b>14.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="14.1.3" data-path="figure-collection.html"><a href="figure-collection.html#classification-1"><i class="fa fa-check"></i><b>14.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1.3.1" data-path="figure-collection.html"><a href="figure-collection.html#binary"><i class="fa fa-check"></i><b>14.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="14.1.3.2" data-path="figure-collection.html"><a href="figure-collection.html#multi-class-classification-3"><i class="fa fa-check"></i><b>14.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="figure-collection.html"><a href="figure-collection.html#table-extraction-1"><i class="fa fa-check"></i><b>14.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="figure-collection.html"><a href="figure-collection.html#regex-approach"><i class="fa fa-check"></i><b>14.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="14.2.1.1" data-path="figure-collection.html"><a href="figure-collection.html#real-tables-6"><i class="fa fa-check"></i><b>14.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="14.2.1.2" data-path="figure-collection.html"><a href="figure-collection.html#synthetic-tables-6"><i class="fa fa-check"></i><b>14.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="14.2.2" data-path="figure-collection.html"><a href="figure-collection.html#real-tables-7"><i class="fa fa-check"></i><b>14.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="14.2.2.1" data-path="figure-collection.html"><a href="figure-collection.html#examples-from-same-company"><i class="fa fa-check"></i><b>14.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="14.2.2.2" data-path="figure-collection.html"><a href="figure-collection.html#openai-models-1"><i class="fa fa-check"></i><b>14.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="14.2.2.3" data-path="figure-collection.html"><a href="figure-collection.html#comparing-input-formats-and-text-extration-libraries"><i class="fa fa-check"></i><b>14.2.2.3</b> Comparing input formats and text extration libraries</a></li>
<li class="chapter" data-level="14.2.2.4" data-path="figure-collection.html"><a href="figure-collection.html#hypotheses-6"><i class="fa fa-check"></i><b>14.2.2.4</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="14.2.3" data-path="figure-collection.html"><a href="figure-collection.html#synthetic-tables-7"><i class="fa fa-check"></i><b>14.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="14.2.3.1" data-path="figure-collection.html"><a href="figure-collection.html#confidence-4"><i class="fa fa-check"></i><b>14.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="14.2.4" data-path="figure-collection.html"><a href="figure-collection.html#hybrid-approach-5"><i class="fa fa-check"></i><b>14.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>15</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="information-extraction-report" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">9</span> Appendix B - Information extraction report<a href="information-extraction-report.html#information-extraction-report" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The second research question asks, how <a href="glossary.html#acronyms_LLM">LLM</a>s can be used, to effectively extract specific information from a financial report. The task for this thesis is to extract the numeric values for the assets (<em>Aktiva</em>) table, which is part of the balance sheet (<em>Bilanz</em>). Hereafter, the German term <strong>Aktiva</strong> will be used. We are limiting the scope even further than in Subsection <a href="results.html#page-identification-introduction">5.1</a>, because it takes more time to manually create the first reference dataset.</p>
<div id="baseline-regex" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Baseline: Regex<a href="information-extraction-report.html#baseline-regex" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The baseline for the table extraction task is set by an approach using regular expressions on the text extract. Figure <a href="information-extraction-report.html#fig:table-extraction-regex-performance">9.1</a> shows the performance of this approach. In the first row (A) the percentage of correct predicted numeric values and the percentage of total correct responses is shown. The second row (B) shows the precision, recall and F1 score for identifying a value as missing and thus predicting <em>null</em>. The percentage of total correct responses is calculated as</p>
<p><span class="math display">\[
percentage\_correct\_total = \frac{n_{correct\_numeric} + n_{missing\_true\_positive}}{n_{total\_entries}}
\]</span></p>
<p>with <span class="math inline">\(n_{total\_entries} = 58\)</span> . This implies that the correct prediction of missing values has more influence for tables, that have only a few numeric values in the ground truth. The minimal number of numeric values in a tables is ten. Figure <a href="figure-collection.html#fig:display-extraction-metrics-full-NA">14.1</a> shows, that the percentage of total correct responses is not a sufficient metric, because responses that only predicted <em>null</em> can have a high score if there are only a few numeric values in the ground truth table.</p>
<div id="performance-1" class="section level5 hasAnchor paragraph-start" number="9.1.0.0.1">
<h5><span class="header-section-number">9.1.0.0.1</span> Performance<a href="information-extraction-report.html#performance-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>In each frame there are two groups of two box-plots. The left group is showing the performance on real <strong>Aktiva</strong> tables. The right group shows the performance on synthetic <strong>Aktiva</strong> tables. Within the group the green (left) box shows the performance on text extracted with the <em>pdfium</em> library. The peach colored (right) box shows the performance on text extracted with the <em>pymupdf</em> library.</p>
</div>
<p>Figure <a href="information-extraction-report.html#fig:table-extraction-regex-performance">9.1</a> shows, that the <a href="glossary.html#acronyms_regex">regex</a> approach performs better<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a> on the synthetic tables compared to the real tables. Even though, the performance is not perfect and more consistent on the text extracted with <em>pymupdf</em> compared to <em>pdfium</em>. In contrast, the used text extraction library has no noticeable influence on the real <strong>Aktiva</strong> tables.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="information-extraction-report.html#cb56-1" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> df_table_extraction_regex <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="information-extraction-report.html#cb56-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">c</span>(table_type, percentage_correct_numeric, percentage_correct_total, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="information-extraction-report.html#cb56-3" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(table_type, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="information-extraction-report.html#cb56-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-5"><a href="information-extraction-report.html#cb56-5" tabindex="-1"></a>  <span class="co"># geom_point(</span></span>
<span id="cb56-6"><a href="information-extraction-report.html#cb56-6" tabindex="-1"></a>  <span class="co">#   data= . %&gt;% filter(table_type == &quot;real_tables&quot;, name == &quot;percentage_correct_numeric&quot;),</span></span>
<span id="cb56-7"><a href="information-extraction-report.html#cb56-7" tabindex="-1"></a>  <span class="co">#   aes(x = table_type, y = value, alpha = extraction_backend), color = &quot;#264DEB&quot;,</span></span>
<span id="cb56-8"><a href="information-extraction-report.html#cb56-8" tabindex="-1"></a>  <span class="co">#   shape = 4, position=position_jitterdodge(dodge.width=0.9, jitter.width = 0.2, jitter.height = 0.005)</span></span>
<span id="cb56-9"><a href="information-extraction-report.html#cb56-9" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb56-10"><a href="information-extraction-report.html#cb56-10" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> table_type, <span class="at">y =</span> value, <span class="at">fill =</span> extraction_backend), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb56-11"><a href="information-extraction-report.html#cb56-11" tabindex="-1"></a>  <span class="co"># geom_jitter(data= . %&gt;% filter(table_type == &quot;real_tables&quot;), aes(x = table_type, y = value, color = T_EUR), alpha = .8, height = 0, shape = 4) +</span></span>
<span id="cb56-12"><a href="information-extraction-report.html#cb56-12" tabindex="-1"></a>  <span class="co"># facet_wrap(~name, ncol = 1) +</span></span>
<span id="cb56-13"><a href="information-extraction-report.html#cb56-13" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-14"><a href="information-extraction-report.html#cb56-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#94EB1F&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb56-15"><a href="information-extraction-report.html#cb56-15" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb56-16"><a href="information-extraction-report.html#cb56-16" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>name) <span class="sc">+</span></span>
<span id="cb56-17"><a href="information-extraction-report.html#cb56-17" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb56-18"><a href="information-extraction-report.html#cb56-18" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb56-19"><a href="information-extraction-report.html#cb56-19" tabindex="-1"></a>  )</span>
<span id="cb56-20"><a href="information-extraction-report.html#cb56-20" tabindex="-1"></a></span>
<span id="cb56-21"><a href="information-extraction-report.html#cb56-21" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> df_table_extraction_regex <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">c</span>(table_type, NA_precision, NA_recall, NA_F1, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-22"><a href="information-extraction-report.html#cb56-22" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">-</span><span class="fu">c</span>(table_type, T_EUR, extraction_backend)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-23"><a href="information-extraction-report.html#cb56-23" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb56-24"><a href="information-extraction-report.html#cb56-24" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> table_type, <span class="at">y =</span> value, <span class="at">fill =</span> extraction_backend), <span class="at">alpha =</span> .<span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb56-25"><a href="information-extraction-report.html#cb56-25" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb56-26"><a href="information-extraction-report.html#cb56-26" tabindex="-1"></a><span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#94EB1F&quot;</span>, <span class="st">&quot;orange&quot;</span>)) <span class="sc">+</span></span>
<span id="cb56-27"><a href="information-extraction-report.html#cb56-27" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb56-28"><a href="information-extraction-report.html#cb56-28" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>name)</span>
<span id="cb56-29"><a href="information-extraction-report.html#cb56-29" tabindex="-1"></a></span>
<span id="cb56-30"><a href="information-extraction-report.html#cb56-30" tabindex="-1"></a>design <span class="ot">&lt;-</span> <span class="st">&quot;ac </span><span class="sc">\n</span><span class="st"> bb&quot;</span></span>
<span id="cb56-31"><a href="information-extraction-report.html#cb56-31" tabindex="-1"></a></span>
<span id="cb56-32"><a href="information-extraction-report.html#cb56-32" tabindex="-1"></a>p1 <span class="sc">+</span> p2 <span class="sc">+</span> <span class="fu">guide_area</span>() <span class="sc">+</span> </span>
<span id="cb56-33"><a href="information-extraction-report.html#cb56-33" tabindex="-1"></a>  <span class="fu">plot_layout</span>(</span>
<span id="cb56-34"><a href="information-extraction-report.html#cb56-34" tabindex="-1"></a>    <span class="at">design =</span> design, </span>
<span id="cb56-35"><a href="information-extraction-report.html#cb56-35" tabindex="-1"></a>    <span class="at">guides =</span> <span class="st">&quot;collect&quot;</span>, </span>
<span id="cb56-36"><a href="information-extraction-report.html#cb56-36" tabindex="-1"></a>    <span class="at">widths =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">1</span>)</span>
<span id="cb56-37"><a href="information-extraction-report.html#cb56-37" tabindex="-1"></a>  ) <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">&#39;A&#39;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-regex-performance"></span>
<img src="_main_files/figure-html/table-extraction-regex-performance-1.png" alt="Performance overall and on numeric value extraction with regular expressions." width="100%" />
<p class="caption">
Figure 9.1: Performance overall and on numeric value extraction with regular expressions.
</p>
</div>
<p>The performance for the <a href="glossary.html#acronyms_regex">regex</a> based table extraction is much better than the <a href="glossary.html#acronyms_regex">regex</a> based page identification performance. The median performance scores of the <a href="glossary.html#acronyms_regex">regex</a> approaches will be reflected by a dashed line in the box-plots in subsequent sections. The scores for the real <strong>Aktiva</strong> table extraction are:</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="information-extraction-report.html#cb57-1" tabindex="-1"></a>table_extraction_regex_baseline_medians <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb57-2"><a href="information-extraction-report.html#cb57-2" tabindex="-1"></a>  <span class="fu">across</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb57-3"><a href="information-extraction-report.html#cb57-3" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">kbl</span>(<span class="at">caption =</span> <span class="st">&quot;Summarizing the median performance of the regex approaches for the real and synthetic table extracion task.&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-regex-baseline-medians">Table 9.1: </span>Summarizing the median performance of the regex approaches for the real and synthetic table extracion task.
</caption>
<thead>
<tr>
<th style="text-align:left;">
measure
</th>
<th style="text-align:right;">
real_mean
</th>
<th style="text-align:right;">
real_median
</th>
<th style="text-align:right;">
synthetic_mean
</th>
<th style="text-align:right;">
synthetic_median
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
percentage of correct predictions total
</td>
<td style="text-align:right;">
0.686
</td>
<td style="text-align:right;">
0.707
</td>
<td style="text-align:right;">
0.969
</td>
<td style="text-align:right;">
0.966
</td>
</tr>
<tr>
<td style="text-align:left;">
percentage of correct numeric predictions
</td>
<td style="text-align:right;">
0.778
</td>
<td style="text-align:right;">
0.909
</td>
<td style="text-align:right;">
0.973
</td>
<td style="text-align:right;">
0.966
</td>
</tr>
<tr>
<td style="text-align:left;">
F1 score
</td>
<td style="text-align:right;">
0.789
</td>
<td style="text-align:right;">
0.800
</td>
<td style="text-align:right;">
0.979
</td>
<td style="text-align:right;">
1.000
</td>
</tr>
</tbody>
</table>
<p>The difference in the precision scores for the <a href="glossary.html#acronyms_regex">regex</a> approach on synthetic tables is discussed in section <a href="discussion.html#regex-synth-backend-discussion">6.2.2.5</a>.</p>
</div>
<div id="extraction-with-llms-real-tables" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Extraction with LLMs<a href="information-extraction-report.html#extraction-with-llms-real-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section presents the results for the table extraction task performed with <a href="glossary.html#acronyms_LLM">LLM</a>s on <strong>Aktiva</strong> tables. Subsection <a href="information-extraction-report.html#real-table-extraction-results">9.2.1</a> compraes the performance of open source models on real tables. It also compares those results with the table extraction performance achieved with models by OpenAI.</p>
<p>Subsection <a href="information-extraction-report.html#synthetic-table-extraction">9.2.2</a> presents the results on synthetic <strong>Aktiva</strong> tables. Subsection <a href="information-extraction-report.html#real-table-extraction-synth-context">9.2.3</a> shows a hybrid approach, where synthetic tables are used for the in-context learning, to extract real <strong>Aktiva</strong> tables. Finally, we summarize the results for all approaches in subsection <a href="results.html#comparing-table-extraction-methods">5.2.2</a>.</p>
<ul>
<li>confidence usable to head for user checks?</li>
<li>not handled new entries</li>
<li>five examples bring not much more, but a little</li>
</ul>
<p>Explain <em>static_example</em> method.</p>
<div id="real-table-extraction-results" class="section level3 hasAnchor" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> Real tables<a href="information-extraction-report.html#real-table-extraction-results" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="information-extraction-report.html#cb58-1" tabindex="-1"></a>df_top_scoring_models_big <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="information-extraction-report.html#cb58-2" tabindex="-1"></a>  <span class="co"># filter(parameter_count&gt;20) %&gt;% </span></span>
<span id="cb58-3"><a href="information-extraction-report.html#cb58-3" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="information-extraction-report.html#cb58-4" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-5"><a href="information-extraction-report.html#cb58-5" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-6"><a href="information-extraction-report.html#cb58-6" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-7"><a href="information-extraction-report.html#cb58-7" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb58-8"><a href="information-extraction-report.html#cb58-8" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-9"><a href="information-extraction-report.html#cb58-9" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, parameter_count, mean_total, median_total, normalized_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb58-10"><a href="information-extraction-report.html#cb58-10" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total))</span>
<span id="cb58-11"><a href="information-extraction-report.html#cb58-11" tabindex="-1"></a></span>
<span id="cb58-12"><a href="information-extraction-report.html#cb58-12" tabindex="-1"></a>top_scoring_model_big_mean <span class="ot">&lt;-</span> df_top_scoring_models_big <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>mean_total <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb58-13"><a href="information-extraction-report.html#cb58-13" tabindex="-1"></a></span>
<span id="cb58-14"><a href="information-extraction-report.html#cb58-14" tabindex="-1"></a>df_top_scoring_models_small <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb58-15"><a href="information-extraction-report.html#cb58-15" tabindex="-1"></a>  <span class="fu">filter</span>(parameter_count<span class="sc">&lt;</span><span class="dv">17</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-16"><a href="information-extraction-report.html#cb58-16" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb58-17"><a href="information-extraction-report.html#cb58-17" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb58-18"><a href="information-extraction-report.html#cb58-18" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-19"><a href="information-extraction-report.html#cb58-19" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb58-20"><a href="information-extraction-report.html#cb58-20" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb58-21"><a href="information-extraction-report.html#cb58-21" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-22"><a href="information-extraction-report.html#cb58-22" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, parameter_count, mean_total, median_total, normalized_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb58-23"><a href="information-extraction-report.html#cb58-23" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) </span>
<span id="cb58-24"><a href="information-extraction-report.html#cb58-24" tabindex="-1"></a></span>
<span id="cb58-25"><a href="information-extraction-report.html#cb58-25" tabindex="-1"></a>top_scoring_model_small_mean <span class="ot">&lt;-</span> df_top_scoring_models_small <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>mean_total <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)</span>
<span id="cb58-26"><a href="information-extraction-report.html#cb58-26" tabindex="-1"></a></span>
<span id="cb58-27"><a href="information-extraction-report.html#cb58-27" tabindex="-1"></a>zero_shot_stars <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb58-28"><a href="information-extraction-report.html#cb58-28" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>real_table_extraction_regex_NA_F1_median)</span>
<span id="cb58-29"><a href="information-extraction-report.html#cb58-29" tabindex="-1"></a></span>
<span id="cb58-30"><a href="information-extraction-report.html#cb58-30" tabindex="-1"></a>static_example_stars <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;static_example&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb58-31"><a href="information-extraction-report.html#cb58-31" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>real_table_extraction_regex_NA_F1_median)</span>
<span id="cb58-32"><a href="information-extraction-report.html#cb58-32" tabindex="-1"></a></span>
<span id="cb58-33"><a href="information-extraction-report.html#cb58-33" tabindex="-1"></a>underperformer <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb58-34"><a href="information-extraction-report.html#cb58-34" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>real_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb58-35"><a href="information-extraction-report.html#cb58-35" tabindex="-1"></a></span>
<span id="cb58-36"><a href="information-extraction-report.html#cb58-36" tabindex="-1"></a>super_underperformer <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>), n_examples<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method, parameter_count) <span class="sc">%&gt;%</span> </span>
<span id="cb58-37"><a href="information-extraction-report.html#cb58-37" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>real_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>real_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>real_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span></code></pre></div>
</details>
<div id="performance-2" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.1">
<h5><span class="header-section-number">9.2.1.0.1</span> Performance<a href="information-extraction-report.html#performance-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the table extraction task 32 open source models from 9 model families have been benchmarked<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>. Table <a href="information-extraction-report.html#tab:table-metrics-llm-real-table-extraction">9.2</a> shows the best performing combination of <a href="glossary.html#acronyms_LLM">LLM</a> and prompting strategy for each model family. The results are sorted by their mean percentage of total correct predictions. It also shows the normalized runtime in seconds and the parameter number of the model.</p>
</div>
<p>Qwen3-235B-A22B-Instruct performed best with a mean score of 0.97. This is equal with the performance that we achieved building the ground truth dataset. There are other models that perform almost as good with a score of 0.96 and more, but that donât match the human performance. These models show a median score of 1.0. Qwen3-235B-A22B-Instruct is the second fastest of those well performing models and needs less than six minutes. Only Llama 4 Maverick is faster. It needs half the time to extract the information.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="information-extraction-report.html#cb59-1" tabindex="-1"></a>df_top_scoring_models_big <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="information-extraction-report.html#cb59-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb59-3"><a href="information-extraction-report.html#cb59-3" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>),</span>
<span id="cb59-4"><a href="information-extraction-report.html#cb59-4" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>)</span>
<span id="cb59-5"><a href="information-extraction-report.html#cb59-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb59-6"><a href="information-extraction-report.html#cb59-6" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best table extraction performance with real &#39;Aktiva&#39; dataset for each model family&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction">Table 9.2: </span>Comparing best table extraction performance with real âAktivaâ dataset for each model family
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-b85247c826236c375499" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-b85247c826236c375499">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9"],["Qwen 3","mistralai","Qwen 2.5","Llama-4","Llama-3","microsoft","openai","tiiuae","google"],["Qwen3-235B-A22B-Instruct-2507-FP8","Mistral-Large-Instruct-2411","Qwen2.5-72B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","Llama-3.1-70B-Instruct","phi-4","gpt-oss-120b","Falcon3-10B-Instruct","gemma-3-27b-it"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["5","5","5","1","5","2","5","3","3"],["235","124","72","402","70","15","120","10","27"],["0.97","0.949","0.941","0.939","0.926","0.909","0.904","0.884","0.86"],["1","1","0.966","0.966","0.966","0.948","0.948","0.931","0.897"],["349","1292","475","158","429","664","657","117","116"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>parameter count<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>normalized runtime<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"targets":8,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"parameter count","targets":5},{"name":"mean total","targets":6},{"name":"median total","targets":7},{"name":"normalized runtime","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Table <a href="information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-small">9.3</a> shows the performance of models with less than 17B parameters, that have not been listed above. Qwen3-14B performs best among the smaller models achieving a mean of 0.93 and median of 1.0. It takes 1:49 minutes to extract the information from all <strong>Aktiva</strong> tables. Ministral-8B-Instruct does not perform as good as in the page identification task.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="information-extraction-report.html#cb60-1" tabindex="-1"></a>df_top_scoring_models_small <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="information-extraction-report.html#cb60-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>model <span class="sc">%in%</span> df_top_scoring_models_big<span class="sc">$</span>model) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="information-extraction-report.html#cb60-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb60-4"><a href="information-extraction-report.html#cb60-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>),</span>
<span id="cb60-5"><a href="information-extraction-report.html#cb60-5" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>)</span>
<span id="cb60-6"><a href="information-extraction-report.html#cb60-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb60-7"><a href="information-extraction-report.html#cb60-7" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best table extraction performance with real &#39;Aktiva&#39; dataset for each model family for models with less than 17B parameters. Models that have been listes in the previous table are not listed again.&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-small">Table 9.3: </span>Comparing best table extraction performance with real âAktivaâ dataset for each model family for models with less than 17B parameters. Models that have been listes in the previous table are not listed again.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-19af0ae11e88c9b8a532" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-19af0ae11e88c9b8a532">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["Qwen 3","Qwen 2.5","mistralai","Llama-3","google"],["Qwen3-8B","Qwen2.5-14B-Instruct","Ministral-8B-Instruct-2410","Llama-3.1-8B-Instruct","gemma-3-12b-it"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["5","5","5","5","3"],["8","14","8","8","12"],["0.927","0.925","0.895","0.832","0.811"],["0.966","0.966","0.931","0.879","0.862"],["133","233","220","98","95"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>parameter count<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>normalized runtime<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"targets":8,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"parameter count","targets":5},{"name":"mean total","targets":6},{"name":"median total","targets":7},{"name":"normalized runtime","targets":8}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Most models need a context learning approach to beat the performance of the regular expression approach at total and numeric correctness rate and F1 score. Table <a href="information-extraction-report.html#tab:zero-and-synth-performing-models-tab">9.4</a> shows, that 3 models perform better without any guidance<a href="#fn24" class="footnote-ref" id="fnref24"><sup>24</sup></a>. 6 models achieved an performance better than the <a href="glossary.html#acronyms_regex">regex</a> baseline using the approach to learn with a fixed example from the synthetic dataset.</p>
<p>In contrast: most of the models achieved a better performance than the regex baseline when they were provided with one or more examples from real <strong>Aktiva</strong> tables. Table <a href="information-extraction-report.html#tab:super-underperforming-models-tab">9.5</a> shows, that 11 donât consitently achieve a better score, when provided with three or five real <strong>Aktiva</strong> table examples. Here we find the smallest models with less than 2B parameters which donât achieve a consistence performance no matter how many examples they get. But we also find models that start to perform bad if they get a too long context with too many examples like the very recent and large model Llama 4 Maverick.</p>
<p>The results for all models are presented in Figure <a href="figure-collection.html#fig:table-extraction-llm-performance-total-overview">14.15</a>, <a href="figure-collection.html#fig:table-extraction-llm-performance-numeric-overview">14.16</a> and <a href="figure-collection.html#fig:table-extraction-llm-f1-overview">14.17</a>. In general the performance within a model family is positive correlated with the models number of parameters, if we provide real <strong>Aktiva</strong> examples. Once the 4B parameters are passed, the improvements get less and less, approaching the perfect performance. But no model achieves sperfect result on all documents. The <em>zero_shot</em> and <em>static_example</em> approach show some unpredicted performance drop, i.e.Â for Qwen3-14B.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="information-extraction-report.html#cb61-1" tabindex="-1"></a>zero_shot_stars <span class="sc">%&gt;%</span> <span class="fu">full_join</span>(static_example_stars, <span class="fu">join_by</span>(model), <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">&quot;_zero_shot&quot;</span>, <span class="st">&quot;_static_example&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model, <span class="fu">starts_with</span>(<span class="st">&quot;median_total&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="information-extraction-report.html#cb61-2" tabindex="-1"></a><span class="fu">mutate_if</span>(</span>
<span id="cb61-3"><a href="information-extraction-report.html#cb61-3" tabindex="-1"></a>    is.numeric, </span>
<span id="cb61-4"><a href="information-extraction-report.html#cb61-4" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb61-5"><a href="information-extraction-report.html#cb61-5" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-6"><a href="information-extraction-report.html#cb61-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb61-7"><a href="information-extraction-report.html#cb61-7" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb61-8"><a href="information-extraction-report.html#cb61-8" tabindex="-1"></a>    )</span>
<span id="cb61-9"><a href="information-extraction-report.html#cb61-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb61-10"><a href="information-extraction-report.html#cb61-10" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb61-11"><a href="information-extraction-report.html#cb61-11" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrr&quot;</span>,</span>
<span id="cb61-12"><a href="information-extraction-report.html#cb61-12" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for models that perform well without or with little context learning&quot;</span>,</span>
<span id="cb61-13"><a href="information-extraction-report.html#cb61-13" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:zero-and-synth-performing-models-tab">Table 9.4: </span>Comparing table extraction performance with real âAktivaâ dataset for models that perform well without or with little context learning
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-db2f19cb75e998f60b2e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-db2f19cb75e998f60b2e">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["Llama-4-Maverick-17B-128E-Instruct-FP8","Qwen3-235B-A22B-Instruct-2507-FP8","gpt-oss-120b","Qwen2.5-32B-Instruct","Qwen2.5-72B-Instruct","Qwen3-30B-A3B-Instruct-2507"],["<b>0.897<\/b>","<b>0.897<\/b>","<b>0.897<\/b>",null,null,null],["0.922","<b>0.931<\/b>","0.897","<b>0.931<\/b>","0.897","0.879"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>median total zero shot<\/th>\n      <th>median total static example<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"median total zero shot","targets":2},{"name":"median total static example","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="information-extraction-report.html#cb62-1" tabindex="-1"></a>super_underperformer <span class="sc">%&gt;%</span> <span class="fu">select</span>(model, method, parameter_count, median_total) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> <span class="co"># mutate(model = str_replace_all(model, &quot;_&quot;, &quot; &quot;)) %&gt;% </span></span>
<span id="cb62-2"><a href="information-extraction-report.html#cb62-2" tabindex="-1"></a><span class="fu">mutate_if</span>(</span>
<span id="cb62-3"><a href="information-extraction-report.html#cb62-3" tabindex="-1"></a>    is.numeric, </span>
<span id="cb62-4"><a href="information-extraction-report.html#cb62-4" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb62-5"><a href="information-extraction-report.html#cb62-5" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb62-6"><a href="information-extraction-report.html#cb62-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb62-7"><a href="information-extraction-report.html#cb62-7" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb62-8"><a href="information-extraction-report.html#cb62-8" tabindex="-1"></a>    )</span>
<span id="cb62-9"><a href="information-extraction-report.html#cb62-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb62-10"><a href="information-extraction-report.html#cb62-10" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb62-11"><a href="information-extraction-report.html#cb62-11" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrr&quot;</span>,</span>
<span id="cb62-12"><a href="information-extraction-report.html#cb62-12" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for models that perform worse than the regex baselin with 3 or 5 examples for in-context learning&quot;</span>,</span>
<span id="cb62-13"><a href="information-extraction-report.html#cb62-13" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:super-underperforming-models-tab">Table 9.5: </span>Comparing table extraction performance with real âAktivaâ dataset for models that perform worse than the regex baselin with 3 or 5 examples for in-context learning
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-c6209eefda173db07927" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c6209eefda173db07927">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11"],["Llama-3.1-8B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","Qwen2.5-0.5B-Instruct","Qwen2.5-1.5B-Instruct","Qwen2.5-3B-Instruct","Qwen2.5-7B-Instruct","Qwen3-0.6B","Qwen3-1.7B","gemma-3-12b-it","gemma-3-4b-it","gpt-oss-20b"],["3_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples"],["8","<b>402<\/b>","0.5","1.5","3","7","0.6","1.7","12","4","20"],["0.81","0.017","0.586","0.724","0.759","0.862","0.612","0.776","0.793","0.664","<b>0.897<\/b>"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>parameter count<\/th>\n      <th>median total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"parameter count","targets":3},{"name":"median total","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="information-extraction-report.html#cb63-1" tabindex="-1"></a>model_by_size_gpt <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb63-2"><a href="information-extraction-report.html#cb63-2" tabindex="-1"></a>  <span class="st">&quot;Qwen3-0.6B&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-30B-A3B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>,</span>
<span id="cb63-3"><a href="information-extraction-report.html#cb63-3" tabindex="-1"></a> <span class="st">&quot;gpt-4.1-nano&quot;</span>, <span class="st">&quot;gpt-5-nano&quot;</span>, <span class="st">&quot;gpt-4.1-mini&quot;</span>, <span class="st">&quot;gpt-5-mini&quot;</span>,</span>
<span id="cb63-4"><a href="information-extraction-report.html#cb63-4" tabindex="-1"></a> <span class="st">&quot;gpt-oss-20b&quot;</span>, <span class="st">&quot;gpt-oss-120b&quot;</span>, <span class="st">&quot;gpt-4.1&quot;</span></span>
<span id="cb63-5"><a href="information-extraction-report.html#cb63-5" tabindex="-1"></a>)</span>
<span id="cb63-6"><a href="information-extraction-report.html#cb63-6" tabindex="-1"></a></span>
<span id="cb63-7"><a href="information-extraction-report.html#cb63-7" tabindex="-1"></a>df_overview_gpt <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb63-8"><a href="information-extraction-report.html#cb63-8" tabindex="-1"></a>  <span class="fu">filter</span>(out_of_company <span class="sc">==</span> <span class="cn">TRUE</span> <span class="sc">|</span> <span class="fu">is.na</span>(out_of_company), n_examples <span class="sc">&lt;=</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-9"><a href="information-extraction-report.html#cb63-9" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> model_by_size_gpt) <span class="sc">%&gt;%</span></span>
<span id="cb63-10"><a href="information-extraction-report.html#cb63-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb63-11"><a href="information-extraction-report.html#cb63-11" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size_gpt),</span>
<span id="cb63-12"><a href="information-extraction-report.html#cb63-12" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb63-13"><a href="information-extraction-report.html#cb63-13" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb63-14"><a href="information-extraction-report.html#cb63-14" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb63-15"><a href="information-extraction-report.html#cb63-15" tabindex="-1"></a>      <span class="at">n_predicted_values =</span> NA_true_positive<span class="sc">+</span>NA_false_positive<span class="sc">+</span>NA_false_negative<span class="sc">+</span>NA_true_negative</span>
<span id="cb63-16"><a href="information-extraction-report.html#cb63-16" tabindex="-1"></a>    )</span>
<span id="cb63-17"><a href="information-extraction-report.html#cb63-17" tabindex="-1"></a></span>
<span id="cb63-18"><a href="information-extraction-report.html#cb63-18" tabindex="-1"></a>perc_wrong_prediction_count <span class="ot">&lt;-</span> <span class="fu">round</span>((df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model, <span class="st">&quot;Qwen&quot;</span>), n_predicted_values <span class="sc">!=</span> <span class="dv">58</span>) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()<span class="sc">/</span>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(model, <span class="st">&quot;Qwen&quot;</span>)) <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()) <span class="sc">*</span> <span class="dv">100</span>, <span class="dv">1</span>)</span></code></pre></div>
</details>
<div id="openai-models" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.2">
<h5><span class="header-section-number">9.2.1.0.2</span> OpenAI models<a href="information-extraction-report.html#openai-models" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Even though a lot of documents to process at <a href="glossary.html#acronyms_RHvB">RHvB</a> will not be public and thus must not be processed on public cloud infrastructure, the performance of models like OpenAIâs GPT are interesting benchmark references within this thesis and for comparing these findings with other papers results. Therefore for this thesis the public available versions of annual reports have been used instead of the ones used internally or for public administration purposes. Those public available reports often are visually more appealing and more heterogeneous in their structure.</p>
</div>
<p>Table <a href="information-extraction-report.html#tab:table-extraction-llm-performance-total-gpt-ranking">9.6</a> shows the ranking for the best model-method combinations Qwen3 235B is performing best. gpt-4.1 and gpt-5-mini perform equally well and are almost as good as Qwen3 235B. All models but gpt-4.1-nano, gpt-5-nano and Qwen3-0.6B manage to beat the <a href="glossary.html#acronyms_regex">regex</a> threshold. Qwen3-0.6B performs better than the nano models once it gets provided with an example.</p>
<p>Table <a href="information-extraction-report.html#tab:costs-azure">9.7</a> shows the accumulated costs for the table extraction task for the models provided by Azure. Using gpt-4.1 is most expensive, followed by gpt-5-mini. Next is gpt-5-nano. This is caused by an unexpected high cost for output tokens. In general we find, that the ratio of output costs to input costs is much higher for gpt-5 models. Since gpt-5-mini gives consistently good results already with one provided example, this could be the most cost efficient strategy. But it takes gpt-5-mini more than three times longer to respond than gpt-4.1.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="information-extraction-report.html#cb64-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="information-extraction-report.html#cb64-2" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb64-3"><a href="information-extraction-report.html#cb64-3" tabindex="-1"></a>    <span class="at">mean_percentage_correct_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb64-4"><a href="information-extraction-report.html#cb64-4" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb64-5"><a href="information-extraction-report.html#cb64-5" tabindex="-1"></a>    <span class="co"># median_runtime = median(runtime)</span></span>
<span id="cb64-6"><a href="information-extraction-report.html#cb64-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-7"><a href="information-extraction-report.html#cb64-7" tabindex="-1"></a>  <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb64-8"><a href="information-extraction-report.html#cb64-8" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_percentage_correct_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-9"><a href="information-extraction-report.html#cb64-9" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb64-10"><a href="information-extraction-report.html#cb64-10" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-11"><a href="information-extraction-report.html#cb64-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb64-12"><a href="information-extraction-report.html#cb64-12" tabindex="-1"></a>    <span class="at">mean_percentage_correct_total =</span> <span class="fu">round</span>(mean_percentage_correct_total, <span class="dv">2</span>),</span>
<span id="cb64-13"><a href="information-extraction-report.html#cb64-13" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">round</span>(median_percentage_correct_total, <span class="dv">2</span>),</span>
<span id="cb64-14"><a href="information-extraction-report.html#cb64-14" tabindex="-1"></a>    <span class="co"># median_runtime = round(median_runtime)</span></span>
<span id="cb64-15"><a href="information-extraction-report.html#cb64-15" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="st">&quot;median correct total&quot;</span> <span class="ot">=</span> median_percentage_correct_total) <span class="sc">%&gt;%</span> </span>
<span id="cb64-16"><a href="information-extraction-report.html#cb64-16" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb64-17"><a href="information-extraction-report.html#cb64-17" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrr&quot;</span>,</span>
<span id="cb64-18"><a href="information-extraction-report.html#cb64-18" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing table extraction performance with real &#39;Aktiva&#39; dataset for OPenAIs GPT models with a selection of Qwen3 models.&quot;</span>,</span>
<span id="cb64-19"><a href="information-extraction-report.html#cb64-19" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb64-20"><a href="information-extraction-report.html#cb64-20" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-llm-performance-total-gpt-ranking">Table 9.6: </span>Comparing table extraction performance with real âAktivaâ dataset for OPenAIs GPT models with a selection of Qwen3 models.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-49d2ad220f46a10a71ea" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-49d2ad220f46a10a71ea">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11"],["Qwen3-235B-A22B-Instruct-2507-FP8","gpt-4.1","gpt-5-mini","Qwen3-30B-A3B-Instruct-2507","gpt-4.1-mini","Qwen3-8B","gpt-oss-120b","gpt-oss-20b","Qwen3-0.6B","gpt-5-nano","gpt-4.1-nano"],["5_<wbr>random_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","top_<wbr>3_<wbr>rag_<wbr>examples","top_<wbr>5_<wbr>rag_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","zero_<wbr>shot"],["0.97","0.95","0.95","0.92","0.91","0.89","0.88","0.84","0.65","0.3","0.21"],["1","0.97","0.97","0.97","0.96","0.93","0.93","0.9","0.65","0.24","0.14"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>mean percentage correct total<\/th>\n      <th>median correct total<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"mean percentage correct total","targets":3},{"name":"median correct total","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="information-extraction-report.html#cb65-1" tabindex="-1"></a>costs_azure <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../CostManagement_master-thesis_2025.csv&quot;</span>)</span>
<span id="cb65-2"><a href="information-extraction-report.html#cb65-2" tabindex="-1"></a></span>
<span id="cb65-3"><a href="information-extraction-report.html#cb65-3" tabindex="-1"></a>costs_azure <span class="sc">%&gt;%</span> </span>
<span id="cb65-4"><a href="information-extraction-report.html#cb65-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Model =</span> <span class="fu">map_chr</span>(</span>
<span id="cb65-5"><a href="information-extraction-report.html#cb65-5" tabindex="-1"></a>    Model, <span class="sc">~</span>{<span class="fu">paste</span>(<span class="fu">str_split</span>(., <span class="st">&quot; &quot;</span>)[[<span class="dv">1</span>]][<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], <span class="at">collapse =</span> <span class="st">&quot; &quot;</span>)}</span>
<span id="cb65-6"><a href="information-extraction-report.html#cb65-6" tabindex="-1"></a>    )) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb65-7"><a href="information-extraction-report.html#cb65-7" tabindex="-1"></a>      <span class="at">Model =</span> <span class="fu">str_replace_all</span>(<span class="fu">tolower</span>(<span class="fu">str_remove</span>(Model, <span class="st">&quot; Inp| Outp| cached&quot;</span>)), <span class="st">&quot; &quot;</span>, <span class="st">&quot;-&quot;</span>),</span>
<span id="cb65-8"><a href="information-extraction-report.html#cb65-8" tabindex="-1"></a>      <span class="at">Cost =</span> <span class="fu">round</span>(Cost, <span class="dv">2</span>)</span>
<span id="cb65-9"><a href="information-extraction-report.html#cb65-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(Model, Meter) <span class="sc">%&gt;%</span> </span>
<span id="cb65-10"><a href="information-extraction-report.html#cb65-10" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb65-11"><a href="information-extraction-report.html#cb65-11" tabindex="-1"></a>      <span class="at">Cost =</span> <span class="fu">sum</span>(Cost)</span>
<span id="cb65-12"><a href="information-extraction-report.html#cb65-12" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-13"><a href="information-extraction-report.html#cb65-13" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Meter, <span class="at">values_from =</span> Cost, <span class="at">names_prefix =</span> <span class="st">&quot;Cost_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb65-14"><a href="information-extraction-report.html#cb65-14" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb65-15"><a href="information-extraction-report.html#cb65-15" tabindex="-1"></a>    <span class="at">Cost_total =</span> Cost_Input<span class="sc">+</span>Cost_Output,</span>
<span id="cb65-16"><a href="information-extraction-report.html#cb65-16" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-17"><a href="information-extraction-report.html#cb65-17" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Cost_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb65-18"><a href="information-extraction-report.html#cb65-18" tabindex="-1"></a>  <span class="fu">setNames</span>(<span class="fu">tolower</span>(<span class="fu">colnames</span>(.))) <span class="sc">%&gt;%</span> </span>
<span id="cb65-19"><a href="information-extraction-report.html#cb65-19" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb65-20"><a href="information-extraction-report.html#cb65-20" tabindex="-1"></a>    df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb65-21"><a href="information-extraction-report.html#cb65-21" tabindex="-1"></a>      <span class="fu">summarize</span>(<span class="st">&quot;median runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(<span class="fu">median</span>(runtime)<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(<span class="fu">median</span>(runtime)<span class="sc">%%</span><span class="dv">60</span>)))</span>
<span id="cb65-22"><a href="information-extraction-report.html#cb65-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb65-23"><a href="information-extraction-report.html#cb65-23" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb65-24"><a href="information-extraction-report.html#cb65-24" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrrrr&quot;</span>,</span>
<span id="cb65-25"><a href="information-extraction-report.html#cb65-25" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the costs for OpenAIs GPT models provided by Azure. Notice the high output cost for GPT 5 Nano.&quot;</span>,</span>
<span id="cb65-26"><a href="information-extraction-report.html#cb65-26" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb65-27"><a href="information-extraction-report.html#cb65-27" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:costs-azure">Table 9.7: </span>Comparing the costs for OpenAIs GPT models provided by Azure. Notice the high output cost for GPT 5 Nano.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-94961603a3b7ba8361f5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-94961603a3b7ba8361f5">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["gpt-4.1","gpt-5-mini","gpt-5-nano","gpt-4.1-mini","gpt-4.1-nano"],["18.07","1.93","0.41","3.76","0.08"],["10.35","10.28","6.99","2.02","0.06"],["28.42","12.21","7.4","5.78","0.14"],["29:53","110:50","135:37","31:48","10:28"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>cost input<\/th>\n      <th>cost output<\/th>\n      <th>cost total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"cost input","targets":2},{"name":"cost output","targets":3},{"name":"cost total","targets":4},{"name":"median runtime in minutes","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<p>Discussion?:</p>
<p>Since the output token costs are not that different (2 $ for 1M output tokens with gpt-5-mini vs 1.6 $ with gpt-4.1-mini), the generated output token number has to be much higher for the gpt-5-mini models. But since the responses are based on the same schema and required the same numeric values there shouldnât be a big difference<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a>.</p>
<p>Figure <a href="information-extraction-report.html#fig:table-extraction-llm-f1-gpt-slice">9.2</a> shows the distribution of F1 score for up to three examples. It shows green crosses at the bottom of the abscissa that indicate prediction, where no <em>null</em> value is reported. This means, the model hallucinates many numeric values. This is only the case for OpenAIâs models but not for Qwen3 models. This behaviour persists up to five examples for the nano as well the gpt-oss 20b model. For gpt-4.1 and gpt-4.1-mini these cases vanish when we provide three or more examples and never appeared for gpt-5-mini.</p>
<p>One can find the full plots in Figures <a href="figure-collection.html#fig:table-extraction-llm-performance-total-gpt">14.19</a>, <a href="figure-collection.html#fig:table-extraction-llm-performance-numeric-gpt">14.20</a> and <a href="figure-collection.html#fig:table-extraction-llm-f1-gpt">14.21</a>).</p>
<p>We were not able to get OpenAIâs models to stick to the provided <a href="glossary.html#acronyms_json">json</a> schema strictly. Passing the <a href="glossary.html#acronyms_ebnf">ebnf</a> grammar did not work at all. This means that with gpt-4.1-nano there have been 88 predictions that have been completely empty. For gpt-5-nano we find 6 such predictions. Figure @red(fig:table-extraction-llm-prediction-count-gpt) shows the distribution of responses with a wrong number of predictions (including <em>null</em> and numeric predictions). Overall there have been 34.3 % of the responses of OpenAIâs models that were compatible with the schema but had a wrong number of rows predicted. The maximum number of returned values (by gpt-5-nano) is 714.</p>
<p>Using gpt-5-chat for the table extraction task with structured output is not working, returning an error informing that a <em>json_schema</em> canât be used with this model. Figure <a href="information-extraction-report.html#fig:table-extraction-llm-errors-gpt">9.4</a> shows, where other models produced an answer that could not be parsed as valid <a href="glossary.html#acronyms_json">json</a>.Most errors occured for gpt-oss-20B and the <em>static_example</em> method. Over half of all tables could not be transcripted in <a href="glossary.html#acronyms_json">json</a> with in the 40_000 response token limit<a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>. Only with gpt-5-mini we had no <a href="glossary.html#acronyms_json">json</a> parsing error.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="information-extraction-report.html#cb66-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="information-extraction-report.html#cb66-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">&lt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="information-extraction-report.html#cb66-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">NA_F1 =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(NA_F1), <span class="dv">0</span>, NA_F1)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-4"><a href="information-extraction-report.html#cb66-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb66-5"><a href="information-extraction-report.html#cb66-5" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> real_table_extraction_regex_NA_F1_median, <span class="at">linetype =</span> <span class="st">&quot;dashed&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-6"><a href="information-extraction-report.html#cb66-6" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> NA_F1, <span class="at">fill =</span> model_family)) <span class="sc">+</span></span>
<span id="cb66-7"><a href="information-extraction-report.html#cb66-7" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="at">data =</span> df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">is.na</span>(NA_F1), <span class="fu">as.numeric</span>(<span class="fu">str_remove</span>(<span class="fu">as.character</span>(n_examples), <span class="st">&quot;n = &quot;</span>)) <span class="sc">&lt;</span> <span class="dv">5</span>), <span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> <span class="dv">0</span>), <span class="at">height =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;green&quot;</span>, <span class="at">alpha =</span> .<span class="dv">5</span>, <span class="at">shape =</span> <span class="dv">4</span>) <span class="sc">+</span></span>
<span id="cb66-8"><a href="information-extraction-report.html#cb66-8" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">angle =</span> <span class="dv">30</span>)) <span class="sc">+</span></span>
<span id="cb66-9"><a href="information-extraction-report.html#cb66-9" tabindex="-1"></a>  <span class="fu">facet_nested</span>(method_family <span class="sc">+</span> n_examples <span class="sc">~</span> .) <span class="sc">+</span></span>
<span id="cb66-10"><a href="information-extraction-report.html#cb66-10" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb66-11"><a href="information-extraction-report.html#cb66-11" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb66-12"><a href="information-extraction-report.html#cb66-12" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-f1-gpt-slice"></span>
<img src="_main_files/figure-html/table-extraction-llm-f1-gpt-slice-1.png" alt="Comparing the F1 score for predicting the missingness of a value for OpenAi's LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values." width="100%" height="90%" keepaspectratio />
<p class="caption">
Figure 9.2: Comparing the F1 score for predicting the missingness of a value for OpenAiâs LLMs with some Qwen 3 models. The green crosses indicate results where a model has predicted only numeric values even though there have been missing values.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="information-extraction-report.html#cb67-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_predicted_values <span class="sc">!=</span> <span class="dv">58</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="information-extraction-report.html#cb67-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">color_code =</span> <span class="fu">if_else</span>(n_predicted_values<span class="sc">==</span><span class="dv">0</span>, <span class="st">&quot;zero&quot;</span>, <span class="fu">if_else</span>(n_predicted_values <span class="sc">&gt;</span> <span class="dv">58</span>, <span class="st">&quot;too many&quot;</span>, <span class="st">&quot;too little&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="information-extraction-report.html#cb67-3" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb67-4"><a href="information-extraction-report.html#cb67-4" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> n_predicted_values, <span class="at">fill =</span> color_code), <span class="at">binwidth =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">facet_grid</span>(model<span class="sc">~</span>.) <span class="sc">+</span></span>
<span id="cb67-5"><a href="information-extraction-report.html#cb67-5" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">66</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-prediction-count-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-prediction-count-gpt-1.png" alt="Showing the number of predictions OpenAI's models made." width="100%" />
<p class="caption">
Figure 9.3: Showing the number of predictions OpenAIâs models made.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="information-extraction-report.html#cb68-1" tabindex="-1"></a>df_overview_gpt <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n_pred =</span> <span class="fu">map_dbl</span>(predictions, <span class="sc">~</span><span class="fu">nrow</span>(.)), <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n_pred <span class="sc">!=</span> <span class="dv">29</span>) <span class="sc">%&gt;%</span> <span class="co"># select(model, method, n_pred, filepath) %&gt;% </span></span>
<span id="cb68-2"><a href="information-extraction-report.html#cb68-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb68-3"><a href="information-extraction-report.html#cb68-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="fu">aes</span>(<span class="at">x =</span> method_family, <span class="at">fill =</span> n_examples)) <span class="sc">+</span> </span>
<span id="cb68-4"><a href="information-extraction-report.html#cb68-4" tabindex="-1"></a>  <span class="fu">facet_grid</span>(model<span class="sc">~</span>.)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-errors-gpt"></span>
<img src="_main_files/figure-html/table-extraction-llm-errors-gpt-1.png" alt="Showing the number of predictions where not 58 values are returned grouped by model and prompting method." width="100%" />
<p class="caption">
Figure 9.4: Showing the number of predictions where not 58 values are returned grouped by model and prompting method.
</p>
</div>
<div id="examples-from-same-company-performance" class="section level5 hasAnchor paragraph-start" number="9.2.1.0.3">
<h5><span class="header-section-number">9.2.1.0.3</span> Examples from same company performance<a href="information-extraction-report.html#examples-from-same-company-performance" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="information-extraction-report.html#tab:table-extraction-same-company-improvement-table">9.8</a> shows the improvement for the percentage of correct predictions total, when <strong>Aktiva</strong> tables from the same company as the target tables company are provided for the in-context learning. It shows that this improvement is biggest for goolge and Qwen and smallest for Llama models.</p>
</div>
<p>Figure <a href="figure-collection.html#fig:table-extraction-llm-performance-total-overview-out-of-company">14.18</a> shows, that using <strong>Aktiva</strong> in-company examples improves the performance, mainly by reducing the number of bad predictions. The found improvement is present for all models but Llama 4 Maverick. Here the number of bad predictions gets larger if we provide three or more examples. With five examples the performances totally collapses.</p>
<p>The perfromance improvement for GPT-4.1-mini and GTP-4.1 with only one provided example seems to be big, because the box is getting much more narrow. But the median shifts not more than for other models.</p>
<p>Check results for openai, when 5 nano finished</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="information-extraction-report.html#cb69-1" tabindex="-1"></a><span class="fu">bind_rows</span>(df_real_table_extraction, df_real_table_extraction_azure) <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="information-extraction-report.html#cb69-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-3"><a href="information-extraction-report.html#cb69-3" tabindex="-1"></a>    <span class="at">examples_from_same_company =</span> <span class="sc">!</span>out_of_company</span>
<span id="cb69-4"><a href="information-extraction-report.html#cb69-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb69-5"><a href="information-extraction-report.html#cb69-5" tabindex="-1"></a>    <span class="co"># str_detect(filepath, &quot;Statistik&quot;), </span></span>
<span id="cb69-6"><a href="information-extraction-report.html#cb69-6" tabindex="-1"></a>    method_family <span class="sc">==</span> <span class="st">&quot;top_n_rag_examples&quot;</span>,</span>
<span id="cb69-7"><a href="information-extraction-report.html#cb69-7" tabindex="-1"></a>    n_examples <span class="sc">!=</span> <span class="dv">2</span>,</span>
<span id="cb69-8"><a href="information-extraction-report.html#cb69-8" tabindex="-1"></a>    n_examples <span class="sc">&lt;</span> <span class="dv">5</span>,</span>
<span id="cb69-9"><a href="information-extraction-report.html#cb69-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model_family, examples_from_same_company) <span class="sc">%&gt;%</span> </span>
<span id="cb69-10"><a href="information-extraction-report.html#cb69-10" tabindex="-1"></a>  <span class="fu">reframe</span>(</span>
<span id="cb69-11"><a href="information-extraction-report.html#cb69-11" tabindex="-1"></a>      <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb69-12"><a href="information-extraction-report.html#cb69-12" tabindex="-1"></a>      <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb69-13"><a href="information-extraction-report.html#cb69-13" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> examples_from_same_company, <span class="at">values_from =</span> <span class="fu">c</span>(mean_total, median_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb69-14"><a href="information-extraction-report.html#cb69-14" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb69-15"><a href="information-extraction-report.html#cb69-15" tabindex="-1"></a>      <span class="at">improvement_mean =</span> <span class="fu">round</span>(mean_total_TRUE <span class="sc">-</span> mean_total_FALSE, <span class="dv">2</span>),</span>
<span id="cb69-16"><a href="information-extraction-report.html#cb69-16" tabindex="-1"></a>      <span class="at">improvement_median =</span> <span class="fu">round</span>(median_total_TRUE <span class="sc">-</span> median_total_FALSE, <span class="dv">2</span>)</span>
<span id="cb69-17"><a href="information-extraction-report.html#cb69-17" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model_family, improvement_mean, improvement_median) <span class="sc">%&gt;%</span> </span>
<span id="cb69-18"><a href="information-extraction-report.html#cb69-18" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(improvement_mean)) <span class="sc">%&gt;%</span> <span class="co">#kbl()</span></span>
<span id="cb69-19"><a href="information-extraction-report.html#cb69-19" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb69-20"><a href="information-extraction-report.html#cb69-20" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrr&quot;</span>,</span>
<span id="cb69-21"><a href="information-extraction-report.html#cb69-21" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing the extraction performance when Aktiva tables from the same company can be used for in-context learning or not.&quot;</span>,</span>
<span id="cb69-22"><a href="information-extraction-report.html#cb69-22" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span></span>
<span id="cb69-23"><a href="information-extraction-report.html#cb69-23" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-extraction-same-company-improvement-table">Table 9.8: </span>Comparing the extraction performance when Aktiva tables from the same company can be used for in-context learning or not.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-8d0185ff7ca19e4b7e68" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-8d0185ff7ca19e4b7e68">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10"],["google","Qwen 3","chat-gpt","Qwen 2.5","tiiuae","mistralai","Llama-3","microsoft","openai","Llama-4"],["0.13","0.12","0.12","0.1","0.09","0.08","0.07","0.07","0.05","0.03"],["0.14","0.07","0.17","0.12","0.07","0.07","0.05","0.06","0.07","0"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>improvement mean<\/th>\n      <th>improvement median<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"improvement mean","targets":2},{"name":"improvement median","targets":3}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="synthetic-table-extraction" class="section level3 hasAnchor" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> Synthetic tables<a href="information-extraction-report.html#synthetic-table-extraction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="information-extraction-report.html#cb70-1" tabindex="-1"></a>df_synth_table_extraction <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/synth_table_extraction_llm.rds&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb70-2"><a href="information-extraction-report.html#cb70-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">model =</span> <span class="fu">if_else</span>(model <span class="sc">==</span> <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>, model)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href="information-extraction-report.html#cb70-3" tabindex="-1"></a>  <span class="fu">sample_frac</span>(<span class="at">size =</span> .<span class="dv">05</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="information-extraction-report.html#cb70-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;deepseek-ai_DeepSeek-R1-Distill-Qwen-32B&quot;</span>, <span class="st">&#39;google_gemma-3n-E4B-it&#39;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="information-extraction-report.html#cb70-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-6"><a href="information-extraction-report.html#cb70-6" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model)</span>
<span id="cb70-7"><a href="information-extraction-report.html#cb70-7" tabindex="-1"></a>    )</span>
<span id="cb70-8"><a href="information-extraction-report.html#cb70-8" tabindex="-1"></a></span>
<span id="cb70-9"><a href="information-extraction-report.html#cb70-9" tabindex="-1"></a>norm_factors <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;../benchmark_jobs/page_identification/gpu_benchmark/runtime_factors_synth_table_extraction.csv&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-10"><a href="information-extraction-report.html#cb70-10" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-11"><a href="information-extraction-report.html#cb70-11" tabindex="-1"></a>    <span class="at">model_name =</span> model_name <span class="sc">%&gt;%</span> <span class="fu">str_replace</span>(<span class="st">&quot;/&quot;</span>, <span class="st">&quot;_&quot;</span>)</span>
<span id="cb70-12"><a href="information-extraction-report.html#cb70-12" tabindex="-1"></a>  )</span>
<span id="cb70-13"><a href="information-extraction-report.html#cb70-13" tabindex="-1"></a>norm_factors_few_examples <span class="ot">&lt;-</span> norm_factors <span class="sc">%&gt;%</span> <span class="fu">filter</span>((<span class="fu">str_ends</span>(filename, <span class="st">&quot;binary.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;multi.yaml&quot;</span>) <span class="sc">|</span> <span class="fu">str_ends</span>(filename, <span class="st">&quot;vllm_batched.yaml&quot;</span>)))</span>
<span id="cb70-14"><a href="information-extraction-report.html#cb70-14" tabindex="-1"></a></span>
<span id="cb70-15"><a href="information-extraction-report.html#cb70-15" tabindex="-1"></a>df_synth_table_extraction <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">left_join</span>(</span>
<span id="cb70-16"><a href="information-extraction-report.html#cb70-16" tabindex="-1"></a>  norm_factors_few_examples <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">model_name =</span> <span class="fu">gsub</span>(<span class="st">&quot;^[^_]+_&quot;</span>, <span class="st">&quot;&quot;</span>, model_name)) <span class="sc">%&gt;%</span> <span class="fu">select</span>(model_name, parameter_count, normalization_factor),</span>
<span id="cb70-17"><a href="information-extraction-report.html#cb70-17" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;model&quot;</span> <span class="ot">=</span> <span class="st">&quot;model_name&quot;</span>)</span>
<span id="cb70-18"><a href="information-extraction-report.html#cb70-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb70-19"><a href="information-extraction-report.html#cb70-19" tabindex="-1"></a>    <span class="at">normalized_runtime =</span> normalization_factor <span class="sc">*</span> runtime</span>
<span id="cb70-20"><a href="information-extraction-report.html#cb70-20" tabindex="-1"></a>  )</span>
<span id="cb70-21"><a href="information-extraction-report.html#cb70-21" tabindex="-1"></a></span>
<span id="cb70-22"><a href="information-extraction-report.html#cb70-22" tabindex="-1"></a>df_overview_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb70-23"><a href="information-extraction-report.html#cb70-23" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-24"><a href="information-extraction-report.html#cb70-24" tabindex="-1"></a>    <span class="at">model =</span> <span class="fu">factor</span>(model, <span class="at">levels =</span> model_by_size),</span>
<span id="cb70-25"><a href="information-extraction-report.html#cb70-25" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb70-26"><a href="information-extraction-report.html#cb70-26" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples)))</span>
<span id="cb70-27"><a href="information-extraction-report.html#cb70-27" tabindex="-1"></a>  )</span>
<span id="cb70-28"><a href="information-extraction-report.html#cb70-28" tabindex="-1"></a></span>
<span id="cb70-29"><a href="information-extraction-report.html#cb70-29" tabindex="-1"></a><span class="co"># synth</span></span>
<span id="cb70-30"><a href="information-extraction-report.html#cb70-30" tabindex="-1"></a></span>
<span id="cb70-31"><a href="information-extraction-report.html#cb70-31" tabindex="-1"></a>zero_shot_stars_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb70-32"><a href="information-extraction-report.html#cb70-32" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>synth_table_extraction_regex_NA_F1_median)</span>
<span id="cb70-33"><a href="information-extraction-report.html#cb70-33" tabindex="-1"></a></span>
<span id="cb70-34"><a href="information-extraction-report.html#cb70-34" tabindex="-1"></a>static_example_stars_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;static_example&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb70-35"><a href="information-extraction-report.html#cb70-35" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&gt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&gt;</span>synth_table_extraction_regex_NA_F1_median)</span>
<span id="cb70-36"><a href="information-extraction-report.html#cb70-36" tabindex="-1"></a></span>
<span id="cb70-37"><a href="information-extraction-report.html#cb70-37" tabindex="-1"></a>underperformer_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb70-38"><a href="information-extraction-report.html#cb70-38" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>synth_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb70-39"><a href="information-extraction-report.html#cb70-39" tabindex="-1"></a></span>
<span id="cb70-40"><a href="information-extraction-report.html#cb70-40" tabindex="-1"></a>super_underperformer_synth <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span>method <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&#39;zero_shot&#39;</span>, <span class="st">&#39;static_example&#39;</span>), n_examples<span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> </span>
<span id="cb70-41"><a href="information-extraction-report.html#cb70-41" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">median_F1 =</span> <span class="fu">median</span>(NA_F1, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">any</span>(median_total<span class="sc">&lt;</span>synth_table_extraction_regex_total_performance_median, median_num<span class="sc">&lt;</span>synth_table_extraction_regex_num_performance_median, median_F1<span class="sc">&lt;</span>synth_table_extraction_regex_NA_F1_median)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(median_total) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>)</span>
<span id="cb70-42"><a href="information-extraction-report.html#cb70-42" tabindex="-1"></a></span>
<span id="cb70-43"><a href="information-extraction-report.html#cb70-43" tabindex="-1"></a>df_synth_top_performance <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb70-44"><a href="information-extraction-report.html#cb70-44" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-45"><a href="information-extraction-report.html#cb70-45" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-46"><a href="information-extraction-report.html#cb70-46" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-47"><a href="information-extraction-report.html#cb70-47" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-48"><a href="information-extraction-report.html#cb70-48" tabindex="-1"></a>    <span class="at">median_runtime =</span> <span class="fu">median</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-49"><a href="information-extraction-report.html#cb70-49" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb70-50"><a href="information-extraction-report.html#cb70-50" tabindex="-1"></a>  <span class="co"># arrange(desc(median_total)) %&gt;% </span></span>
<span id="cb70-51"><a href="information-extraction-report.html#cb70-51" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-52"><a href="information-extraction-report.html#cb70-52" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, mean_total, median_total, median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb70-53"><a href="information-extraction-report.html#cb70-53" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-54"><a href="information-extraction-report.html#cb70-54" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-55"><a href="information-extraction-report.html#cb70-55" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>),</span>
<span id="cb70-56"><a href="information-extraction-report.html#cb70-56" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>)</span>
<span id="cb70-57"><a href="information-extraction-report.html#cb70-57" tabindex="-1"></a>    )</span>
<span id="cb70-58"><a href="information-extraction-report.html#cb70-58" tabindex="-1"></a></span>
<span id="cb70-59"><a href="information-extraction-report.html#cb70-59" tabindex="-1"></a>df_synth_top_performance_small <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb70-60"><a href="information-extraction-report.html#cb70-60" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-61"><a href="information-extraction-report.html#cb70-61" tabindex="-1"></a>  <span class="fu">filter</span>(parameter_count <span class="sc">&lt;</span> <span class="dv">17</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-62"><a href="information-extraction-report.html#cb70-62" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb70-63"><a href="information-extraction-report.html#cb70-63" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-64"><a href="information-extraction-report.html#cb70-64" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-65"><a href="information-extraction-report.html#cb70-65" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb70-66"><a href="information-extraction-report.html#cb70-66" tabindex="-1"></a>    <span class="at">median_runtime =</span> <span class="fu">median</span>(normalized_runtime, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb70-67"><a href="information-extraction-report.html#cb70-67" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb70-68"><a href="information-extraction-report.html#cb70-68" tabindex="-1"></a>  <span class="co"># arrange(desc(median_total)) %&gt;% </span></span>
<span id="cb70-69"><a href="information-extraction-report.html#cb70-69" tabindex="-1"></a>  <span class="fu">group_by</span>(model_family) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, mean_total, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-70"><a href="information-extraction-report.html#cb70-70" tabindex="-1"></a>  <span class="fu">select</span>(model_family, model, method_family, n_examples, mean_total, median_total, median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb70-71"><a href="information-extraction-report.html#cb70-71" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-72"><a href="information-extraction-report.html#cb70-72" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-73"><a href="information-extraction-report.html#cb70-73" tabindex="-1"></a>    <span class="at">mean_total =</span> <span class="fu">round</span>(mean_total, <span class="dv">3</span>),</span>
<span id="cb70-74"><a href="information-extraction-report.html#cb70-74" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">round</span>(median_total, <span class="dv">3</span>)</span>
<span id="cb70-75"><a href="information-extraction-report.html#cb70-75" tabindex="-1"></a>    )</span>
<span id="cb70-76"><a href="information-extraction-report.html#cb70-76" tabindex="-1"></a></span>
<span id="cb70-77"><a href="information-extraction-report.html#cb70-77" tabindex="-1"></a>n_better_as_regex <span class="ot">&lt;-</span> df_synth_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span></span>
<span id="cb70-78"><a href="information-extraction-report.html#cb70-78" tabindex="-1"></a>  <span class="fu">filter</span>(input_format <span class="sc">==</span> <span class="st">&quot;pdf&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb70-79"><a href="information-extraction-report.html#cb70-79" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">median_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb70-80"><a href="information-extraction-report.html#cb70-80" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_total))  <span class="sc">%&gt;%</span> </span>
<span id="cb70-81"><a href="information-extraction-report.html#cb70-81" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb70-82"><a href="information-extraction-report.html#cb70-82" tabindex="-1"></a>    <span class="at">better_than_regex =</span>  median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median</span>
<span id="cb70-83"><a href="information-extraction-report.html#cb70-83" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(better_than_regex) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb70-84"><a href="information-extraction-report.html#cb70-84" tabindex="-1"></a></span>
<span id="cb70-85"><a href="information-extraction-report.html#cb70-85" tabindex="-1"></a>n_better_as_regex_families <span class="ot">&lt;-</span> df_synth_top_performance <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb70-86"><a href="information-extraction-report.html#cb70-86" tabindex="-1"></a>    <span class="at">better_than_regex =</span>  median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median</span>
<span id="cb70-87"><a href="information-extraction-report.html#cb70-87" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(better_than_regex) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb70-88"><a href="information-extraction-report.html#cb70-88" tabindex="-1"></a></span>
<span id="cb70-89"><a href="information-extraction-report.html#cb70-89" tabindex="-1"></a>n_synth_tables <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb70-90"><a href="information-extraction-report.html#cb70-90" tabindex="-1"></a>  <span class="st">&quot;../benchmark_truth/synthetic_tables/separate_files/final/&quot;</span></span>
<span id="cb70-91"><a href="information-extraction-report.html#cb70-91" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb70-92"><a href="information-extraction-report.html#cb70-92" tabindex="-1"></a></span>
<span id="cb70-93"><a href="information-extraction-report.html#cb70-93" tabindex="-1"></a>n_synth_table_extraction <span class="ot">&lt;-</span> <span class="fu">list.files</span>(</span>
<span id="cb70-94"><a href="information-extraction-report.html#cb70-94" tabindex="-1"></a>  <span class="st">&quot;../benchmark_results/table_extraction/llm/final/synth_tables/&quot;</span></span>
<span id="cb70-95"><a href="information-extraction-report.html#cb70-95" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span>
<span id="cb70-96"><a href="information-extraction-report.html#cb70-96" tabindex="-1"></a></span>
<span id="cb70-97"><a href="information-extraction-report.html#cb70-97" tabindex="-1"></a><span class="co"># confidence_vs_truth_synth &lt;- df_synth_table_extraction %&gt;% </span></span>
<span id="cb70-98"><a href="information-extraction-report.html#cb70-98" tabindex="-1"></a><span class="co">#   # filter(method_family %in% c(&quot;top_n_rag_examples&quot;, &quot;n_random_examples&quot;)) %&gt;% </span></span>
<span id="cb70-99"><a href="information-extraction-report.html#cb70-99" tabindex="-1"></a><span class="co">#   filter(model %in% c(&quot;Ministral-8B-Instruct-2410&quot;, &quot;Qwen3-8B&quot;, &quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;)) %&gt;% </span></span>
<span id="cb70-100"><a href="information-extraction-report.html#cb70-100" tabindex="-1"></a><span class="co">#   group_by(method, model, loop) %&gt;% mutate(</span></span>
<span id="cb70-101"><a href="information-extraction-report.html#cb70-101" tabindex="-1"></a><span class="co">#     mean_percentage_correct_total = mean(percentage_correct_total, na.rm=TRUE), .before = 1,</span></span>
<span id="cb70-102"><a href="information-extraction-report.html#cb70-102" tabindex="-1"></a><span class="co">#     respect_units = !ignore_units</span></span>
<span id="cb70-103"><a href="information-extraction-report.html#cb70-103" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(respect_units, model, filepath) %&gt;% </span></span>
<span id="cb70-104"><a href="information-extraction-report.html#cb70-104" tabindex="-1"></a><span class="co">#   # arrange(desc(mean_percentage_correct_total)) %&gt;% </span></span>
<span id="cb70-105"><a href="information-extraction-report.html#cb70-105" tabindex="-1"></a><span class="co">#   slice_max(mean_percentage_correct_total, n = 1, with_ties = FALSE) %&gt;% </span></span>
<span id="cb70-106"><a href="information-extraction-report.html#cb70-106" tabindex="-1"></a><span class="co">#   mutate(predictions_processed = map(predictions, ~{</span></span>
<span id="cb70-107"><a href="information-extraction-report.html#cb70-107" tabindex="-1"></a><span class="co">#     .x %&gt;% </span></span>
<span id="cb70-108"><a href="information-extraction-report.html#cb70-108" tabindex="-1"></a><span class="co">#       select(-&quot;_merge&quot;) %&gt;% </span></span>
<span id="cb70-109"><a href="information-extraction-report.html#cb70-109" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb70-110"><a href="information-extraction-report.html#cb70-110" tabindex="-1"></a><span class="co">#         match = (year_truth == year_result) | (is.na(year_truth) &amp; is.na(year_result)),</span></span>
<span id="cb70-111"><a href="information-extraction-report.html#cb70-111" tabindex="-1"></a><span class="co">#         confidence = confidence_this_year,</span></span>
<span id="cb70-112"><a href="information-extraction-report.html#cb70-112" tabindex="-1"></a><span class="co">#         truth_NA = is.na(year_truth),</span></span>
<span id="cb70-113"><a href="information-extraction-report.html#cb70-113" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(year_result),</span></span>
<span id="cb70-114"><a href="information-extraction-report.html#cb70-114" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb70-115"><a href="information-extraction-report.html#cb70-115" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb70-116"><a href="information-extraction-report.html#cb70-116" tabindex="-1"></a><span class="co">#         tuple_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb70-117"><a href="information-extraction-report.html#cb70-117" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb70-118"><a href="information-extraction-report.html#cb70-118" tabindex="-1"></a><span class="co">#       mutate(</span></span>
<span id="cb70-119"><a href="information-extraction-report.html#cb70-119" tabindex="-1"></a><span class="co">#         confidence = confidence_previous_year,</span></span>
<span id="cb70-120"><a href="information-extraction-report.html#cb70-120" tabindex="-1"></a><span class="co">#         match = (previous_year_truth == previous_year_result) | (is.na(previous_year_truth) &amp; is.na(previous_year_result)),</span></span>
<span id="cb70-121"><a href="information-extraction-report.html#cb70-121" tabindex="-1"></a><span class="co">#         truth_NA = is.na(previous_year_truth),</span></span>
<span id="cb70-122"><a href="information-extraction-report.html#cb70-122" tabindex="-1"></a><span class="co">#         predicted_NA = is.na(previous_year_result),</span></span>
<span id="cb70-123"><a href="information-extraction-report.html#cb70-123" tabindex="-1"></a><span class="co">#         .before = 4</span></span>
<span id="cb70-124"><a href="information-extraction-report.html#cb70-124" tabindex="-1"></a><span class="co">#       ) %&gt;% nest(</span></span>
<span id="cb70-125"><a href="information-extraction-report.html#cb70-125" tabindex="-1"></a><span class="co">#         tuple_previous_year = c(match, confidence, truth_NA, predicted_NA)</span></span>
<span id="cb70-126"><a href="information-extraction-report.html#cb70-126" tabindex="-1"></a><span class="co">#       ) %&gt;% select(</span></span>
<span id="cb70-127"><a href="information-extraction-report.html#cb70-127" tabindex="-1"></a><span class="co">#         -c(year_truth, previous_year_truth, year_result, previous_year_result,</span></span>
<span id="cb70-128"><a href="information-extraction-report.html#cb70-128" tabindex="-1"></a><span class="co">#            confidence_this_year, confidence_previous_year)</span></span>
<span id="cb70-129"><a href="information-extraction-report.html#cb70-129" tabindex="-1"></a><span class="co">#       ) %&gt;% </span></span>
<span id="cb70-130"><a href="information-extraction-report.html#cb70-130" tabindex="-1"></a><span class="co">#       pivot_longer(-c(&quot;E1&quot;, &quot;E2&quot;, &quot;E3&quot;)) %&gt;% </span></span>
<span id="cb70-131"><a href="information-extraction-report.html#cb70-131" tabindex="-1"></a><span class="co">#       unnest(cols = value) %&gt;% mutate(</span></span>
<span id="cb70-132"><a href="information-extraction-report.html#cb70-132" tabindex="-1"></a><span class="co">#         match = if_else(is.na(match), FALSE, match)</span></span>
<span id="cb70-133"><a href="information-extraction-report.html#cb70-133" tabindex="-1"></a><span class="co">#       )</span></span>
<span id="cb70-134"><a href="information-extraction-report.html#cb70-134" tabindex="-1"></a><span class="co">#   })) %&gt;% </span></span>
<span id="cb70-135"><a href="information-extraction-report.html#cb70-135" tabindex="-1"></a><span class="co">#   unnest(predictions_processed) %&gt;% mutate(</span></span>
<span id="cb70-136"><a href="information-extraction-report.html#cb70-136" tabindex="-1"></a><span class="co">#     match = factor(match, levels = c(F, T)),</span></span>
<span id="cb70-137"><a href="information-extraction-report.html#cb70-137" tabindex="-1"></a><span class="co">#     truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb70-138"><a href="information-extraction-report.html#cb70-138" tabindex="-1"></a><span class="co">#   )</span></span>
<span id="cb70-139"><a href="information-extraction-report.html#cb70-139" tabindex="-1"></a><span class="co"># </span></span>
<span id="cb70-140"><a href="information-extraction-report.html#cb70-140" tabindex="-1"></a><span class="co"># confidence_intervals_synth &lt;- confidence_vs_truth_synth %&gt;% #rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb70-141"><a href="information-extraction-report.html#cb70-141" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb70-142"><a href="information-extraction-report.html#cb70-142" tabindex="-1"></a><span class="co">#     conf_interval = cut(confidence, breaks = seq(0, 1, by = 0.05), include.lowest = TRUE),</span></span>
<span id="cb70-143"><a href="information-extraction-report.html#cb70-143" tabindex="-1"></a><span class="co">#     conf_center = as.numeric(sub(&quot;\\((.+),(.+)\\]&quot;, &quot;\\1&quot;, levels(conf_interval))[conf_interval]) + 0.025</span></span>
<span id="cb70-144"><a href="information-extraction-report.html#cb70-144" tabindex="-1"></a><span class="co">#   ) %&gt;%</span></span>
<span id="cb70-145"><a href="information-extraction-report.html#cb70-145" tabindex="-1"></a><span class="co">#   group_by(conf_center, predicted_NA, model, respect_units) %&gt;%</span></span>
<span id="cb70-146"><a href="information-extraction-report.html#cb70-146" tabindex="-1"></a><span class="co">#   summarise(</span></span>
<span id="cb70-147"><a href="information-extraction-report.html#cb70-147" tabindex="-1"></a><span class="co">#     n_true = sum(match == TRUE, na.rm = TRUE),</span></span>
<span id="cb70-148"><a href="information-extraction-report.html#cb70-148" tabindex="-1"></a><span class="co">#     n_false = sum(match == FALSE, na.rm = TRUE),</span></span>
<span id="cb70-149"><a href="information-extraction-report.html#cb70-149" tabindex="-1"></a><span class="co">#     total = n_true + n_false,</span></span>
<span id="cb70-150"><a href="information-extraction-report.html#cb70-150" tabindex="-1"></a><span class="co">#     chance_false = if_else(total &gt; 0, n_false / total * 100, NA_real_),</span></span>
<span id="cb70-151"><a href="information-extraction-report.html#cb70-151" tabindex="-1"></a><span class="co">#     chance_zero = chance_false == 0,</span></span>
<span id="cb70-152"><a href="information-extraction-report.html#cb70-152" tabindex="-1"></a><span class="co">#     chance_below_1 = chance_false &lt; 1,</span></span>
<span id="cb70-153"><a href="information-extraction-report.html#cb70-153" tabindex="-1"></a><span class="co">#     chance_low = if_else(chance_zero, 0, if_else(chance_below_1, 1, 2)),</span></span>
<span id="cb70-154"><a href="information-extraction-report.html#cb70-154" tabindex="-1"></a><span class="co">#     chance_low = factor(chance_low, levels = c(0,1,2), labels = c(&quot;equls 0 %&quot;, &quot;below 1 %&quot;, &quot;more&quot;))</span></span>
<span id="cb70-155"><a href="information-extraction-report.html#cb70-155" tabindex="-1"></a><span class="co">#   ) %&gt;% group_by(predicted_NA, model, respect_units) %&gt;% mutate(</span></span>
<span id="cb70-156"><a href="information-extraction-report.html#cb70-156" tabindex="-1"></a><span class="co">#     perc = total/sum(total)*100</span></span>
<span id="cb70-157"><a href="information-extraction-report.html#cb70-157" tabindex="-1"></a><span class="co">#   ) %&gt;% ungroup() %&gt;% </span></span>
<span id="cb70-158"><a href="information-extraction-report.html#cb70-158" tabindex="-1"></a><span class="co">#   mutate(</span></span>
<span id="cb70-159"><a href="information-extraction-report.html#cb70-159" tabindex="-1"></a><span class="co">#     chance_false_interval = cut(</span></span>
<span id="cb70-160"><a href="information-extraction-report.html#cb70-160" tabindex="-1"></a><span class="co">#       chance_false,</span></span>
<span id="cb70-161"><a href="information-extraction-report.html#cb70-161" tabindex="-1"></a><span class="co">#       breaks = c(0, 1, 2, 4, 8, 16, 32, 64, Inf),</span></span>
<span id="cb70-162"><a href="information-extraction-report.html#cb70-162" tabindex="-1"></a><span class="co">#       labels = c(&quot;[0,1)&quot;, &quot;[1,2)&quot;, &quot;[2,4)&quot;, &quot;[4,8)&quot;, </span></span>
<span id="cb70-163"><a href="information-extraction-report.html#cb70-163" tabindex="-1"></a><span class="co">#                  &quot;[8,16)&quot;, &quot;[16,32)&quot;, &quot;[32,64)&quot;, &quot;[64,Inf)&quot;),</span></span>
<span id="cb70-164"><a href="information-extraction-report.html#cb70-164" tabindex="-1"></a><span class="co">#       right = FALSE,</span></span>
<span id="cb70-165"><a href="information-extraction-report.html#cb70-165" tabindex="-1"></a><span class="co">#       ordered_result = TRUE</span></span>
<span id="cb70-166"><a href="information-extraction-report.html#cb70-166" tabindex="-1"></a><span class="co">#     ),</span></span>
<span id="cb70-167"><a href="information-extraction-report.html#cb70-167" tabindex="-1"></a><span class="co">#   )</span></span></code></pre></div>
</details>
<div id="ground-truth-dataset" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.1">
<h5><span class="header-section-number">9.2.2.0.1</span> Ground truth dataset<a href="information-extraction-report.html#ground-truth-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For this task we created synthetic <strong>Aktiva</strong> tables that should allow to investigate the influence certain characteristics of tables on the extraction task. We systematically created <strong>Aktiva</strong> tables that vary over the following characteristics:</p>
</div>
<ol style="list-style-type: decimal">
<li>n_columns: Number of columns the numeric values are distributed over ranging from 2 to 4.</li>
<li>header_span: Span in the header rows.</li>
<li>thin: Including just a subset of all possible entries for a <strong>Aktiva</strong> table.</li>
<li>unit_in_first_cell: Is the currency unit (e.g.Â Tâ¬) given in the beginning of the table instead for each column.</li>
<li>enumeration: Are the rows numerated following the schema in the legal text.</li>
<li>many_line_breaks: Limiting the character length for the row descriptions to 50 to introduce line breaks.</li>
<li>shuffle_rows: The order of the rows within lower hierarchies can vary.</li>
<li>text_around: There is some random text before and after the table on the generated page.</li>
<li>sum_same_line: Summed values are in the same line as single values if there are more than two columns.</li>
<li>unit: Eight different currency units from. E.g.: â¬, TEUR, Mio. â¬</li>
<li>input_format: Table is exported as PDF, HTML or Markdown document.</li>
</ol>
<p>This results in 49152 tables. A sample of 10 % is used for the extraction task. The <em>header_span</em> and <em>text_around</em> are only varied for the PDF format.</p>
<div id="extraction-task-overview" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.2">
<h5><span class="header-section-number">9.2.2.0.2</span> Extraction task overview<a href="information-extraction-report.html#extraction-task-overview" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>For the table extraction task with synthetic <strong>Aktiva</strong> tables 17 open source models from 6 model families have been benchmarked. There have been the same seven methods tested with each <a href="glossary.html#acronyms_LLM">LLM</a> as described in section <a href="information-extraction-report.html#extraction-with-llms-real-tables">9.2</a>. Each method was used twice, because in one trial the <a href="glossary.html#acronyms_LLM">LLM</a> is prompted to respect the currency units and in the other trail it is not.</p>
</div>
<p>This results in 531 files, that hold the results of 4_915 table extractions each. For the investigation of potential predictors influences the random forest is generated with a sample of 50_000 of these 68_810 results and finally, the <a href="glossary.html#acronyms_SHAP">SHAP</a> values are calculated with 2_000 rows of data.</p>
<div id="performance-3" class="section level5 hasAnchor paragraph-start" number="9.2.2.0.3">
<h5><span class="header-section-number">9.2.2.0.3</span> Performance<a href="information-extraction-report.html#performance-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context">9.9</a> shows the best performing combination of <a href="glossary.html#acronyms_LLM">LLM</a> and prompting strategy for each model family. The results are sorted by their mean percentage of total correct predictions. We only compare results for table extractions that work with a PDF document based table here.</p>
</div>
<p>For every model family there is at least one model-method combination that performed better than the <a href="glossary.html#acronyms_regex">regex</a> baseline. For the synthetic table extraction task the baseline is 0.966. 68 from 129 model-method combinations perform better than this baseline. There has been no model that performed better than this baseline with the <em>zero_shot</em> or <em>static_example</em> method.</p>
<p>Table <a href="information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context">9.9</a> shows, that Qwen3-235B-A22B-Instruct performs best. Llama 4 Scout also performs very good but is three times faster. Table <a href="information-extraction-report.html#tab:table-metrics-llm-real-table-extraction-synth-context-small">9.10</a> shows three small <a href="glossary.html#acronyms_LLM">LLM</a>s that also beat the median threshold for the synthetic table extraction task. But we would not prefer the Qwen3-8B model over the Llama Scout model, because its speed advantage is to small, compared to the performance decrease. But if there is limited VRAM available the Qwen3 model is a good choice. It can run well with 40 GB VRAM. The Llama Scout needs 640 GB VRAM to run well<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a>.</p>
<p>Detail:</p>
<p>Figure <a href="figure-collection.html#fig:synth-table-extraction-llm-performance-numeric-overview">14.24</a> shows, that Llama 3.3 70B never manages to reduce the spread in the numeric prediction performance.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="information-extraction-report.html#cb71-1" tabindex="-1"></a>df_synth_top_performance <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="information-extraction-report.html#cb71-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb71-3"><a href="information-extraction-report.html#cb71-3" tabindex="-1"></a>    <span class="st">&quot;median_runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(median_runtime<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(median_runtime<span class="sc">%%</span><span class="dv">60</span>)),</span>
<span id="cb71-4"><a href="information-extraction-report.html#cb71-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">if_else</span>(</span>
<span id="cb71-5"><a href="information-extraction-report.html#cb71-5" tabindex="-1"></a>      median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median,</span>
<span id="cb71-6"><a href="information-extraction-report.html#cb71-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, median_total, <span class="st">&quot;**&quot;</span>),</span>
<span id="cb71-7"><a href="information-extraction-report.html#cb71-7" tabindex="-1"></a>      <span class="fu">as.character</span>(median_total)</span>
<span id="cb71-8"><a href="information-extraction-report.html#cb71-8" tabindex="-1"></a>      )</span>
<span id="cb71-9"><a href="information-extraction-report.html#cb71-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb71-10"><a href="information-extraction-report.html#cb71-10" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best median table extraction performance with synthetic &#39;Aktiva&#39; dataset for each model family&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrrrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-synth-context">Table 9.9: </span>Comparing best median table extraction performance with synthetic âAktivaâ dataset for each model family
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-c75a0b559ad5ffcad1df" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-c75a0b559ad5ffcad1df">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6"],["Qwen 3","mistralai","Qwen 2.5","Llama-4","google","Llama-3"],["Qwen3-235B-A22B-Instruct-2507","Mistral-Large-Instruct-2411","Qwen2.5-72B-Instruct","Llama-4-Maverick-17B-128E-Instruct-FP8","gemma-3-27b-it","Llama-3.1-70B-Instruct"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["3","3","5","1","5","3"],["0.989","0.987","0.985","0.974","0.921","0.902"],["<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","<b>1<\/b>","0.948","<b>1<\/b>"],["82:36","111:47","105:5","27:27","33:36","60:41"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"mean total","targets":5},{"name":"median total","targets":6},{"name":"median runtime in minutes","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="information-extraction-report.html#cb72-1" tabindex="-1"></a>df_synth_top_performance_small <span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="information-extraction-report.html#cb72-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb72-3"><a href="information-extraction-report.html#cb72-3" tabindex="-1"></a>    <span class="st">&quot;median_runtime in minutes&quot;</span> <span class="ot">=</span> <span class="fu">paste0</span>(<span class="fu">round</span>(median_runtime<span class="sc">/</span><span class="dv">60</span>), <span class="st">&quot;:&quot;</span>, <span class="fu">round</span>(median_runtime<span class="sc">%%</span><span class="dv">60</span>)),</span>
<span id="cb72-4"><a href="information-extraction-report.html#cb72-4" tabindex="-1"></a>    <span class="at">median_total =</span> <span class="fu">if_else</span>(</span>
<span id="cb72-5"><a href="information-extraction-report.html#cb72-5" tabindex="-1"></a>      median_total<span class="sc">&gt;</span>synth_table_extraction_regex_total_performance_median,</span>
<span id="cb72-6"><a href="information-extraction-report.html#cb72-6" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, median_total, <span class="st">&quot;**&quot;</span>),</span>
<span id="cb72-7"><a href="information-extraction-report.html#cb72-7" tabindex="-1"></a>      <span class="fu">as.character</span>(median_total)</span>
<span id="cb72-8"><a href="information-extraction-report.html#cb72-8" tabindex="-1"></a>      )</span>
<span id="cb72-9"><a href="information-extraction-report.html#cb72-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>median_runtime) <span class="sc">%&gt;%</span> </span>
<span id="cb72-10"><a href="information-extraction-report.html#cb72-10" tabindex="-1"></a>  <span class="fu">render_table</span>(<span class="at">caption =</span> <span class="st">&quot;Comparing best median table extraction performance with synthetic &#39;Aktiva&#39; dataset for each model family for models with less than 17B parameters&quot;</span>, <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">alignment =</span> <span class="st">&quot;lllrr&quot;</span>, <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:table-metrics-llm-real-table-extraction-synth-context-small">Table 9.10: </span>Comparing best median table extraction performance with synthetic âAktivaâ dataset for each model family for models with less than 17B parameters
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-e98f94b680945b5dc935" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-e98f94b680945b5dc935">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5"],["Qwen 3","Qwen 2.5","google","mistralai","Llama-3"],["Qwen3-8B","Qwen2.5-7B-Instruct","gemma-3-12b-it","Ministral-8B-Instruct-2410","Llama-3.1-8B-Instruct"],["top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples","top_<wbr>n_<wbr>rag_<wbr>examples"],["5","5","3","1","3"],["0.969","0.932","0.88","0.865","0.861"],["<b>1<\/b>","<b>0.983<\/b>","<b>0.966<\/b>","<b>0.966<\/b>","0.931"],["27:9","16:19","19:55","17:45","14:8"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model family<\/th>\n      <th>model<\/th>\n      <th>method family<\/th>\n      <th>n examples<\/th>\n      <th>mean total<\/th>\n      <th>median total<\/th>\n      <th>median runtime in minutes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-left"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model family","targets":1},{"name":"model","targets":2},{"name":"method family","targets":3},{"name":"n examples","targets":4},{"name":"mean total","targets":5},{"name":"median total","targets":6},{"name":"median runtime in minutes","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="real-table-extraction-synth-context" class="section level3 hasAnchor" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> Hybrid approach<a href="information-extraction-report.html#real-table-extraction-synth-context" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="information-extraction-report.html#cb73-1" tabindex="-1"></a>best_models_with_examples <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="information-extraction-report.html#cb73-2" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(method_family, <span class="st">&quot;n_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-3"><a href="information-extraction-report.html#cb73-3" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb73-4"><a href="information-extraction-report.html#cb73-4" tabindex="-1"></a>    model, method</span>
<span id="cb73-5"><a href="information-extraction-report.html#cb73-5" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-6"><a href="information-extraction-report.html#cb73-6" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-7"><a href="information-extraction-report.html#cb73-7" tabindex="-1"></a>    <span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total),</span>
<span id="cb73-8"><a href="information-extraction-report.html#cb73-8" tabindex="-1"></a>    <span class="co"># mean_synth = mean(percentage_correct_total)</span></span>
<span id="cb73-9"><a href="information-extraction-report.html#cb73-9" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-10"><a href="information-extraction-report.html#cb73-10" tabindex="-1"></a>  <span class="co"># arrange(desc(median_synth)) %&gt;% </span></span>
<span id="cb73-11"><a href="information-extraction-report.html#cb73-11" tabindex="-1"></a>  <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb73-12"><a href="information-extraction-report.html#cb73-12" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, median_synth, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-13"><a href="information-extraction-report.html#cb73-13" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-14"><a href="information-extraction-report.html#cb73-14" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb73-15"><a href="information-extraction-report.html#cb73-15" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb73-16"><a href="information-extraction-report.html#cb73-16" tabindex="-1"></a>      model, method</span>
<span id="cb73-17"><a href="information-extraction-report.html#cb73-17" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_real =</span> <span class="fu">median</span>(percentage_correct_total))) <span class="sc">%&gt;%</span> </span>
<span id="cb73-18"><a href="information-extraction-report.html#cb73-18" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb73-19"><a href="information-extraction-report.html#cb73-19" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb73-20"><a href="information-extraction-report.html#cb73-20" tabindex="-1"></a>      model, method</span>
<span id="cb73-21"><a href="information-extraction-report.html#cb73-21" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-22"><a href="information-extraction-report.html#cb73-22" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">median_zero_shot =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>method)</span>
<span id="cb73-23"><a href="information-extraction-report.html#cb73-23" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-24"><a href="information-extraction-report.html#cb73-24" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb73-25"><a href="information-extraction-report.html#cb73-25" tabindex="-1"></a></span>
<span id="cb73-26"><a href="information-extraction-report.html#cb73-26" tabindex="-1"></a>median_models_with_examples <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb73-27"><a href="information-extraction-report.html#cb73-27" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_detect</span>(method_family, <span class="st">&quot;n_&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-28"><a href="information-extraction-report.html#cb73-28" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb73-29"><a href="information-extraction-report.html#cb73-29" tabindex="-1"></a>    model<span class="co">#, method</span></span>
<span id="cb73-30"><a href="information-extraction-report.html#cb73-30" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-31"><a href="information-extraction-report.html#cb73-31" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-32"><a href="information-extraction-report.html#cb73-32" tabindex="-1"></a>  <span class="co"># arrange(desc(median_synth)) %&gt;% </span></span>
<span id="cb73-33"><a href="information-extraction-report.html#cb73-33" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, median_synth, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-34"><a href="information-extraction-report.html#cb73-34" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-35"><a href="information-extraction-report.html#cb73-35" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb73-36"><a href="information-extraction-report.html#cb73-36" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb73-37"><a href="information-extraction-report.html#cb73-37" tabindex="-1"></a>      model<span class="co">#, method</span></span>
<span id="cb73-38"><a href="information-extraction-report.html#cb73-38" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_real =</span> <span class="fu">median</span>(percentage_correct_total))) <span class="sc">%&gt;%</span> </span>
<span id="cb73-39"><a href="information-extraction-report.html#cb73-39" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb73-40"><a href="information-extraction-report.html#cb73-40" tabindex="-1"></a>    df_real_table_extraction <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(</span>
<span id="cb73-41"><a href="information-extraction-report.html#cb73-41" tabindex="-1"></a>      model, method</span>
<span id="cb73-42"><a href="information-extraction-report.html#cb73-42" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-43"><a href="information-extraction-report.html#cb73-43" tabindex="-1"></a>      <span class="fu">summarise</span>(<span class="at">median_zero_shot =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(method <span class="sc">==</span> <span class="st">&quot;zero_shot&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>method)</span>
<span id="cb73-44"><a href="information-extraction-report.html#cb73-44" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-45"><a href="information-extraction-report.html#cb73-45" tabindex="-1"></a>  <span class="fu">mutate_if</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">3</span>))</span>
<span id="cb73-46"><a href="information-extraction-report.html#cb73-46" tabindex="-1"></a></span>
<span id="cb73-47"><a href="information-extraction-report.html#cb73-47" tabindex="-1"></a>best_mistral <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> <span class="fu">filter</span>(model_family <span class="sc">==</span> <span class="st">&quot;mistralai&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, method) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">median_synth =</span> <span class="fu">median</span>(percentage_correct_total)) <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(median_synth)) <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(median_synth)</span>
<span id="cb73-48"><a href="information-extraction-report.html#cb73-48" tabindex="-1"></a></span>
<span id="cb73-49"><a href="information-extraction-report.html#cb73-49" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb73-50"><a href="information-extraction-report.html#cb73-50" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">n_col_T_EUR =</span> T_EUR_both <span class="sc">+</span> T_EUR) <span class="sc">%&gt;%</span> </span>
<span id="cb73-51"><a href="information-extraction-report.html#cb73-51" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-52"><a href="information-extraction-report.html#cb73-52" tabindex="-1"></a>    <span class="at">method_family =</span> <span class="fu">factor</span>(method_family, <span class="at">levels =</span> method_order),</span>
<span id="cb73-53"><a href="information-extraction-report.html#cb73-53" tabindex="-1"></a>    <span class="at">n_examples =</span> <span class="fu">fct_rev</span>(<span class="fu">ordered</span>(<span class="fu">paste</span>(<span class="st">&quot;n =&quot;</span>, n_examples))),</span>
<span id="cb73-54"><a href="information-extraction-report.html#cb73-54" tabindex="-1"></a>    <span class="at">respect_units =</span> <span class="sc">!</span>ignore_units</span>
<span id="cb73-55"><a href="information-extraction-report.html#cb73-55" tabindex="-1"></a>  )</span>
<span id="cb73-56"><a href="information-extraction-report.html#cb73-56" tabindex="-1"></a></span>
<span id="cb73-57"><a href="information-extraction-report.html#cb73-57" tabindex="-1"></a>n_tables_n_cols <span class="ot">&lt;-</span> df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> <span class="fu">select</span>(filepath, n_col_T_EUR) <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(n_col_T_EUR) <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="fu">n</span>())</span>
<span id="cb73-58"><a href="information-extraction-report.html#cb73-58" tabindex="-1"></a></span>
<span id="cb73-59"><a href="information-extraction-report.html#cb73-59" tabindex="-1"></a>confidence_vs_truth_hybrid <span class="ot">&lt;-</span> df_real_table_extraction_synth <span class="sc">%&gt;%</span> </span>
<span id="cb73-60"><a href="information-extraction-report.html#cb73-60" tabindex="-1"></a>  <span class="fu">filter</span>(method_family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-61"><a href="information-extraction-report.html#cb73-61" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-62"><a href="information-extraction-report.html#cb73-62" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb73-63"><a href="information-extraction-report.html#cb73-63" tabindex="-1"></a>    <span class="at">median_percentage_correct_total =</span> <span class="fu">median</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span>,</span>
<span id="cb73-64"><a href="information-extraction-report.html#cb73-64" tabindex="-1"></a>    <span class="at">respect_units =</span> <span class="sc">!</span>ignore_units</span>
<span id="cb73-65"><a href="information-extraction-report.html#cb73-65" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(respect_units, model, filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb73-66"><a href="information-extraction-report.html#cb73-66" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_percentage_correct_total)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-67"><a href="information-extraction-report.html#cb73-67" tabindex="-1"></a>  <span class="fu">slice_max</span>(median_percentage_correct_total, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-68"><a href="information-extraction-report.html#cb73-68" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predictions_processed =</span> <span class="fu">map</span>(predictions, <span class="sc">~</span>{</span>
<span id="cb73-69"><a href="information-extraction-report.html#cb73-69" tabindex="-1"></a>    .x <span class="sc">%&gt;%</span> </span>
<span id="cb73-70"><a href="information-extraction-report.html#cb73-70" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span><span class="st">&quot;_merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-71"><a href="information-extraction-report.html#cb73-71" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb73-72"><a href="information-extraction-report.html#cb73-72" tabindex="-1"></a>        <span class="at">match =</span> (year_truth <span class="sc">==</span> year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(year_result)),</span>
<span id="cb73-73"><a href="information-extraction-report.html#cb73-73" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_this_year,</span>
<span id="cb73-74"><a href="information-extraction-report.html#cb73-74" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(year_truth),</span>
<span id="cb73-75"><a href="information-extraction-report.html#cb73-75" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(year_result),</span>
<span id="cb73-76"><a href="information-extraction-report.html#cb73-76" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb73-77"><a href="information-extraction-report.html#cb73-77" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb73-78"><a href="information-extraction-report.html#cb73-78" tabindex="-1"></a>        <span class="at">tuple_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb73-79"><a href="information-extraction-report.html#cb73-79" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-80"><a href="information-extraction-report.html#cb73-80" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb73-81"><a href="information-extraction-report.html#cb73-81" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_previous_year,</span>
<span id="cb73-82"><a href="information-extraction-report.html#cb73-82" tabindex="-1"></a>        <span class="at">match =</span> (previous_year_truth <span class="sc">==</span> previous_year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(previous_year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(previous_year_result)),</span>
<span id="cb73-83"><a href="information-extraction-report.html#cb73-83" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(previous_year_truth),</span>
<span id="cb73-84"><a href="information-extraction-report.html#cb73-84" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(previous_year_result),</span>
<span id="cb73-85"><a href="information-extraction-report.html#cb73-85" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb73-86"><a href="information-extraction-report.html#cb73-86" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb73-87"><a href="information-extraction-report.html#cb73-87" tabindex="-1"></a>        <span class="at">tuple_previous_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb73-88"><a href="information-extraction-report.html#cb73-88" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb73-89"><a href="information-extraction-report.html#cb73-89" tabindex="-1"></a>        <span class="sc">-</span><span class="fu">c</span>(year_truth, previous_year_truth, year_result, previous_year_result,</span>
<span id="cb73-90"><a href="information-extraction-report.html#cb73-90" tabindex="-1"></a>           confidence_this_year, confidence_previous_year)</span>
<span id="cb73-91"><a href="information-extraction-report.html#cb73-91" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb73-92"><a href="information-extraction-report.html#cb73-92" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;E1&quot;</span>, <span class="st">&quot;E2&quot;</span>, <span class="st">&quot;E3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-93"><a href="information-extraction-report.html#cb73-93" tabindex="-1"></a>      <span class="fu">unnest</span>(<span class="at">cols =</span> value) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb73-94"><a href="information-extraction-report.html#cb73-94" tabindex="-1"></a>        <span class="at">match =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(match), <span class="cn">FALSE</span>, match)</span>
<span id="cb73-95"><a href="information-extraction-report.html#cb73-95" tabindex="-1"></a>      )</span>
<span id="cb73-96"><a href="information-extraction-report.html#cb73-96" tabindex="-1"></a>  })) <span class="sc">%&gt;%</span> </span>
<span id="cb73-97"><a href="information-extraction-report.html#cb73-97" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions_processed) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb73-98"><a href="information-extraction-report.html#cb73-98" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb73-99"><a href="information-extraction-report.html#cb73-99" tabindex="-1"></a>    <span class="at">truth_NA =</span> <span class="fu">factor</span>(truth_NA, <span class="at">levels =</span> <span class="fu">c</span>(F, T))</span>
<span id="cb73-100"><a href="information-extraction-report.html#cb73-100" tabindex="-1"></a>  )</span>
<span id="cb73-101"><a href="information-extraction-report.html#cb73-101" tabindex="-1"></a></span>
<span id="cb73-102"><a href="information-extraction-report.html#cb73-102" tabindex="-1"></a>confidence_intervals_hybrid <span class="ot">&lt;-</span> confidence_vs_truth_hybrid <span class="sc">%&gt;%</span> <span class="co">#rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb73-103"><a href="information-extraction-report.html#cb73-103" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-104"><a href="information-extraction-report.html#cb73-104" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb73-105"><a href="information-extraction-report.html#cb73-105" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb73-106"><a href="information-extraction-report.html#cb73-106" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb73-107"><a href="information-extraction-report.html#cb73-107" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, predicted_NA, model, respect_units) <span class="sc">%&gt;%</span></span>
<span id="cb73-108"><a href="information-extraction-report.html#cb73-108" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb73-109"><a href="information-extraction-report.html#cb73-109" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb73-110"><a href="information-extraction-report.html#cb73-110" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb73-111"><a href="information-extraction-report.html#cb73-111" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb73-112"><a href="information-extraction-report.html#cb73-112" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb73-113"><a href="information-extraction-report.html#cb73-113" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb73-114"><a href="information-extraction-report.html#cb73-114" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb73-115"><a href="information-extraction-report.html#cb73-115" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb73-116"><a href="information-extraction-report.html#cb73-116" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb73-117"><a href="information-extraction-report.html#cb73-117" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(predicted_NA, model, respect_units) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb73-118"><a href="information-extraction-report.html#cb73-118" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb73-119"><a href="information-extraction-report.html#cb73-119" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-120"><a href="information-extraction-report.html#cb73-120" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-121"><a href="information-extraction-report.html#cb73-121" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb73-122"><a href="information-extraction-report.html#cb73-122" tabindex="-1"></a>      chance_false,</span>
<span id="cb73-123"><a href="information-extraction-report.html#cb73-123" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb73-124"><a href="information-extraction-report.html#cb73-124" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb73-125"><a href="information-extraction-report.html#cb73-125" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb73-126"><a href="information-extraction-report.html#cb73-126" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb73-127"><a href="information-extraction-report.html#cb73-127" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb73-128"><a href="information-extraction-report.html#cb73-128" tabindex="-1"></a>    ),</span>
<span id="cb73-129"><a href="information-extraction-report.html#cb73-129" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<p>In this section we present the results of using synthetic <strong>Aktiva</strong> tables for the in-context learning to extract information from real <strong>Aktiva</strong> tables. We show that even such a hybrid approach can be used, to extend the extraction task by a unit conversation task.</p>
<div id="performance-4" class="section level5 hasAnchor paragraph-start" number="9.2.3.0.1">
<h5><span class="header-section-number">9.2.3.0.1</span> Performance<a href="information-extraction-report.html#performance-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="information-extraction-report.html#tab:comparing-extraction-performance-real-and-synth-context-learning">9.11</a> compares the overall performance for the extraction task of the best model-method combination in the hybrid approach per model with the <em>zero_shot</em> and real example training performance. Using real examples for in-context-learning for those model-method combinations is better than using the generated synthetic data. Qwen3-8B and gemma3-12b can improve the most using real examples instead of sythetic examples, normalized on the possible improvement from the synthetic learning results using this formula:</p>
</div>
<p><span class="math display">\[
delta\_rate_{synth} = \frac{median \left( real \right)-median \left( synth \right)}{1-median \left( synth \right)}
\]</span></p>
<p>On the same time, gemma3-12b shows the lowest <em>delta_rate</em> with under 10 %, when the improvement of using synthetic examples is compared with the <em>zero_shot</em> method. For the other models this is more tan 48 % and highest for Llama Scout 4 with 87.5 % improving from 0.45 to 0.93. Qwen-235B score as high with both learning approaches, but scored best with just using a single synthetic example. Table <a href="tables.html#tab:comparing-extraction-performance-real-and-synth-context-learning-median">13.2</a> shows that these observations are valid for the improvement with in the models independent from the selected method. Figure <a href="figure-collection.html#fig:compare-real-table-extraction-by-context-type">14.27</a> shows, that the improvement for using one or three synthetic examples is biggest for Qwen3-8B.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="information-extraction-report.html#cb74-1" tabindex="-1"></a>best_models_with_examples <span class="sc">%&gt;%</span> </span>
<span id="cb74-2"><a href="information-extraction-report.html#cb74-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb74-3"><a href="information-extraction-report.html#cb74-3" tabindex="-1"></a>    <span class="at">delta_real_synth =</span> median_real<span class="sc">-</span>median_synth,</span>
<span id="cb74-4"><a href="information-extraction-report.html#cb74-4" tabindex="-1"></a>    <span class="at">delta_rate_real_synth =</span> (delta_real_synth)<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>median_synth),</span>
<span id="cb74-5"><a href="information-extraction-report.html#cb74-5" tabindex="-1"></a>    <span class="at">delta_synth_zero =</span> median_synth<span class="sc">-</span>median_zero_shot,</span>
<span id="cb74-6"><a href="information-extraction-report.html#cb74-6" tabindex="-1"></a>    <span class="at">delta_rate_synth_zero =</span> (delta_synth_zero)<span class="sc">/</span>(<span class="dv">1</span><span class="sc">-</span>median_zero_shot)</span>
<span id="cb74-7"><a href="information-extraction-report.html#cb74-7" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb74-8"><a href="information-extraction-report.html#cb74-8" tabindex="-1"></a>  <span class="fu">mutate_if</span>(</span>
<span id="cb74-9"><a href="information-extraction-report.html#cb74-9" tabindex="-1"></a>    is.numeric, </span>
<span id="cb74-10"><a href="information-extraction-report.html#cb74-10" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb74-11"><a href="information-extraction-report.html#cb74-11" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb74-12"><a href="information-extraction-report.html#cb74-12" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, <span class="fu">round</span>(., <span class="dv">3</span>), <span class="st">&quot;**&quot;</span>),</span>
<span id="cb74-13"><a href="information-extraction-report.html#cb74-13" tabindex="-1"></a>      <span class="fu">round</span>(., <span class="dv">3</span>)</span>
<span id="cb74-14"><a href="information-extraction-report.html#cb74-14" tabindex="-1"></a>    )</span>
<span id="cb74-15"><a href="information-extraction-report.html#cb74-15" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb74-16"><a href="information-extraction-report.html#cb74-16" tabindex="-1"></a>    model, method, median_real, median_synth, median_zero_shot, </span>
<span id="cb74-17"><a href="information-extraction-report.html#cb74-17" tabindex="-1"></a>    <span class="co"># delta_real_synth, delta_synth_zero, </span></span>
<span id="cb74-18"><a href="information-extraction-report.html#cb74-18" tabindex="-1"></a>    delta_rate_real_synth, delta_rate_synth_zero</span>
<span id="cb74-19"><a href="information-extraction-report.html#cb74-19" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb74-20"><a href="information-extraction-report.html#cb74-20" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb74-21"><a href="information-extraction-report.html#cb74-21" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;llrrrrr&quot;</span>,</span>
<span id="cb74-22"><a href="information-extraction-report.html#cb74-22" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing extraction performance for real Aktiva extraction task with synthetic and real examples for in-context learning with a zero shot approach for the best performing model-method combination in the hybrid&quot;</span>,</span>
<span id="cb74-23"><a href="information-extraction-report.html#cb74-23" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:comparing-extraction-performance-real-and-synth-context-learning">Table 9.11: </span>Comparing extraction performance for real Aktiva extraction task with synthetic and real examples for in-context learning with a zero shot approach for the best performing model-method combination in the hybrid
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-913cce27eff9a1c6c3fd" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-913cce27eff9a1c6c3fd">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Qwen3-235B-A22B-Instruct-2507-FP8","Llama-4-Scout-17B-16E-Instruct","Mistral-Large-Instruct-2411","Qwen3-8B","Llama-3.1-8B-Instruct","Ministral-8B-Instruct-2410","gemma-3-27b-it","gemma-3-12b-it"],["1_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","5_<wbr>random_<wbr>examples","3_<wbr>random_<wbr>examples","top_<wbr>1_<wbr>rag_<wbr>examples"],["<b>0.966<\/b>","<b>0.966<\/b>","<b>0.966<\/b>","0.94","0.836","0.897","0.828","0.862"],["<b>0.966<\/b>","0.931","0.922","0.802","0.776","0.767","0.724","0.586"],["<b>0.897<\/b>","0.448","0.776","0.336","0.552","0.552","0.207","0.543"],["0","0.507","0.564","<b>0.697<\/b>","0.268","0.558","0.377","0.667"],["0.67","<b>0.875<\/b>","0.652","0.702","0.5","0.48","0.652","0.094"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>method<\/th>\n      <th>median real<\/th>\n      <th>median synth<\/th>\n      <th>median zero shot<\/th>\n      <th>delta rate real synth<\/th>\n      <th>delta rate synth zero<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-left"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"targets":5,"className":"dt-right"},{"targets":6,"className":"dt-right"},{"targets":7,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"method","targets":2},{"name":"median real","targets":3},{"name":"median synth","targets":4},{"name":"median zero shot","targets":5},{"name":"delta rate real synth","targets":6},{"name":"delta rate synth zero","targets":7}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<div id="hybrid-learn-respect-units" class="section level5 hasAnchor paragraph-start" number="9.2.3.0.2">
<h5><span class="header-section-number">9.2.3.0.2</span> Learning to respect currency units<a href="information-extraction-report.html#hybrid-learn-respect-units" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table <a href="information-extraction-report.html#tab:comparing-extraction-performance-synth-context-learning-respecting-units-table">9.12</a> shows, the difference in the percentage of correct predicted numeric values, if the <a href="glossary.html#acronyms_LLM">LLM</a> is prompted to respect currency units and gets synthetic <strong>Aktiva</strong> tables that show how to cope with different currency units, separate for the number of columns with currency units. There are 17 tables that have <em>Tâ¬</em> in the previous year column and 9 tables that have all columns listed in <em>Tâ¬</em>.</p>
</div>
<p>It shows, that Qwen3-235B, Llama 4 Scout, Mistral-Large and Ministral-8B all can apply the demonstrated numeric transformation for most of the values, if both columns have the <em>Tâ¬</em> unit. Qwen3-235B, Llama 4 Scout and Mistral-Large also can apply this, if only one columns has a unit corrency. This works best for Qwen3-235B. The target value to archive here is 0.5 instead of 1.0. This is worth to mentioning because there are no synthetic examples that haf different currency units for different columns. Ministral can not generalize this skill. It seems, that Qwen3 apllies numeric transformations regardles the fact, if there are currency units given for a column. Thus, it performs noticeably worse on the majority of all tables. Figure <a href="information-extraction-report.html#fig:table-extraction-llm-respecting-units-plot">9.5</a> shows, that the performance of Llama 3.1 8B and gemma3 27B on colums with currency units does not change.</p>
<p><a href="figure-collection.html#fig:compare-effect-of-respecting-units-on-overall-performance">14.30</a>, <a href="figure-collection.html#fig:compare-effect-of-respecting-units-on-numeric-performance">14.31</a> and <a href="figure-collection.html#fig:compare-effect-of-respecting-units-on-NA-F1">14.32</a></p>
<p>Thus, synthetic data can be used to solve new tasks and substitute missing data for rare classes.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="information-extraction-report.html#cb75-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb75-2"><a href="information-extraction-report.html#cb75-2" tabindex="-1"></a>  <span class="fu">filter</span>(method_family <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;top_n_rag_examples&quot;</span>, <span class="st">&quot;n_random_examples&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb75-3"><a href="information-extraction-report.html#cb75-3" tabindex="-1"></a>  <span class="fu">group_by</span>(model, method, method_family, respect_units, n_col_T_EUR) <span class="sc">%&gt;%</span> </span>
<span id="cb75-4"><a href="information-extraction-report.html#cb75-4" tabindex="-1"></a>  <span class="fu">reframe</span>(<span class="at">median_num =</span> <span class="fu">median</span>(percentage_correct_numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="information-extraction-report.html#cb75-5" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> respect_units, <span class="at">values_from =</span> median_num, <span class="at">names_prefix =</span> <span class="st">&quot;units_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-6"><a href="information-extraction-report.html#cb75-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">delta =</span> units_TRUE <span class="sc">-</span> units_FALSE) <span class="sc">%&gt;%</span> </span>
<span id="cb75-7"><a href="information-extraction-report.html#cb75-7" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(units_FALSE, units_TRUE)) <span class="sc">%&gt;%</span> </span>
<span id="cb75-8"><a href="information-extraction-report.html#cb75-8" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> n_col_T_EUR, <span class="at">values_from =</span> delta, <span class="at">names_prefix =</span> <span class="st">&quot;n_cols_T_EUR_&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-9"><a href="information-extraction-report.html#cb75-9" tabindex="-1"></a>  <span class="fu">group_by</span>(</span>
<span id="cb75-10"><a href="information-extraction-report.html#cb75-10" tabindex="-1"></a>    model<span class="co">#, method_family</span></span>
<span id="cb75-11"><a href="information-extraction-report.html#cb75-11" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-12"><a href="information-extraction-report.html#cb75-12" tabindex="-1"></a>  <span class="fu">summarise_if</span>(is.numeric, median) <span class="sc">%&gt;%</span> </span>
<span id="cb75-13"><a href="information-extraction-report.html#cb75-13" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(is.numeric, <span class="sc">~</span><span class="fu">round</span>(., <span class="dv">2</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb75-14"><a href="information-extraction-report.html#cb75-14" tabindex="-1"></a>  <span class="co"># group_by(method_family) %&gt;% </span></span>
<span id="cb75-15"><a href="information-extraction-report.html#cb75-15" tabindex="-1"></a>  <span class="fu">mutate_if</span>(</span>
<span id="cb75-16"><a href="information-extraction-report.html#cb75-16" tabindex="-1"></a>    is.numeric, </span>
<span id="cb75-17"><a href="information-extraction-report.html#cb75-17" tabindex="-1"></a>    <span class="sc">~</span><span class="fu">ifelse</span>(</span>
<span id="cb75-18"><a href="information-extraction-report.html#cb75-18" tabindex="-1"></a>      . <span class="sc">==</span> <span class="fu">max</span>(., <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb75-19"><a href="information-extraction-report.html#cb75-19" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">&quot;**&quot;</span>, ., <span class="st">&quot;**&quot;</span>),</span>
<span id="cb75-20"><a href="information-extraction-report.html#cb75-20" tabindex="-1"></a>      .</span>
<span id="cb75-21"><a href="information-extraction-report.html#cb75-21" tabindex="-1"></a>    )</span>
<span id="cb75-22"><a href="information-extraction-report.html#cb75-22" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb75-23"><a href="information-extraction-report.html#cb75-23" tabindex="-1"></a>  <span class="co"># arrange(method_family) %&gt;% </span></span>
<span id="cb75-24"><a href="information-extraction-report.html#cb75-24" tabindex="-1"></a>  <span class="fu">render_table</span>(</span>
<span id="cb75-25"><a href="information-extraction-report.html#cb75-25" tabindex="-1"></a>    <span class="at">alignment =</span> <span class="st">&quot;lrrr&quot;</span>,</span>
<span id="cb75-26"><a href="information-extraction-report.html#cb75-26" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">&quot;Comparing extraction performance for real Aktiva extraction task dependent on the promt addition to respect currency units and providing examples that show this transformation.&quot;</span>,</span>
<span id="cb75-27"><a href="information-extraction-report.html#cb75-27" tabindex="-1"></a>    <span class="at">ref =</span> opts_current<span class="sc">$</span><span class="fu">get</span>(<span class="st">&quot;label&quot;</span>), <span class="at">dom=</span><span class="st">&quot;t&quot;</span>)</span></code></pre></div>
</details>
<table>
<caption>
<span id="tab:comparing-extraction-performance-synth-context-learning-respecting-units-table">Table 9.12: </span>Comparing extraction performance for real Aktiva extraction task dependent on the promt addition to respect currency units and providing examples that show this transformation.
</caption>
</table>
<div class="datatables html-widget html-fill-item" id="htmlwidget-38e1c5d56608907fa961" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-38e1c5d56608907fa961">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8"],["Llama-3.1-8B-Instruct","Llama-4-Scout-17B-16E-Instruct","Ministral-8B-Instruct-2410","Mistral-Large-Instruct-2411","Qwen3-235B-A22B-Instruct-2507-FP8","Qwen3-8B","gemma-3-12b-it","gemma-3-27b-it"],["-0.03","<b>0<\/b>","-0.08","<b>0<\/b>","<b>0<\/b>","-0.48","-0.03","<b>0<\/b>"],["-0.02","0.28","0","0.39","<b>0.44<\/b>","0","0.17","0.06"],["0.01","0.89","0.79","0.9","<b>0.96<\/b>","0.28","0.48","0.02"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>model<\/th>\n      <th>n cols T EUR 0<\/th>\n      <th>n cols T EUR 1<\/th>\n      <th>n cols T EUR 2<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":10,"scrollX":true,"dom":"t","columnDefs":[{"targets":0,"className":"dt-left"},{"targets":1,"className":"dt-left"},{"targets":2,"className":"dt-right"},{"targets":3,"className":"dt-right"},{"targets":4,"className":"dt-right"},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"model","targets":1},{"name":"n cols T EUR 0","targets":2},{"name":"n cols T EUR 1","targets":3},{"name":"n cols T EUR 2","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="information-extraction-report.html#cb76-1" tabindex="-1"></a>df_real_table_extraction_synth_respect_units <span class="sc">%&gt;%</span> </span>
<span id="cb76-2"><a href="information-extraction-report.html#cb76-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="cb76-3"><a href="information-extraction-report.html#cb76-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> model, <span class="at">y =</span> percentage_correct_numeric)) <span class="sc">+</span></span>
<span id="cb76-4"><a href="information-extraction-report.html#cb76-4" tabindex="-1"></a>  <span class="fu">facet_nested</span>(respect_units<span class="sc">+</span>n_col_T_EUR<span class="sc">~</span>.)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-respecting-units-plot"></span>
<img src="_main_files/figure-html/table-extraction-llm-respecting-units-plot-1.png" alt="Comparing the numeric prediction performance for the hybrid approach, based on the fact, if the LLM is prompted to respect currency units." width="100%" />
<p class="caption">
Figure 9.5: Comparing the numeric prediction performance for the hybrid approach, based on the fact, if the LLM is prompted to respect currency units.
</p>
</div>
</div>
</div>
<div id="summary-5" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Summary<a href="information-extraction-report.html#summary-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="22">
<li id="fn22"><p>A comparison of the numeric values over all methods can be found in section <a href="results.html#comparing-table-extraction-methods">5.2.2</a>.<a href="information-extraction-report.html#fnref22" class="footnote-back">â©ï¸</a></p></li>
<li id="fn23"><p>The models <em>deepseek-ai_DeepSeek-R1-Distill-Qwen-32B</em> and <em>google_gemma-3n-E4B-it</em> have been tested as well but donât get presented as they never performed anywhere beyond random guessing.<a href="information-extraction-report.html#fnref23" class="footnote-back">â©ï¸</a></p></li>
<li id="fn24"><p>There is an external guidance through the provided xgrammar template but it is not communicated to the model in form of a promt.<a href="information-extraction-report.html#fnref24" class="footnote-back">â©ï¸</a></p></li>
<li id="fn25"><p>With the gpt-oss models we found the new Harmony response format to produce a lot of tokens in the chain of thought stream, we discarded, because we only need the <a href="glossary.html#acronyms_json">json</a> in the final stream Maybe this is similar for gpt-5 models as well but the chain of thought stream is kept on Azures side?<a href="information-extraction-report.html#fnref25" class="footnote-back">â©ï¸</a></p></li>
<li id="fn26"><p>Without the Harmony format 4_000 are enough.<a href="information-extraction-report.html#fnref26" class="footnote-back">â©ï¸</a></p></li>
<li id="fn27"><p>When we say, it runs well, it gets rated as <em>okay</em> on the <a href="https://apxml.com/tools/vram-calculator">LLM Inference: VRAM &amp; Performance Calculator</a>.<a href="information-extraction-report.html#fnref27" class="footnote-back">â©ï¸</a></p></li>
</ol>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'â¨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next â©';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="page-identification-report.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="error-guidance-report.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
