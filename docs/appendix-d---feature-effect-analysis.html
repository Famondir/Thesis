<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>D Appendix D - Feature effect analysis | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="D Appendix D - Feature effect analysis | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="D Appendix D - Feature effect analysis | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="D Appendix D - Feature effect analysis | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon SchÃ¤fer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="appendix-c---error-rate-guidance-report.html"/>
<link rel="next" href="appendix-e---miscellaneous.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#to-place-in-chapters-above"><i class="fa fa-check"></i><b>1.6</b> To place in chapters above</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#unstrukturierte-daten"><i class="fa fa-check"></i><b>1.7</b> Unstrukturierte Daten</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="introduction.html"><a href="introduction.html#portable-document-format"><i class="fa fa-check"></i><b>1.7.1</b> Portable Document Format</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#information-retrieval"><i class="fa fa-check"></i><b>2.1</b> Natural language processing</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis-edit-this"><i class="fa fa-check"></i><b>2.1.1</b> Document Layout Analysis (edit this)</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#term-frequency"><i class="fa fa-check"></i><b>2.1.2</b> Term frequency</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.3</b> Text processing</a></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#regular-expressions"><i class="fa fa-check"></i><b>2.1.4</b> Regular expressions</a></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.5</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.5.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#attention"><i class="fa fa-check"></i><b>2.1.5.2</b> Attention</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.5.3</b> Encoder</a></li>
<li class="chapter" data-level="2.1.5.4" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.5.4</b> Decoder</a></li>
<li class="chapter" data-level="2.1.5.5" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.5.5</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.5.6" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.5.6</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.5.7" data-path="literature-review.html"><a href="literature-review.html#mixed-modal"><i class="fa fa-check"></i><b>2.1.5.7</b> Mixed modal</a></li>
</ul></li>
<li class="chapter" data-level="2.1.6" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.6</b> Methods for LLM application</a>
<ul>
<li class="chapter" data-level="2.1.6.1" data-path="literature-review.html"><a href="literature-review.html#few-shot-learning"><i class="fa fa-check"></i><b>2.1.6.1</b> Few-shot Learning</a></li>
<li class="chapter" data-level="2.1.6.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.6.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.6.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.6.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> General machine learning and statistics</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-0.5-p"><i class="fa fa-check"></i><b>2.3</b> Summary (0.5 p)</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#evaluation-framework"><i class="fa fa-check"></i><b>3.2.2</b> Evaluation framework</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#metrics"><i class="fa fa-check"></i><b>3.3.1</b> Metrics</a></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#approaches"><i class="fa fa-check"></i><b>3.5.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="3.5.2.1" data-path="methodology.html"><a href="methodology.html#page-identification-4"><i class="fa fa-check"></i><b>3.5.2.1</b> Page identification</a></li>
<li class="chapter" data-level="3.5.2.2" data-path="methodology.html"><a href="methodology.html#information-extraction-3"><i class="fa fa-check"></i><b>3.5.2.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#gpu-benchmark"><i class="fa fa-check"></i><b>3.5.3</b> Hardware normalization</a></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#error-analysis"><i class="fa fa-check"></i><b>3.5.4</b> Error analysis</a></li>
<li class="chapter" data-level="3.5.5" data-path="methodology.html"><a href="methodology.html#baseline-selection-rationale"><i class="fa fa-check"></i><b>3.5.5</b> Baseline selection rationale</a></li>
<li class="chapter" data-level="3.5.6" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.6</b> Evaluation methods</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="methodology.html"><a href="methodology.html#ethical-practical-considerations-eher-am-ende-oder-weg"><i class="fa fa-check"></i><b>3.6</b> Ethical &amp; Practical Considerations (eher am Ende oder weg?)</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="methodology.html"><a href="methodology.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>3.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="3.6.2" data-path="methodology.html"><a href="methodology.html#computational-constraints"><i class="fa fa-check"></i><b>3.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="3.6.3" data-path="methodology.html"><a href="methodology.html#generalizability-scope"><i class="fa fa-check"></i><b>3.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="3.6.4" data-path="methodology.html"><a href="methodology.html#ethical-considerations"><i class="fa fa-check"></i><b>3.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.2</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.3</b> Software Packages</a></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.4</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#text-extraction"><i class="fa fa-check"></i><b>4.5</b> Text extraction</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.6</b> Data processing</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-2"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#page-identification-5"><i class="fa fa-check"></i><b>6.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="discussion.html"><a href="discussion.html#general-performance-page-identification"><i class="fa fa-check"></i><b>6.1.1</b> General performance</a></li>
<li class="chapter" data-level="6.1.2" data-path="discussion.html"><a href="discussion.html#energy-usage-and-runtime-1"><i class="fa fa-check"></i><b>6.1.2</b> Energy usage and runtime</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#information-extraction-4"><i class="fa fa-check"></i><b>6.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#general-performance"><i class="fa fa-check"></i><b>6.2.1</b> General performance</a></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#company-specific-results"><i class="fa fa-check"></i><b>6.2.2</b> Company specific results</a></li>
<li class="chapter" data-level="6.2.3" data-path="discussion.html"><a href="discussion.html#error-analysis-1"><i class="fa fa-check"></i><b>6.2.3</b> Error analysis</a>
<ul>
<li class="chapter" data-level="6.2.3.1" data-path="discussion.html"><a href="discussion.html#ground-truth-creation"><i class="fa fa-check"></i><b>6.2.3.1</b> Ground truth creation</a></li>
<li class="chapter" data-level="6.2.3.2" data-path="discussion.html"><a href="discussion.html#regex-synth-backend-discussion"><i class="fa fa-check"></i><b>6.2.3.2</b> Regular expression approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-1"><i class="fa fa-check"></i><b>6.3</b> Error rate guidance</a></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#feature-effect-analysis"><i class="fa fa-check"></i><b>6.4</b> Feature effect analysis</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="discussion.html"><a href="discussion.html#general-performance-1"><i class="fa fa-check"></i><b>6.4.1</b> General performance</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#summary-1"><i class="fa fa-check"></i><b>6.5</b> Summary</a></li>
<li class="chapter" data-level="6.6" data-path="discussion.html"><a href="discussion.html#limitations-4"><i class="fa fa-check"></i><b>6.6</b> Limitations</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="discussion.html"><a href="discussion.html#context-rot"><i class="fa fa-check"></i><b>6.6.1</b> Context rot</a>
<ul>
<li class="chapter" data-level="6.6.1.1" data-path="discussion.html"><a href="discussion.html#page-identification-6"><i class="fa fa-check"></i><b>6.6.1.1</b> Page identification</a></li>
<li class="chapter" data-level="6.6.1.2" data-path="discussion.html"><a href="discussion.html#information-extraction-5"><i class="fa fa-check"></i><b>6.6.1.2</b> Information extraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.7</b> Not covered</a>
<ul>
<li class="chapter" data-level="6.7.1" data-path="discussion.html"><a href="discussion.html#table-detection-extraction"><i class="fa fa-check"></i><b>6.7.1</b> Table detection / extraction</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="discussion.html"><a href="discussion.html#outlook"><i class="fa fa-check"></i><b>6.8</b> Outlook</a></li>
<li class="chapter" data-level="6.9" data-path="discussion.html"><a href="discussion.html#tools"><i class="fa fa-check"></i><b>6.9</b> Tools</a>
<ul>
<li class="chapter" data-level="6.9.0.1" data-path="discussion.html"><a href="discussion.html#vision-grid-transformer"><i class="fa fa-check"></i><b>6.9.0.1</b> Vision Grid Transformer</a></li>
<li class="chapter" data-level="6.9.0.2" data-path="discussion.html"><a href="discussion.html#tableformer"><i class="fa fa-check"></i><b>6.9.0.2</b> TableFormer</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discussion.html"><a href="discussion.html#conclusion"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>A</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="A.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>A.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="A.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>A.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="A.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>A.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="A.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-5"><i class="fa fa-check"></i><b>A.2.2</b> Results</a></li>
<li class="chapter" data-level="A.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>A.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="A.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>A.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification-1"><i class="fa fa-check"></i><b>A.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="A.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>A.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>A.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="A.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-3"><i class="fa fa-check"></i><b>A.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html"><i class="fa fa-check"></i><b>B</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="B.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>B.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="B.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>B.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="B.2.1" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>B.2.1</b> Real tables</a></li>
<li class="chapter" data-level="B.2.2" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>B.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="B.2.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>B.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="B.3" data-path="appendix-b---information-extraction-report.html"><a href="appendix-b---information-extraction-report.html#summary-4"><i class="fa fa-check"></i><b>B.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html"><i class="fa fa-check"></i><b>C</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="C.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#page-identification-7"><i class="fa fa-check"></i><b>C.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#binary-classification-2"><i class="fa fa-check"></i><b>C.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="C.1.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#multi-class-classification-2"><i class="fa fa-check"></i><b>C.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>C.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#real-tables-3"><i class="fa fa-check"></i><b>C.2.1</b> Real tables</a></li>
<li class="chapter" data-level="C.2.2" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#synthetic-tables-3"><i class="fa fa-check"></i><b>C.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="C.2.3" data-path="appendix-c---error-rate-guidance-report.html"><a href="appendix-c---error-rate-guidance-report.html#hybrid-aproach"><i class="fa fa-check"></i><b>C.2.3</b> Hybrid aproach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="D" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html"><i class="fa fa-check"></i><b>D</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="D.1" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#regular-expressions-5"><i class="fa fa-check"></i><b>D.1</b> Regular expressions</a></li>
<li class="chapter" data-level="D.2" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#real-tables-4"><i class="fa fa-check"></i><b>D.2</b> Real tables</a></li>
<li class="chapter" data-level="D.3" data-path="appendix-d---feature-effect-analysis.html"><a href="appendix-d---feature-effect-analysis.html#hybrid-approach-3"><i class="fa fa-check"></i><b>D.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="E" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>E</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="E.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>E.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="E.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>E.2</b> Local machine</a></li>
<li class="chapter" data-level="E.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>E.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="E.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>E.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="E.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>E.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="E.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>E.3.2.1</b> old classification with llm</a></li>
<li class="chapter" data-level="E.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo"><i class="fa fa-check"></i><b>E.3.2.2</b> yolo benchmark and table transformer</a></li>
</ul></li>
<li class="chapter" data-level="E.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>E.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="E.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>E.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="E.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>E.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="E.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>E.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="E.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>E.5</b> Regular expressions</a></li>
<li class="chapter" data-level="E.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>E.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="E.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#extraction-framework-flow-chart"><i class="fa fa-check"></i><b>E.7</b> Extraction framework flow chart</a></li>
<li class="chapter" data-level="E.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>E.8</b> Table extraction with regular expressions</a></li>
<li class="chapter" data-level="E.9" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#tf-missclassifications"><i class="fa fa-check"></i><b>E.9</b> Term frequency missclassifications</a></li>
</ul></li>
<li class="chapter" data-level="F" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>F</b> Tables</a>
<ul>
<li class="chapter" data-level="F.1" data-path="tables.html"><a href="tables.html#classification"><i class="fa fa-check"></i><b>F.1</b> Classification</a></li>
<li class="chapter" data-level="F.2" data-path="tables.html"><a href="tables.html#table-extraction"><i class="fa fa-check"></i><b>F.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="F.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-4"><i class="fa fa-check"></i><b>F.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G" data-path="figures.html"><a href="figures.html"><i class="fa fa-check"></i><b>G</b> Figures</a>
<ul>
<li class="chapter" data-level="G.1" data-path="figures.html"><a href="figures.html#page-identification-8"><i class="fa fa-check"></i><b>G.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="G.1.1" data-path="figures.html"><a href="figures.html#regex-baseline"><i class="fa fa-check"></i><b>G.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="G.1.2" data-path="figures.html"><a href="figures.html#toc-understanding-1"><i class="fa fa-check"></i><b>G.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="G.1.3" data-path="figures.html"><a href="figures.html#classification-1"><i class="fa fa-check"></i><b>G.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="G.1.3.1" data-path="figures.html"><a href="figures.html#binary"><i class="fa fa-check"></i><b>G.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="G.1.3.2" data-path="figures.html"><a href="figures.html#multi-class-classification-3"><i class="fa fa-check"></i><b>G.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="G.2" data-path="figures.html"><a href="figures.html#table-extraction-1"><i class="fa fa-check"></i><b>G.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="G.2.1" data-path="figures.html"><a href="figures.html#regex-approach"><i class="fa fa-check"></i><b>G.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="G.2.1.1" data-path="figures.html"><a href="figures.html#real-tables-5"><i class="fa fa-check"></i><b>G.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="G.2.1.2" data-path="figures.html"><a href="figures.html#synthetic-tables-4"><i class="fa fa-check"></i><b>G.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="G.2.2" data-path="figures.html"><a href="figures.html#real-tables-6"><i class="fa fa-check"></i><b>G.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="G.2.2.1" data-path="figures.html"><a href="figures.html#examples-from-same-company"><i class="fa fa-check"></i><b>G.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="G.2.2.2" data-path="figures.html"><a href="figures.html#openai-models-1"><i class="fa fa-check"></i><b>G.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="G.2.2.3" data-path="figures.html"><a href="figures.html#hypotheses-5"><i class="fa fa-check"></i><b>G.2.2.3</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="G.2.3" data-path="figures.html"><a href="figures.html#synthetic-tables-5"><i class="fa fa-check"></i><b>G.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="G.2.3.1" data-path="figures.html"><a href="figures.html#confidence-4"><i class="fa fa-check"></i><b>G.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="G.2.4" data-path="figures.html"><a href="figures.html#hybrid-approach-5"><i class="fa fa-check"></i><b>G.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="H" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>H</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="appendix-d---feature-effect-analysis" class="section level1 hasAnchor" number="11">
<h1><span class="header-section-number">D</span> Appendix D - Feature effect analysis<a href="appendix-d---feature-effect-analysis.html#appendix-d---feature-effect-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="regular-expressions-5" class="section level2 hasAnchor" number="11.1">
<h2><span class="header-section-number">D.1</span> Regular expressions<a href="appendix-d---feature-effect-analysis.html#regular-expressions-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="hypotheses-2" class="section level5 hasAnchor paragraph-start" number="11.1.0.0.1">
<h5><span class="header-section-number">D.1.0.0.1</span> Hypotheses<a href="appendix-d---feature-effect-analysis.html#hypotheses-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The formulated hypotheses have been evaluated visually using the
dependence and beeswarm plots from the <em>shapviz</em> library based on the
<a href="glossary.html#acronyms_SHAP">SHAP</a> values calculated for a random forest.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="appendix-d---feature-effect-analysis.html#cb96-1" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/h2o/real_table_extraction_regex_h2o_results_sample_50000_shap_2000.rds&quot;</span>)</span>
<span id="cb96-2"><a href="appendix-d---feature-effect-analysis.html#cb96-2" tabindex="-1"></a></span>
<span id="cb96-3"><a href="appendix-d---feature-effect-analysis.html#cb96-3" tabindex="-1"></a>shap_num <span class="ot">&lt;-</span> results<span class="sc">$</span>perc_numeric<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb96-4"><a href="appendix-d---feature-effect-analysis.html#cb96-4" tabindex="-1"></a>p1a <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-5"><a href="appendix-d---feature-effect-analysis.html#cb96-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;% numeric correct&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-6"><a href="appendix-d---feature-effect-analysis.html#cb96-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.225</span>))</span>
<span id="cb96-7"><a href="appendix-d---feature-effect-analysis.html#cb96-7" tabindex="-1"></a>p1b <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-8"><a href="appendix-d---feature-effect-analysis.html#cb96-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.35</span>, <span class="fl">0.35</span>))</span>
<span id="cb96-9"><a href="appendix-d---feature-effect-analysis.html#cb96-9" tabindex="-1"></a></span>
<span id="cb96-10"><a href="appendix-d---feature-effect-analysis.html#cb96-10" tabindex="-1"></a>shap_f1 <span class="ot">&lt;-</span> results<span class="sc">$</span>NA_F1<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb96-11"><a href="appendix-d---feature-effect-analysis.html#cb96-11" tabindex="-1"></a>p2a <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-12"><a href="appendix-d---feature-effect-analysis.html#cb96-12" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;F1 NA&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-13"><a href="appendix-d---feature-effect-analysis.html#cb96-13" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.225</span>))</span>
<span id="cb96-14"><a href="appendix-d---feature-effect-analysis.html#cb96-14" tabindex="-1"></a>p2b <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-15"><a href="appendix-d---feature-effect-analysis.html#cb96-15" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.35</span>, <span class="fl">0.35</span>))</span>
<span id="cb96-16"><a href="appendix-d---feature-effect-analysis.html#cb96-16" tabindex="-1"></a>shap_f1_sum_same_line <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;sum_same_line&quot;</span>, <span class="st">&quot;T_in_previous_year&quot;</span>)</span>
<span id="cb96-17"><a href="appendix-d---feature-effect-analysis.html#cb96-17" tabindex="-1"></a></span>
<span id="cb96-18"><a href="appendix-d---feature-effect-analysis.html#cb96-18" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>binomial<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb96-19"><a href="appendix-d---feature-effect-analysis.html#cb96-19" tabindex="-1"></a>p3a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb96-20"><a href="appendix-d---feature-effect-analysis.html#cb96-20" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-21"><a href="appendix-d---feature-effect-analysis.html#cb96-21" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.225</span>))</span>
<span id="cb96-22"><a href="appendix-d---feature-effect-analysis.html#cb96-22" tabindex="-1"></a>p3b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb96-23"><a href="appendix-d---feature-effect-analysis.html#cb96-23" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.35</span>, <span class="fl">0.35</span>))</span>
<span id="cb96-24"><a href="appendix-d---feature-effect-analysis.html#cb96-24" tabindex="-1"></a></span>
<span id="cb96-25"><a href="appendix-d---feature-effect-analysis.html#cb96-25" tabindex="-1"></a>real_table_extraction_regex_shap_plot <span class="ot">&lt;-</span> (p1a <span class="sc">|</span> p1b) <span class="sc">/</span></span>
<span id="cb96-26"><a href="appendix-d---feature-effect-analysis.html#cb96-26" tabindex="-1"></a>  (p2a <span class="sc">|</span> p2b) <span class="sc">/</span></span>
<span id="cb96-27"><a href="appendix-d---feature-effect-analysis.html#cb96-27" tabindex="-1"></a>  (p3a <span class="sc">|</span> p3b)</span></code></pre></div>
</details>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="appendix-d---feature-effect-analysis.html#cb97-1" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/h2o/synth_table_extraction_regex_h2o_results_sample_50000_shap_2000.rds&quot;</span>)</span>
<span id="cb97-2"><a href="appendix-d---feature-effect-analysis.html#cb97-2" tabindex="-1"></a></span>
<span id="cb97-3"><a href="appendix-d---feature-effect-analysis.html#cb97-3" tabindex="-1"></a>shap_num <span class="ot">&lt;-</span> results<span class="sc">$</span>perc_numeric<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb97-4"><a href="appendix-d---feature-effect-analysis.html#cb97-4" tabindex="-1"></a>p1a <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb97-5"><a href="appendix-d---feature-effect-analysis.html#cb97-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;% numeric correct&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-6"><a href="appendix-d---feature-effect-analysis.html#cb97-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.15</span>))</span>
<span id="cb97-7"><a href="appendix-d---feature-effect-analysis.html#cb97-7" tabindex="-1"></a>p1b <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-8"><a href="appendix-d---feature-effect-analysis.html#cb97-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb97-9"><a href="appendix-d---feature-effect-analysis.html#cb97-9" tabindex="-1"></a></span>
<span id="cb97-10"><a href="appendix-d---feature-effect-analysis.html#cb97-10" tabindex="-1"></a>p1c <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;extraction_backend&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-11"><a href="appendix-d---feature-effect-analysis.html#cb97-11" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;dependence plot for extraction_backend&quot;</span>)</span>
<span id="cb97-12"><a href="appendix-d---feature-effect-analysis.html#cb97-12" tabindex="-1"></a>p1d <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;header_span&quot;</span>, <span class="at">color_var =</span> <span class="st">&quot;extraction_backend&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-13"><a href="appendix-d---feature-effect-analysis.html#cb97-13" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;dependence plot for header_span&quot;</span>)</span>
<span id="cb97-14"><a href="appendix-d---feature-effect-analysis.html#cb97-14" tabindex="-1"></a></span>
<span id="cb97-15"><a href="appendix-d---feature-effect-analysis.html#cb97-15" tabindex="-1"></a>shap_f1 <span class="ot">&lt;-</span> results<span class="sc">$</span>NA_F1<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb97-16"><a href="appendix-d---feature-effect-analysis.html#cb97-16" tabindex="-1"></a>p2a <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb97-17"><a href="appendix-d---feature-effect-analysis.html#cb97-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;F1 NA&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-18"><a href="appendix-d---feature-effect-analysis.html#cb97-18" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.15</span>))</span>
<span id="cb97-19"><a href="appendix-d---feature-effect-analysis.html#cb97-19" tabindex="-1"></a>p2b <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-20"><a href="appendix-d---feature-effect-analysis.html#cb97-20" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb97-21"><a href="appendix-d---feature-effect-analysis.html#cb97-21" tabindex="-1"></a></span>
<span id="cb97-22"><a href="appendix-d---feature-effect-analysis.html#cb97-22" tabindex="-1"></a>shap_f1_extraction_backend <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="fu">colnames</span>(.<span class="sc">$</span>X), <span class="st">&quot;extraction_backend&quot;</span>)</span>
<span id="cb97-23"><a href="appendix-d---feature-effect-analysis.html#cb97-23" tabindex="-1"></a></span>
<span id="cb97-24"><a href="appendix-d---feature-effect-analysis.html#cb97-24" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>binomial<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb97-25"><a href="appendix-d---feature-effect-analysis.html#cb97-25" tabindex="-1"></a>p3a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb97-26"><a href="appendix-d---feature-effect-analysis.html#cb97-26" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-27"><a href="appendix-d---feature-effect-analysis.html#cb97-27" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.15</span>))</span>
<span id="cb97-28"><a href="appendix-d---feature-effect-analysis.html#cb97-28" tabindex="-1"></a>p3b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>) <span class="sc">+</span></span>
<span id="cb97-29"><a href="appendix-d---feature-effect-analysis.html#cb97-29" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.5</span>))</span>
<span id="cb97-30"><a href="appendix-d---feature-effect-analysis.html#cb97-30" tabindex="-1"></a></span>
<span id="cb97-31"><a href="appendix-d---feature-effect-analysis.html#cb97-31" tabindex="-1"></a>synth_table_extraction_regex_shap_plot <span class="ot">&lt;-</span> (p1a <span class="sc">|</span> p1b) <span class="sc">/</span></span>
<span id="cb97-32"><a href="appendix-d---feature-effect-analysis.html#cb97-32" tabindex="-1"></a>  (p2a <span class="sc">|</span> p2b) <span class="sc">/</span></span>
<span id="cb97-33"><a href="appendix-d---feature-effect-analysis.html#cb97-33" tabindex="-1"></a>  (p3a <span class="sc">|</span> p3b)</span>
<span id="cb97-34"><a href="appendix-d---feature-effect-analysis.html#cb97-34" tabindex="-1"></a></span>
<span id="cb97-35"><a href="appendix-d---feature-effect-analysis.html#cb97-35" tabindex="-1"></a>synth_table_extraction_regex_shap_num_details_plot <span class="ot">&lt;-</span> p1d <span class="sc">|</span> p1c</span></code></pre></div>
</details>
<div id="real-dataset" class="section level6 hasAnchor paragraph-start" number="11.1.0.0.1.1">
<h6><span class="header-section-number">D.1.0.0.1.1</span> Real dataset<a href="appendix-d---feature-effect-analysis.html#real-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>The formulated hypotheses have been evaluated visually using the
dependence and beeswarm plots from the shapviz library based on the
<a href="glossary.html#acronyms_SHAP">SHAP</a> values calculated with a random forest.</p>
</div>
<p>Table
<a href="appendix-d---feature-effect-analysis.html#tab:hypotheses-and-results-real-table-extraction-regex-table">D.1</a>
shows in the first column the predictors included in the random forests.
Subsequent groups of two columns show the hypotheses and the found
effects of those predictors for two aggregated measures (F1 score and
percentage of correct numeric predictions) and one value based measure
(binomial correctness rating).</p>
<p>Predictors that are marked with an asterisk only have five or less
representatives. Thus, those results are not reliable. Bold set
hypotheses show the predictors, that showed the highest mean <a href="glossary.html#acronyms_SHAP">SHAP</a>
values. For all measures but the binomial this means the effect is at
least 0.025. For the binomial measure the effect of a predictor with
bold hypothesis is at least 0.05. Results with red text highlight
hypotheses that are not supported by the visual evaluation.</p>
<p>Table
<a href="appendix-d---feature-effect-analysis.html#tab:hypotheses-and-results-real-table-extraction-regex-table">D.1</a>
shows many red results, meaning the corresponding hypothesis is getting
no support. Since most of these findings show only minor effect strength
we donât interpret them as strongly challenging those hypotheses. Only
three findings regarding the F1 score show a strong effect and findings
that do not align with our hypotheses. First, it seems, that finding a
sum in the same row, has a negative effect of finding any valid number
there. Second, it has negative effect, if the previous year column is
given as <em>Tâ¬</em>. Third, it has negative effect, if the columns are
visually separated.</p>
<p>see Figure <a href="figures.html#fig:real-table-extraction-regex-shap-plot">G.10</a></p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="appendix-d---feature-effect-analysis.html#cb98-1" tabindex="-1"></a><span class="fu">create_hypotheses_table</span>(<span class="st">&quot;../benchmark_results/table_extraction/hypotheses_and_results_real_table_extraction_regex.html&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables with the regular expression approach.&quot;</span>)</span></code></pre></div>
</details>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:hypotheses-and-results-real-table-extraction-regex-table">Table D.1: </span>Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables with the regular expression approach.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
F1
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
% correct numeric
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
binomial
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
predictor
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">extraction_backend</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">pymupdf better</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_columns</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">2 is better</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">2 is better</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">sum_same_line</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style=" font-weight: bold;    color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">sum_in_header*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     "></span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">unit_first_cell*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     "></span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">T_in_previous_year</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style=" font-weight: bold;    color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">T_in_year*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">passiva_same_page</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vorjahr</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_cols</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style=" font-weight: bold;    color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_rows</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label_length</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">missing</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
</tbody>
</table>
</div>
<div id="synthetic-dataset" class="section level6 hasAnchor paragraph-start" number="11.1.0.0.1.2">
<h6><span class="header-section-number">D.1.0.0.1.2</span> Synthetic dataset<a href="appendix-d---feature-effect-analysis.html#synthetic-dataset" class="anchor-section" aria-label="Anchor link to header"></a></h6>
<p>Table
<a href="appendix-d---feature-effect-analysis.html#tab:hypotheses-and-results-synth-table-extraction-regex-table">D.2</a>
shows, many red results as well, meaning the corresponding hypothesis is
getting no support. We find more predictors with a strong effect
compared to the real <strong>Aktiva</strong> table extraction task. The results are
based on 24_576 extracted tables and the <a href="glossary.html#acronyms_SHAP">SHAP</a> values have been
calculated on 2_000 examples each.</p>
</div>
<p>Contrary to our assumption, does the <em>extraction_backend</em> have a strong
effect on all measures. We find, that <em>pdfium</em> is struggling with some
of the table characteristics while <em>pymupdf</em> is not influenced by them.
Figure <a href="appendix-d---feature-effect-analysis.html#fig:synth-table-extraction-regex-shap-num-details-plot">D.1</a> A
shows this exemplary for the characteristic <em>header_span</em>. An example
for a erroneous text extraction with <em>pdfium</em> can be found in section
@ref(#regex-extraction-mistakes). Actually, all results that are marked
with an asterisk are showing this effect if <em>pdfium</em> is used as
extraction backend. This can be inspected in Figure
<a href="figures.html#fig:synth-table-extraction-regex-dependence-plot-backend">G.12</a>.</p>
<p>Furthermore, does the number of columns is have a positive effect
overall. Figure
<a href="appendix-d---feature-effect-analysis.html#fig:synth-table-extraction-regex-shap-num-details-plot">D.1</a> B shows,
that this effect has inverse direction for the two libraries.</p>
<p>It might be worth noting, that the row for <em>Anteile an verbundenen
Unternehmen</em> was rated to have a clear negative effect on the chance to
extract the correct value.</p>
<p>The question, if visual separation of columns is having an effect, as
found for the real data, is not studied here, because in the synthetic
tables all columns are visually separated. But this could be
investigated in future work. It is possible, that the visual separation
is causing the faulty text extractions of <em>pdfium</em>.</p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="appendix-d---feature-effect-analysis.html#cb99-1" tabindex="-1"></a><span class="fu">create_hypotheses_table</span>(<span class="st">&quot;../benchmark_results/table_extraction/hypotheses_and_results_synth_table_extraction_regex.html&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Comparing the formulated hypotheses and the found results for the table extraction on synthetic Aktiva tables with the regular expression approach.&quot;</span>)</span></code></pre></div>
</details>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:hypotheses-and-results-synth-table-extraction-regex-table">Table D.2: </span>Comparing the formulated hypotheses and the found results for the table extraction on synthetic Aktiva tables with the regular expression approach.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
F1
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
% correct numeric
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
binomial
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
predictor
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">extraction_backend</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">pymupdf better</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">pymupdf better</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">pymupdf better</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_columns</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style=" font-weight: bold;    color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style=" font-weight: bold;    color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    color: darkred !important;">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">sum_same_line</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative*</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">thin</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive*</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">year_as</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive*</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive*</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">positive*</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">unit_in_first_cell</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative*</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">log10_unit_multiplier</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative*</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative*</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative*</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">enumeration</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive*</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive*</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">positive*</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">shuffle_rows</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">text_around</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">many_line_breaks</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label_length</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">missing</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
</tbody>
</table>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="appendix-d---feature-effect-analysis.html#cb100-1" tabindex="-1"></a>synth_table_extraction_regex_shap_num_details_plot <span class="sc">+</span> </span>
<span id="cb100-2"><a href="appendix-d---feature-effect-analysis.html#cb100-2" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">tag_levels =</span> <span class="st">&#39;A&#39;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:synth-table-extraction-regex-shap-num-details-plot"></span>
<img src="_main_files/figure-html/synth-table-extraction-regex-shap-num-details-plot-1.png" alt="Showing the influence of the extraxtion library on the numeric text extraction task with synthetic data for the percentage of correct numeric predictions." width="100%" />
<p class="caption">
Figure D.1: Showing the influence of the extraxtion library on the numeric text extraction task with synthetic data for the percentage of correct numeric predictions.
</p>
</div>
</div>
<div id="real-tables-4" class="section level2 hasAnchor" number="11.2">
<h2><span class="header-section-number">D.2</span> Real tables<a href="appendix-d---feature-effect-analysis.html#real-tables-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="hypotheses-3" class="section level5 hasAnchor paragraph-start" number="11.2.0.0.1">
<h5><span class="header-section-number">D.2.0.0.1</span> Hypotheses<a href="appendix-d---feature-effect-analysis.html#hypotheses-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>The formulated hypotheses have been evaluated visually using the
dependence and beeswarm plots from the shapviz library based on the
<a href="glossary.html#acronyms_SHAP">SHAP</a> values calculated with a random forest.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="appendix-d---feature-effect-analysis.html#cb101-1" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/h2o/real_table_extraction_h2o_results_sample_50000_shap_2000_NA_recoded_extended.rds&quot;</span>)</span>
<span id="cb101-2"><a href="appendix-d---feature-effect-analysis.html#cb101-2" tabindex="-1"></a></span>
<span id="cb101-3"><a href="appendix-d---feature-effect-analysis.html#cb101-3" tabindex="-1"></a>shap_num <span class="ot">&lt;-</span> results<span class="sc">$</span>perc_numeric<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb101-4"><a href="appendix-d---feature-effect-analysis.html#cb101-4" tabindex="-1"></a>p1a <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-5"><a href="appendix-d---feature-effect-analysis.html#cb101-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;% numeric correct&quot;</span>) <span class="sc">+</span></span>
<span id="cb101-6"><a href="appendix-d---feature-effect-analysis.html#cb101-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb101-7"><a href="appendix-d---feature-effect-analysis.html#cb101-7" tabindex="-1"></a>p1b <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-8"><a href="appendix-d---feature-effect-analysis.html#cb101-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb101-9"><a href="appendix-d---feature-effect-analysis.html#cb101-9" tabindex="-1"></a>p1c <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;T_in_year&quot;</span>, <span class="st">&quot;vis_seperated_rows&quot;</span>)</span>
<span id="cb101-10"><a href="appendix-d---feature-effect-analysis.html#cb101-10" tabindex="-1"></a>p1d <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;vis_seperated_rows&quot;</span>, <span class="st">&quot;T_in_year&quot;</span>)</span>
<span id="cb101-11"><a href="appendix-d---feature-effect-analysis.html#cb101-11" tabindex="-1"></a></span>
<span id="cb101-12"><a href="appendix-d---feature-effect-analysis.html#cb101-12" tabindex="-1"></a>shap_f1 <span class="ot">&lt;-</span> results<span class="sc">$</span>NA_F1<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb101-13"><a href="appendix-d---feature-effect-analysis.html#cb101-13" tabindex="-1"></a>p2a <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-14"><a href="appendix-d---feature-effect-analysis.html#cb101-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;F1 NA&quot;</span>) <span class="sc">+</span></span>
<span id="cb101-15"><a href="appendix-d---feature-effect-analysis.html#cb101-15" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb101-16"><a href="appendix-d---feature-effect-analysis.html#cb101-16" tabindex="-1"></a>p2b <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-17"><a href="appendix-d---feature-effect-analysis.html#cb101-17" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb101-18"><a href="appendix-d---feature-effect-analysis.html#cb101-18" tabindex="-1"></a></span>
<span id="cb101-19"><a href="appendix-d---feature-effect-analysis.html#cb101-19" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>binomial<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb101-20"><a href="appendix-d---feature-effect-analysis.html#cb101-20" tabindex="-1"></a>p3a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-21"><a href="appendix-d---feature-effect-analysis.html#cb101-21" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">+</span></span>
<span id="cb101-22"><a href="appendix-d---feature-effect-analysis.html#cb101-22" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb101-23"><a href="appendix-d---feature-effect-analysis.html#cb101-23" tabindex="-1"></a>p3b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-24"><a href="appendix-d---feature-effect-analysis.html#cb101-24" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb101-25"><a href="appendix-d---feature-effect-analysis.html#cb101-25" tabindex="-1"></a></span>
<span id="cb101-26"><a href="appendix-d---feature-effect-analysis.html#cb101-26" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>confidence<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb101-27"><a href="appendix-d---feature-effect-analysis.html#cb101-27" tabindex="-1"></a>p4a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-28"><a href="appendix-d---feature-effect-analysis.html#cb101-28" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;confidence&quot;</span>) <span class="sc">+</span></span>
<span id="cb101-29"><a href="appendix-d---feature-effect-analysis.html#cb101-29" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb101-30"><a href="appendix-d---feature-effect-analysis.html#cb101-30" tabindex="-1"></a>p4b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb101-31"><a href="appendix-d---feature-effect-analysis.html#cb101-31" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb101-32"><a href="appendix-d---feature-effect-analysis.html#cb101-32" tabindex="-1"></a></span>
<span id="cb101-33"><a href="appendix-d---feature-effect-analysis.html#cb101-33" tabindex="-1"></a>real_table_extraction_llm_shap_plot <span class="ot">&lt;-</span> (p1a <span class="sc">|</span> p1b) <span class="sc">/</span></span>
<span id="cb101-34"><a href="appendix-d---feature-effect-analysis.html#cb101-34" tabindex="-1"></a>  (p2a <span class="sc">|</span> p2b) <span class="sc">/</span></span>
<span id="cb101-35"><a href="appendix-d---feature-effect-analysis.html#cb101-35" tabindex="-1"></a>  (p3a <span class="sc">|</span> p3b) <span class="sc">/</span></span>
<span id="cb101-36"><a href="appendix-d---feature-effect-analysis.html#cb101-36" tabindex="-1"></a>  (p4a <span class="sc">|</span> p4b)</span>
<span id="cb101-37"><a href="appendix-d---feature-effect-analysis.html#cb101-37" tabindex="-1"></a></span>
<span id="cb101-38"><a href="appendix-d---feature-effect-analysis.html#cb101-38" tabindex="-1"></a>real_table_extraction_llm_shap_num_details_plot <span class="ot">&lt;-</span> p1c <span class="sc">|</span> p1d</span></code></pre></div>
</details>
<p>Table <a href="appendix-d---feature-effect-analysis.html#tab:hypotheses-and-results-real-table-extraction-llm-table">D.3</a>
shows in the first column the predictors included in the random forests.
Subsequent groups of two columns show the hypotheses and the found
effects of those predictors for two aggregated measures (F1 score and
percentage of correct numeric predictions) and two value based measures
(binomial correctness rating and reported confidence for the
prediction).</p>
<p>Predictors that are marked with an asterix only have five or less
representatives. Thus, those results are not reliable. Bold set
hypotheses show the predictors, that showed the highest mean <a href="glossary.html#acronyms_SHAP">SHAP</a>
values. For all measures but the binomial this means the effect is at
least 0.025. For the binomial measure the effect of a predictor with
bold hypothesis is at least 0.05. Results with red text highlight
hypotheses that are not supported by the visual evaluation.</p>
<p>For most measures the model and method related predictors
(<em>model_family</em>, <em>parameter_count</em>, <em>method_family</em> and <em>n_examples</em>)
show the strongest effects. Worth mentioning is, that <em>method_family</em>
and <em>n_examples</em> show no strong effect on the reported confidence score.
From the table related characteristics most strong effects show the
hypothesized direction. Not predicted was the negative effect of label
length on the reported confidence score. The visual separation of
columns and rows shows small effects. We find no support for a negative
effect of the fact that the <strong>Passiva</strong> table is on the same page as the
<strong>Aktiva</strong> table.</p>
<p>see Figure <a href="figures.html#fig:real-table-extraction-llm-shap-plot">G.22</a></p>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="appendix-d---feature-effect-analysis.html#cb102-1" tabindex="-1"></a><span class="fu">create_hypotheses_table</span>(<span class="st">&quot;../benchmark_results/table_extraction/hypotheses_and_results_real_table_extraction_llm.html&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables the LLM approach.&quot;</span>)</span></code></pre></div>
</details>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:hypotheses-and-results-real-table-extraction-llm-table">Table D.3: </span>Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables the LLM approach.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
F1
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
% correct numeric
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
binomial
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
confidence
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
predictor
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">model_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">google worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">google worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">google worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral (Llama 4 Maverick low)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">parameter_count</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">method_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">zero shot worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_examples</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">1 and 3 best (five bad for Llama4)</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">1 and 3 best (five bad for Llama4)</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral (Llama 4 Maverick low)</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_columns</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">3 worst</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">sum_same_lin</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative (i.e.Â if prev year not Tâ¬)</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral (inverted for T in prev year)</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">sum_in_header*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral (inverse for vis_separated_cols)</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     color: darkred !important;">Negative (inverse for vis separated cols)</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral (inverse for vis_separated_cols)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Neutral (inverse for vis seperated cols)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">unit_first_cell*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">T_in_previous_year</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative (esp.Â if cols not vis separated)</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">T_in_year*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">passiva_same_page</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vorjahr</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_cols</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative (interaction with T in prev year)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_rows</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label_length</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">missing</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">confidence</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="hybrid-approach-3" class="section level2 hasAnchor" number="11.3">
<h2><span class="header-section-number">D.3</span> Hybrid approach<a href="appendix-d---feature-effect-analysis.html#hybrid-approach-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="hypotheses-4" class="section level5 hasAnchor paragraph-start" number="11.3.0.0.1">
<h5><span class="header-section-number">D.3.0.0.1</span> Hypotheses<a href="appendix-d---feature-effect-analysis.html#hypotheses-4" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Table
<a href="appendix-d---feature-effect-analysis.html#tab:hypotheses-and-results-real-table-extraction-llm-synth-context-table">D.4</a>
shows only one unsupported hypothesis for a predictor with a strong
effect: <em>method_family</em>. Figure
<a href="appendix-d---feature-effect-analysis.html#fig:static-example-best-dependence-plot">D.2</a> shows the dependence plot
for the this predictor. The prompting strategy <em>static_example</em> shows
the highest <a href="glossary.html#acronyms_SHAP">SHAP</a> values. This is surprising, because the the
<em>static example</em> is equivalent to providing a single random example.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="appendix-d---feature-effect-analysis.html#cb103-1" tabindex="-1"></a>results <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/h2o/real_table_extraction_synth_context_h2o_results_sample_50000_shap_2000_NA_recoded_extended.rds&quot;</span>)</span>
<span id="cb103-2"><a href="appendix-d---feature-effect-analysis.html#cb103-2" tabindex="-1"></a></span>
<span id="cb103-3"><a href="appendix-d---feature-effect-analysis.html#cb103-3" tabindex="-1"></a>shap_num <span class="ot">&lt;-</span> results<span class="sc">$</span>perc_numeric<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb103-4"><a href="appendix-d---feature-effect-analysis.html#cb103-4" tabindex="-1"></a>p1a <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-5"><a href="appendix-d---feature-effect-analysis.html#cb103-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;% numeric correct&quot;</span>) <span class="sc">+</span></span>
<span id="cb103-6"><a href="appendix-d---feature-effect-analysis.html#cb103-6" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb103-7"><a href="appendix-d---feature-effect-analysis.html#cb103-7" tabindex="-1"></a>p1b <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-8"><a href="appendix-d---feature-effect-analysis.html#cb103-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb103-9"><a href="appendix-d---feature-effect-analysis.html#cb103-9" tabindex="-1"></a>p1c <span class="ot">&lt;-</span> shap_num <span class="sc">%&gt;%</span> <span class="fu">sv_dependence</span>(<span class="st">&quot;method_family&quot;</span>)</span>
<span id="cb103-10"><a href="appendix-d---feature-effect-analysis.html#cb103-10" tabindex="-1"></a><span class="co"># p1d &lt;- shap_num %&gt;% sv_dependence(&quot;vis_seperated_rows&quot;, &quot;T_in_year&quot;)</span></span>
<span id="cb103-11"><a href="appendix-d---feature-effect-analysis.html#cb103-11" tabindex="-1"></a></span>
<span id="cb103-12"><a href="appendix-d---feature-effect-analysis.html#cb103-12" tabindex="-1"></a>shap_f1 <span class="ot">&lt;-</span> results<span class="sc">$</span>NA_F1<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb103-13"><a href="appendix-d---feature-effect-analysis.html#cb103-13" tabindex="-1"></a>p2a <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-14"><a href="appendix-d---feature-effect-analysis.html#cb103-14" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;F1 NA&quot;</span>) <span class="sc">+</span></span>
<span id="cb103-15"><a href="appendix-d---feature-effect-analysis.html#cb103-15" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb103-16"><a href="appendix-d---feature-effect-analysis.html#cb103-16" tabindex="-1"></a>p2b <span class="ot">&lt;-</span> shap_f1 <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-17"><a href="appendix-d---feature-effect-analysis.html#cb103-17" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb103-18"><a href="appendix-d---feature-effect-analysis.html#cb103-18" tabindex="-1"></a></span>
<span id="cb103-19"><a href="appendix-d---feature-effect-analysis.html#cb103-19" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>binomial<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb103-20"><a href="appendix-d---feature-effect-analysis.html#cb103-20" tabindex="-1"></a>p3a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-21"><a href="appendix-d---feature-effect-analysis.html#cb103-21" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;binomial&quot;</span>) <span class="sc">+</span></span>
<span id="cb103-22"><a href="appendix-d---feature-effect-analysis.html#cb103-22" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb103-23"><a href="appendix-d---feature-effect-analysis.html#cb103-23" tabindex="-1"></a>p3b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-24"><a href="appendix-d---feature-effect-analysis.html#cb103-24" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb103-25"><a href="appendix-d---feature-effect-analysis.html#cb103-25" tabindex="-1"></a></span>
<span id="cb103-26"><a href="appendix-d---feature-effect-analysis.html#cb103-26" tabindex="-1"></a>shap_binom <span class="ot">&lt;-</span> results<span class="sc">$</span>confidence<span class="sc">$</span>shap_values<span class="sc">$</span>rf <span class="sc">%&gt;%</span> <span class="fu">convert_shap_x</span>()</span>
<span id="cb103-27"><a href="appendix-d---feature-effect-analysis.html#cb103-27" tabindex="-1"></a>p4a <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">show_numbers =</span> <span class="cn">TRUE</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-28"><a href="appendix-d---feature-effect-analysis.html#cb103-28" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;confidence&quot;</span>) <span class="sc">+</span></span>
<span id="cb103-29"><a href="appendix-d---feature-effect-analysis.html#cb103-29" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.12</span>))</span>
<span id="cb103-30"><a href="appendix-d---feature-effect-analysis.html#cb103-30" tabindex="-1"></a>p4b <span class="ot">&lt;-</span> shap_binom <span class="sc">%&gt;%</span> <span class="fu">sv_importance</span>(<span class="at">kind =</span> <span class="st">&quot;beeswarm&quot;</span>, <span class="at">max_display =</span> <span class="dv">25</span>) <span class="sc">+</span></span>
<span id="cb103-31"><a href="appendix-d---feature-effect-analysis.html#cb103-31" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="sc">-</span><span class="fl">0.5</span>, <span class="fl">0.35</span>))</span>
<span id="cb103-32"><a href="appendix-d---feature-effect-analysis.html#cb103-32" tabindex="-1"></a></span>
<span id="cb103-33"><a href="appendix-d---feature-effect-analysis.html#cb103-33" tabindex="-1"></a>real_table_extraction_llm_synth_context_shap_plot <span class="ot">&lt;-</span> (p1a <span class="sc">|</span> p1b) <span class="sc">/</span></span>
<span id="cb103-34"><a href="appendix-d---feature-effect-analysis.html#cb103-34" tabindex="-1"></a>  (p2a <span class="sc">|</span> p2b) <span class="sc">/</span></span>
<span id="cb103-35"><a href="appendix-d---feature-effect-analysis.html#cb103-35" tabindex="-1"></a>  (p3a <span class="sc">|</span> p3b) <span class="sc">/</span></span>
<span id="cb103-36"><a href="appendix-d---feature-effect-analysis.html#cb103-36" tabindex="-1"></a>  (p4a <span class="sc">|</span> p4b)</span>
<span id="cb103-37"><a href="appendix-d---feature-effect-analysis.html#cb103-37" tabindex="-1"></a></span>
<span id="cb103-38"><a href="appendix-d---feature-effect-analysis.html#cb103-38" tabindex="-1"></a>real_table_extraction_llm_synth_context_shap_num_details_plot <span class="ot">&lt;-</span> p1c <span class="co"># | p1d</span></span></code></pre></div>
</details>
<div class="big-table">
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="appendix-d---feature-effect-analysis.html#cb104-1" tabindex="-1"></a><span class="fu">create_hypotheses_table</span>(<span class="st">&quot;../benchmark_results/table_extraction/hypotheses_and_results_real_table_extraction_synth_context_llm.html&quot;</span>, <span class="at">caption =</span> <span class="st">&quot;Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables with the hybrid LLM approach.&quot;</span>)</span></code></pre></div>
</details>
<table class=" lightable-paper" style="font-family: &quot;Arial Narrow&quot;, arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:hypotheses-and-results-real-table-extraction-llm-synth-context-table">Table D.4: </span>Comparing the formulated hypotheses and the found results for the table extraction on real Aktiva tables with the hybrid LLM approach.
</caption>
<thead>
<tr>
<th style="empty-cells: hide;" colspan="1">
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
F1
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
% correct numeric
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
binomial
</div>
</th>
<th style="padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #00000020; padding-bottom: 5px; ">
confidence
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
predictor
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
<th style="text-align:left;">
Hypothesis
</th>
<th style="text-align:left;">
Result
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">model_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Google &amp; Qwen3 worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Llama 4 best</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">Google &amp; Qwen3 worst</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">Llama 3 &amp; mistral worst</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">parameter_count</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">123B peak</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">method_family</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">static_example best</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">static example best</span>
</td>
<td style="text-align:left;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">static example best</span>
</td>
<td style="text-align:left;">
<span style="     ">top_n_rag &amp; n_random best</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_examples</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">at least one needed</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">n_columns</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">interaction with passiva_same_page</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral (helps if T in prev year)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">sum_same_lin</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative if header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">sum_in_header*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">header_span</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral (neg for vis separated cols)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">unit_first_cell*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">T_in_previous_year</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">T_in_year*</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style=" font-weight: bold;    ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;color: gray !important;">
<span style="     color: darkred !important;">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">passiva_same_page</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vorjahr</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_cols</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative (if T_in_prev year)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">negative</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">vis_separated_rows</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive (if header_span)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     color: darkred !important;">positive</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">respect_units</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive if T in year</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive (if T in prev)</span>
</td>
<td style="text-align:left;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style="     color: darkred !important;">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label_length</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">negative</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">negative</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">label</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     ">unknown</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">neutral</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">one never used</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">missing</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">unknown</span>
</td>
<td style="text-align:left;">
<span style="     ">positive</span>
</td>
</tr>
<tr>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">confidence</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style=" font-weight: bold;    ">positive</span>
</td>
<td style="text-align:left;border-right:1px solid;">
<span style="     ">positive</span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
<td style="text-align:left;">
<span style="     "></span>
</td>
</tr>
</tbody>
</table>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="appendix-d---feature-effect-analysis.html#cb105-1" tabindex="-1"></a>real_table_extraction_llm_synth_context_shap_num_details_plot</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:static-example-best-dependence-plot"></span>
<img src="_main_files/figure-html/static-example-best-dependence-plot-1.png" alt="Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions based on synthetic examples for in-context learning." width="100%" />
<p class="caption">
Figure D.2: Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions based on synthetic examples for in-context learning.
</p>
</div>

</div>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'â¨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next â©';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="appendix-c---error-rate-guidance-report.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix-e---miscellaneous.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
