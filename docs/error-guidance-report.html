<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>10 Appendix C - Error rate guidance report | Extraction of tabular data from annual reports with LLMs</title>
  <meta name="description" content="10 Appendix C - Error rate guidance report | Extraction of tabular data from annual reports with LLMs" />
  <meta name="generator" content="bookdown 0.43.2 and GitBook 2.6.7" />

  <meta property="og:title" content="10 Appendix C - Error rate guidance report | Extraction of tabular data from annual reports with LLMs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="10 Appendix C - Error rate guidance report | Extraction of tabular data from annual reports with LLMs" />
  
  
  

<meta name="author" content="Simon SchÃ¤fer" />


<meta name="date" content="2025-09-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="information-extraction-report.html"/>
<link rel="next" href="feature-effect-analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/codefolding-lua-1.1/codefolding-lua.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/dt-ext-rowgroup-1.13.6/css/rowGroup.dataTables.min.css" rel="stylesheet" />
<script src="libs/dt-ext-rowgroup-1.13.6/js/dataTables.rowGroup.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.css">
<script src="https://cdn.jsdelivr.net/npm/glider-js@1/glider.min.js"></script> -->


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="report_misc/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./index.html"><img src="images/BHT_Logo_horizontal_Anthrazit_transparent.svg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#motivation"><i class="fa fa-check"></i><b>1.1</b> Motivation</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#objectives"><i class="fa fa-check"></i><b>1.2</b> Objectives</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#introduction-methodology"><i class="fa fa-check"></i><b>1.3</b> Methodology</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#thesis-outline"><i class="fa fa-check"></i><b>1.4</b> Thesis Outline</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#summary"><i class="fa fa-check"></i><b>1.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="literature-review.html"><a href="literature-review.html"><i class="fa fa-check"></i><b>2</b> Literature review</a>
<ul>
<li class="chapter" data-level="2.1" data-path="literature-review.html"><a href="literature-review.html#computer-science"><i class="fa fa-check"></i><b>2.1</b> Computer science</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="literature-review.html"><a href="literature-review.html#sparse-retrieval"><i class="fa fa-check"></i><b>2.1.1</b> Information retrieval</a></li>
<li class="chapter" data-level="2.1.2" data-path="literature-review.html"><a href="literature-review.html#nlp"><i class="fa fa-check"></i><b>2.1.2</b> Natural language processing</a></li>
<li class="chapter" data-level="2.1.3" data-path="literature-review.html"><a href="literature-review.html#text-processing"><i class="fa fa-check"></i><b>2.1.3</b> Text processing</a>
<ul>
<li class="chapter" data-level="2.1.3.1" data-path="literature-review.html"><a href="literature-review.html#document-layout-analysis"><i class="fa fa-check"></i><b>2.1.3.1</b> Document Layout Analysis</a></li>
</ul></li>
<li class="chapter" data-level="2.1.4" data-path="literature-review.html"><a href="literature-review.html#llm-theory"><i class="fa fa-check"></i><b>2.1.4</b> Large Language Models</a>
<ul>
<li class="chapter" data-level="2.1.4.1" data-path="literature-review.html"><a href="literature-review.html#transformers"><i class="fa fa-check"></i><b>2.1.4.1</b> Transformers</a></li>
<li class="chapter" data-level="2.1.4.2" data-path="literature-review.html"><a href="literature-review.html#attention"><i class="fa fa-check"></i><b>2.1.4.2</b> Attention</a></li>
<li class="chapter" data-level="2.1.4.3" data-path="literature-review.html"><a href="literature-review.html#encoder"><i class="fa fa-check"></i><b>2.1.4.3</b> Encoder</a></li>
<li class="chapter" data-level="2.1.4.4" data-path="literature-review.html"><a href="literature-review.html#decoder"><i class="fa fa-check"></i><b>2.1.4.4</b> Decoder</a></li>
<li class="chapter" data-level="2.1.4.5" data-path="literature-review.html"><a href="literature-review.html#gpt-generative-pretrained-transformers"><i class="fa fa-check"></i><b>2.1.4.5</b> GPT (Generative Pretrained Transformers)</a></li>
<li class="chapter" data-level="2.1.4.6" data-path="literature-review.html"><a href="literature-review.html#mixture-of-experts"><i class="fa fa-check"></i><b>2.1.4.6</b> Mixture of Experts</a></li>
<li class="chapter" data-level="2.1.4.7" data-path="literature-review.html"><a href="literature-review.html#confidence-scores"><i class="fa fa-check"></i><b>2.1.4.7</b> Confidence scores</a></li>
</ul></li>
<li class="chapter" data-level="2.1.5" data-path="literature-review.html"><a href="literature-review.html#llm-methods"><i class="fa fa-check"></i><b>2.1.5</b> Generation enhancing methods with LLMs</a>
<ul>
<li class="chapter" data-level="2.1.5.1" data-path="literature-review.html"><a href="literature-review.html#in-context-learning"><i class="fa fa-check"></i><b>2.1.5.1</b> In-context Learning</a></li>
<li class="chapter" data-level="2.1.5.2" data-path="literature-review.html"><a href="literature-review.html#rag"><i class="fa fa-check"></i><b>2.1.5.2</b> RAG</a></li>
<li class="chapter" data-level="2.1.5.3" data-path="literature-review.html"><a href="literature-review.html#guided-and-restricted-decoding"><i class="fa fa-check"></i><b>2.1.5.3</b> Guided and restricted decoding</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="literature-review.html"><a href="literature-review.html#other-concepts"><i class="fa fa-check"></i><b>2.2</b> General machine learning and statistics</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="literature-review.html"><a href="literature-review.html#sample-distribution-visualization-methods"><i class="fa fa-check"></i><b>2.2.1</b> Sample distribution visualization methods</a></li>
<li class="chapter" data-level="2.2.2" data-path="literature-review.html"><a href="literature-review.html#tree-based-machine-learning-algorithms"><i class="fa fa-check"></i><b>2.2.2</b> Tree based machine learning algorithms</a></li>
<li class="chapter" data-level="2.2.3" data-path="literature-review.html"><a href="literature-review.html#shap"><i class="fa fa-check"></i><b>2.2.3</b> Model agnostic explanation models</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="literature-review.html"><a href="literature-review.html#summary-1"><i class="fa fa-check"></i><b>2.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodology.html"><a href="methodology.html"><i class="fa fa-check"></i><b>3</b> Methodology</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodology.html"><a href="methodology.html#problem-definition"><i class="fa fa-check"></i><b>3.1</b> Problem Definition</a></li>
<li class="chapter" data-level="3.2" data-path="methodology.html"><a href="methodology.html#research-design-philosophy"><i class="fa fa-check"></i><b>3.2</b> Research Design &amp; Philosophy</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="methodology.html"><a href="methodology.html#research-questions"><i class="fa fa-check"></i><b>3.2.1</b> Research questions</a></li>
<li class="chapter" data-level="3.2.2" data-path="methodology.html"><a href="methodology.html#hypotheses"><i class="fa fa-check"></i><b>3.2.2</b> Hypotheses</a></li>
<li class="chapter" data-level="3.2.3" data-path="methodology.html"><a href="methodology.html#evaluation-research"><i class="fa fa-check"></i><b>3.2.3</b> Evaluation research</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="methodology.html"><a href="methodology.html#evaluation-strategy"><i class="fa fa-check"></i><b>3.3</b> Evaluation Strategy</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="methodology.html"><a href="methodology.html#evaluation-framework-and-metrics"><i class="fa fa-check"></i><b>3.3.1</b> Evaluation framework and metrics</a>
<ul>
<li class="chapter" data-level="3.3.1.1" data-path="methodology.html"><a href="methodology.html#page-identification"><i class="fa fa-check"></i><b>3.3.1.1</b> Page identification</a></li>
<li class="chapter" data-level="3.3.1.2" data-path="methodology.html"><a href="methodology.html#information-extraction"><i class="fa fa-check"></i><b>3.3.1.2</b> Information extraction</a></li>
<li class="chapter" data-level="3.3.1.3" data-path="methodology.html"><a href="methodology.html#error-rate-guidance"><i class="fa fa-check"></i><b>3.3.1.3</b> Error rate guidance</a></li>
</ul></li>
<li class="chapter" data-level="3.3.2" data-path="methodology.html"><a href="methodology.html#benchmarking"><i class="fa fa-check"></i><b>3.3.2</b> Benchmarking</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="methodology.html"><a href="methodology.html#data-strategy"><i class="fa fa-check"></i><b>3.4</b> Data Strategy</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="methodology.html"><a href="methodology.html#sampling-methodology"><i class="fa fa-check"></i><b>3.4.1</b> Sampling methodology</a></li>
<li class="chapter" data-level="3.4.2" data-path="methodology.html"><a href="methodology.html#ground-truth-creation-process"><i class="fa fa-check"></i><b>3.4.2</b> Ground truth creation process</a></li>
<li class="chapter" data-level="3.4.3" data-path="methodology.html"><a href="methodology.html#preprocessing"><i class="fa fa-check"></i><b>3.4.3</b> Preprocessing</a></li>
<li class="chapter" data-level="3.4.4" data-path="methodology.html"><a href="methodology.html#data-splitting"><i class="fa fa-check"></i><b>3.4.4</b> Data splitting</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="methodology.html"><a href="methodology.html#experimental-framework"><i class="fa fa-check"></i><b>3.5</b> Experimental Framework</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="methodology.html"><a href="methodology.html#llm-overview"><i class="fa fa-check"></i><b>3.5.1</b> LLM overview</a></li>
<li class="chapter" data-level="3.5.2" data-path="methodology.html"><a href="methodology.html#approaches"><i class="fa fa-check"></i><b>3.5.2</b> Approaches</a>
<ul>
<li class="chapter" data-level="3.5.2.1" data-path="methodology.html"><a href="methodology.html#page-identification-2"><i class="fa fa-check"></i><b>3.5.2.1</b> Page identification</a></li>
<li class="chapter" data-level="3.5.2.2" data-path="methodology.html"><a href="methodology.html#information-extraction-2"><i class="fa fa-check"></i><b>3.5.2.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.3" data-path="methodology.html"><a href="methodology.html#error-analysis-methodology"><i class="fa fa-check"></i><b>3.5.3</b> Error analysis</a>
<ul>
<li class="chapter" data-level="3.5.3.1" data-path="methodology.html"><a href="methodology.html#page-identificaion"><i class="fa fa-check"></i><b>3.5.3.1</b> Page identificaion</a></li>
<li class="chapter" data-level="3.5.3.2" data-path="methodology.html"><a href="methodology.html#inforamtion-extraction"><i class="fa fa-check"></i><b>3.5.3.2</b> Inforamtion extraction</a></li>
</ul></li>
<li class="chapter" data-level="3.5.4" data-path="methodology.html"><a href="methodology.html#evaluation-methods"><i class="fa fa-check"></i><b>3.5.4</b> Evaluation methods</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="implementation.html"><a href="implementation.html"><i class="fa fa-check"></i><b>4</b> Implementation</a>
<ul>
<li class="chapter" data-level="4.1" data-path="implementation.html"><a href="implementation.html#environments"><i class="fa fa-check"></i><b>4.1</b> Environments</a></li>
<li class="chapter" data-level="4.2" data-path="implementation.html"><a href="implementation.html#software-packages"><i class="fa fa-check"></i><b>4.2</b> Software Packages</a></li>
<li class="chapter" data-level="4.3" data-path="implementation.html"><a href="implementation.html#ground-truth-datasets"><i class="fa fa-check"></i><b>4.3</b> Ground truth datasets</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="implementation.html"><a href="implementation.html#ground-truth-creation"><i class="fa fa-check"></i><b>4.3.1</b> Ground truth creation</a></li>
<li class="chapter" data-level="4.3.2" data-path="implementation.html"><a href="implementation.html#ground-truth-database-composition"><i class="fa fa-check"></i><b>4.3.2</b> Ground truth database composition</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="implementation.html"><a href="implementation.html#data-processing"><i class="fa fa-check"></i><b>4.4</b> Data processing</a></li>
<li class="chapter" data-level="4.5" data-path="implementation.html"><a href="implementation.html#evaluation-and-reporting"><i class="fa fa-check"></i><b>4.5</b> Evaluation and Reporting</a></li>
<li class="chapter" data-level="4.6" data-path="implementation.html"><a href="implementation.html#speedup-with-vllm-and-batching"><i class="fa fa-check"></i><b>4.6</b> Speedup with vLLM and batching</a></li>
<li class="chapter" data-level="4.7" data-path="implementation.html"><a href="implementation.html#gpu-benchmark"><i class="fa fa-check"></i><b>4.7</b> Hardware normalization</a></li>
<li class="chapter" data-level="4.8" data-path="implementation.html"><a href="implementation.html#summary-2"><i class="fa fa-check"></i><b>4.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#page-identification-introduction"><i class="fa fa-check"></i><b>5.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#approaches-1"><i class="fa fa-check"></i><b>5.1.1</b> Approaches</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#comparison-page-identification"><i class="fa fa-check"></i><b>5.1.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#table-extraction-introduction"><i class="fa fa-check"></i><b>5.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="results.html"><a href="results.html#approaches-2"><i class="fa fa-check"></i><b>5.2.1</b> Approaches</a></li>
<li class="chapter" data-level="5.2.2" data-path="results.html"><a href="results.html#comparing-table-extraction-methods"><i class="fa fa-check"></i><b>5.2.2</b> Comparison</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#error-rate-guidance-results"><i class="fa fa-check"></i><b>5.3</b> Error rate guidance</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#page-identification-error-rate-results"><i class="fa fa-check"></i><b>5.3.1</b> Page identification</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#information-extraction-error-rate-results"><i class="fa fa-check"></i><b>5.3.2</b> Information extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#summary-results"><i class="fa fa-check"></i><b>5.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="discussion.html"><a href="discussion.html"><i class="fa fa-check"></i><b>6</b> Discussion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="discussion.html"><a href="discussion.html#answer-research-questions"><i class="fa fa-check"></i><b>6.1</b> Research questions</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="discussion.html"><a href="discussion.html#page-identification-5"><i class="fa fa-check"></i><b>6.1.1</b> Page identification</a></li>
<li class="chapter" data-level="6.1.2" data-path="discussion.html"><a href="discussion.html#information-extraction-4"><i class="fa fa-check"></i><b>6.1.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.1.2.1" data-path="discussion.html"><a href="discussion.html#extraction-performace-hypotheses-evaluation"><i class="fa fa-check"></i><b>6.1.2.1</b> Core capabilities</a></li>
<li class="chapter" data-level="6.1.2.2" data-path="discussion.html"><a href="discussion.html#extraction-performace-predictor-hypotheses-evaluation"><i class="fa fa-check"></i><b>6.1.2.2</b> Feature effects</a></li>
<li class="chapter" data-level="6.1.2.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-1"><i class="fa fa-check"></i><b>6.1.2.3</b> Error rate guidance</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="discussion.html"><a href="discussion.html#error-analysis"><i class="fa fa-check"></i><b>6.2</b> Error analysis</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="discussion.html"><a href="discussion.html#page-identification-6"><i class="fa fa-check"></i><b>6.2.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.2.1.1" data-path="discussion.html"><a href="discussion.html#llm-approach"><i class="fa fa-check"></i><b>6.2.1.1</b> LLM approach</a></li>
<li class="chapter" data-level="6.2.1.2" data-path="discussion.html"><a href="discussion.html#error-analysis-tf"><i class="fa fa-check"></i><b>6.2.1.2</b> Term frequency approach</a></li>
</ul></li>
<li class="chapter" data-level="6.2.2" data-path="discussion.html"><a href="discussion.html#information-extraction-5"><i class="fa fa-check"></i><b>6.2.2</b> Information extraction</a>
<ul>
<li class="chapter" data-level="6.2.2.1" data-path="discussion.html"><a href="discussion.html#real-tables-3"><i class="fa fa-check"></i><b>6.2.2.1</b> Real tables</a></li>
<li class="chapter" data-level="6.2.2.2" data-path="discussion.html"><a href="discussion.html#same-company-evaluation"><i class="fa fa-check"></i><b>6.2.2.2</b> Company specific results</a></li>
<li class="chapter" data-level="6.2.2.3" data-path="discussion.html"><a href="discussion.html#synthetic-tables-3"><i class="fa fa-check"></i><b>6.2.2.3</b> Synthetic tables</a></li>
<li class="chapter" data-level="6.2.2.4" data-path="discussion.html"><a href="discussion.html#numeric-transformation-discussion"><i class="fa fa-check"></i><b>6.2.2.4</b> Numeric transformations</a></li>
<li class="chapter" data-level="6.2.2.5" data-path="discussion.html"><a href="discussion.html#regex-synth-backend-discussion"><i class="fa fa-check"></i><b>6.2.2.5</b> Regular expression approach</a></li>
<li class="chapter" data-level="6.2.2.6" data-path="discussion.html"><a href="discussion.html#openai-discussion"><i class="fa fa-check"></i><b>6.2.2.6</b> OpenAI models</a></li>
</ul></li>
<li class="chapter" data-level="6.2.3" data-path="discussion.html"><a href="discussion.html#unconsistent-label-matching"><i class="fa fa-check"></i><b>6.2.3</b> Ground truth creation</a></li>
<li class="chapter" data-level="6.2.4" data-path="discussion.html"><a href="discussion.html#context-rot"><i class="fa fa-check"></i><b>6.2.4</b> Context rot</a>
<ul>
<li class="chapter" data-level="6.2.4.1" data-path="discussion.html"><a href="discussion.html#page-identification-7"><i class="fa fa-check"></i><b>6.2.4.1</b> Page identification</a></li>
<li class="chapter" data-level="6.2.4.2" data-path="discussion.html"><a href="discussion.html#information-extraction-6"><i class="fa fa-check"></i><b>6.2.4.2</b> Information extraction</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="discussion.html"><a href="discussion.html#general-performance"><i class="fa fa-check"></i><b>6.3</b> Practical Implications and Limitations</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="discussion.html"><a href="discussion.html#page-identification-8"><i class="fa fa-check"></i><b>6.3.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="6.3.1.1" data-path="discussion.html"><a href="discussion.html#transfering-the-system-to-new-problems"><i class="fa fa-check"></i><b>6.3.1.1</b> Transfering the system to new problems</a></li>
<li class="chapter" data-level="6.3.1.2" data-path="discussion.html"><a href="discussion.html#limitations-of-transfer"><i class="fa fa-check"></i><b>6.3.1.2</b> Limitations of transfer</a></li>
<li class="chapter" data-level="6.3.1.3" data-path="discussion.html"><a href="discussion.html#toc-discussion"><i class="fa fa-check"></i><b>6.3.1.3</b> Possible improvement</a></li>
<li class="chapter" data-level="6.3.1.4" data-path="discussion.html"><a href="discussion.html#conclusion-4"><i class="fa fa-check"></i><b>6.3.1.4</b> Conclusion</a></li>
<li class="chapter" data-level="6.3.1.5" data-path="discussion.html"><a href="discussion.html#efficency-discussion"><i class="fa fa-check"></i><b>6.3.1.5</b> Energy usage and runtime</a></li>
</ul></li>
<li class="chapter" data-level="6.3.2" data-path="discussion.html"><a href="discussion.html#alternative-input-formats-extraction"><i class="fa fa-check"></i><b>6.3.2</b> Information extraction</a></li>
<li class="chapter" data-level="6.3.3" data-path="discussion.html"><a href="discussion.html#error-rate-guidance-2"><i class="fa fa-check"></i><b>6.3.3</b> Error rate guidance</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="discussion.html"><a href="discussion.html#not-covered"><i class="fa fa-check"></i><b>6.4</b> Not covered</a></li>
<li class="chapter" data-level="6.5" data-path="discussion.html"><a href="discussion.html#outlook-implementation"><i class="fa fa-check"></i><b>6.5</b> Outlook</a></li>
<li class="chapter" data-level="6.6" data-path="discussion.html"><a href="discussion.html#ethics"><i class="fa fa-check"></i><b>6.6</b> Ethical &amp; Practical Considerations</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="discussion.html"><a href="discussion.html#pdf-extraction-limitations"><i class="fa fa-check"></i><b>6.6.1</b> PDF extraction limitations</a></li>
<li class="chapter" data-level="6.6.2" data-path="discussion.html"><a href="discussion.html#computational-constraints"><i class="fa fa-check"></i><b>6.6.2</b> Computational constraints</a></li>
<li class="chapter" data-level="6.6.3" data-path="discussion.html"><a href="discussion.html#generalizability-scope"><i class="fa fa-check"></i><b>6.6.3</b> Generalizability scope</a></li>
<li class="chapter" data-level="6.6.4" data-path="discussion.html"><a href="discussion.html#ethical-considerations"><i class="fa fa-check"></i><b>6.6.4</b> Ethical considerations</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="discussion.html"><a href="discussion.html#conclusion"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="" data-path="glossary.html"><a href="glossary.html"><i class="fa fa-check"></i>Glossary</a></li>
<li class="chapter" data-level="8" data-path="page-identification-report.html"><a href="page-identification-report.html"><i class="fa fa-check"></i><b>8</b> Appendix A - Page identification report</a>
<ul>
<li class="chapter" data-level="8.1" data-path="page-identification-report.html"><a href="page-identification-report.html#regex-page-identification"><i class="fa fa-check"></i><b>8.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="8.2" data-path="page-identification-report.html"><a href="page-identification-report.html#toc-understanding"><i class="fa fa-check"></i><b>8.2</b> Table of Contents understanding</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#text-based-toc-understanding"><i class="fa fa-check"></i><b>8.2.1</b> Details for the approaches</a></li>
<li class="chapter" data-level="8.2.2" data-path="page-identification-report.html"><a href="page-identification-report.html#results-5"><i class="fa fa-check"></i><b>8.2.2</b> Results</a>
<ul>
<li class="chapter" data-level="8.2.2.1" data-path="page-identification-report.html"><a href="page-identification-report.html#comparison-of-the-different-approaches"><i class="fa fa-check"></i><b>8.2.2.1</b> Comparison of the different approaches</a></li>
</ul></li>
<li class="chapter" data-level="8.2.3" data-path="page-identification-report.html"><a href="page-identification-report.html#machine-readable-toc-approach-specific-results"><i class="fa fa-check"></i><b>8.2.3</b> Machine readable TOC approach specific results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="page-identification-report.html"><a href="page-identification-report.html#llm-page-identification"><i class="fa fa-check"></i><b>8.3</b> Classification with LLMs</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="page-identification-report.html"><a href="page-identification-report.html#binary-classification-1"><i class="fa fa-check"></i><b>8.3.1</b> Binary classification</a></li>
<li class="chapter" data-level="8.3.2" data-path="page-identification-report.html"><a href="page-identification-report.html#multi-class-classification-1"><i class="fa fa-check"></i><b>8.3.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="page-identification-report.html"><a href="page-identification-report.html#tf-classifier"><i class="fa fa-check"></i><b>8.4</b> Term frequency based classifier</a></li>
<li class="chapter" data-level="8.5" data-path="page-identification-report.html"><a href="page-identification-report.html#summary-4"><i class="fa fa-check"></i><b>8.5</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="information-extraction-report.html"><a href="information-extraction-report.html"><i class="fa fa-check"></i><b>9</b> Appendix B - Information extraction report</a>
<ul>
<li class="chapter" data-level="9.1" data-path="information-extraction-report.html"><a href="information-extraction-report.html#baseline-regex"><i class="fa fa-check"></i><b>9.1</b> Baseline: Regex</a></li>
<li class="chapter" data-level="9.2" data-path="information-extraction-report.html"><a href="information-extraction-report.html#extraction-with-llms-real-tables"><i class="fa fa-check"></i><b>9.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="information-extraction-report.html"><a href="information-extraction-report.html#real-table-extraction-results"><i class="fa fa-check"></i><b>9.2.1</b> Real tables</a></li>
<li class="chapter" data-level="9.2.2" data-path="information-extraction-report.html"><a href="information-extraction-report.html#synthetic-table-extraction"><i class="fa fa-check"></i><b>9.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="9.2.3" data-path="information-extraction-report.html"><a href="information-extraction-report.html#real-table-extraction-synth-context"><i class="fa fa-check"></i><b>9.2.3</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="information-extraction-report.html"><a href="information-extraction-report.html#summary-5"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="error-guidance-report.html"><a href="error-guidance-report.html"><i class="fa fa-check"></i><b>10</b> Appendix C - Error rate guidance report</a>
<ul>
<li class="chapter" data-level="10.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#page-identification-9"><i class="fa fa-check"></i><b>10.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#binary-classification-2"><i class="fa fa-check"></i><b>10.1.1</b> Binary classification</a></li>
<li class="chapter" data-level="10.1.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#multi-class-classification-2"><i class="fa fa-check"></i><b>10.1.2</b> Multi-class classification</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#extraction-with-llms"><i class="fa fa-check"></i><b>10.2</b> Extraction with LLMs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="error-guidance-report.html"><a href="error-guidance-report.html#real-tables-4"><i class="fa fa-check"></i><b>10.2.1</b> Real tables</a></li>
<li class="chapter" data-level="10.2.2" data-path="error-guidance-report.html"><a href="error-guidance-report.html#synthetic-tables-4"><i class="fa fa-check"></i><b>10.2.2</b> Synthetic tables</a></li>
<li class="chapter" data-level="10.2.3" data-path="error-guidance-report.html"><a href="error-guidance-report.html#hybrid-respect-units"><i class="fa fa-check"></i><b>10.2.3</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html"><i class="fa fa-check"></i><b>11</b> Appendix D - Feature effect analysis</a>
<ul>
<li class="chapter" data-level="11.1" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#regular-expressions-4"><i class="fa fa-check"></i><b>11.1</b> Regular expressions</a></li>
<li class="chapter" data-level="11.2" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#real-tables-5"><i class="fa fa-check"></i><b>11.2</b> Real tables</a></li>
<li class="chapter" data-level="11.3" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#synthetic-tables-5"><i class="fa fa-check"></i><b>11.3</b> Synthetic tables</a></li>
<li class="chapter" data-level="11.4" data-path="feature-effect-analysis.html"><a href="feature-effect-analysis.html#hybrid-approach-3"><i class="fa fa-check"></i><b>11.4</b> Hybrid approach</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html"><i class="fa fa-check"></i><b>12</b> Appendix E - Miscellaneous</a>
<ul>
<li class="chapter" data-level="12.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#hitl"><i class="fa fa-check"></i><b>12.1</b> Human in the loop application</a></li>
<li class="chapter" data-level="12.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#local-machine"><i class="fa fa-check"></i><b>12.2</b> Local machine</a></li>
<li class="chapter" data-level="12.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#benchmarks"><i class="fa fa-check"></i><b>12.3</b> Benchmarks</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#text-extraction-benchmark"><i class="fa fa-check"></i><b>12.3.1</b> Text extraction</a></li>
<li class="chapter" data-level="12.3.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#table-detection-benchmark"><i class="fa fa-check"></i><b>12.3.2</b> Table detection</a>
<ul>
<li class="chapter" data-level="12.3.2.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#old-classification-with-llm"><i class="fa fa-check"></i><b>12.3.2.1</b> old classification with llm</a></li>
<li class="chapter" data-level="12.3.2.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#yolo"><i class="fa fa-check"></i><b>12.3.2.2</b> yolo benchmark and table transformer</a></li>
</ul></li>
<li class="chapter" data-level="12.3.3" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#vllm-batch-speed"><i class="fa fa-check"></i><b>12.3.3</b> Large language model process speed</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#prompts"><i class="fa fa-check"></i><b>12.4</b> Prompts</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#toc-understanding-promts"><i class="fa fa-check"></i><b>12.4.1</b> TOC understanding</a></li>
<li class="chapter" data-level="12.4.2" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#classification-prompts"><i class="fa fa-check"></i><b>12.4.2</b> Classification</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-page-identification-code"><i class="fa fa-check"></i><b>12.5</b> Regular expressions</a></li>
<li class="chapter" data-level="12.6" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#annual-comprehensive-financial-report-balance-sheet"><i class="fa fa-check"></i><b>12.6</b> Annual Comprehensive Financial Report Balance Sheet</a></li>
<li class="chapter" data-level="12.7" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#regex-extraction-mistakes"><i class="fa fa-check"></i><b>12.7</b> Table extraction with regular expressions</a></li>
<li class="chapter" data-level="12.8" data-path="appendix-e---miscellaneous.html"><a href="appendix-e---miscellaneous.html#tf-missclassifications"><i class="fa fa-check"></i><b>12.8</b> Term frequency missclassifications</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="tables.html"><a href="tables.html"><i class="fa fa-check"></i><b>13</b> Tables</a>
<ul>
<li class="chapter" data-level="13.1" data-path="tables.html"><a href="tables.html#classification"><i class="fa fa-check"></i><b>13.1</b> Classification</a></li>
<li class="chapter" data-level="13.2" data-path="tables.html"><a href="tables.html#table-extraction"><i class="fa fa-check"></i><b>13.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="tables.html"><a href="tables.html#hybrid-approach-4"><i class="fa fa-check"></i><b>13.2.1</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="figure-collection.html"><a href="figure-collection.html"><i class="fa fa-check"></i><b>14</b> Figures</a>
<ul>
<li class="chapter" data-level="14.1" data-path="figure-collection.html"><a href="figure-collection.html#page-identification-10"><i class="fa fa-check"></i><b>14.1</b> Page identification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="figure-collection.html"><a href="figure-collection.html#regex-baseline"><i class="fa fa-check"></i><b>14.1.1</b> Regex baseline</a></li>
<li class="chapter" data-level="14.1.2" data-path="figure-collection.html"><a href="figure-collection.html#toc-understanding-1"><i class="fa fa-check"></i><b>14.1.2</b> TOC understanding</a></li>
<li class="chapter" data-level="14.1.3" data-path="figure-collection.html"><a href="figure-collection.html#classification-1"><i class="fa fa-check"></i><b>14.1.3</b> Classification</a>
<ul>
<li class="chapter" data-level="14.1.3.1" data-path="figure-collection.html"><a href="figure-collection.html#binary"><i class="fa fa-check"></i><b>14.1.3.1</b> Binary</a></li>
<li class="chapter" data-level="14.1.3.2" data-path="figure-collection.html"><a href="figure-collection.html#multi-class-classification-3"><i class="fa fa-check"></i><b>14.1.3.2</b> Multi-class classification</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="figure-collection.html"><a href="figure-collection.html#table-extraction-1"><i class="fa fa-check"></i><b>14.2</b> Table extraction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="figure-collection.html"><a href="figure-collection.html#regex-approach"><i class="fa fa-check"></i><b>14.2.1</b> Regex approach</a>
<ul>
<li class="chapter" data-level="14.2.1.1" data-path="figure-collection.html"><a href="figure-collection.html#real-tables-6"><i class="fa fa-check"></i><b>14.2.1.1</b> Real tables</a></li>
<li class="chapter" data-level="14.2.1.2" data-path="figure-collection.html"><a href="figure-collection.html#synthetic-tables-6"><i class="fa fa-check"></i><b>14.2.1.2</b> Synthetic tables</a></li>
</ul></li>
<li class="chapter" data-level="14.2.2" data-path="figure-collection.html"><a href="figure-collection.html#real-tables-7"><i class="fa fa-check"></i><b>14.2.2</b> Real tables</a>
<ul>
<li class="chapter" data-level="14.2.2.1" data-path="figure-collection.html"><a href="figure-collection.html#examples-from-same-company"><i class="fa fa-check"></i><b>14.2.2.1</b> Examples from same company</a></li>
<li class="chapter" data-level="14.2.2.2" data-path="figure-collection.html"><a href="figure-collection.html#openai-models-1"><i class="fa fa-check"></i><b>14.2.2.2</b> OpenAI models</a></li>
<li class="chapter" data-level="14.2.2.3" data-path="figure-collection.html"><a href="figure-collection.html#comparing-input-formats-and-text-extration-libraries"><i class="fa fa-check"></i><b>14.2.2.3</b> Comparing input formats and text extration libraries</a></li>
<li class="chapter" data-level="14.2.2.4" data-path="figure-collection.html"><a href="figure-collection.html#hypotheses-6"><i class="fa fa-check"></i><b>14.2.2.4</b> Hypotheses</a></li>
</ul></li>
<li class="chapter" data-level="14.2.3" data-path="figure-collection.html"><a href="figure-collection.html#synthetic-tables-7"><i class="fa fa-check"></i><b>14.2.3</b> Synthetic tables</a>
<ul>
<li class="chapter" data-level="14.2.3.1" data-path="figure-collection.html"><a href="figure-collection.html#confidence-4"><i class="fa fa-check"></i><b>14.2.3.1</b> Confidence</a></li>
</ul></li>
<li class="chapter" data-level="14.2.4" data-path="figure-collection.html"><a href="figure-collection.html#hybrid-approach-5"><i class="fa fa-check"></i><b>14.2.4</b> Hybrid approach</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="15" data-path="layout-testing.html"><a href="layout-testing.html"><i class="fa fa-check"></i><b>15</b> Layout testing</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Extraction of tabular data from annual reports with LLMs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="error-guidance-report" class="section level1 hasAnchor" number="10">
<h1><span class="header-section-number">10</span> Appendix C - Error rate guidance report<a href="error-guidance-report.html#error-guidance-report" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The side research question asks, if it is possible to guide the users attention to predictions that have a higher empirical rate of errors. In this thesis we focus on the confidence score calculated from the reported log probabilities.</p>
<p>The formula for the confidence score is given in Equation <a href="methodology.html#eq:confidence">(3.1)</a>.</p>
<div id="page-identification-9" class="section level2 hasAnchor" number="10.1">
<h2><span class="header-section-number">10.1</span> Page identification<a href="error-guidance-report.html#page-identification-9" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="binary-classification-2" class="section level3 hasAnchor" number="10.1.1">
<h3><span class="header-section-number">10.1.1</span> Binary classification<a href="error-guidance-report.html#binary-classification-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="error-guidance-report.html#cb77-1" tabindex="-1"></a>target_type <span class="ot">&lt;-</span> <span class="st">&quot;Aktiva&quot;</span></span>
<span id="cb77-2"><a href="error-guidance-report.html#cb77-2" tabindex="-1"></a></span>
<span id="cb77-3"><a href="error-guidance-report.html#cb77-3" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb77-4"><a href="error-guidance-report.html#cb77-4" tabindex="-1"></a>  classification_type <span class="sc">==</span> target_type, n_examples<span class="sc">&lt;=</span><span class="dv">3</span></span>
<span id="cb77-5"><a href="error-guidance-report.html#cb77-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb77-6"><a href="error-guidance-report.html#cb77-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb77-7"><a href="error-guidance-report.html#cb77-7" tabindex="-1"></a></span>
<span id="cb77-8"><a href="error-guidance-report.html#cb77-8" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb77-9"><a href="error-guidance-report.html#cb77-9" tabindex="-1"></a></span>
<span id="cb77-10"><a href="error-guidance-report.html#cb77-10" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb77-11"><a href="error-guidance-report.html#cb77-11" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-12"><a href="error-guidance-report.html#cb77-12" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb77-13"><a href="error-guidance-report.html#cb77-13" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, target_type)</span>
<span id="cb77-14"><a href="error-guidance-report.html#cb77-14" tabindex="-1"></a>  )</span>
<span id="cb77-15"><a href="error-guidance-report.html#cb77-15" tabindex="-1"></a></span>
<span id="cb77-16"><a href="error-guidance-report.html#cb77-16" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb77-17"><a href="error-guidance-report.html#cb77-17" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span></code></pre></div>
</details>
<p>We investigate the relation between the reported confidence for an answer and its correctness, to check if it is possible to inform humans in the loop about results they should double check and which results they can trust. The <a href="glossary.html#acronyms_LLM">LLM</a> just returns one prediction and its confidence<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> for the binary classification task. We calculate its confidence as <span class="math inline">\(confidence = exp(logprob)\)</span>, if the answer is <em>yes</em>. And we calculate its confidence as <span class="math inline">\(confidence = 1-exp(logprob)\)</span>, if the the answer is <em>no</em>,</p>
<p>Figure <a href="error-guidance-report.html#fig:confidence-match-plot-mistral-binary">10.1</a> shows the distribution of reported confidence score for the binary classification with target type <strong>Aktiva</strong> for all table types grouped by their correctness for Ministral-8B-Instruct-2410. One can see that the predictions are very accurate making just 13 mistakes for 4981 predictions.</p>
<p>The reported confidence for answer <em>yes</em> is showing a wide spread from around 0.25 to 1.0. This is true for the answer <em>no</em> as well. Most wrong decisions are made for responses that have a reported confidence in the range from 0.25 to 0.75. But there are more correct answers in this range as well. It never misclassifies <strong>GuV</strong> or <strong>Passiva</strong><a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a> as <strong>Aktiva</strong>. But it with shows some not recalled <strong>Aktiva</strong> tables and is predicting some of the pages of majority class, with not further described content and structure, as <strong>Aktiva</strong>.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="error-guidance-report.html#cb78-1" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb78-2"><a href="error-guidance-report.html#cb78-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb78-3"><a href="error-guidance-report.html#cb78-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb78-4"><a href="error-guidance-report.html#cb78-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb78-5"><a href="error-guidance-report.html#cb78-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb78-6"><a href="error-guidance-report.html#cb78-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb78-7"><a href="error-guidance-report.html#cb78-7" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb78-8"><a href="error-guidance-report.html#cb78-8" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:confidence-match-plot-mistral-binary"></span>
<img src="_main_files/figure-html/confidence-match-plot-mistral-binary-1.png" alt="Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Mistral-8B-Instruct-2410." width="100%" />
<p class="caption">
Figure 10.1: Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Mistral-8B-Instruct-2410.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="error-guidance-report.html#cb79-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb79-2"><a href="error-guidance-report.html#cb79-2" tabindex="-1"></a>  classification_type <span class="sc">==</span> <span class="st">&quot;Aktiva&quot;</span>, </span>
<span id="cb79-3"><a href="error-guidance-report.html#cb79-3" tabindex="-1"></a>  <span class="co"># model == &quot;Qwen3-32B&quot;, </span></span>
<span id="cb79-4"><a href="error-guidance-report.html#cb79-4" tabindex="-1"></a>  <span class="co"># model_family==&quot;Qwen 2.5&quot;, </span></span>
<span id="cb79-5"><a href="error-guidance-report.html#cb79-5" tabindex="-1"></a>  <span class="fu">str_detect</span>(model_family, <span class="st">&quot;Qwen&quot;</span>), </span>
<span id="cb79-6"><a href="error-guidance-report.html#cb79-6" tabindex="-1"></a>  <span class="co"># parameter_count &lt; 16</span></span>
<span id="cb79-7"><a href="error-guidance-report.html#cb79-7" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb79-8"><a href="error-guidance-report.html#cb79-8" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb79-9"><a href="error-guidance-report.html#cb79-9" tabindex="-1"></a></span>
<span id="cb79-10"><a href="error-guidance-report.html#cb79-10" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb79-11"><a href="error-guidance-report.html#cb79-11" tabindex="-1"></a></span>
<span id="cb79-12"><a href="error-guidance-report.html#cb79-12" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb79-13"><a href="error-guidance-report.html#cb79-13" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb79-14"><a href="error-guidance-report.html#cb79-14" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb79-15"><a href="error-guidance-report.html#cb79-15" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb79-16"><a href="error-guidance-report.html#cb79-16" tabindex="-1"></a>  )</span>
<span id="cb79-17"><a href="error-guidance-report.html#cb79-17" tabindex="-1"></a></span>
<span id="cb79-18"><a href="error-guidance-report.html#cb79-18" tabindex="-1"></a>model_name_best_f1_aktiva_qwen <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb79-19"><a href="error-guidance-report.html#cb79-19" tabindex="-1"></a>method__best_f1_aktiva_qwen <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span></code></pre></div>
</details>
<p>This is different for models of most other model families. Figure <a href="error-guidance-report.html#fig:confidence-match-plot-qwen-binary">10.2</a> shows, that Qwen2.5-32B-Instruct returns always high confidence scores, even when it is wrong. The model shows perfect recall but its precision is worse than the precision of the Mistral model.</p>

<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="error-guidance-report.html#cb80-1" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="error-guidance-report.html#cb80-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb80-3"><a href="error-guidance-report.html#cb80-3" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb80-4"><a href="error-guidance-report.html#cb80-4" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb80-5"><a href="error-guidance-report.html#cb80-5" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb80-6"><a href="error-guidance-report.html#cb80-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva_qwen,</span>
<span id="cb80-7"><a href="error-guidance-report.html#cb80-7" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva_qwen)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:confidence-match-plot-qwen-binary"></span>
<img src="_main_files/figure-html/confidence-match-plot-qwen-binary-1.png" alt="Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Qwen2.5-32B-Instruct." width="100%" />
<p class="caption">
Figure 10.2: Showing the confidence score for the Aktiva classification task grouped by table type and correctness for Qwen2.5-32B-Instruct.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="error-guidance-report.html#cb81-1" tabindex="-1"></a><span class="fu">library</span>(yardstick)</span>
<span id="cb81-2"><a href="error-guidance-report.html#cb81-2" tabindex="-1"></a></span>
<span id="cb81-3"><a href="error-guidance-report.html#cb81-3" tabindex="-1"></a>calc_flipped_conf_all_types <span class="ot">&lt;-</span> <span class="cf">function</span>(df, model_name, method_name) {</span>
<span id="cb81-4"><a href="error-guidance-report.html#cb81-4" tabindex="-1"></a>  l_temp <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb81-5"><a href="error-guidance-report.html#cb81-5" tabindex="-1"></a>  <span class="co"># browser()</span></span>
<span id="cb81-6"><a href="error-guidance-report.html#cb81-6" tabindex="-1"></a>  </span>
<span id="cb81-7"><a href="error-guidance-report.html#cb81-7" tabindex="-1"></a>  <span class="cf">for</span> (target <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&#39;Aktiva&#39;</span>, <span class="st">&#39;GuV&#39;</span>, <span class="st">&#39;Passiva&#39;</span>)) {</span>
<span id="cb81-8"><a href="error-guidance-report.html#cb81-8" tabindex="-1"></a>    <span class="co"># t &lt;- &quot;Aktiva&quot;</span></span>
<span id="cb81-9"><a href="error-guidance-report.html#cb81-9" tabindex="-1"></a>    <span class="co"># df_filtered &lt;- df %&gt;% filter(</span></span>
<span id="cb81-10"><a href="error-guidance-report.html#cb81-10" tabindex="-1"></a>    <span class="co">#   classification_type == t,</span></span>
<span id="cb81-11"><a href="error-guidance-report.html#cb81-11" tabindex="-1"></a>    <span class="co">#   n_examples &lt;= 3,</span></span>
<span id="cb81-12"><a href="error-guidance-report.html#cb81-12" tabindex="-1"></a>    <span class="co">#   loop == 0) %&gt;% </span></span>
<span id="cb81-13"><a href="error-guidance-report.html#cb81-13" tabindex="-1"></a>    <span class="co">#   arrange(desc(f1_score))</span></span>
<span id="cb81-14"><a href="error-guidance-report.html#cb81-14" tabindex="-1"></a>    <span class="co"># model_name_best_f1_aktiva &lt;- df_filtered[model_rank, &quot;model&quot;]</span></span>
<span id="cb81-15"><a href="error-guidance-report.html#cb81-15" tabindex="-1"></a>    <span class="co"># method_best_f1_aktiva &lt;- df_filtered[model_rank, &quot;method&quot;]</span></span>
<span id="cb81-16"><a href="error-guidance-report.html#cb81-16" tabindex="-1"></a>    </span>
<span id="cb81-17"><a href="error-guidance-report.html#cb81-17" tabindex="-1"></a>    df_filtered <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb81-18"><a href="error-guidance-report.html#cb81-18" tabindex="-1"></a>      <span class="fu">filter</span>(</span>
<span id="cb81-19"><a href="error-guidance-report.html#cb81-19" tabindex="-1"></a>        classification_type <span class="sc">==</span> target,</span>
<span id="cb81-20"><a href="error-guidance-report.html#cb81-20" tabindex="-1"></a>        model <span class="sc">==</span> model_name,</span>
<span id="cb81-21"><a href="error-guidance-report.html#cb81-21" tabindex="-1"></a>        method <span class="sc">==</span> method_name,</span>
<span id="cb81-22"><a href="error-guidance-report.html#cb81-22" tabindex="-1"></a>        loop <span class="sc">==</span> <span class="dv">0</span></span>
<span id="cb81-23"><a href="error-guidance-report.html#cb81-23" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb81-24"><a href="error-guidance-report.html#cb81-24" tabindex="-1"></a>      <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb81-25"><a href="error-guidance-report.html#cb81-25" tabindex="-1"></a>    </span>
<span id="cb81-26"><a href="error-guidance-report.html#cb81-26" tabindex="-1"></a>    df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb81-27"><a href="error-guidance-report.html#cb81-27" tabindex="-1"></a>    </span>
<span id="cb81-28"><a href="error-guidance-report.html#cb81-28" tabindex="-1"></a>    df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb81-29"><a href="error-guidance-report.html#cb81-29" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb81-30"><a href="error-guidance-report.html#cb81-30" tabindex="-1"></a>        <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb81-31"><a href="error-guidance-report.html#cb81-31" tabindex="-1"></a>        <span class="at">target =</span> target</span>
<span id="cb81-32"><a href="error-guidance-report.html#cb81-32" tabindex="-1"></a>      )</span>
<span id="cb81-33"><a href="error-guidance-report.html#cb81-33" tabindex="-1"></a>    l_temp[target] <span class="ot">&lt;-</span> <span class="fu">list</span>(df_flipped_score)</span>
<span id="cb81-34"><a href="error-guidance-report.html#cb81-34" tabindex="-1"></a>  }</span>
<span id="cb81-35"><a href="error-guidance-report.html#cb81-35" tabindex="-1"></a>  </span>
<span id="cb81-36"><a href="error-guidance-report.html#cb81-36" tabindex="-1"></a>  <span class="fu">list</span>(<span class="at">df =</span> <span class="fu">bind_rows</span>(l_temp), <span class="at">model =</span> model_name, <span class="at">method =</span> method_name)</span>
<span id="cb81-37"><a href="error-guidance-report.html#cb81-37" tabindex="-1"></a>}</span>
<span id="cb81-38"><a href="error-guidance-report.html#cb81-38" tabindex="-1"></a></span>
<span id="cb81-39"><a href="error-guidance-report.html#cb81-39" tabindex="-1"></a>plot_pr_double_curve <span class="ot">&lt;-</span> <span class="cf">function</span>(l, selected_type, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb81-40"><a href="error-guidance-report.html#cb81-40" tabindex="-1"></a>  <span class="co"># browser()</span></span>
<span id="cb81-41"><a href="error-guidance-report.html#cb81-41" tabindex="-1"></a>  df_temp2 <span class="ot">&lt;-</span> l<span class="sc">$</span>df <span class="sc">%&gt;%</span> <span class="fu">filter</span>(target <span class="sc">==</span> selected_type) <span class="sc">%&gt;%</span> </span>
<span id="cb81-42"><a href="error-guidance-report.html#cb81-42" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">if_else</span>(type <span class="sc">==</span> selected_type, type, <span class="st">&quot;no&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb81-43"><a href="error-guidance-report.html#cb81-43" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">factor</span>(type, <span class="at">levels =</span> <span class="fu">c</span>(selected_type, <span class="st">&quot;no&quot;</span>)))</span>
<span id="cb81-44"><a href="error-guidance-report.html#cb81-44" tabindex="-1"></a>  <span class="co"># pr_obj &lt;- pr.curve(scores.class0 = df_temp2$confidence_score[df_temp2$match == 1],</span></span>
<span id="cb81-45"><a href="error-guidance-report.html#cb81-45" tabindex="-1"></a>  <span class="co">#                    scores.class1 = df_temp2$confidence_score[df_temp2$match == 0],</span></span>
<span id="cb81-46"><a href="error-guidance-report.html#cb81-46" tabindex="-1"></a>  <span class="co">#                    curve = TRUE)</span></span>
<span id="cb81-47"><a href="error-guidance-report.html#cb81-47" tabindex="-1"></a>  </span>
<span id="cb81-48"><a href="error-guidance-report.html#cb81-48" tabindex="-1"></a>  <span class="co"># Precision-Recall Curve with ggplot2</span></span>
<span id="cb81-49"><a href="error-guidance-report.html#cb81-49" tabindex="-1"></a>  </span>
<span id="cb81-50"><a href="error-guidance-report.html#cb81-50" tabindex="-1"></a>  pr_df <span class="ot">&lt;-</span> df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_curve</span>(type, confidence_score) <span class="sc">%&gt;%</span></span>
<span id="cb81-51"><a href="error-guidance-report.html#cb81-51" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">threshold =</span> .threshold) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold<span class="sc">&lt;=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb81-52"><a href="error-guidance-report.html#cb81-52" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall))</span>
<span id="cb81-53"><a href="error-guidance-report.html#cb81-53" tabindex="-1"></a>  </span>
<span id="cb81-54"><a href="error-guidance-report.html#cb81-54" tabindex="-1"></a>  pr_auc <span class="ot">&lt;-</span> <span class="fu">round</span>(df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_auc</span>(type, confidence_score) <span class="sc">%&gt;%</span> .<span class="sc">$</span>.estimate, <span class="dv">3</span>)</span>
<span id="cb81-55"><a href="error-guidance-report.html#cb81-55" tabindex="-1"></a>  best_F1_row <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb81-56"><a href="error-guidance-report.html#cb81-56" tabindex="-1"></a>  best_F1_row_high_recall <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> </span>
<span id="cb81-57"><a href="error-guidance-report.html#cb81-57" tabindex="-1"></a>    <span class="fu">filter</span>(recall <span class="sc">&gt;</span> <span class="fl">0.999</span>, precision <span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb81-58"><a href="error-guidance-report.html#cb81-58" tabindex="-1"></a>  best_F1 <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb81-59"><a href="error-guidance-report.html#cb81-59" tabindex="-1"></a>  best_F1_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb81-60"><a href="error-guidance-report.html#cb81-60" tabindex="-1"></a>  best_threshold <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb81-61"><a href="error-guidance-report.html#cb81-61" tabindex="-1"></a>  best_threshold_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb81-62"><a href="error-guidance-report.html#cb81-62" tabindex="-1"></a>  best_precision_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(precision)</span>
<span id="cb81-63"><a href="error-guidance-report.html#cb81-63" tabindex="-1"></a>  </span>
<span id="cb81-64"><a href="error-guidance-report.html#cb81-64" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb81-65"><a href="error-guidance-report.html#cb81-65" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision)) <span class="sc">+</span></span>
<span id="cb81-66"><a href="error-guidance-report.html#cb81-66" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> threshold), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb81-67"><a href="error-guidance-report.html#cb81-67" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb81-68"><a href="error-guidance-report.html#cb81-68" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb81-69"><a href="error-guidance-report.html#cb81-69" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;Precision-Recall Curve for &quot;</span>, selected_type, <span class="st">&quot; (AUC = &quot;</span>, pr_auc, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb81-70"><a href="error-guidance-report.html#cb81-70" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb81-71"><a href="error-guidance-report.html#cb81-71" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Precision&quot;</span></span>
<span id="cb81-72"><a href="error-guidance-report.html#cb81-72" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb81-73"><a href="error-guidance-report.html#cb81-73" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb81-74"><a href="error-guidance-report.html#cb81-74" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb81-75"><a href="error-guidance-report.html#cb81-75" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb81-76"><a href="error-guidance-report.html#cb81-76" tabindex="-1"></a>    )</span>
<span id="cb81-77"><a href="error-guidance-report.html#cb81-77" tabindex="-1"></a>  </span>
<span id="cb81-78"><a href="error-guidance-report.html#cb81-78" tabindex="-1"></a>  g2 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb81-79"><a href="error-guidance-report.html#cb81-79" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision, <span class="at">color =</span> f1)) <span class="sc">+</span></span>
<span id="cb81-80"><a href="error-guidance-report.html#cb81-80" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb81-81"><a href="error-guidance-report.html#cb81-81" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb81-82"><a href="error-guidance-report.html#cb81-82" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb81-83"><a href="error-guidance-report.html#cb81-83" tabindex="-1"></a>      <span class="co"># title = &quot;Precision-Recall Curve colored by F1 score&quot;,</span></span>
<span id="cb81-84"><a href="error-guidance-report.html#cb81-84" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb81-85"><a href="error-guidance-report.html#cb81-85" tabindex="-1"></a>      <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb81-86"><a href="error-guidance-report.html#cb81-86" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;F1 score&quot;</span></span>
<span id="cb81-87"><a href="error-guidance-report.html#cb81-87" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb81-88"><a href="error-guidance-report.html#cb81-88" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb81-89"><a href="error-guidance-report.html#cb81-89" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb81-90"><a href="error-guidance-report.html#cb81-90" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb81-91"><a href="error-guidance-report.html#cb81-91" tabindex="-1"></a>    ) </span>
<span id="cb81-92"><a href="error-guidance-report.html#cb81-92" tabindex="-1"></a>  </span>
<span id="cb81-93"><a href="error-guidance-report.html#cb81-93" tabindex="-1"></a>  <span class="cf">if</span> (x_stuff <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb81-94"><a href="error-guidance-report.html#cb81-94" tabindex="-1"></a>    g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb81-95"><a href="error-guidance-report.html#cb81-95" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb81-96"><a href="error-guidance-report.html#cb81-96" tabindex="-1"></a>    </span>
<span id="cb81-97"><a href="error-guidance-report.html#cb81-97" tabindex="-1"></a>    g2 <span class="ot">&lt;-</span> g2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb81-98"><a href="error-guidance-report.html#cb81-98" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb81-99"><a href="error-guidance-report.html#cb81-99" tabindex="-1"></a>  }</span>
<span id="cb81-100"><a href="error-guidance-report.html#cb81-100" tabindex="-1"></a>  </span>
<span id="cb81-101"><a href="error-guidance-report.html#cb81-101" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> g1 <span class="sc">+</span> g2</span>
<span id="cb81-102"><a href="error-guidance-report.html#cb81-102" tabindex="-1"></a>  combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb81-103"><a href="error-guidance-report.html#cb81-103" tabindex="-1"></a>    <span class="st">&#39;Best F1 score of &#39;</span>, <span class="fu">round</span>(best_F1,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold,<span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb81-104"><a href="error-guidance-report.html#cb81-104" tabindex="-1"></a>    <span class="st">&#39;Best F1 score with recall &gt; 0.999 of &#39;</span>, <span class="fu">round</span>(best_F1_high_recall,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold_high_recall,<span class="dv">3</span>), <span class="st">&#39; (corresp. precision value: &#39;</span>, <span class="fu">round</span>(best_precision_high_recall,<span class="dv">3</span>) , <span class="st">&#39;)&#39;</span>))</span>
<span id="cb81-105"><a href="error-guidance-report.html#cb81-105" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>Figure <a href="error-guidance-report.html#fig:micro-pr-curve-llm-binary-1">10.3</a> shows the precision-recall-curve for the best performing model twice for each target type. On the left plots the line color represents the threshold score one could use to decide when to accept a response as it is. On the right plots the line color is showing the F1 score that results with a chosen threshold.</p>
<p>The <a href="glossary.html#acronyms_AUC">AUC</a> value is lowest for <strong>Aktiva</strong>. Here the F1 score is highest for a threshold value of 0.73. This prevents to classify the pages of type <em>other</em> to get classified as <strong>Aktiva</strong>. If it is required to have a very high recall value a threshold of 0.44 should be chosen.</p>
<p>The precision-recall-curve for <strong>Passiva</strong> is very similar but there is a step close to the recall value of 1.0. This has the effect that for a a guaranteed high recall a very low precision (0.24) and F1 (0.38) has to be accepted<a href="#fn30" class="footnote-ref" id="fnref30"><sup>30</sup></a>.</p>
<p>The shape of the precision-recall-curve for <strong>GuV</strong> almost perfectly reaches the top right corner. The highest F1 score is found with a threshold value of .56. With a threshold value of 0.5 a very high recall is guaranteed and the F1 score is just a little lower.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="error-guidance-report.html#cb82-1" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span></span>
<span id="cb82-2"><a href="error-guidance-report.html#cb82-2" tabindex="-1"></a>method_name <span class="ot">&lt;-</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb82-3"><a href="error-guidance-report.html#cb82-3" tabindex="-1"></a></span>
<span id="cb82-4"><a href="error-guidance-report.html#cb82-4" tabindex="-1"></a>df_temp_mistral <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> <span class="fu">calc_flipped_conf_all_types</span>(model_name, method_name)</span>
<span id="cb82-5"><a href="error-guidance-report.html#cb82-5" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb82-6"><a href="error-guidance-report.html#cb82-6" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb82-7"><a href="error-guidance-report.html#cb82-7" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp_mistral <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb82-8"><a href="error-guidance-report.html#cb82-8" tabindex="-1"></a></span>
<span id="cb82-9"><a href="error-guidance-report.html#cb82-9" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb82-10"><a href="error-guidance-report.html#cb82-10" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb82-11"><a href="error-guidance-report.html#cb82-11" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model_name, <span class="st">&quot; with &quot;</span>, method_name))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:micro-pr-curve-llm-binary-1"></span>
<img src="_main_files/figure-html/micro-pr-curve-llm-binary-1-1.png" alt="Showing the precsion-recall-curve for the best performing model." width="100%" />
<p class="caption">
Figure 10.3: Showing the precsion-recall-curve for the best performing model.
</p>
</div>
<p>Figure <a href="error-guidance-report.html#fig:table-identification-llm-confidence">10.4</a> summarizes the relation between reported confidence and correctness of the classification for all target types and compares it among the best performing model-strategy combinations for Ministral-8B-Instruct-2410 and Qwen3-8B. One can see, that the reported confidence for correct and incorrect classifications are separable in most cases for Mistral-8B. This separation is worse for Qwen3-8B and worst for target type <strong>Passiva</strong>.</p>
<p>Figure <a href="error-guidance-report.html#fig:table-identification-llm-confidence-lm">10.5</a> shows, that for Ministral-8B values with a confidence of 0.7 and more, a human donât has to double check the classification for target type <strong>GuV</strong>. This interval is smallest for <strong>Passiva</strong> where only confidences above 0.9 can be fully trusted. These empirical intervals might shrink, once more data is evaluated. If one is less strict and accepts misclassifiaction rates of 1 % the found interval for <strong>Passiva</strong> starts at 0.8 and is probably less depended on the sample evaluated. The percentage of predictions that can be trusted without risk is greater than 93 % even for target type <strong>Passiva</strong>.</p>
<p>For Qwen3-8B we find almost no range without any wrong classifications. For <strong>GuV</strong> this range includes 35 % of all predictions. The ranges that allow for 1 % of wrong classifications cover 57 % of all predictions at least.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="error-guidance-report.html#cb83-1" tabindex="-1"></a>confidence_vs_truth_binary <span class="ot">&lt;-</span> df_binary <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="error-guidance-report.html#cb83-2" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, model_name_best_f1_aktiva_qwen)) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="error-guidance-report.html#cb83-3" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb83-4"><a href="error-guidance-report.html#cb83-4" tabindex="-1"></a>    <span class="at">mean_f1 =</span> <span class="fu">mean</span>(f1_score, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span></span>
<span id="cb83-5"><a href="error-guidance-report.html#cb83-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, classification_type) <span class="sc">%&gt;%</span> </span>
<span id="cb83-6"><a href="error-guidance-report.html#cb83-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_f1)) <span class="sc">%&gt;%</span> </span>
<span id="cb83-7"><a href="error-guidance-report.html#cb83-7" tabindex="-1"></a>  <span class="fu">slice_max</span>(mean_f1, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-8"><a href="error-guidance-report.html#cb83-8" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb83-9"><a href="error-guidance-report.html#cb83-9" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb83-10"><a href="error-guidance-report.html#cb83-10" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb83-11"><a href="error-guidance-report.html#cb83-11" tabindex="-1"></a>    <span class="co"># truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb83-12"><a href="error-guidance-report.html#cb83-12" tabindex="-1"></a>  )</span>
<span id="cb83-13"><a href="error-guidance-report.html#cb83-13" tabindex="-1"></a></span>
<span id="cb83-14"><a href="error-guidance-report.html#cb83-14" tabindex="-1"></a>confidence_vs_truth_binary <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb83-15"><a href="error-guidance-report.html#cb83-15" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb83-16"><a href="error-guidance-report.html#cb83-16" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence_score, <span class="at">fill =</span> classification_type), </span>
<span id="cb83-17"><a href="error-guidance-report.html#cb83-17" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb83-18"><a href="error-guidance-report.html#cb83-18" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb83-19"><a href="error-guidance-report.html#cb83-19" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb83-20"><a href="error-guidance-report.html#cb83-20" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="sc">~</span> model <span class="sc">+</span> classification_type)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-identification-llm-confidence"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-1.png" alt="Comparing the reported confidence scores for the page identification task for the Mistral and Qwen 3 with 8B parameters." width="100%" />
<p class="caption">
Figure 10.4: Comparing the reported confidence scores for the page identification task for the Mistral and Qwen 3 with 8B parameters.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="error-guidance-report.html#cb84-1" tabindex="-1"></a>confidence_vs_truth_binary <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">confidence =</span> confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="error-guidance-report.html#cb84-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-3"><a href="error-guidance-report.html#cb84-3" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb84-4"><a href="error-guidance-report.html#cb84-4" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb84-5"><a href="error-guidance-report.html#cb84-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb84-6"><a href="error-guidance-report.html#cb84-6" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, classification_type, model) <span class="sc">%&gt;%</span></span>
<span id="cb84-7"><a href="error-guidance-report.html#cb84-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb84-8"><a href="error-guidance-report.html#cb84-8" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb84-9"><a href="error-guidance-report.html#cb84-9" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb84-10"><a href="error-guidance-report.html#cb84-10" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb84-11"><a href="error-guidance-report.html#cb84-11" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb84-12"><a href="error-guidance-report.html#cb84-12" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb84-13"><a href="error-guidance-report.html#cb84-13" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb84-14"><a href="error-guidance-report.html#cb84-14" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb84-15"><a href="error-guidance-report.html#cb84-15" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb84-16"><a href="error-guidance-report.html#cb84-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(classification_type, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb84-17"><a href="error-guidance-report.html#cb84-17" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb84-18"><a href="error-guidance-report.html#cb84-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb84-19"><a href="error-guidance-report.html#cb84-19" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb84-20"><a href="error-guidance-report.html#cb84-20" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb84-21"><a href="error-guidance-report.html#cb84-21" tabindex="-1"></a>      chance_false,</span>
<span id="cb84-22"><a href="error-guidance-report.html#cb84-22" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb84-23"><a href="error-guidance-report.html#cb84-23" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb84-24"><a href="error-guidance-report.html#cb84-24" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb84-25"><a href="error-guidance-report.html#cb84-25" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb84-26"><a href="error-guidance-report.html#cb84-26" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb84-27"><a href="error-guidance-report.html#cb84-27" tabindex="-1"></a>    ),</span>
<span id="cb84-28"><a href="error-guidance-report.html#cb84-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb84-29"><a href="error-guidance-report.html#cb84-29" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb84-30"><a href="error-guidance-report.html#cb84-30" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> conf_center, <span class="at">y =</span> perc, <span class="at">color =</span> chance_low, <span class="at">fill =</span> chance_false_interval), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb84-31"><a href="error-guidance-report.html#cb84-31" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb84-32"><a href="error-guidance-report.html#cb84-32" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb84-33"><a href="error-guidance-report.html#cb84-33" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb84-34"><a href="error-guidance-report.html#cb84-34" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb84-35"><a href="error-guidance-report.html#cb84-35" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb84-36"><a href="error-guidance-report.html#cb84-36" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb84-37"><a href="error-guidance-report.html#cb84-37" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb84-38"><a href="error-guidance-report.html#cb84-38" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb84-39"><a href="error-guidance-report.html#cb84-39" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb84-40"><a href="error-guidance-report.html#cb84-40" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb84-41"><a href="error-guidance-report.html#cb84-41" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb84-42"><a href="error-guidance-report.html#cb84-42" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb84-43"><a href="error-guidance-report.html#cb84-43" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb84-44"><a href="error-guidance-report.html#cb84-44" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb84-45"><a href="error-guidance-report.html#cb84-45" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb84-46"><a href="error-guidance-report.html#cb84-46" tabindex="-1"></a>  <span class="fu">facet_grid</span>(classification_type <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-identification-llm-confidence-lm"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-lm-1.png" alt="Estimating the relative frequency to find a wrong classification over different confidence intervals" width="100%" />
<p class="caption">
Figure 10.5: Estimating the relative frequency to find a wrong classification over different confidence intervals
</p>
</div>
<p>Discussion:</p>
<ul>
<li><p>Could be more efficient to predict âis any of interestâ and then which type, because dataset is highly imbalanced.</p></li>
<li><p>Why takes n_rag_examples so much longer?</p></li>
<li><p><strong>Aktiva</strong> and <strong>Passiva</strong> sometimes on the same page and more similar than <strong>GuV</strong>?</p></li>
<li><p>Recall = 1 for human in the loop (looking at selection of pages that could be target and none else, if the number of wrong pages are few =&gt; what says F1 with recall 1?)</p></li>
<li><p>Confidence range to error rate</p></li>
</ul>
</div>
<div id="multi-class-classification-2" class="section level3 hasAnchor" number="10.1.2">
<h3><span class="header-section-number">10.1.2</span> Multi-class classification<a href="error-guidance-report.html#multi-class-classification-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="confidence" class="section level5 hasAnchor paragraph-start" number="10.1.2.0.1">
<h5><span class="header-section-number">10.1.2.0.1</span> Confidence<a href="error-guidance-report.html#confidence" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="error-guidance-report.html#fig:confidence-match-plot-llama-multi">10.6</a> shows the reported confidence scores for the predictions for the best performing model-strategy combination, Llama 4 Scout with <em>3_rag_examples</em>. It is confident for most correct predictions and only misclassifies some of the pages with unknown characteristics. The target types are all recognized correct. All confidences are greater than 0.5. Probably because there is no case where the confidences for all possible classes is below 0.5 and there always is a most probable class. It would have been interesting to use the classification framework of <a href="glossary.html#acronyms_vllm">vLLM</a> to get predictions for all competing classes. But this requires special trained models with pooling capability<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="error-guidance-report.html#cb85-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_selected <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="error-guidance-report.html#cb85-2" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb85-3"><a href="error-guidance-report.html#cb85-3" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb85-4"><a href="error-guidance-report.html#cb85-4" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb85-5"><a href="error-guidance-report.html#cb85-5" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb85-6"><a href="error-guidance-report.html#cb85-6" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb85-7"><a href="error-guidance-report.html#cb85-7" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb85-8"><a href="error-guidance-report.html#cb85-8" tabindex="-1"></a>  )</span>
<span id="cb85-9"><a href="error-guidance-report.html#cb85-9" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb85-10"><a href="error-guidance-report.html#cb85-10" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span>
<span id="cb85-11"><a href="error-guidance-report.html#cb85-11" tabindex="-1"></a></span>
<span id="cb85-12"><a href="error-guidance-report.html#cb85-12" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb85-13"><a href="error-guidance-report.html#cb85-13" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb85-14"><a href="error-guidance-report.html#cb85-14" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb85-15"><a href="error-guidance-report.html#cb85-15" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb85-16"><a href="error-guidance-report.html#cb85-16" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb85-17"><a href="error-guidance-report.html#cb85-17" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb85-18"><a href="error-guidance-report.html#cb85-18" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb85-19"><a href="error-guidance-report.html#cb85-19" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:confidence-match-plot-llama-multi"></span>
<img src="_main_files/figure-html/confidence-match-plot-llama-multi-1.png" alt="Showing the reported confidence scores for all predictions of Llama 4 Scout grouped by the true target type. Errors have only been made within the majority class." width="100%" />
<p class="caption">
Figure 10.6: Showing the reported confidence scores for all predictions of Llama 4 Scout grouped by the true target type. Errors have only been made within the majority class.
</p>
</div>
<p>Figure <a href="error-guidance-report.html#fig:confidence-match-plot-mistral-multi">10.7</a> shows the reported confidence scores for the predictions for the best performing model-strategy combination among the small models limited to <em>n_examples</em> with n smaller five<a href="#fn32" class="footnote-ref" id="fnref32"><sup>32</sup></a>, Ministral-8B-Instruct-2410 with <em>3_rag_examples</em>. One can see there are some wrong classifications for the minority classes as well. Especially, the <strong>Passiva</strong> target type is often classified as <em>other</em>. This is problematic for a smooth workflow (see discussion chapter?)</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="error-guidance-report.html#cb86-1" tabindex="-1"></a>df_filtered <span class="ot">&lt;-</span> df_selected <span class="sc">%&gt;%</span> <span class="fu">filter</span>(</span>
<span id="cb86-2"><a href="error-guidance-report.html#cb86-2" tabindex="-1"></a>  model <span class="sc">==</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, </span>
<span id="cb86-3"><a href="error-guidance-report.html#cb86-3" tabindex="-1"></a>  method <span class="sc">==</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb86-4"><a href="error-guidance-report.html#cb86-4" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="error-guidance-report.html#cb86-5" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(f1_score))</span>
<span id="cb86-6"><a href="error-guidance-report.html#cb86-6" tabindex="-1"></a>df_temp <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>,<span class="st">&quot;predictions&quot;</span>][[<span class="dv">1</span>]][[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">as_tibble</span>()</span>
<span id="cb86-7"><a href="error-guidance-report.html#cb86-7" tabindex="-1"></a>df_flipped_score <span class="ot">&lt;-</span> df_temp <span class="sc">%&gt;%</span> </span>
<span id="cb86-8"><a href="error-guidance-report.html#cb86-8" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb86-9"><a href="error-guidance-report.html#cb86-9" tabindex="-1"></a>    <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score),</span>
<span id="cb86-10"><a href="error-guidance-report.html#cb86-10" tabindex="-1"></a>    <span class="at">is_aktiva =</span> <span class="fu">str_detect</span>(type, <span class="st">&quot;Aktiva&quot;</span>)</span>
<span id="cb86-11"><a href="error-guidance-report.html#cb86-11" tabindex="-1"></a>  )</span>
<span id="cb86-12"><a href="error-guidance-report.html#cb86-12" tabindex="-1"></a>model_name_best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;model&quot;</span>]</span>
<span id="cb86-13"><a href="error-guidance-report.html#cb86-13" tabindex="-1"></a>method__best_f1_aktiva <span class="ot">&lt;-</span> df_filtered[<span class="dv">1</span>, <span class="st">&quot;method&quot;</span>]</span>
<span id="cb86-14"><a href="error-guidance-report.html#cb86-14" tabindex="-1"></a></span>
<span id="cb86-15"><a href="error-guidance-report.html#cb86-15" tabindex="-1"></a>df_flipped_score <span class="sc">%&gt;%</span> </span>
<span id="cb86-16"><a href="error-guidance-report.html#cb86-16" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb86-17"><a href="error-guidance-report.html#cb86-17" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score)) <span class="sc">+</span></span>
<span id="cb86-18"><a href="error-guidance-report.html#cb86-18" tabindex="-1"></a>  <span class="fu">geom_jitter</span>(<span class="fu">aes</span>(<span class="at">x =</span> predicted_type, <span class="at">y =</span> confidence_score, <span class="at">color =</span> match), <span class="at">alpha =</span> .<span class="dv">3</span>, <span class="at">height =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb86-19"><a href="error-guidance-report.html#cb86-19" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>type) <span class="sc">+</span></span>
<span id="cb86-20"><a href="error-guidance-report.html#cb86-20" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> model_name_best_f1_aktiva,</span>
<span id="cb86-21"><a href="error-guidance-report.html#cb86-21" tabindex="-1"></a>       <span class="at">subtitle =</span> method__best_f1_aktiva) <span class="sc">+</span></span>
<span id="cb86-22"><a href="error-guidance-report.html#cb86-22" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:confidence-match-plot-mistral-multi"></span>
<img src="_main_files/figure-html/confidence-match-plot-mistral-multi-1.png" alt="Showing the reported confidence scores for all predictions of Ministral 8B grouped by the true target type. Errors have only been made within the majority class." width="100%" />
<p class="caption">
Figure 10.7: Showing the reported confidence scores for all predictions of Ministral 8B grouped by the true target type. Errors have only been made within the majority class.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="error-guidance-report.html#cb87-1" tabindex="-1"></a>plot_pr_double_curve_multi <span class="ot">&lt;-</span> <span class="cf">function</span>(df, selected_type, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>) {</span>
<span id="cb87-2"><a href="error-guidance-report.html#cb87-2" tabindex="-1"></a>  df_temp2 <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span> </span>
<span id="cb87-3"><a href="error-guidance-report.html#cb87-3" tabindex="-1"></a>    <span class="fu">filter</span>(loop <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> </span>
<span id="cb87-4"><a href="error-guidance-report.html#cb87-4" tabindex="-1"></a>    <span class="fu">select</span>(type, predicted_type, confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb87-5"><a href="error-guidance-report.html#cb87-5" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb87-6"><a href="error-guidance-report.html#cb87-6" tabindex="-1"></a>      <span class="at">type =</span> <span class="fu">if_else</span>(type <span class="sc">==</span> selected_type, type, <span class="st">&quot;no&quot;</span>),</span>
<span id="cb87-7"><a href="error-guidance-report.html#cb87-7" tabindex="-1"></a>      <span class="at">predicted_type =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> selected_type, predicted_type, <span class="st">&quot;no&quot;</span>)</span>
<span id="cb87-8"><a href="error-guidance-report.html#cb87-8" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb87-9"><a href="error-guidance-report.html#cb87-9" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">type =</span> <span class="fu">factor</span>(type, <span class="at">levels =</span> <span class="fu">c</span>(selected_type, <span class="st">&quot;no&quot;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb87-10"><a href="error-guidance-report.html#cb87-10" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb87-11"><a href="error-guidance-report.html#cb87-11" tabindex="-1"></a>      <span class="at">confidence_score =</span> <span class="fu">if_else</span>(predicted_type <span class="sc">==</span> <span class="st">&quot;no&quot;</span>, <span class="dv">1</span><span class="sc">-</span>confidence_score, confidence_score)</span>
<span id="cb87-12"><a href="error-guidance-report.html#cb87-12" tabindex="-1"></a>    )</span>
<span id="cb87-13"><a href="error-guidance-report.html#cb87-13" tabindex="-1"></a></span>
<span id="cb87-14"><a href="error-guidance-report.html#cb87-14" tabindex="-1"></a>  </span>
<span id="cb87-15"><a href="error-guidance-report.html#cb87-15" tabindex="-1"></a>  <span class="co"># Precision-Recall Curve with ggplot2</span></span>
<span id="cb87-16"><a href="error-guidance-report.html#cb87-16" tabindex="-1"></a>  </span>
<span id="cb87-17"><a href="error-guidance-report.html#cb87-17" tabindex="-1"></a>  pr_df <span class="ot">&lt;-</span> df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_curve</span>(type, confidence_score) <span class="sc">%&gt;%</span></span>
<span id="cb87-18"><a href="error-guidance-report.html#cb87-18" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">threshold =</span> .threshold) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(threshold<span class="sc">&lt;=</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb87-19"><a href="error-guidance-report.html#cb87-19" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">f1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall))</span>
<span id="cb87-20"><a href="error-guidance-report.html#cb87-20" tabindex="-1"></a>  </span>
<span id="cb87-21"><a href="error-guidance-report.html#cb87-21" tabindex="-1"></a>  pr_auc <span class="ot">&lt;-</span> <span class="fu">round</span>(df_temp2 <span class="sc">%&gt;%</span> <span class="fu">pr_auc</span>(type, confidence_score) <span class="sc">%&gt;%</span> .<span class="sc">$</span>.estimate, <span class="dv">3</span>)</span>
<span id="cb87-22"><a href="error-guidance-report.html#cb87-22" tabindex="-1"></a>  best_F1_row <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb87-23"><a href="error-guidance-report.html#cb87-23" tabindex="-1"></a>  best_F1_row_high_recall <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span> </span>
<span id="cb87-24"><a href="error-guidance-report.html#cb87-24" tabindex="-1"></a>    <span class="fu">filter</span>(recall <span class="sc">&gt;</span> <span class="fl">0.999</span>, precision <span class="sc">&gt;</span> <span class="fl">0.1</span>) <span class="sc">%&gt;%</span> <span class="fu">slice_max</span>(<span class="at">n =</span> <span class="dv">1</span>, f1)  </span>
<span id="cb87-25"><a href="error-guidance-report.html#cb87-25" tabindex="-1"></a>  best_F1 <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb87-26"><a href="error-guidance-report.html#cb87-26" tabindex="-1"></a>  best_F1_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall <span class="sc">%&gt;%</span> <span class="fu">pull</span>(f1)</span>
<span id="cb87-27"><a href="error-guidance-report.html#cb87-27" tabindex="-1"></a>  best_threshold <span class="ot">&lt;-</span> best_F1_row  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb87-28"><a href="error-guidance-report.html#cb87-28" tabindex="-1"></a>  best_threshold_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(threshold)</span>
<span id="cb87-29"><a href="error-guidance-report.html#cb87-29" tabindex="-1"></a>  best_precision_high_recall <span class="ot">&lt;-</span> best_F1_row_high_recall  <span class="sc">%&gt;%</span> <span class="fu">pull</span>(precision)</span>
<span id="cb87-30"><a href="error-guidance-report.html#cb87-30" tabindex="-1"></a>  </span>
<span id="cb87-31"><a href="error-guidance-report.html#cb87-31" tabindex="-1"></a>  g1 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb87-32"><a href="error-guidance-report.html#cb87-32" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision)) <span class="sc">+</span></span>
<span id="cb87-33"><a href="error-guidance-report.html#cb87-33" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> threshold), <span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb87-34"><a href="error-guidance-report.html#cb87-34" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;plasma&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb87-35"><a href="error-guidance-report.html#cb87-35" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb87-36"><a href="error-guidance-report.html#cb87-36" tabindex="-1"></a>      <span class="at">subtitle =</span> <span class="fu">paste0</span>(<span class="st">&quot;Precision-Recall Curve for &quot;</span>, selected_type, <span class="st">&quot; (AUC = &quot;</span>, pr_auc, <span class="st">&quot;)&quot;</span>),</span>
<span id="cb87-37"><a href="error-guidance-report.html#cb87-37" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb87-38"><a href="error-guidance-report.html#cb87-38" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Precision&quot;</span></span>
<span id="cb87-39"><a href="error-guidance-report.html#cb87-39" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb87-40"><a href="error-guidance-report.html#cb87-40" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb87-41"><a href="error-guidance-report.html#cb87-41" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb87-42"><a href="error-guidance-report.html#cb87-42" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb87-43"><a href="error-guidance-report.html#cb87-43" tabindex="-1"></a>    )</span>
<span id="cb87-44"><a href="error-guidance-report.html#cb87-44" tabindex="-1"></a>  </span>
<span id="cb87-45"><a href="error-guidance-report.html#cb87-45" tabindex="-1"></a>  g2 <span class="ot">&lt;-</span> pr_df <span class="sc">%&gt;%</span></span>
<span id="cb87-46"><a href="error-guidance-report.html#cb87-46" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> recall, <span class="at">y =</span> precision, <span class="at">color =</span> f1)) <span class="sc">+</span></span>
<span id="cb87-47"><a href="error-guidance-report.html#cb87-47" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span></span>
<span id="cb87-48"><a href="error-guidance-report.html#cb87-48" tabindex="-1"></a>    <span class="fu">scale_color_viridis_c</span>(<span class="at">option =</span> <span class="st">&quot;viridis&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb87-49"><a href="error-guidance-report.html#cb87-49" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb87-50"><a href="error-guidance-report.html#cb87-50" tabindex="-1"></a>      <span class="co"># title = &quot;Precision-Recall Curve colored by F1 score&quot;,</span></span>
<span id="cb87-51"><a href="error-guidance-report.html#cb87-51" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;Recall&quot;</span>,</span>
<span id="cb87-52"><a href="error-guidance-report.html#cb87-52" tabindex="-1"></a>      <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb87-53"><a href="error-guidance-report.html#cb87-53" tabindex="-1"></a>      <span class="at">color =</span> <span class="st">&quot;F1 score&quot;</span></span>
<span id="cb87-54"><a href="error-guidance-report.html#cb87-54" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb87-55"><a href="error-guidance-report.html#cb87-55" tabindex="-1"></a>    <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>))<span class="sc">+</span></span>
<span id="cb87-56"><a href="error-guidance-report.html#cb87-56" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb87-57"><a href="error-guidance-report.html#cb87-57" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span></span>
<span id="cb87-58"><a href="error-guidance-report.html#cb87-58" tabindex="-1"></a>    ) </span>
<span id="cb87-59"><a href="error-guidance-report.html#cb87-59" tabindex="-1"></a>  </span>
<span id="cb87-60"><a href="error-guidance-report.html#cb87-60" tabindex="-1"></a>  <span class="cf">if</span> (x_stuff <span class="sc">==</span> <span class="cn">FALSE</span>) {</span>
<span id="cb87-61"><a href="error-guidance-report.html#cb87-61" tabindex="-1"></a>    g1 <span class="ot">&lt;-</span> g1 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb87-62"><a href="error-guidance-report.html#cb87-62" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb87-63"><a href="error-guidance-report.html#cb87-63" tabindex="-1"></a>    </span>
<span id="cb87-64"><a href="error-guidance-report.html#cb87-64" tabindex="-1"></a>    g2 <span class="ot">&lt;-</span> g2 <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb87-65"><a href="error-guidance-report.html#cb87-65" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb87-66"><a href="error-guidance-report.html#cb87-66" tabindex="-1"></a>  }</span>
<span id="cb87-67"><a href="error-guidance-report.html#cb87-67" tabindex="-1"></a>  </span>
<span id="cb87-68"><a href="error-guidance-report.html#cb87-68" tabindex="-1"></a>  combined_plot <span class="ot">&lt;-</span> g1 <span class="sc">+</span> g2</span>
<span id="cb87-69"><a href="error-guidance-report.html#cb87-69" tabindex="-1"></a>  combined_plot <span class="sc">+</span> <span class="fu">plot_annotation</span>(<span class="at">caption =</span> <span class="fu">paste0</span>(</span>
<span id="cb87-70"><a href="error-guidance-report.html#cb87-70" tabindex="-1"></a>    <span class="st">&#39;Best F1 score of &#39;</span>, <span class="fu">round</span>(best_F1,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold,<span class="dv">3</span>), <span class="st">&#39;</span><span class="sc">\n</span><span class="st">&#39;</span>,</span>
<span id="cb87-71"><a href="error-guidance-report.html#cb87-71" tabindex="-1"></a>    <span class="st">&#39;Best F1 score with recall &gt; 0.999 of &#39;</span>, <span class="fu">round</span>(best_F1_high_recall,<span class="dv">3</span>) , <span class="st">&#39; gets reached with threshold of value &#39;</span>, <span class="fu">round</span>(best_threshold_high_recall,<span class="dv">3</span>), <span class="st">&#39; (corresp. precision value: &#39;</span>, <span class="fu">round</span>(best_precision_high_recall,<span class="dv">3</span>) , <span class="st">&#39;)&#39;</span>))</span>
<span id="cb87-72"><a href="error-guidance-report.html#cb87-72" tabindex="-1"></a>}</span></code></pre></div>
</details>
<p>Figure <a href="error-guidance-report.html#fig:micro-pr-curve-llm-multi-ministral">10.8</a> shows the precision-recall-curve for Ministral-8B-Instruct-2410 with <em>3_rag_examples</em> twice for each target type. On the left plots the line color represents the threshold score one could use to decide when to accept a response as it is. On the right plots the line color is showing the F1 score that results with a chosen threshold.</p>
<p>The <a href="glossary.html#acronyms_AUC">AUC</a> is highest for <strong>GuV</strong> again. But for the multi-class classification <strong>Passiva</strong> shows the lowest <a href="glossary.html#acronyms_AUC">AUC</a>, not <strong>Aktiva</strong> as it was in the binary classification task. The precision-recall-curve for <strong>Aktiva</strong> and **Passiva*+ show a âstepâ in the area of high recall. This has a strong effect on the threshold one should choose, if one wants to guarantee a high recall. The corresponding precision values of 0.2 and 0.13 mean that a human has to check five to eight pages in average to get a correct classified page of type <strong>Aktiva</strong> and <strong>Passiva</strong>.</p>
<p>The corresponding plot for the best performing model, Llama-4-Scout-17B-16E-Instruct, can be found in Figure <a href="figure-collection.html#fig:micro-pr-curve-llm-multi-llama-scout">14.8</a>. Here the precision-recall-curve for <strong>Passiva</strong> and <strong>GuV</strong> is almost perfect. Just the single prediction for <strong>Aktiva</strong> wit a lower confidence shows an influence on the precision-recall-curve.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="error-guidance-report.html#cb88-1" tabindex="-1"></a>model_name <span class="ot">&lt;-</span> <span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span></span>
<span id="cb88-2"><a href="error-guidance-report.html#cb88-2" tabindex="-1"></a>method_name <span class="ot">&lt;-</span> <span class="st">&quot;3_rag_examples&quot;</span></span>
<span id="cb88-3"><a href="error-guidance-report.html#cb88-3" tabindex="-1"></a></span>
<span id="cb88-4"><a href="error-guidance-report.html#cb88-4" tabindex="-1"></a>df_temp_mistral_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb88-5"><a href="error-guidance-report.html#cb88-5" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb88-6"><a href="error-guidance-report.html#cb88-6" tabindex="-1"></a>    model <span class="sc">==</span> model_name,</span>
<span id="cb88-7"><a href="error-guidance-report.html#cb88-7" tabindex="-1"></a>    method <span class="sc">==</span> method_name</span>
<span id="cb88-8"><a href="error-guidance-report.html#cb88-8" tabindex="-1"></a>  ) <span class="co"># %&gt;% unnest(metrics) # %&gt;% calc_micro_f1(model, method)</span></span>
<span id="cb88-9"><a href="error-guidance-report.html#cb88-9" tabindex="-1"></a>p_aktiva <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb88-10"><a href="error-guidance-report.html#cb88-10" tabindex="-1"></a>p_passiva <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;Passiva&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">FALSE</span>)</span>
<span id="cb88-11"><a href="error-guidance-report.html#cb88-11" tabindex="-1"></a>p_guv <span class="ot">&lt;-</span> df_temp_mistral_multi <span class="sc">%&gt;%</span> <span class="fu">plot_pr_double_curve_multi</span>(<span class="st">&quot;GuV&quot;</span>, <span class="at">x_stuff =</span> <span class="cn">TRUE</span>)</span>
<span id="cb88-12"><a href="error-guidance-report.html#cb88-12" tabindex="-1"></a><span class="co"># p_other &lt;- df_temp_mistral_multi %&gt;% plot_pr_double_curve_multi(&quot;other&quot;, x_stuff = TRUE)</span></span>
<span id="cb88-13"><a href="error-guidance-report.html#cb88-13" tabindex="-1"></a></span>
<span id="cb88-14"><a href="error-guidance-report.html#cb88-14" tabindex="-1"></a><span class="fu">wrap_elements</span>(p_aktiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_passiva) <span class="sc">/</span> <span class="fu">wrap_elements</span>(p_guv) <span class="sc">+</span></span>
<span id="cb88-15"><a href="error-guidance-report.html#cb88-15" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">heights =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="sc">+</span></span>
<span id="cb88-16"><a href="error-guidance-report.html#cb88-16" tabindex="-1"></a>  <span class="fu">plot_annotation</span>(<span class="at">title =</span> <span class="fu">str_c</span>(model_name, <span class="st">&quot; with &quot;</span>, method_name))</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:micro-pr-curve-llm-multi-ministral"></span>
<img src="_main_files/figure-html/micro-pr-curve-llm-multi-ministral-1.png" alt="Showing the precsion-recall-curve for Ministral-8B-Instruct-2410." width="100%" />
<p class="caption">
Figure 10.8: Showing the precsion-recall-curve for Ministral-8B-Instruct-2410.
</p>
</div>
<p>Figure <a href="error-guidance-report.html#fig:table-identification-llm-confidence-multi">10.9</a> summarizes the relation between reported confidence and correctness of the classification for all target types and compares it among the best performing model-strategy combinations for Llama-4-Scout-17B-16E-Instruct, Ministral-8B-Instruct-2410 and Qwen3-8B. It seems, as the reported confidence for correct and incorrect classifications are separable in most cases for Mistral-8B. For Llama 4 Scout this seems not true for the target type <strong>GuV</strong>. For Qwen3-8B there is almost no separation at all.</p>
<p>Figure <a href="error-guidance-report.html#fig:table-identification-llm-confidence-lm-multi">10.10</a> shows, that there is almost no area, where the empirical rate of wrong classifications is zero<a href="#fn33" class="footnote-ref" id="fnref33"><sup>33</sup></a>. Only for Ministral-8B we find intervals, where a human donât has to double check the classification for target types <strong>Aktiva</strong> and <strong>GuV</strong>. These intervals include 90 % of all predictions. If error rates of 1 % are accepted almost all predictions by Llama Scout 4 and about 96 % of the predictions by Ministral-8B are included in the corresponding intervals. For Qwen3-8B we find no interval without an error rate below 1 %.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="error-guidance-report.html#cb89-1" tabindex="-1"></a>confidence_vs_truth_multi <span class="ot">&lt;-</span> df_multi <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="error-guidance-report.html#cb89-2" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Llama-4-Scout-17B-16E-Instruct&quot;</span>, model_name_best_f1_aktiva_qwen)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-3"><a href="error-guidance-report.html#cb89-3" tabindex="-1"></a>  <span class="fu">unnest</span>(metrics) <span class="sc">%&gt;%</span> </span>
<span id="cb89-4"><a href="error-guidance-report.html#cb89-4" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model, metric_type) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb89-5"><a href="error-guidance-report.html#cb89-5" tabindex="-1"></a>    <span class="at">mean_f1 =</span> <span class="fu">mean</span>(f1_score, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span></span>
<span id="cb89-6"><a href="error-guidance-report.html#cb89-6" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, metric_type) <span class="sc">%&gt;%</span> </span>
<span id="cb89-7"><a href="error-guidance-report.html#cb89-7" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_f1)) <span class="sc">%&gt;%</span> </span>
<span id="cb89-8"><a href="error-guidance-report.html#cb89-8" tabindex="-1"></a>  <span class="fu">slice_max</span>(mean_f1, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb89-9"><a href="error-guidance-report.html#cb89-9" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>filepath) <span class="sc">%&gt;%</span> </span>
<span id="cb89-10"><a href="error-guidance-report.html#cb89-10" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb89-11"><a href="error-guidance-report.html#cb89-11" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb89-12"><a href="error-guidance-report.html#cb89-12" tabindex="-1"></a>    <span class="co"># truth_NA = factor(truth_NA, levels = c(F, T))</span></span>
<span id="cb89-13"><a href="error-guidance-report.html#cb89-13" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(metric_type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Aktiva&quot;</span>, <span class="st">&quot;Passiva&quot;</span>, <span class="st">&quot;GuV&quot;</span>))</span>
<span id="cb89-14"><a href="error-guidance-report.html#cb89-14" tabindex="-1"></a></span>
<span id="cb89-15"><a href="error-guidance-report.html#cb89-15" tabindex="-1"></a>confidence_vs_truth_multi <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb89-16"><a href="error-guidance-report.html#cb89-16" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb89-17"><a href="error-guidance-report.html#cb89-17" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence_score, <span class="at">fill =</span> metric_type), </span>
<span id="cb89-18"><a href="error-guidance-report.html#cb89-18" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb89-19"><a href="error-guidance-report.html#cb89-19" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb89-20"><a href="error-guidance-report.html#cb89-20" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb89-21"><a href="error-guidance-report.html#cb89-21" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> model) <span class="sc">+</span> </span>
<span id="cb89-22"><a href="error-guidance-report.html#cb89-22" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb89-23"><a href="error-guidance-report.html#cb89-23" tabindex="-1"></a>    <span class="at">data =</span> .<span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model, metric_type, match) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">n</span>(), <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(n<span class="sc">&lt;</span><span class="dv">20</span>),</span>
<span id="cb89-24"><a href="error-guidance-report.html#cb89-24" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence_score, <span class="at">alpha =</span> metric_type), <span class="at">color =</span> <span class="st">&quot;green&quot;</span>,</span>
<span id="cb89-25"><a href="error-guidance-report.html#cb89-25" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">position=</span><span class="fu">position_jitterdodge</span>(<span class="at">dodge.width=</span><span class="fl">0.9</span>, <span class="at">jitter.width =</span> <span class="fl">0.2</span>, <span class="at">jitter.height =</span> <span class="fl">0.005</span>)</span>
<span id="cb89-26"><a href="error-guidance-report.html#cb89-26" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb89-27"><a href="error-guidance-report.html#cb89-27" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="at">guide =</span> <span class="st">&quot;none&quot;</span>)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-identification-llm-confidence-multi"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-multi-1.png" alt="Comparing the reported confidence scores for the multi-class page identification task for the Mistral and Qwen 3 with 8B parameters. Showing individual scores for groups with less than 20 observations." width="100%" />
<p class="caption">
Figure 10.9: Comparing the reported confidence scores for the multi-class page identification task for the Mistral and Qwen 3 with 8B parameters. Showing individual scores for groups with less than 20 observations.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="error-guidance-report.html#cb90-1" tabindex="-1"></a>confidence_vs_truth_multi <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">confidence =</span> confidence_score) <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="error-guidance-report.html#cb90-2" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb90-3"><a href="error-guidance-report.html#cb90-3" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-4"><a href="error-guidance-report.html#cb90-4" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb90-5"><a href="error-guidance-report.html#cb90-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb90-6"><a href="error-guidance-report.html#cb90-6" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, metric_type, model) <span class="sc">%&gt;%</span></span>
<span id="cb90-7"><a href="error-guidance-report.html#cb90-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb90-8"><a href="error-guidance-report.html#cb90-8" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-9"><a href="error-guidance-report.html#cb90-9" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb90-10"><a href="error-guidance-report.html#cb90-10" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb90-11"><a href="error-guidance-report.html#cb90-11" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb90-12"><a href="error-guidance-report.html#cb90-12" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb90-13"><a href="error-guidance-report.html#cb90-13" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb90-14"><a href="error-guidance-report.html#cb90-14" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb90-15"><a href="error-guidance-report.html#cb90-15" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb90-16"><a href="error-guidance-report.html#cb90-16" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(metric_type, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb90-17"><a href="error-guidance-report.html#cb90-17" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb90-18"><a href="error-guidance-report.html#cb90-18" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb90-19"><a href="error-guidance-report.html#cb90-19" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb90-20"><a href="error-guidance-report.html#cb90-20" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb90-21"><a href="error-guidance-report.html#cb90-21" tabindex="-1"></a>      chance_false,</span>
<span id="cb90-22"><a href="error-guidance-report.html#cb90-22" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb90-23"><a href="error-guidance-report.html#cb90-23" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb90-24"><a href="error-guidance-report.html#cb90-24" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb90-25"><a href="error-guidance-report.html#cb90-25" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb90-26"><a href="error-guidance-report.html#cb90-26" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb90-27"><a href="error-guidance-report.html#cb90-27" tabindex="-1"></a>    ),</span>
<span id="cb90-28"><a href="error-guidance-report.html#cb90-28" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb90-29"><a href="error-guidance-report.html#cb90-29" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb90-30"><a href="error-guidance-report.html#cb90-30" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">x =</span> conf_center, <span class="at">y =</span> perc, <span class="at">color =</span> chance_low, <span class="at">fill =</span> chance_false_interval), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb90-31"><a href="error-guidance-report.html#cb90-31" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb90-32"><a href="error-guidance-report.html#cb90-32" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb90-33"><a href="error-guidance-report.html#cb90-33" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb90-34"><a href="error-guidance-report.html#cb90-34" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb90-35"><a href="error-guidance-report.html#cb90-35" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb90-36"><a href="error-guidance-report.html#cb90-36" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb90-37"><a href="error-guidance-report.html#cb90-37" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb90-38"><a href="error-guidance-report.html#cb90-38" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb90-39"><a href="error-guidance-report.html#cb90-39" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb90-40"><a href="error-guidance-report.html#cb90-40" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb90-41"><a href="error-guidance-report.html#cb90-41" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb90-42"><a href="error-guidance-report.html#cb90-42" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb90-43"><a href="error-guidance-report.html#cb90-43" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb90-44"><a href="error-guidance-report.html#cb90-44" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb90-45"><a href="error-guidance-report.html#cb90-45" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb90-46"><a href="error-guidance-report.html#cb90-46" tabindex="-1"></a>  <span class="fu">facet_grid</span>(metric_type <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-identification-llm-confidence-lm-multi"></span>
<img src="_main_files/figure-html/table-identification-llm-confidence-lm-multi-1.png" alt="Estimating the relative frequency to find a wrong classification over different confidence intervals for the multi-class classification task." width="100%" />
<p class="caption">
Figure 10.10: Estimating the relative frequency to find a wrong classification over different confidence intervals for the multi-class classification task.
</p>
</div>
</div>
</div>
<div id="extraction-with-llms" class="section level2 hasAnchor" number="10.2">
<h2><span class="header-section-number">10.2</span> Extraction with LLMs<a href="error-guidance-report.html#extraction-with-llms" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="real-tables-4" class="section level3 hasAnchor" number="10.2.1">
<h3><span class="header-section-number">10.2.1</span> Real tables<a href="error-guidance-report.html#real-tables-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="error-guidance-report.html#cb91-1" tabindex="-1"></a>confidence_vs_truth_real <span class="ot">&lt;-</span> df_real_table_extraction <span class="sc">%&gt;%</span> </span>
<span id="cb91-2"><a href="error-guidance-report.html#cb91-2" tabindex="-1"></a>  <span class="co"># filter(loop == 0) %&gt;% </span></span>
<span id="cb91-3"><a href="error-guidance-report.html#cb91-3" tabindex="-1"></a>  <span class="fu">filter</span>(model <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Ministral-8B-Instruct-2410&quot;</span>, <span class="st">&quot;Qwen3-8B&quot;</span>, <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb91-4"><a href="error-guidance-report.html#cb91-4" tabindex="-1"></a>  <span class="fu">group_by</span>(method, model, loop) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb91-5"><a href="error-guidance-report.html#cb91-5" tabindex="-1"></a>    <span class="at">mean_percentage_correct_total =</span> <span class="fu">mean</span>(percentage_correct_total, <span class="at">na.rm=</span><span class="cn">TRUE</span>), <span class="at">.before =</span> <span class="dv">1</span></span>
<span id="cb91-6"><a href="error-guidance-report.html#cb91-6" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(model) <span class="sc">%&gt;%</span> </span>
<span id="cb91-7"><a href="error-guidance-report.html#cb91-7" tabindex="-1"></a>  <span class="co"># arrange(desc(mean_percentage_correct_total)) %&gt;% </span></span>
<span id="cb91-8"><a href="error-guidance-report.html#cb91-8" tabindex="-1"></a>  <span class="fu">slice_max</span>(mean_percentage_correct_total, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">with_ties =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-9"><a href="error-guidance-report.html#cb91-9" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">predictions_processed =</span> <span class="fu">map</span>(predictions, <span class="sc">~</span>{</span>
<span id="cb91-10"><a href="error-guidance-report.html#cb91-10" tabindex="-1"></a>    .x <span class="sc">%&gt;%</span> </span>
<span id="cb91-11"><a href="error-guidance-report.html#cb91-11" tabindex="-1"></a>      <span class="fu">select</span>(<span class="sc">-</span><span class="st">&quot;_merge&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-12"><a href="error-guidance-report.html#cb91-12" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb91-13"><a href="error-guidance-report.html#cb91-13" tabindex="-1"></a>        <span class="at">match =</span> (year_truth <span class="sc">==</span> year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(year_result)),</span>
<span id="cb91-14"><a href="error-guidance-report.html#cb91-14" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_this_year,</span>
<span id="cb91-15"><a href="error-guidance-report.html#cb91-15" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(year_truth),</span>
<span id="cb91-16"><a href="error-guidance-report.html#cb91-16" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(year_result),</span>
<span id="cb91-17"><a href="error-guidance-report.html#cb91-17" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb91-18"><a href="error-guidance-report.html#cb91-18" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb91-19"><a href="error-guidance-report.html#cb91-19" tabindex="-1"></a>        <span class="at">tuple_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb91-20"><a href="error-guidance-report.html#cb91-20" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb91-21"><a href="error-guidance-report.html#cb91-21" tabindex="-1"></a>      <span class="fu">mutate</span>(</span>
<span id="cb91-22"><a href="error-guidance-report.html#cb91-22" tabindex="-1"></a>        <span class="at">confidence =</span> confidence_previous_year,</span>
<span id="cb91-23"><a href="error-guidance-report.html#cb91-23" tabindex="-1"></a>        <span class="at">match =</span> (previous_year_truth <span class="sc">==</span> previous_year_result) <span class="sc">|</span> (<span class="fu">is.na</span>(previous_year_truth) <span class="sc">&amp;</span> <span class="fu">is.na</span>(previous_year_result)),</span>
<span id="cb91-24"><a href="error-guidance-report.html#cb91-24" tabindex="-1"></a>        <span class="at">truth_NA =</span> <span class="fu">is.na</span>(previous_year_truth),</span>
<span id="cb91-25"><a href="error-guidance-report.html#cb91-25" tabindex="-1"></a>        <span class="at">predicted_NA =</span> <span class="fu">is.na</span>(previous_year_result),</span>
<span id="cb91-26"><a href="error-guidance-report.html#cb91-26" tabindex="-1"></a>        <span class="at">.before =</span> <span class="dv">4</span></span>
<span id="cb91-27"><a href="error-guidance-report.html#cb91-27" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">nest</span>(</span>
<span id="cb91-28"><a href="error-guidance-report.html#cb91-28" tabindex="-1"></a>        <span class="at">tuple_previous_year =</span> <span class="fu">c</span>(match, confidence, truth_NA, predicted_NA)</span>
<span id="cb91-29"><a href="error-guidance-report.html#cb91-29" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> <span class="fu">select</span>(</span>
<span id="cb91-30"><a href="error-guidance-report.html#cb91-30" tabindex="-1"></a>        <span class="sc">-</span><span class="fu">c</span>(year_truth, previous_year_truth, year_result, previous_year_result,</span>
<span id="cb91-31"><a href="error-guidance-report.html#cb91-31" tabindex="-1"></a>           confidence_this_year, confidence_previous_year)</span>
<span id="cb91-32"><a href="error-guidance-report.html#cb91-32" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span> </span>
<span id="cb91-33"><a href="error-guidance-report.html#cb91-33" tabindex="-1"></a>      <span class="fu">pivot_longer</span>(<span class="sc">-</span><span class="fu">c</span>(<span class="st">&quot;E1&quot;</span>, <span class="st">&quot;E2&quot;</span>, <span class="st">&quot;E3&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb91-34"><a href="error-guidance-report.html#cb91-34" tabindex="-1"></a>      <span class="fu">unnest</span>(<span class="at">cols =</span> value) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb91-35"><a href="error-guidance-report.html#cb91-35" tabindex="-1"></a>        <span class="at">match =</span> <span class="fu">if_else</span>(<span class="fu">is.na</span>(match), <span class="cn">FALSE</span>, match)</span>
<span id="cb91-36"><a href="error-guidance-report.html#cb91-36" tabindex="-1"></a>      )</span>
<span id="cb91-37"><a href="error-guidance-report.html#cb91-37" tabindex="-1"></a>  })) <span class="sc">%&gt;%</span> </span>
<span id="cb91-38"><a href="error-guidance-report.html#cb91-38" tabindex="-1"></a>  <span class="fu">unnest</span>(predictions_processed) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb91-39"><a href="error-guidance-report.html#cb91-39" tabindex="-1"></a>    <span class="at">match =</span> <span class="fu">factor</span>(match, <span class="at">levels =</span> <span class="fu">c</span>(F, T)),</span>
<span id="cb91-40"><a href="error-guidance-report.html#cb91-40" tabindex="-1"></a>    <span class="at">truth_NA =</span> <span class="fu">factor</span>(truth_NA, <span class="at">levels =</span> <span class="fu">c</span>(F, T))</span>
<span id="cb91-41"><a href="error-guidance-report.html#cb91-41" tabindex="-1"></a>  )</span>
<span id="cb91-42"><a href="error-guidance-report.html#cb91-42" tabindex="-1"></a></span>
<span id="cb91-43"><a href="error-guidance-report.html#cb91-43" tabindex="-1"></a>confidence_intervals_real <span class="ot">&lt;-</span> confidence_vs_truth_real <span class="sc">%&gt;%</span> <span class="co">#rename(confidence = confidence_score) %&gt;% </span></span>
<span id="cb91-44"><a href="error-guidance-report.html#cb91-44" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-45"><a href="error-guidance-report.html#cb91-45" tabindex="-1"></a>    <span class="at">conf_interval =</span> <span class="fu">cut</span>(confidence, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="at">by =</span> <span class="fl">0.05</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>),</span>
<span id="cb91-46"><a href="error-guidance-report.html#cb91-46" tabindex="-1"></a>    <span class="at">conf_center =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">((.+),(.+)</span><span class="sc">\\</span><span class="st">]&quot;</span>, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">1&quot;</span>, <span class="fu">levels</span>(conf_interval))[conf_interval]) <span class="sc">+</span> <span class="fl">0.025</span></span>
<span id="cb91-47"><a href="error-guidance-report.html#cb91-47" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb91-48"><a href="error-guidance-report.html#cb91-48" tabindex="-1"></a>  <span class="fu">group_by</span>(conf_center, predicted_NA, model) <span class="sc">%&gt;%</span></span>
<span id="cb91-49"><a href="error-guidance-report.html#cb91-49" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb91-50"><a href="error-guidance-report.html#cb91-50" tabindex="-1"></a>    <span class="at">n_true =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">TRUE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb91-51"><a href="error-guidance-report.html#cb91-51" tabindex="-1"></a>    <span class="at">n_false =</span> <span class="fu">sum</span>(match <span class="sc">==</span> <span class="cn">FALSE</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb91-52"><a href="error-guidance-report.html#cb91-52" tabindex="-1"></a>    <span class="at">total =</span> n_true <span class="sc">+</span> n_false,</span>
<span id="cb91-53"><a href="error-guidance-report.html#cb91-53" tabindex="-1"></a>    <span class="at">chance_false =</span> <span class="fu">if_else</span>(total <span class="sc">&gt;</span> <span class="dv">0</span>, n_false <span class="sc">/</span> total <span class="sc">*</span> <span class="dv">100</span>, <span class="cn">NA_real_</span>),</span>
<span id="cb91-54"><a href="error-guidance-report.html#cb91-54" tabindex="-1"></a>    <span class="at">chance_zero =</span> chance_false <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb91-55"><a href="error-guidance-report.html#cb91-55" tabindex="-1"></a>    <span class="at">chance_below_1 =</span> chance_false <span class="sc">&lt;</span> <span class="dv">1</span>,</span>
<span id="cb91-56"><a href="error-guidance-report.html#cb91-56" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">if_else</span>(chance_zero, <span class="dv">0</span>, <span class="fu">if_else</span>(chance_below_1, <span class="dv">1</span>, <span class="dv">2</span>)),</span>
<span id="cb91-57"><a href="error-guidance-report.html#cb91-57" tabindex="-1"></a>    <span class="at">chance_low =</span> <span class="fu">factor</span>(chance_low, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span>, <span class="st">&quot;below 1 %&quot;</span>, <span class="st">&quot;more&quot;</span>))</span>
<span id="cb91-58"><a href="error-guidance-report.html#cb91-58" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(predicted_NA, model) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb91-59"><a href="error-guidance-report.html#cb91-59" tabindex="-1"></a>    <span class="at">perc =</span> total<span class="sc">/</span><span class="fu">sum</span>(total)<span class="sc">*</span><span class="dv">100</span></span>
<span id="cb91-60"><a href="error-guidance-report.html#cb91-60" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb91-61"><a href="error-guidance-report.html#cb91-61" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-62"><a href="error-guidance-report.html#cb91-62" tabindex="-1"></a>    <span class="at">chance_false_interval =</span> <span class="fu">cut</span>(</span>
<span id="cb91-63"><a href="error-guidance-report.html#cb91-63" tabindex="-1"></a>      chance_false,</span>
<span id="cb91-64"><a href="error-guidance-report.html#cb91-64" tabindex="-1"></a>      <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">8</span>, <span class="dv">16</span>, <span class="dv">32</span>, <span class="dv">64</span>, <span class="cn">Inf</span>),</span>
<span id="cb91-65"><a href="error-guidance-report.html#cb91-65" tabindex="-1"></a>      <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;[0,1)&quot;</span>, <span class="st">&quot;[1,2)&quot;</span>, <span class="st">&quot;[2,4)&quot;</span>, <span class="st">&quot;[4,8)&quot;</span>, </span>
<span id="cb91-66"><a href="error-guidance-report.html#cb91-66" tabindex="-1"></a>                 <span class="st">&quot;[8,16)&quot;</span>, <span class="st">&quot;[16,32)&quot;</span>, <span class="st">&quot;[32,64)&quot;</span>, <span class="st">&quot;[64,Inf)&quot;</span>),</span>
<span id="cb91-67"><a href="error-guidance-report.html#cb91-67" tabindex="-1"></a>      <span class="at">right =</span> <span class="cn">FALSE</span>,</span>
<span id="cb91-68"><a href="error-guidance-report.html#cb91-68" tabindex="-1"></a>      <span class="at">ordered_result =</span> <span class="cn">TRUE</span></span>
<span id="cb91-69"><a href="error-guidance-report.html#cb91-69" tabindex="-1"></a>    ),</span>
<span id="cb91-70"><a href="error-guidance-report.html#cb91-70" tabindex="-1"></a>  )</span>
<span id="cb91-71"><a href="error-guidance-report.html#cb91-71" tabindex="-1"></a></span>
<span id="cb91-72"><a href="error-guidance-report.html#cb91-72" tabindex="-1"></a>conf_scores_top_real <span class="ot">&lt;-</span> confidence_intervals_real <span class="sc">%&gt;%</span> </span>
<span id="cb91-73"><a href="error-guidance-report.html#cb91-73" tabindex="-1"></a>  <span class="fu">filter</span>(conf_center <span class="sc">==</span> <span class="fl">0.975</span>, model <span class="sc">==</span> <span class="st">&quot;Qwen3-235B-A22B-Instruct-2507-FP8&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb91-74"><a href="error-guidance-report.html#cb91-74" tabindex="-1"></a>  <span class="fu">select</span>(predicted_NA, chance_false) <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">chance_false =</span> <span class="fu">round</span>(chance_false, <span class="dv">1</span>)) <span class="sc">%&gt;%</span> <span class="fu">deframe</span>()</span></code></pre></div>
</details>
<div id="confidence-1" class="section level5 hasAnchor paragraph-start" number="10.2.1.0.1">
<h5><span class="header-section-number">10.2.1.0.1</span> Confidence<a href="error-guidance-report.html#confidence-1" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="error-guidance-report.html#fig:table-extraction-llm-confidence">10.11</a> shows, that the distrubution of the models reported confidence is heterogeneous. Again, Qwen3-8B reports very high confidence values no matter if the results are correct or not. Qwen3-235B-A22B-Instruct (and Qwen3-14B) report some lower confidence scores for predictions, where they are wrong. The Mistral model again reports a wider range of confidences and for wrong results the reporetd confidence is lower. But no real separation can be observed for any of the models.</p>
</div>
<p>Figure <a href="error-guidance-report.html#fig:table-extraction-llm-confidence-lm">10.12</a> helps answering the question, if the reported confidence score of the responses can be used, to alert a human that certain predictions might be wrong. In contrast to the page identification task, we find no confidence intervals where the mistake rate is equal 0 or less than 1 %. The majority of the predictions has a very high reported confidence. For the best performing model Qwen3-235B-A22B-Instruct we find error rates of 3.3 % for numeric predictions and 1.3 % for predicting a missing value.</p>
<p>Thus, we can inform the human about the empirical found error rates but do not flag some values to be realy trustworthy. In defense for the model: with manual transcription the error rate is not lower. But we can inform the human about values that have shown a higher rate of mistakes, especially for the Ministral model.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="error-guidance-report.html#cb92-1" tabindex="-1"></a>confidence_vs_truth_real <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb92-2"><a href="error-guidance-report.html#cb92-2" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(</span>
<span id="cb92-3"><a href="error-guidance-report.html#cb92-3" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> match, <span class="at">y =</span> confidence, <span class="at">fill =</span> truth_NA), </span>
<span id="cb92-4"><a href="error-guidance-report.html#cb92-4" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge2</span>(<span class="at">preserve =</span> <span class="st">&quot;single&quot;</span>)) <span class="sc">+</span></span>
<span id="cb92-5"><a href="error-guidance-report.html#cb92-5" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb92-6"><a href="error-guidance-report.html#cb92-6" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb92-7"><a href="error-guidance-report.html#cb92-7" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-confidence"></span>
<img src="_main_files/figure-html/table-extraction-llm-confidence-1.png" alt="Comparing the reported confidence scores for the table extraction task on real dataset for the Mistral and Qwen 3 with 8B parameters." width="100%" />
<p class="caption">
Figure 10.11: Comparing the reported confidence scores for the table extraction task on real dataset for the Mistral and Qwen 3 with 8B parameters.
</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="error-guidance-report.html#cb93-1" tabindex="-1"></a>confidence_intervals_real <span class="sc">%&gt;%</span></span>
<span id="cb93-2"><a href="error-guidance-report.html#cb93-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb93-3"><a href="error-guidance-report.html#cb93-3" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(</span>
<span id="cb93-4"><a href="error-guidance-report.html#cb93-4" tabindex="-1"></a>    <span class="at">x =</span> conf_center, <span class="at">y =</span> perc, </span>
<span id="cb93-5"><a href="error-guidance-report.html#cb93-5" tabindex="-1"></a>    <span class="at">color =</span> chance_low, </span>
<span id="cb93-6"><a href="error-guidance-report.html#cb93-6" tabindex="-1"></a>    <span class="at">fill =</span> chance_false_interval</span>
<span id="cb93-7"><a href="error-guidance-report.html#cb93-7" tabindex="-1"></a>    ), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb93-8"><a href="error-guidance-report.html#cb93-8" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb93-9"><a href="error-guidance-report.html#cb93-9" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb93-10"><a href="error-guidance-report.html#cb93-10" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb93-11"><a href="error-guidance-report.html#cb93-11" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb93-12"><a href="error-guidance-report.html#cb93-12" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb93-13"><a href="error-guidance-report.html#cb93-13" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;below 1 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;more&quot;</span> <span class="ot">=</span> <span class="st">&quot;#555555&quot;</span>), <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb93-14"><a href="error-guidance-report.html#cb93-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb93-15"><a href="error-guidance-report.html#cb93-15" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb93-16"><a href="error-guidance-report.html#cb93-16" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb93-17"><a href="error-guidance-report.html#cb93-17" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb93-18"><a href="error-guidance-report.html#cb93-18" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb93-19"><a href="error-guidance-report.html#cb93-19" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb93-20"><a href="error-guidance-report.html#cb93-20" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb93-21"><a href="error-guidance-report.html#cb93-21" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb93-22"><a href="error-guidance-report.html#cb93-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb93-23"><a href="error-guidance-report.html#cb93-23" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="fu">paste</span>(<span class="st">&quot;predicted NA:&quot;</span>, predicted_NA) <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-confidence-lm"></span>
<img src="_main_files/figure-html/table-extraction-llm-confidence-lm-1.png" alt="Estimating the relative frequency to find a wrong classification over different confidence intervals." width="100%" />
<p class="caption">
Figure 10.12: Estimating the relative frequency to find a wrong classification over different confidence intervals.
</p>
</div>
</div>
<div id="synthetic-tables-4" class="section level3 hasAnchor" number="10.2.2">
<h3><span class="header-section-number">10.2.2</span> Synthetic tables<a href="error-guidance-report.html#synthetic-tables-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="confidence-2" class="section level5 hasAnchor paragraph-start" number="10.2.2.0.1">
<h5><span class="header-section-number">10.2.2.0.1</span> Confidence<a href="error-guidance-report.html#confidence-2" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="error-guidance-report.html#fig:table-extraction-llm-confidence-lm-synth">10.13</a> shows, that we do not find a high confidence interval containing a majority of the predictions with 0 % error rate. But for Qwen3-235B we find, that the error rate is below 1 %, except for predicting numeric values, while ignoring their currency units.</p>
</div>
<p>Figure <a href="figure-collection.html#fig:table-extraction-llm-confidence-lm-synth-grouped-by-input-format">14.26</a> groups the responses additonally by the <em>input_format</em> of the documents. It shows, that with HTML documents Qwen3-235B achieves 0 % error rate for the prediction of missing values and predicting numeric values, if currency units get respected.</p>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="error-guidance-report.html#cb94-1" tabindex="-1"></a>confidence_intervals_synth  <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;data_storage/confidence_intervals_synth.rds&quot;</span>)</span>
<span id="cb94-2"><a href="error-guidance-report.html#cb94-2" tabindex="-1"></a></span>
<span id="cb94-3"><a href="error-guidance-report.html#cb94-3" tabindex="-1"></a>confidence_intervals_synth <span class="sc">%&gt;%</span></span>
<span id="cb94-4"><a href="error-guidance-report.html#cb94-4" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb94-5"><a href="error-guidance-report.html#cb94-5" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(</span>
<span id="cb94-6"><a href="error-guidance-report.html#cb94-6" tabindex="-1"></a>    <span class="at">x =</span> conf_center, <span class="at">y =</span> perc, </span>
<span id="cb94-7"><a href="error-guidance-report.html#cb94-7" tabindex="-1"></a>    <span class="at">color =</span> chance_low, </span>
<span id="cb94-8"><a href="error-guidance-report.html#cb94-8" tabindex="-1"></a>    <span class="at">fill =</span> chance_false_interval</span>
<span id="cb94-9"><a href="error-guidance-report.html#cb94-9" tabindex="-1"></a>    ), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb94-10"><a href="error-guidance-report.html#cb94-10" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb94-11"><a href="error-guidance-report.html#cb94-11" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb94-12"><a href="error-guidance-report.html#cb94-12" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb94-13"><a href="error-guidance-report.html#cb94-13" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb94-14"><a href="error-guidance-report.html#cb94-14" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb94-15"><a href="error-guidance-report.html#cb94-15" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;below 1 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;more&quot;</span> <span class="ot">=</span> <span class="st">&quot;#555555&quot;</span>)) <span class="sc">+</span></span>
<span id="cb94-16"><a href="error-guidance-report.html#cb94-16" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb94-17"><a href="error-guidance-report.html#cb94-17" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb94-18"><a href="error-guidance-report.html#cb94-18" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb94-19"><a href="error-guidance-report.html#cb94-19" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb94-20"><a href="error-guidance-report.html#cb94-20" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb94-21"><a href="error-guidance-report.html#cb94-21" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb94-22"><a href="error-guidance-report.html#cb94-22" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb94-23"><a href="error-guidance-report.html#cb94-23" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb94-24"><a href="error-guidance-report.html#cb94-24" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb94-25"><a href="error-guidance-report.html#cb94-25" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="fu">paste</span>(<span class="st">&quot;respect units:&quot;</span>, respect_units)<span class="sc">+</span><span class="fu">paste</span>(<span class="st">&quot;predicted NA:&quot;</span>, predicted_NA) <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-confidence-lm-synth"></span>
<img src="_main_files/figure-html/table-extraction-llm-confidence-lm-synth-1.png" alt="Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions for the synthetic table extraction task." width="100%" />
<p class="caption">
Figure 10.13: Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions for the synthetic table extraction task.
</p>
</div>
</div>
<div id="hybrid-respect-units" class="section level3 hasAnchor" number="10.2.3">
<h3><span class="header-section-number">10.2.3</span> Hybrid approach<a href="error-guidance-report.html#hybrid-respect-units" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="confidence-3" class="section level5 hasAnchor paragraph-start" number="10.2.3.0.1">
<h5><span class="header-section-number">10.2.3.0.1</span> Confidence<a href="error-guidance-report.html#confidence-3" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Figure <a href="error-guidance-report.html#fig:table-extraction-llm-confidence-lm-synth-context">10.14</a> shows the rate of wrong predictions for given confidence intervals. Again, the confidence for predicting a missing value is higher than for predicting a numeric value. One canât see much difference, but for the best performing model Qwen3-235B the error rate for numeric values is lower, when currency units are respected (20 % vs 26 %). But the error rate is still to high to mark any numeric value as trustful.</p>
</div>
<details class=chunk-details><summary class=chunk-summary><span class=chunk-summary-text>Code</span></summary>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="error-guidance-report.html#cb95-1" tabindex="-1"></a>confidence_intervals_hybrid <span class="sc">%&gt;%</span></span>
<span id="cb95-2"><a href="error-guidance-report.html#cb95-2" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb95-3"><a href="error-guidance-report.html#cb95-3" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(</span>
<span id="cb95-4"><a href="error-guidance-report.html#cb95-4" tabindex="-1"></a>    <span class="at">x =</span> conf_center, <span class="at">y =</span> perc, </span>
<span id="cb95-5"><a href="error-guidance-report.html#cb95-5" tabindex="-1"></a>    <span class="at">color =</span> chance_low, </span>
<span id="cb95-6"><a href="error-guidance-report.html#cb95-6" tabindex="-1"></a>    <span class="at">fill =</span> chance_false_interval</span>
<span id="cb95-7"><a href="error-guidance-report.html#cb95-7" tabindex="-1"></a>    ), <span class="at">alpha =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb95-8"><a href="error-guidance-report.html#cb95-8" tabindex="-1"></a>  <span class="co"># geom_text(</span></span>
<span id="cb95-9"><a href="error-guidance-report.html#cb95-9" tabindex="-1"></a>  <span class="co">#   aes(x = conf_center, y = perc, label = round(perc, 0)), </span></span>
<span id="cb95-10"><a href="error-guidance-report.html#cb95-10" tabindex="-1"></a>  <span class="co">#   position = position_stack(vjust = 1), vjust = -0.6, </span></span>
<span id="cb95-11"><a href="error-guidance-report.html#cb95-11" tabindex="-1"></a>  <span class="co">#   size = 3, color = &quot;black&quot;</span></span>
<span id="cb95-12"><a href="error-guidance-report.html#cb95-12" tabindex="-1"></a>  <span class="co"># ) +</span></span>
<span id="cb95-13"><a href="error-guidance-report.html#cb95-13" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">&quot;equls 0 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;#00CC00&quot;</span>, <span class="st">&quot;below 1 %&quot;</span> <span class="ot">=</span> <span class="st">&quot;orange&quot;</span>, <span class="st">&quot;more&quot;</span> <span class="ot">=</span> <span class="st">&quot;#555555&quot;</span>), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb95-14"><a href="error-guidance-report.html#cb95-14" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">rev</span>(<span class="fu">c</span>(<span class="st">&quot;#d53e4f&quot;</span>, <span class="st">&quot;#f46d43&quot;</span>, <span class="st">&quot;#fdae61&quot;</span>, <span class="st">&quot;#fee08b&quot;</span>, <span class="st">&quot;#e6f598&quot;</span>, <span class="st">&quot;#abdda4&quot;</span>, <span class="st">&quot;#66c2a5&quot;</span>, <span class="st">&quot;#3288bd&quot;</span>)), <span class="at">drop=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb95-15"><a href="error-guidance-report.html#cb95-15" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb95-16"><a href="error-guidance-report.html#cb95-16" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">&quot;Confidence Interval Center&quot;</span>, </span>
<span id="cb95-17"><a href="error-guidance-report.html#cb95-17" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">&quot;Percentage of predictions&quot;</span>, </span>
<span id="cb95-18"><a href="error-guidance-report.html#cb95-18" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">&quot;mistake rate&quot;</span>) <span class="sc">+</span></span>
<span id="cb95-19"><a href="error-guidance-report.html#cb95-19" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(</span>
<span id="cb95-20"><a href="error-guidance-report.html#cb95-20" tabindex="-1"></a>    <span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100</span>), </span>
<span id="cb95-21"><a href="error-guidance-report.html#cb95-21" tabindex="-1"></a>    <span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span>
<span id="cb95-22"><a href="error-guidance-report.html#cb95-22" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb95-23"><a href="error-guidance-report.html#cb95-23" tabindex="-1"></a>  <span class="fu">facet_nested</span>(<span class="fu">paste</span>(<span class="st">&quot;respect units:&quot;</span>, respect_units)<span class="sc">+</span><span class="fu">paste</span>(<span class="st">&quot;predicted NA:&quot;</span>, predicted_NA) <span class="sc">~</span> model)</span></code></pre></div>
</details>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:table-extraction-llm-confidence-lm-synth-context"></span>
<img src="_main_files/figure-html/table-extraction-llm-confidence-lm-synth-context-1.png" alt="Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions based on synthetic examples for in-context learning." width="100%" />
<p class="caption">
Figure 10.14: Estimating the relative frequency to find a wrong extraction result over different confidence intervals for predictions based on synthetic examples for in-context learning.
</p>
</div>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="28">
<li id="fn28"><p>The model could be forced to return multiple answers, but it was not. The confidence score is given as log probability. The exponential function was applied to show the results on the more common scale of 0 to 1.<a href="error-guidance-report.html#fnref28" class="footnote-back">â©ï¸</a></p></li>
<li id="fn29"><p>There was a single prediction where <a href="glossary.html#acronyms_LLM">LLM</a> predicts <strong>Aktiva</strong> with high confidence, when the truth is <strong>Passiva</strong> instead. Because Qwen was showing the same wrong prediction for one <strong>Passiva</strong> table, I double checked the ground truth. I found, that the page shows <strong>Aktiva</strong> and <strong>Passiva</strong> simultaneously and was not correct codified. This was not the only time, where a mistake in the gold truth was found, by examining potential <a href="glossary.html#acronyms_LLM">LLM</a> mistakes.<a href="error-guidance-report.html#fnref29" class="footnote-back">â©ï¸</a></p></li>
<li id="fn30"><p>Thus, a human has in average to check four pages and select the correct <strong>Passiva</strong> page among them.<a href="error-guidance-report.html#fnref30" class="footnote-back">â©ï¸</a></p></li>
<li id="fn31"><p>It might be possible to request the n most probable answers to get confidence scores for all different predictions. But this was not investigated.<a href="error-guidance-report.html#fnref31" class="footnote-back">â©ï¸</a></p></li>
<li id="fn32"><p>The best performance results with <em>top_11_rag_examples</em> but the plot was less interesting and its F1 score was not listed in Table <a href="page-identification-report.html#tab:table-metrics-llm-page-identification-multi-small-models">8.10</a>.<a href="error-guidance-report.html#fnref32" class="footnote-back">â©ï¸</a></p></li>
<li id="fn33"><p>The size of intervals has been narrowed down to 0.1 % and still there was no range without wrong classification for Llama 4 Scout.<a href="error-guidance-report.html#fnref33" class="footnote-back">â©ï¸</a></p></li>
</ol>
</div>
<script>
// Lightbox functionality for displaying images in a modal view
document.addEventListener("DOMContentLoaded", function () {
  // Create a lightbox container
  const lightbox = document.createElement("div");
  lightbox.id = "lightbox";
  lightbox.style.position = "fixed";
  lightbox.style.top = "0";
  lightbox.style.left = "0";
  lightbox.style.width = "100%";
  lightbox.style.height = "100%";
  lightbox.style.backgroundColor = "rgba(0, 0, 0, 0.8)";
  lightbox.style.display = "none";
  lightbox.style.justifyContent = "center";
  lightbox.style.alignItems = "center";
  lightbox.style.zIndex = "1000";
  document.body.appendChild(lightbox);

  // Add an image element to the lightbox
  const lightboxImage = document.createElement("img");
  lightboxImage.id = "lightbox-image";
  // lightboxImage.style.maxWidth = "90%";
  // lightboxImage.style.maxHeight = "90%";
  lightbox.appendChild(lightboxImage);

  // Close lightbox on click
  lightbox.addEventListener("click", function () {
    lightbox.style.display = "none";
  });

  // Add onclick event to all images except the excluded one
  const images = document.querySelectorAll("img");
  images.forEach((img) => {
    if (img.src.includes("images/BHT_Logo_horizontal_Anthrazit_transparent.svg")) {
      return; // Skip the excluded image
    }
    img.style.cursor = "pointer"; // Change cursor to indicate clickability
    img.addEventListener("click", function () {
      lightboxImage.src = img.src; // Set the lightbox image source
      lightbox.style.display = "flex"; // Show the lightbox
    });
  });
});
</script>

<script>
// Image slider/carousel functionality for divs with class "image-slider"
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-slider').forEach(function (slider) {
    const images = slider.querySelectorAll('img');
    if (images.length < 2) return; // No need for slider if only one image

    // Hide all images except the first
    images.forEach((img, i) => img.style.display = i === 0 ? 'inline' : 'none');
    let current = 0;

    // Create navigation buttons
    const prevBtn = document.createElement('button');
    prevBtn.textContent = 'â¨ Prev';
    prevBtn.style.marginRight = '10px';
    const nextBtn = document.createElement('button');
    nextBtn.textContent = 'Next â©';
    nextBtn.style.marginLeft = '10px';

    // Create a caption container
    const captionContainer = document.createElement('div');
    captionContainer.style.fontStyle = 'italic';
    captionContainer.style.color = '#555';

    // Create a flex container for buttons and caption
    const controlsContainer = document.createElement('div');
    controlsContainer.style.display = 'flex';
    controlsContainer.style.justifyContent = 'space-between';
    controlsContainer.style.alignItems = 'center';
    controlsContainer.style.marginTop = '10px';
    controlsContainer.style.width = '100%';

    // Place buttons and caption in flex container
    controlsContainer.appendChild(prevBtn);
    controlsContainer.appendChild(captionContainer);
    controlsContainer.appendChild(nextBtn);

    // Function to update the caption
    const updateCaption = () => {
      const caption = images[current].nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        captionContainer.textContent = caption.textContent;
      } else {
        captionContainer.textContent = ''; // Clear caption if none exists
      }
    };

    // Function to show the next image
    const showNextImage = () => {
      images[current].style.display = 'none';
      current = (current + 1) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Function to show the previous image
    const showPrevImage = () => {
      images[current].style.display = 'none';
      current = (current - 1 + images.length) % images.length;
      images[current].style.display = 'inline';
      updateCaption();
    };

    // Button click handlers
    prevBtn.onclick = function () {
      stopAutoSlide();
      showPrevImage();
    };
    nextBtn.onclick = function () {
      stopAutoSlide();
      showNextImage();
    };

    // Insert controls container below images
    slider.appendChild(controlsContainer);

    // Automatic sliding
    let autoSlideInterval = setInterval(showNextImage, 2000);

    // Stop automatic sliding on user interaction
    const stopAutoSlide = () => {
      clearInterval(autoSlideInterval);
    };

    // Stop auto-slide when the user interacts with the slider
    prevBtn.addEventListener('click', stopAutoSlide);
    nextBtn.addEventListener('click', stopAutoSlide);
    images.forEach((img) => {
      img.addEventListener('click', stopAutoSlide);
    });

    // Initialize the caption
    updateCaption();
  });
});
</script>

<script>
// Dropdown filter functionality for images with lightbox
document.addEventListener("DOMContentLoaded", function () {
  document.querySelectorAll('.image-selector').forEach(function (selector) {
    const images = selector.querySelectorAll('img');
    if (images.length === 0) return;

    // Create a dropdown filter container
    const filterContainer = document.createElement('div');
    filterContainer.classList.add('filter-container');

    const dropdown = document.createElement('select');
    dropdown.multiple = true;
    dropdown.classList.add('filter-dropdown');

    // Add options to the dropdown
    const uniqueCategories = [];
    images.forEach((img) => {
      const caption = img.nextElementSibling;
      if (caption && caption.classList.contains('image-caption')) {
        const category = caption.textContent.trim();
        if (!uniqueCategories.includes(category)) uniqueCategories.push(category);
      }
    });

    uniqueCategories.forEach((category) => {
      const option = document.createElement('option');
      option.value = category;
      option.textContent = category;
      // Do NOT set option.selected here!
      dropdown.appendChild(option);
    });

    filterContainer.appendChild(dropdown);
    selector.appendChild(filterContainer);

    // Add a grid container for filtered images
    const gridContainer = document.createElement('div');
    gridContainer.classList.add('image-grid');
    selector.appendChild(gridContainer);

    // Choices.js initialization
    const choices = new Choices(dropdown, {
      removeItemButton: true,
      shouldSort: false,
      searchEnabled: false,
      placeholder: true,
      placeholderValue: 'Filter categories',
    });

    // Clear any existing selection first, then set initial selection
    choices.removeActiveItems(); // This clears existing selections
    choices.setChoiceByValue(uniqueCategories[0]); // This sets only the first category

    // Filtering function
    const filterImages = () => {
      const selectedCategories = Array.from(dropdown.selectedOptions).map(opt => opt.value);
      gridContainer.innerHTML = '';
      let shownWrappers = [];
      images.forEach((img) => {
        const caption = img.nextElementSibling;
        if (caption && caption.classList.contains('image-caption')) {
          const category = caption.textContent.trim();
          if (selectedCategories.includes(category)) {
            const imgWrapper = document.createElement('div');
            imgWrapper.classList.add('image-wrapper');
            const imgClone = img.cloneNode(true);
            imgClone.style.cursor = 'pointer';
            imgClone.addEventListener('click', function () {
              const lightboxImage = document.querySelector("#lightbox img");
              const lightbox = document.querySelector("#lightbox");
              lightboxImage.src = imgClone.src;
              lightbox.style.display = 'flex';
            });
            imgWrapper.appendChild(imgClone);
            const captionClone = caption.cloneNode(true);
            imgWrapper.appendChild(captionClone);
            gridContainer.appendChild(imgWrapper);
            shownWrappers.push(imgWrapper);
          }
        }
      });
      // If only one image is shown, make it span both columns
      if (shownWrappers.length === 1) {
        shownWrappers[0].style.gridColumn = "span 2";
      }
    };

    // Listen for changes from Choices.js
    dropdown.addEventListener('change', filterImages);

    // Initial grid (only first category shown)
    filterImages();
  });
});
</script>
<script>
document.addEventListener("DOMContentLoaded", function () {
  var codes = document.querySelectorAll('.hideme');
  var code, i, d, s, p;
  for (i = 0; i < codes.length; i++) {
    code = codes[i];
    p = code.parentNode;
    d = document.createElement('details');
    s = document.createElement('summary');
    s.innerText = 'Details';
    // <details><summary>Details</summary></details>
    d.appendChild(s);
    // move the code into <details>
    p.replaceChild(d, code);
    d.appendChild(code);
  }
});
</script>
            </section>

          </div>
        </div>
      </div>
<a href="information-extraction-report.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="feature-effect-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": false,
    "facebook": true,
    "twitter": true,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["_main.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "subsection"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
